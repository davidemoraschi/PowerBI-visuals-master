var powerBIAccessToken = "fooBarBaz", powerbitests;

!function(a) {
    var b;
    !function(a) {
        function b() {
            debug.assertFailFunction = function(a) {};
        }
        function c(a, b) {
            var c = '<div id="item" style="height: ' + a + "px; width: " + b + 'px;"></div>';
            setFixtures(c);
            var d = $("#item");
            return d;
        }
        function d(a, b, c) {
            var d = a.indexOf(",") > 0 ? "," : " ", e = a.substr(10, a.lastIndexOf(")") - 10).split(d), f = parseInt(e[0], 10), g = parseInt(e[1], 10), h = Math.abs(b - f), i = Math.abs(c - g);
            return 1 >= h && 1 >= i;
        }
        function e(a) {
            var b = a;
            return b.__ondragstart ? function(a) {
                return b.__ondragstart(a);
            } : void 0;
        }
        function f(a) {
            var b = a;
            return b.__onclick ? function(a) {
                return b.__onclick(a);
            } : void 0;
        }
        function g() {
            expect(!0).toBe(!0);
        }
        function h(a) {
            return JSON.parse(JSON.stringify(a));
        }
        function i(a, b, c, d, e, f) {
            var g = new Date(a, b, c, d, e, f), h = g.getTimezoneOffset(), i = new Date();
            return i.setTime(g.getTime() - 6e4 * h), i;
        }
        function j(a) {
            return "undefined" == typeof a;
        }
        debug.assertFailFunction = function(a) {
            expect(a).toBe("DEBUG asserts should never happen.  There is a product or test bug.");
        }, a.suppressDebugAssertFailure = b, a.SemanticQueryLatestVersion = 2, a.DataShapeBindingLatestVersion = 1, 
        a.dataSets = {
            singleMeasureDataViewSource: '{"descriptor": {"Select": [{"Kind": 2, "Value": "M0"}]}, "dsr": {"DataShapes":[{"Id":"DS0","PrimaryHierarchy":[{"Id":"DM0","Instances":[{"Calculations":[{"Id":"M0","Value":"21852688.46698004D"}]}]}],"IsComplete":true}]}}',
            dataViewSourceWithErrors: '{"descriptor":{"Select":[{"Kind":1,"Depth":0,"Value":"G0"},{"Kind":2,"Value":"M0","Subtotal":["A0"],"Min":["A2"],"Max":["A1"]}],"Expressions":{"Primary":{"Groupings":[{"Keys":[{"Source":{"Entity":"DimDate","Property":"Month Name"},"Select":0},{"Source":{"Entity":"DimDate","Property":"Month Number"},"Calc":"K0"}]}]}}},"dsr":{"DataShapes":[{"Id":"DS0","odata.error":{"code":"rsDataShapeQueryTranslationError","message":{"lang":"da-DK","value":"Data Shape Query translation failed with error code: \'InvalidExpression\'. Check the report server logs for more information."},"azure:values":[{"timestamp":"2015-01-15T07:44:45.8135124Z"},{"details":"Microsoft.ReportingServices.DataShapeQueryTranslation.DataShapeQueryTranslationException: Data Shape Query translation failed with error code: \'InvalidExpression\'. Check the report server logs for more information."},{"helpLink":"http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServ…Error&ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&ProdVer=1.0"},{"productInfo":{"productName":"change this","productVersion":"1.0","productLocaleId":127,"operatingSystem":"OsIndependent","countryLocaleId":1033}},{"moreInformation":{"odata.error":{"code":"System.Exception","message":{"lang":"da-DK","value":"For more information about this error navigate to the report server on the local server machine, or enable remote errors"},"azure:values":[{"details":"System.Exception: For more information about this error navigate to the report server on the local server machine, or enable remote errors"}]}}}]}}]}}'
        }, a.testDom = c, a.isTranslateCloseTo = d, a.getDragStartTriggerFunctionForD3 = e, 
        a.getClickTriggerFunctionForD3 = f, a.suppressJasmineMissingExpectWarning = g, function(a) {
            a[a.Default = 0] = "Default", a[a.CtrlKey = 1] = "CtrlKey", a[a.AltKey = 2] = "AltKey", 
            a[a.ShiftKey = 4] = "ShiftKey", a[a.MetaKey = 8] = "MetaKey";
        }(a.ClickEventType || (a.ClickEventType = {}));
        a.ClickEventType;
        jQuery.fn.d3Click = function(a, b, c) {
            var d = c || 0;
            this.each(function(c, e) {
                var f = document.createEvent("MouseEvents");
                f.initMouseEvent("click", !0, !0, window, 0, a, b, a, b, 1 & d, 2 & d, 4 & d, 8 & d, 0, null), 
                e.dispatchEvent(f);
            });
        }, a.deepCopy = h, a.getLocalTimeFromUTCBase = i, a.isUndefined = j, function(a) {
            a[a.NewMeasure = 0] = "NewMeasure", a[a.NewColumn = 1] = "NewColumn", a[a.Rename = 3] = "Rename", 
            a[a.Delete = 4] = "Delete", a[a.Hide = 5] = "Hide", a[a.ViewHidden = 7] = "ViewHidden", 
            a[a.UnhideAll = 8] = "UnhideAll";
        }(a.ContextMenuEntityButtonPosition || (a.ContextMenuEntityButtonPosition = {}));
        a.ContextMenuEntityButtonPosition;
        !function(a) {
            a[a.AddFilter = 0] = "AddFilter", a[a.NewMeasure = 2] = "NewMeasure", a[a.NewColumn = 3] = "NewColumn", 
            a[a.Rename = 5] = "Rename", a[a.Delete = 6] = "Delete", a[a.Hide = 7] = "Hide", 
            a[a.ViewHidden = 9] = "ViewHidden", a[a.UnhideAll = 10] = "UnhideAll";
        }(a.ContextMenuPropertyButtonPosition || (a.ContextMenuPropertyButtonPosition = {}));
        a.ContextMenuPropertyButtonPosition;
    }(b = a.helpers || (a.helpers = {}));
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b;
    !function(a) {
        function b() {
            return {
                getLocalizedString: function(a) {
                    return a;
                },
                onDragStart: function() {},
                canSelect: function() {
                    return !0;
                },
                onSelect: function() {},
                loadMoreData: function() {},
                persistProperties: function() {},
                onCustomSort: function(a) {},
                getViewMode: function() {
                    return 0;
                },
                setWarnings: function(a) {},
                setToolbar: function(a) {}
            };
        }
        function c() {
            return {
                currentLanguageLocale: "",
                getOptional: function(a) {
                    return a;
                },
                ensureLocalization: function(a) {},
                format: function(a) {
                    for (var b = [], c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];
                    return a;
                },
                formatValue: function(a) {
                    return a;
                }
            };
        }
        function d(a) {
            var b = f(a);
            return powerbi.data.createDataViewScopeIdentity(b);
        }
        function e(a, b) {
            return powerbi.data.createDataViewScopeIdentity(powerbi.data.SQExprBuilder.equal(a, f(b)));
        }
        function f(a) {
            return null === a ? n.nullConstant() : a === !0 || a === !1 ? n["boolean"](a) : "number" == typeof a ? powerbi.data.SQExprBuilder["double"](a) : powerbi.data.SQExprBuilder.text(a);
        }
        function g(a) {
            h(a), i(a);
        }
        function h(a) {
            var b = j(a);
            powerbi.visuals.valueFormatter.setLocaleOptions(b);
        }
        function i(a) {
            var b = k(a);
            powerbi.visuals.TooltipManager.setLocalizedStrings(b);
        }
        function j(a) {
            return {
                "null": a.get("NullValue"),
                "true": a.get("BooleanTrue"),
                "false": a.get("BooleanFalse"),
                NaN: a.get("NaNValue"),
                infinity: a.get("InfinityValue"),
                negativeInfinity: a.get("NegativeInfinityValue"),
                beautify: function(b) {
                    return l(a, b);
                },
                describe: function(b) {
                    return m(a, b);
                },
                restatementComma: powerbi.visuals.valueFormatter.getLocalizedString("RestatementComma"),
                restatementCompoundAnd: powerbi.visuals.valueFormatter.getLocalizedString("RestatementCompoundAnd"),
                restatementCompoundOr: powerbi.visuals.valueFormatter.getLocalizedString("RestatementCompoundOr")
            };
        }
        function k(a) {
            return {
                highlightedValueDisplayName: a.get(powerbi.visuals.ToolTipComponent.highlightedValueDisplayNameResorceKey)
            };
        }
        function l(a, b) {
            var c = o[b];
            return c ? a.getOptional(c) || b : b;
        }
        function m(a, b) {
            var c = a.getOptional("DisplayUnitSystem_E" + b + "_Title"), d = a.getOptional("DisplayUnitSystem_E" + b + "_LabelFormat");
            return c || d ? {
                title: c,
                format: d
            } : void 0;
        }
        var n = powerbi.data.SQExprBuilder, o = {
            "0.00 %;-0.00 %;0.00 %": "Percentage",
            "0.0 %;-0.0 %;0.0 %": "Percentage1"
        }, p = function() {
            function a() {}
            return a.prototype.target = function() {
                a.callbackCalls++;
            }, a.callbackCalls = 0, a;
        }();
        a.TelemetryCallbackMock = p;
        var q = function() {
            function a() {
                this.trackPageViewTimes = 0, this.trackEventTimes = 0, this.trackEventLastActivityName = null, 
                this.trackEventLastAdditionalData = {
                    id: null,
                    start: null,
                    end: null,
                    isInternalUser: null,
                    userId: null,
                    category: null,
                    sessionId: null,
                    client: null,
                    build: null,
                    cluster: null
                };
            }
            return a.prototype.trackPageView = function() {
                this.trackPageViewTimes++;
            }, a.prototype.trackEvent = function(a, b) {
                this.trackEventTimes++, this.trackEventLastActivityName = a, this.trackEventLastAdditionalData = b;
            }, a;
        }();
        a.AppInsightsV2Mock = q, a.DefaultLoggerMockType = 1;
        var r = function() {
            function a() {}
            return a.prototype.create = function(a) {
                return this.deferred || (this.deferred = $.Deferred()), this.deferred;
            }, a.prototype.resolveCurrent = function() {
                expect(this.deferred).toBeDefined();
                var a = this.deferred;
                this.deferred = void 0, a.resolve();
            }, a.prototype.reject = function() {
                expect(this.deferred).toBeDefined();
                var a = this.deferred;
                this.deferred = void 0, a.reject();
            }, a.prototype.expectNoTimers = function() {
                expect(this.deferred).not.toBeDefined();
            }, a.prototype.hasPendingTimers = function() {
                return !!this.deferred;
            }, a;
        }();
        a.MockTimerPromiseFactory = r, a.createVisualHostServices = b, a.createLocalizationService = c;
        var s = function() {
            function a() {}
            return a.prototype.logTrace = function(a) {
                this.trace = a;
            }, a;
        }();
        a.MockTraceListener = s, a.dataViewScopeIdentity = d, a.dataViewScopeIdentityWithEquality = e;
        var t = function() {
            function a() {
                this.code = "MockVisualWarning";
            }
            return a.prototype.getMessages = function(b) {
                var c = {
                    message: a.Message,
                    title: "key",
                    detail: "val"
                };
                return c;
            }, a.Message = "Warning", a;
        }();
        a.MockVisualWarning = t, a.setLocale = g;
    }(b = a.mocks || (a.mocks = {}));
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b;
    !function(a) {
        function b(b, c, d) {
            void 0 === c && (c = 1);
            for (var e = [], f = 0; b > f; ++f) e.push(f % 2 === 0 ? 1 : 0);
            return a.getDataWithColumnsOfType(e, !1, c, d);
        }
        function c(a, b, c, d) {
            void 0 === c && (c = 1);
            for (var f = [], g = [], h = [], i = 0, j = a.length; j > i; ++i) {
                var k = 2 === a[i];
                1 === a[i] || k ? (f.push({
                    displayName: "numeric" + i,
                    type: e.fromDescriptor({
                        numeric: !0
                    }),
                    isMeasure: k
                }), g.push(i), b && h.push(k ? i : null)) : (f.push({
                    displayName: "text" + i,
                    type: e.fromDescriptor({
                        numeric: !1
                    })
                }), g.push("cell text " + i), b && h.push(null));
            }
            for (var l = {
                columns: f,
                objects: d
            }, m = [], i = 0; c > i; i++) m.push(g);
            var n = {
                metadata: l,
                table: {
                    rows: m,
                    columns: l.columns
                }
            };
            return h.length > 0 && (n.table.totals = h), n;
        }
        function d(a) {
            return {
                general: {
                    totals: a
                }
            };
        }
        var e = powerbi.ValueType;
        !function(a) {
            a[a.Text = 0] = "Text", a[a.Numeric = 1] = "Numeric", a[a.NumericMeasure = 2] = "NumericMeasure";
        }(a.ColumnType || (a.ColumnType = {}));
        a.ColumnType;
        a.getDataWithColumns = b, a.getDataWithColumnsOfType = c, a.dataViewObjectsTotals = d;
    }(b = a.tableDataViewHelper || (a.tableDataViewHelper = {}));
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b;
    !function(a) {
        function b(a, b) {
            var c = "> tr:nth-child(" + (b.row + 1) + ") > td:nth-child(" + (b.col + 1) + ") > div", d = "> div", e = $(c, a);
            expect(e).toBeInDOM();
            var f = $(d, e);
            return expect(f).toBeInDOM(), {
                cellCoordinate: b,
                clickTarget: e,
                text: f.text()
            };
        }
        function c(a, b) {
            var c = b.viewport ? b.viewport : {
                height: a.height() + 200,
                width: a.width() + 200
            }, d = b.data, e = b.redraw ? b.redraw : !1, f = powerbi.visuals.visualStyles.create();
            a.width(c.width), a.css(j.minWidthProperty, c.width), a.css(j.maxWidthProperty, c.width), 
            a.css(j.positionProperty, j.absoluteValue);
            var g = {
                heatMap: !0,
                scrollableVisuals: !0
            }, h = powerbi.visuals.visualPluginFactory.createMinerva(g), i = b.onCustomSortCallback ? b.onCustomSortCallback : function(a) {}, l = {
                getLocalizedString: function(a) {
                    return a;
                },
                onCustomSort: i,
                loadMoreData: function() {},
                getViewMode: function() {
                    return 0;
                }
            };
            b.formatCallback && spyOn(powerbi.visuals.valueFormatter, "formatRaw").and.callFake(b.formatCallback);
            var m = h.getPlugin(b.visualType).create();
            m.init({
                element: a,
                host: l,
                style: f,
                viewport: c,
                settings: b.settings,
                interactivity: {
                    selection: !0,
                    overflow: b.isFixedSize ? "hidden" : "visible"
                }
            }), m.onDataChanged({
                dataViews: [ d ]
            });
            var n = jsCommon.TimerPromiseFactory.instance.create(k).then(function() {
                return e && m.onResizing({
                    height: c.height,
                    width: c.width
                }, 0), m;
            });
            return n;
        }
        function d(a, d, e, f, g, h, i) {
            var j = [], k = function(a) {
                j.push(a.sortDescriptors);
            }, l = c(a, {
                visualType: e,
                data: f,
                onCustomSortCallback: k
            });
            l.then(function() {
                var a = $(".tablixContainer > div.bi-tablix > div:nth-child(1) > table.unselectable > tbody");
                if (expect(a).toBeInDOM(), g) for (var c = 0, e = g.length; e > c; c++) {
                    var f = g[c], k = b(a, f);
                    f.expectedText && expect(k.text).toBe(f.expectedText);
                }
                if (h) for (var c = 0, e = h.length; e > c; c++) {
                    var l = h[c], m = b(a, l);
                    l.expectedText && expect(m.text).toBe(l.expectedText), m.clickTarget.click();
                }
                if (i) {
                    expect(i.length).toBe(j.length);
                    for (var c = 0, e = i.length; e > c; c++) {
                        var n = i[c], o = j[c];
                        expect(n.length).toBe(o.length);
                        for (var p = 0, q = n.length; q > p; p++) {
                            var r = n[p], s = o[p];
                            expect(r.queryName).toBe(s.queryName), expect(r.sortDirection).toBe(s.sortDirection);
                        }
                    }
                }
                d();
            });
        }
        function e(a, b) {
            var c = $(b), d = [], e = null, f = c.length;
            f !== a.length && h(e, "Actual row count " + f + " does not match expected number of rows " + a.length + ".");
            for (var g = 0; f > g; g++) {
                d[g] = [];
                var i = c.eq(g).find("td");
                expect(i.height()).not.toBe(0);
                var j = i.length;
                j !== a[g].length && h(e, "Actual column count " + j + " in row " + g + " does not match expected number of columns " + a[g].length + ".");
                for (var k = 0; j > k; k++) d[g][k] = i.eq(k).text(), d[g][k] !== a[g][k] && h(e, "Actual value " + d[g][k] + " in row " + g + " and column " + k + " does not match expected value " + a[g][k] + ".");
            }
            expect(e).toBeNull(), expect(d).toEqual(a);
        }
        function f(a, b) {
            var c = $(b), d = [], e = null, f = c.length;
            f !== a.length && h(e, "Actual row count " + f + " does not match expected number of rows " + a.length + ".");
            for (var g = 0; f > g; g++) {
                d[g] = [];
                var i = c.eq(g).find("td"), j = i.length;
                j !== a[g].length && h(e, "Actual column count " + j + " in row " + g + " does not match expected number of columns " + a[g].length + ".");
                for (var k = 0; j > k; k++) d[g][k] = i.eq(k).text(), d[g][k] !== a[g][k] && h(e, "Actual value " + d[g][k] + " in row " + g + " and column " + k + " does not match expected value " + a[g][k] + "."), 
                i.eq(k).height() <= 1 && h(e, "Actual height " + i.eq(k).height() + " in row " + g + " and column " + k + " is expected to be > 1.");
            }
            expect(e).toBeNull(), expect(d).toEqual(a);
        }
        function g(a, b, c) {
            var d = $(b), e = [], f = null, g = d.length;
            g !== a.length && h(f, "Actual row count " + g + " does not match expected number of rows " + a.length + ".");
            for (var j = 0; g > j; j++) {
                e[j] = [];
                var k = d.eq(j).find("td"), l = k.length;
                l !== a[j].length && h(f, "Actual column count " + l + " in row " + j + " does not match expected number of columns " + a[j].length + ".");
                for (var m = 0; l > m; m++) e[j][m] = k.eq(m).attr("class"), a[j][m] = i(a[j][m], c), 
                e[j][m] !== a[j][m] && h(f, "Actual class name " + e[j][m] + " in row " + j + " and column " + m + " does not match expected value " + a[j][m] + ".");
            }
            expect(f).toBeNull(), expect(e).toEqual(a);
        }
        function h(a, b) {
            return a ? a + "\r\n" + b : b;
        }
        function i(a, b) {
            return a && 0 !== a.length ? a + " " + b : b;
        }
        var j = jsCommon.CssConstants, k = 100;
        a.getTableCell = b, a.renderNewTablix = c, a.runTablixSortTest = d, a.validateMatrix = e, 
        a.validateTable = f, a.validateClassNames = g;
    }(b = a.tablixHelper || (a.tablixHelper = {}));
}(powerbitests || (powerbitests = {}));

var powerbi;

!function(a) {
    var b;
    !function(a) {
        a.defaultLocalizedStrings = {
            ContinueToPowerBI: "Go back home",
            DashboardInvitationEmailSubject: "{0} has shared Power BI Dashboard '{1}' with you",
            DashboardInvitationEmailViewDashboardLink: "Open",
            ExistingAccount: "Have an account? {0}Sign In{1}",
            ClusterUriNotFound: "Cluster URI not found. Please try again later.",
            Forbidden: "You are not authorized to view this page.",
            GenericError: "Something went wrong. <br/>Please try again later.",
            GenericErrorDescription: "An unknown error occured. If you continue to see this error please provide the following information when requesting support.",
            PageDoesNotExist: "Oops, we couldn't find the page you were looking for",
            PowerBILogoTxt: "Microsoft Power BI Preview",
            PowerBILogoTxtNoPreview: "Microsoft Power BI",
            SignUpButton: "Sign up",
            SignUpDifferentEmail: "Don't have an account? {0}Sign up{1}.",
            SignUpHeader: "Welcome to Power BI Preview",
            SignUpHeaderNoPreview: "Welcome to Power BI",
            SignUpTextLine1: "Someone has shared a dashboard with you.",
            SignUpTextLine2: "Sign up for a Microsoft Power BI account to see it.",
            SignInButton: "Sign in",
            SignInDifferentEmail: "Already a user? {0}Sign in{1}",
            SignInTextLine1: "Someone has shared a dashboard with you.",
            SignInTextLine2: "Sign in to see it.",
            Unauthorized: "We do not recognize you. Did you enter your credentials right?",
            RequestAnInvite: "Request an invite",
            UserNeedsInvitation: "You need an invitation to use Power BI.",
            UserNotSignedUp: "You’re not signed up yet.",
            DashboardInvitationEmailDefaultMessage: "Here's the dashboard that {0} shared with you",
            DateAndTimeLabel: "Date and Time:",
            TechnicalDetails: "TECHNICAL DETAILS <br/>",
            ErrorDescription_UserAccountDisabled: "This user account has been disabled.",
            ActivityIdLabel: "ActivityId:",
            TopNav_PowerBILogoText: "Power BI Preview",
            TopNav_PowerBILogoTextNoPreview: "Power BI",
            TopNav_HelpMenu_GettingStarted: "Getting started",
            TopNav_HelpMenu_ContactSupport: "Contact support",
            TopNav_HelpMenu_Developers: "Power BI for developers",
            TopNav_HelpMenu_Suggestions: "What should we build next?",
            TopNav_HelpMenu_Topics: "Help topics",
            TopNav_HelpMenu_About: "About Power BI",
            TopNav_HelpMenu_AboutDialog_Close: "Close",
            TopNav_HelpMenu_Community: "Community",
            TopNav_HelpMenu_FeatureRequests: "Feature Requests",
            TopNav_UserInfoMenu_SignOut: "Sign out",
            TopNav_SettingsMenu_ASConnector: "Analysis Services Connector Preview",
            TopNav_SettingsMenu_OnPremGateway: "Power BI Personal Gateway Preview",
            TopNav_SettingsMenu_ASConnectorNoPreview: "Analysis Services Connector",
            TopNav_SettingsMenu_OnPremGatewayNoPreview: "Power BI Personal Gateway",
            TopNav_SettingsMenu_MobileDownload: "Power BI for Mobile",
            TopNav_SettingsMenu_PowerBICompanion: "Power BI Designer Preview",
            TopNav_SettingsMenu_PowerBICompanionNoPreview: "Power BI Designer",
            TopNav_SettingsMenu_Download: "DOWNLOAD",
            TopNav_SettingsMenu_PowerBISettings: "Power BI Settings",
            TopNav_SettingsMenu_Office365Settings: "Office 365 Settings",
            TopNav_SettingsMenu_ChangeTheme: "Change Theme",
            TopNav_SettingsMenu_PurchasePowerBIPro: "Purchase Power BI Pro",
            TopNav_SettingsMenu_PowerBI: "Power BI",
            TopNav_SettingsMenu_PowerBIForO365: "Power BI for Office 365",
            TopNav_SettingsMenu_Settings: "Settings",
            TopNav_O365ApplicationLauncher_Error: "Application launcher cannot be loaded at this time",
            TopNav_O365ApplicationLauncher_Loading: "Loading ...",
            NullValue: "(Blank)",
            BooleanTrue: "True",
            BooleanFalse: "False",
            NavigationPane_OpenMenu: "Open Menu",
            NavigationPane_SharedWithYou: "Shared with you",
            NavigationPane_GetData: "Get Data",
            NavigationPane_CreateDashboard: "Create dashboard",
            NavigationPane_FilterContent: "Filter content",
            NavigationPane_Minimize: "Minimize the Navigator Pane",
            NavigationPane_Expand: "Expand the Navigator Pane",
            NavigationPane_RefreshPublishError: "Failed to publish or refresh",
            NavigationPane_PackagePublishErrorTitle: "Failed to import data",
            NavigationPane_ReportPublishErrorTitle: "Failed to publish report",
            NavigationPane_ModelPublishErrorTitle: "Failed to publish dataset",
            NavigationPane_PackagePublishErrorContent: "Do you want to delete the dataset and report?",
            NavigationPane_ReportPublishErrorContent: "Do you want to delete the report?",
            NavigationPane_ModelPublishErrorContent: "Do you want to delete the dataset?",
            NavigationPane_NoDashboardText: "You have no dashboards",
            NavigationPane_NoReportText: "You have no reports",
            NavigationPane_NoDatasetText: "You have no datasets",
            NavigationPane_NoDashboardSearchResultText: "No dashboards found",
            NavigationPane_NoReportSearchResultText: "No reports found",
            NavigationPane_NoDatasetSearchResultText: "No datasets found",
            Options_Menu: "More Options",
            ReportAppBar_FileButton: "FILE",
            ReportAppBar_SaveReportButton: "SAVE",
            ReportAppBar_EditReportButton: "EDIT REPORT",
            ReportAppBar_ShareButton: "Share Dashboard",
            ReportAppBar_EditReportButtonSharedDisabled: "You cannot edit a shared report",
            ReportAppBar_SaveToDashboard: "Save",
            ReportAppBar_SaveToDashboardDescription: "Save this report.",
            ReportAppBar_SaveAs: "Save As",
            ReportAppBar_SaveAsDescription: "Save a copy of this report.",
            ReportAppBar_SaveAsDialogTitle: "Save Your Report",
            ReportAppBar_SaveAsDialogInstructions: "Enter a name for your report:",
            ReportAppBar_ExportToPowerPoint: "Export to Power Point",
            ReportAppBar_ExportToPowerPointDescription: "Save this report as a Power Point presentation",
            ReportAppBar_ShareWithPeople: "Share with People",
            ReportAppBar_ShareWithPeopleDescription: "Invite other people to view and edit this report",
            ReportAppBar_Embed: "Embed",
            ReportAppBar_EmbedDescription: "Embed this report in your blog or website",
            ReportPaginator_Page: "PAGE",
            ReportPaginator_PageOf: "OF",
            ReportPaginator_EditingView: "Editing View",
            ReportPaginator_ReadingView: "Reading View",
            ReportContainer_UnsavedChangeWarningTitle: "You have unsaved changes.",
            ReportContainer_UnsavedChangeWarningMessage: "You might want to save them first.",
            ReportContainer_WindowUnload: "You have unsaved changes. You might want to save them first.",
            ReportContainer_Dontsave: "Don't Save",
            ReportContainer_Cancel: "Cancel",
            ReportContainer_Save: "Save",
            ReportNavigation_Thumbnails: "Thumbnails",
            SettingsViewer_Title: "Settings",
            SettingsDashboards_Title: "Dashboards",
            SettingsGeneral_Title: "General",
            SettingsGeneral_Privacy_Title: "Privacy",
            SettingsPrivacy_Title: "Privacy Settings",
            SettingsPrivacy_DataCollection_Title: "Search Term Collection",
            SettingsPrivacy_DataCollection_Info: "Help make Power BI better by sending search terms used in Power BI Q&A to Microsoft for product feedback and improvement.",
            SettingsPrivacy_DataCollection_LearnMore: "Learn more",
            SettingsGeneral_Error_FailedToLoad: "Failed to load settings",
            SettingsGeneral_Error_FailedToSave: "Failed to update settings",
            SettingsDashboards_Error_FailedToLoadDashboards: "Failed to load dashboards",
            SettingsDashboards_Error_FailedToSaveDashboards: "Failed to update dashboard",
            SettingsDashboard_Title: "Settings for {0}",
            SettingsDashboard_QnA_Title: "Q&A",
            SettingsDashboard_QnA_Info1: "Q&A allows users to find data and create charts using natural language for datasets used on a dashboard.",
            SettingsDashboard_QnA_Info2: "Q&A capabilities are not available for datasets using direct connections to data that does not reside in Power BI.",
            SettingsDashboard_QnA_LearnMore: "Learn more",
            SettingsDashboard_QnA_QnaEnabledMessage: "Show the Q&A search box on this dashboard",
            SettingsDashboard_QnA_QnaUnavailableWarning: "There are no datasets used on this dashboard for which Q&A is available.",
            SettingsDatasets_Title: "Datasets",
            SettingsWorkbooks_Title: "Workbooks",
            SettingsDataset_Title: "Settings for ",
            SettingsDataset_Welcome_Before_Configuration: "Before you can setup a refresh schedule, you'll need to configure a few things.",
            SettingsDataset_Install_OnPrem_Gateway: "1. Install the Power BI Personal Gateway on a computer that is always on.",
            SettingsDataset_OnPrem_Gateway_InstallNow: "Install Now",
            SettingsDataset_OnPrem_Gateway_LearnMore: "Learn More",
            SettingsDataset_OnPrem_Gateway_InstallPage: "You can install the Gateway from: ",
            SettingsDataset_OnPrem_Gateway_InstallPage_EmailToYou: ". This link has been emailed to you.",
            SettingsDataset_Install_OnPrem_Gateway_Succeed: "1. The Gateway is installed and running on ",
            SettingsDataset_Provide_Credential: "2. Provide credentials in Manage Data Sources.",
            SettingsDataset_Provide_Credential_Valid: "2. Your data sources are valid.",
            SettingsDataset_SetScheduleRefresh: "3. Specify a schedule in Schedule Refresh.",
            SettingsDataset_SetScheduleRefresh_Done: "3. Your refresh schedule has been set.",
            SettingsDataset_Gateway_Title: "Gateway",
            SettingsDataset_GatewayErrorMessage_NoGatewayInstalled: "Please install the Gateway first.",
            SettingsDataset_Gateway_Location: "The on-premise Gateway on ",
            SettingsDataset_Gateway_Location2: " is online.",
            SettingsDataset_GatewayErrorMessage_GatewayOffline2: " appears to be offline. Make sure ",
            SettingsDataset_GatewayErrorMessage_GatewayOffline3: " is turned on and the service is running. Then try refreshing your report in PowerBI.com.",
            SettingsDataset_GatewayIsRunning: "Gateway is running and connected on ",
            SettingsDataset_ScheduleRefresh_Title: "Schedule Refresh",
            SettingsDataset_ScheduleRefresh_NextRefresh: "Next refresh: ",
            SettingsDataset_ScheduleRefresh_EnableRefresh_Title: "Keep your data up-to-date",
            SettingsDataset_ScheduleRefresh_EnableRefresh_Yes: "Yes",
            SettingsDataset_ScheduleRefresh_EnableRefresh_No: "No",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Title: "Refresh frequency",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Daily: "Daily",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Weekly: "Weekly",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Monday: "Monday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Tuesday: "Tuesday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Wednesday: "Wednesday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Thursday: "Thursday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Friday: "Friday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Saturday: "Saturday",
            SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Sunday: "Sunday",
            SettingsDataset_ScheduleRefresh_TimeWindow: "Refresh between",
            SettingsDataset_ScheduleRefresh_TimeWindow_1: "12 AM - 6 AM",
            SettingsDataset_ScheduleRefresh_TimeWindow_2: "6 AM - 12 PM",
            SettingsDataset_ScheduleRefresh_TimeWindow_3: "12 PM - 6 PM",
            SettingsDataset_ScheduleRefresh_TimeWindow_4: "6 PM - 12 AM",
            SettingsDataset_ScheduleRefresh_TimeZone: "Time Zone",
            SettingsDataset_ScheduleRefresh_TimeProWindow: "Time",
            SettingsDataset_ScheduleRefresh_Timezone_Afghanistan_Standard_Time: "(UTC+04:30) Kabul",
            SettingsDataset_ScheduleRefresh_Timezone_Alaskan_Standard_Time: "(UTC-09:00) Alaska",
            SettingsDataset_ScheduleRefresh_Timezone_Arab_Standard_Time: "(UTC+03:00) Kuwait, Riyadh",
            SettingsDataset_ScheduleRefresh_Timezone_Arabian_Standard_Time: "(UTC+04:00) Abu Dhabi, Muscat",
            SettingsDataset_ScheduleRefresh_Timezone_Arabic_Standard_Time: "(UTC+03:00) Baghdad",
            SettingsDataset_ScheduleRefresh_Timezone_Argentina_Standard_Time: "(UTC-03:00) Buenos Aires",
            SettingsDataset_ScheduleRefresh_Timezone_Atlantic_Standard_Time: "(UTC-04:00) Atlantic Time (Canada)",
            SettingsDataset_ScheduleRefresh_Timezone_AUS_Central_Standard_Time: "(UTC+09:30) Darwin",
            SettingsDataset_ScheduleRefresh_Timezone_AUS_Eastern_Standard_Time: "(UTC+10:00) Canberra, Melbourne, Sydney",
            SettingsDataset_ScheduleRefresh_Timezone_Azerbaijan_Standard_Time: "(UTC+04:00) Baku",
            SettingsDataset_ScheduleRefresh_Timezone_Azores_Standard_Time: "(UTC-01:00) Azores",
            SettingsDataset_ScheduleRefresh_Timezone_Bangladesh_Standard_Time: "(UTC+06:00) Dhaka",
            SettingsDataset_ScheduleRefresh_Timezone_Cabo_Verde_Standard_Time: "(UTC-01:00) Cabo Verde Is.",
            SettingsDataset_ScheduleRefresh_Timezone_Canada_Central_Standard_Time: "(UTC-06:00) Saskatchewan",
            SettingsDataset_ScheduleRefresh_Timezone_Caucasus_Standard_Time: "(UTC+04:00) Yerevan",
            SettingsDataset_ScheduleRefresh_Timezone_Cen_Australia_Standard_Time: "(UTC+09:30) Adelaide",
            SettingsDataset_ScheduleRefresh_Timezone_Central_America_Standard_Time: "(UTC-06:00) Central America",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Asia_Standard_Time: "(UTC+06:00) Astana",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Brazilian_Standard_Time: "(UTC-04:00) Cuiaba",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Europe_Standard_Time: "(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",
            SettingsDataset_ScheduleRefresh_Timezone_Central_European_Standard_Time: "(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Pacific_Standard_Time: "(UTC+11:00) Solomon Is., New Caledonia",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time: "(UTC-06:00) Central Time (US and Canada)",
            SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time_Mexico: "((UTC-06:00) Guadalajara, Mexico City, Monterrey",
            SettingsDataset_ScheduleRefresh_Timezone_China_Standard_Time: "(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",
            SettingsDataset_ScheduleRefresh_Timezone_Dateline_Standard_Time: "(UTC-12:00) International Date Line West",
            SettingsDataset_ScheduleRefresh_Timezone_E_Africa_Standard_Time: "(UTC+03:00) Nairobi",
            SettingsDataset_ScheduleRefresh_Timezone_E_Australia_Standard_Time: "(UTC+10:00) Brisbane",
            SettingsDataset_ScheduleRefresh_Timezone_E_Europe_Standard_Time: "(UTC+02:00) Minsk",
            SettingsDataset_ScheduleRefresh_Timezone_E_South_America_Standard_Time: "(UTC-03:00) Brasilia",
            SettingsDataset_ScheduleRefresh_Timezone_Eastern_Standard_Time: "(UTC-05:00) Eastern Time (US and Canada)",
            SettingsDataset_ScheduleRefresh_Timezone_Egypt_Standard_Time: "(UTC+02:00) Cairo",
            SettingsDataset_ScheduleRefresh_Timezone_Ekaterinburg_Standard_Time: "(UTC+06:00) Ekaterinburg",
            SettingsDataset_ScheduleRefresh_Timezone_Fiji_Standard_Time: "(UTC+12:00) Fiji",
            SettingsDataset_ScheduleRefresh_Timezone_FLE_Standard_Time: "(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",
            SettingsDataset_ScheduleRefresh_Timezone_Georgian_Standard_Time: "(UTC+04:00) Tbilisi",
            SettingsDataset_ScheduleRefresh_Timezone_GMT_Standard_Time: "(UTC) Dublin, Edinburgh, Lisbon, London",
            SettingsDataset_ScheduleRefresh_Timezone_Greenland_Standard_Time: "(UTC-03:00) Greenland",
            SettingsDataset_ScheduleRefresh_Timezone_Greenwich_Standard_Time: "(UTC) Monrovia, Reykjavik",
            SettingsDataset_ScheduleRefresh_Timezone_GTB_Standard_Time: "(UTC+02:00) Athens, Bucharest",
            SettingsDataset_ScheduleRefresh_Timezone_Hawaiian_Standard_Time: "(UTC-10:00) Hawaii",
            SettingsDataset_ScheduleRefresh_Timezone_India_Standard_Time: "(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",
            SettingsDataset_ScheduleRefresh_Timezone_Iran_Standard_Time: "(UTC+03:30) Tehran",
            SettingsDataset_ScheduleRefresh_Timezone_Israel_Standard_Time: "(UTC+02:00) Jerusalem",
            SettingsDataset_ScheduleRefresh_Timezone_Jordan_Standard_Time: "(UTC+02:00) Amman",
            SettingsDataset_ScheduleRefresh_Timezone_Kaliningrad_Standard_Time: "(UTC+03:00) Kaliningrad",
            SettingsDataset_ScheduleRefresh_Timezone_Korea_Standard_Time: "(UTC+09:00) Seoul",
            SettingsDataset_ScheduleRefresh_Timezone_Magadan_Standard_Time: "(UTC+12:00) Magadan",
            SettingsDataset_ScheduleRefresh_Timezone_Mauritius_Standard_Time: "(UTC+04:00) Port Louis",
            SettingsDataset_ScheduleRefresh_Timezone_Mid_Atlantic_Standard_Time: "(UTC-02:00) Mid-Atlantic",
            SettingsDataset_ScheduleRefresh_Timezone_Middle_East_Standard_Time: "(UTC+02:00) Beirut",
            SettingsDataset_ScheduleRefresh_Timezone_Montevideo_Standard_Time: "(UTC-03:00) Montevideo",
            SettingsDataset_ScheduleRefresh_Timezone_Morocco_Standard_Time: "(UTC) Casablanca",
            SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time: "(UTC-07:00) Mountain Time (US and Canada)",
            SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time_Mexico: "(UTC-07:00) Chihuahua, La Paz, Mazatlan",
            SettingsDataset_ScheduleRefresh_Timezone_Myanmar_Standard_Time: "(UTC+06:30) Yangon (Rangoon)",
            SettingsDataset_ScheduleRefresh_Timezone_N_Central_Asia_Standard_Time: "(UTC+07:00) Novosibirsk",
            SettingsDataset_ScheduleRefresh_Timezone_Namibia_Standard_Time: "(UTC+01:00) Windhoek",
            SettingsDataset_ScheduleRefresh_Timezone_Nepal_Standard_Time: "(UTC+05:45) Kathmandu",
            SettingsDataset_ScheduleRefresh_Timezone_New_Zealand_Standard_Time: "(UTC+12:00) Auckland, Wellington",
            SettingsDataset_ScheduleRefresh_Timezone_Newfoundland_Standard_Time: "(UTC-03:30) Newfoundland",
            SettingsDataset_ScheduleRefresh_Timezone_North_Asia_East_Standard_Time: "(UTC+09:00) Irkutsk",
            SettingsDataset_ScheduleRefresh_Timezone_North_Asia_Standard_Time: "(UTC+08:00) Krasnoyarsk",
            SettingsDataset_ScheduleRefresh_Timezone_Pacific_SA_Standard_Time: "(UTC-04:00) Santiago",
            SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time: "(UTC-08:00) Pacific Time (US and Canada)",
            SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time_Mexico: "(UTC-08:00) Baja California",
            SettingsDataset_ScheduleRefresh_Timezone_Pakistan_Standard_Time: "(UTC+05:00) Islamabad, Karachi",
            SettingsDataset_ScheduleRefresh_Timezone_Paraguay_Standard_Time: "(UTC-04:00) Asuncion",
            SettingsDataset_ScheduleRefresh_Timezone_Romance_Standard_Time: "(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",
            SettingsDataset_ScheduleRefresh_Timezone_Russian_Standard_Time: "(UTC+04:00) Moscow, St. Petersburg, Volgograd",
            SettingsDataset_ScheduleRefresh_Timezone_SA_Eastern_Standard_Time: "(UTC-03:00) Cayenne, Fortaleza",
            SettingsDataset_ScheduleRefresh_Timezone_SA_Pacific_Standard_Time: "(UTC-05:00) Bogota, Lima, Quito",
            SettingsDataset_ScheduleRefresh_Timezone_SA_Western_Standard_Time: "(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",
            SettingsDataset_ScheduleRefresh_Timezone_Samoa_Standard_Time: "(UTC-11:00) Samoa",
            SettingsDataset_ScheduleRefresh_Timezone_SE_Asia_Standard_Time: "(UTC+07:00) Bangkok, Hanoi, Jakarta",
            SettingsDataset_ScheduleRefresh_Timezone_Singapore_Standard_Tim: "(UTC+08:00) Kuala Lumpur, Singapore",
            SettingsDataset_ScheduleRefresh_Timezone_South_Africa_Standard_Time: "(UTC+02:00) Harare, Pretoria",
            SettingsDataset_ScheduleRefresh_Timezone_Sri_Lanka_Standard_Time: "(UTC+05:30) Sri Jayawardenepura",
            SettingsDataset_ScheduleRefresh_Timezone_Syria_Standard_Time: "(UTC+02:00) Damascus",
            SettingsDataset_ScheduleRefresh_Timezone_Taipei_Standard_Time: "(UTC+08:00) Taipei",
            SettingsDataset_ScheduleRefresh_Timezone_Tasmania_Standard_Time: "(UTC+10:00) Hobart",
            SettingsDataset_ScheduleRefresh_Timezone_Tokyo_Standard_Time: "(UTC+09:00) Osaka, Sapporo, Tokyo",
            SettingsDataset_ScheduleRefresh_Timezone_Tonga_Standard_Time: "(UTC+13:00) Nuku'alofa",
            SettingsDataset_ScheduleRefresh_Timezone_Turkey_Standard_Time: "(UTC+02:00) Istanbul",
            SettingsDataset_ScheduleRefresh_Timezone_Ulaanbaatar_Standard_Time: "(UTC+08:00) Ulaanbaatar",
            SettingsDataset_ScheduleRefresh_Timezone_US_Eastern_Standard_Time: "(UTC-05:00) Indiana (East)",
            SettingsDataset_ScheduleRefresh_Timezone_US_Mountain_Standard_Time: "(UTC-07:00) Arizona",
            SettingsDataset_ScheduleRefresh_Timezone_UTC: "(UTC) Coordinated Universal Time",
            SettingsDataset_ScheduleRefresh_Timezone_UTC_Plus_12: "(UTC+12:00) Coordinated Universal Time +12",
            SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_11: "(UTC-11:00) Coordinated Universal Time -11",
            SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_2: "(UTC-02:00) Coordinated Universal Time -02",
            SettingsDataset_ScheduleRefresh_Timezone_Venezuela_Standard_Time: "(UTC-04:30) Caracas",
            SettingsDataset_ScheduleRefresh_Timezone_Vladivostok_Standard_Time: "(UTC+11:00) Vladivostok",
            SettingsDataset_ScheduleRefresh_Timezone_W_Australia_Standard_Time: "(UTC+08:00) Perth",
            SettingsDataset_ScheduleRefresh_Timezone_W_Central_Africa_Standard_Time: "(UTC+01:00) West Central Africa",
            SettingsDataset_ScheduleRefresh_Timezone_W_Europe_Standard_Time: "(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",
            SettingsDataset_ScheduleRefresh_Timezone_West_Asia_Standard_Time: "(UTC+05:00) Tashkent",
            SettingsDataset_ScheduleRefresh_Timezone_West_Pacific_Standard_Time: "(UTC+10:00) Guam, Port Moresby",
            SettingsDataset_ScheduleRefresh_Timezone_Yakutsk_Standard_Time: "(UTC+10:00) Yakutsk",
            SettingsDataset_ScheduleRefresh_AmPmWindows_Am: "AM",
            SettingsDataset_ScheduleRefresh_AmPmWindows_Pm: "PM",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_1: "1",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_10: "10",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_11: "11",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_12: "12",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_2: "2",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_3: "3",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_4: "4",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_5: "5",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_6: "6",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_7: "7",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_8: "8",
            SettingsDataset_ScheduleRefresh_TimeHourWindows_9: "9",
            SettingsDataset_ScheduleRefresh_TimeMinuteWindos_00: "00",
            SettingsDataset_ScheduleRefresh_TimeMinuteWindos_30: "30",
            SettingsDataset_Add_Refresh_Time: "Add another time",
            SettingsDataset_DuplicateTime: "Duplicate times are not allowed.",
            SettingsDataset_IncompleteTime: "A complete time must be specified.",
            SettingsDataset_ScheduleRefresh_SendRefreshFailureEmail: "Send refresh failure notification email to me",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshNotEnabled: "Refresh Schedule not enabled",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_NextRefresh: "Next refresh : ",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshFailed: "Last refresh failed: ",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded: "Last refresh succeeded : ",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_LastPackagePublishFailed: "Package publish failed",
            SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshFailed: "The last refresh failed because we couldn’t connect to the data sources in your dataset. Make sure the data sources are configured correctly.",
            SettingsDataset_ManageDataSources_Title: "Manage Data Sources",
            SettingsDataset_ManageDataSources_EditButtonText: "Edit credentials",
            SettingsDataset_ApplyButtonText: "Apply",
            SettingsDataset_DiscardButtonText: "Discard",
            SettingsDataset_RefreshHistoryText: "Refresh History",
            SettingsDataset_ShowDetails: "Show details",
            SettingsDataset_HideDetails: "Hide details",
            SettingsDataset_ManageDataSources_Warning_YouNeedToProvideCredentials: "Your data source cannot be kept up to date because the credentials are incorrect.",
            SettingsDataset_Notification_RefreshScheduleUpdated_Title: " refresh schedule updated",
            SettingsDataset_Notification_RefreshScheduleUpdated_Message_Part1: "Your updates to the ",
            SettingsDataset_Notification_RefreshScheduleUpdated_Message_Part2: " Refresh Schedule have been applied",
            SettingsDataset_Notification_RefreshScheduleCannotBeUpdated_Title: " refresh schedule cannot be updated",
            SettingsDataset_Notification_RefreshScheduleCannotBeUpdated_Message: "When 'Refresh frequency' is 'Weekly' you have to select at least one day.",
            SettingsDataset_Notification_RefreshScheduleCannotBeUpdatedTimeFormat_Message: "Please verify all refresh times are valid.",
            SettingsDataset_Notification_DatasourceUpdated_Title: " Data Source Updated",
            SettingsDataset_Notification_DatasourceUpdated_Message_Part1: "Your updates to the ",
            SettingsDataset_Notification_DatasourceUpdated_Message_Part2: " data source have been applied",
            SettingsDataset_Notification_RefreshNow_Scheduled_Title: "",
            SettingsDataset_Notification_RefreshNow_Scheduled_Message: " dataset will be refreshed soon",
            SettingsDataset_Notification_RefreshNow_NotScheduled_Title: "",
            SettingsDataset_Notification_RefreshNow_NotScheduled_Message_Part1: "We couldn’t schedule refresh for ",
            SettingsDataset_Notification_RefreshNow_NotScheduled_Message_Part2: ". Be sure to check your refresh settings.",
            SettingsDataset_AreYouSureYouWantToLeaveThisDataset_Title: "Are you sure you want to leave this Dataset",
            SettingsDataset_AreYouSureYouWantToLeaveThisWorkbook_Title: "Are you sure you want to leave this Workbook",
            SettingsDataset_AreYouSureYouWantToLeaveThisDataset_Message: "Your changes will be lost!",
            SettingsDataset_DisableEntireRefreshPageErrorMessage_ModelNotSupported: "We don’t support scheduled refresh for this dataset.",
            SettingsDataset_DisableEntireRefreshPageErrorMessage_DataSourcesNotSupported: "You cannot schedule refresh for this dataset because it gets data from sources that currently don’t support refresh.",
            SettingsDataset_Error_FailedToLoadModelForRefresh: "Failed to load model for Refresh",
            SettingsDataset_Error_FailedToLoadDatasets: "Failed to load datasets",
            SettingsDataset_Error_FailedToLoadDatasources: "Failed to load Datasources",
            SettingsDataset_Error_FailedToTestConnection: "Failed to test connection",
            SettingsDataset_Error_FailedToRetrieveGateway: "Failed to retrieve gateway",
            SettingsDataset_Error_FailedToLoadRefreshHistory: "Failed to load refresh history",
            SettingsDataset_Error_DatasourceCredentialsIncorrectTitle: "You cannot refresh yet because you need to provide valid credentials for your data sources in the dataset.",
            SettingsDataset_Error_DatasourceCredentialsIncorrect: "You can update the credentials for the data sources in the Manage Data Sources section on the Schedule Refresh settings page.",
            SettingsDataset_Error_GatewayOfflineTitle: "You cannot refresh yet because your Personal Gateway is offline",
            SettingsDataset_Error_GatewayOffline: "Make sure the computer where the Gateway is installed is turned on and the Gateway is running.  Also make sure the credentials provided in the Manage Data Sources section in the refresh settings are up-to-date.",
            SettingsDataset_Error_GatewayNotExistTitle: "You cannot refresh now because your on-premise gateway is not installed.",
            SettingsDataset_Error_GatewayNotExist: "An on-premise gateways is not found. Please install the Gateway before refreshing the model.",
            SettingsDataset_Error_FailedDuringTestConnection: "Failed during TestConnection call",
            SettingsDataset_Error_FailedToSaveRefreshSettings: "Failed to Update Refresh Schedule",
            SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeNull: "We received invalid data from server: RefreshSchedule.ExecutionTime is NULL. Assumed default value (0)",
            SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour: "We received invalid data from server: RefreshSchedule.ExecutionTime.Hour < 0 or > 23. Assumed default value (0)",
            SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat: "We received invalid data from server: RefreshSchedule.executionTimesHourly has invalid format",
            SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour: "We received invalid data from server: RefreshSchedule.executionTimesHourly.Hour < 0 or > 23. Assumed default value (0)",
            SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute: "We received invalid data from server: RefreshSchedule.executionTimesHourly.Minute < 0 or > 59. Assumed default value (0)",
            SettingsDataset_Error_InvalidDataFromServer_NextRefreshOrLastRefreshNaN: "We received invalid data from server: NextRefresh or LastRefresh is NaN. Assumed default value (0)",
            SettingsDataset_TakeOverButton_CancelTakeOver: "Cancel Takeover",
            SettingsDataset_TakeOverButton_TakeOver: "Take Over",
            SettingsDataset_TakeOverStatusText_Before: "This schedule has been set by {0}. Would you like to take over the schedule?",
            SettingsDataset_TakeOverStatusText_After: "You have chosen to take over this schedule.",
            SettingsDataset_TakeOverDetailsText: "Changes will take affect once the schedule has been applied. You can cancel out at any time.",
            DatasetParametersDialog_NextButtonText: "Next",
            DatasetParametersDialog_CancelButtonText: "Cancel",
            DatasetParametersDialog_HelpButtonText: "Help",
            DatasetParametersDialog_Configure: "Configure",
            DatasetParametersDialog_ValidationError: "Parameter validation failed, please make sure all parameters are valid.",
            DatasetParametersDialog_Error_FailedToUpdateModelParameters: "Failed to update model parameters",
            HistoryDialog_Title: "Refresh History",
            HistoryDialog_TableHeader_Type: "Type",
            HistoryDialog_TableHeader_Start: "Start",
            HistoryDialog_TableHeader_End: "End",
            HistoryDialog_TableHeader_Status: "Status",
            HistoryDialog_TableHeader_FailMessage: "Fail Message",
            HistoryDialog_TableHeader_Details: "Details",
            HistoryDialog_RefreshType_Scheduled: "Scheduled",
            HistoryDialog_RefreshType_OnDemand: "On demand",
            HistoryDialog_RefreshStatus_Completed: "Completed",
            HistoryDialog_RefreshStatus_Failed: "Failed",
            HistoryDialog_RefreshStatus_InProgress: "In Progress",
            HistoryDialog_RefreshDetail_Show: "Show",
            HistoryDialog_RefreshDetail_Hide: "Hide",
            HistoryDialog_CloseButtonText: "Close",
            AuthDialog_ApplyButtonText: "Apply",
            AuthDialog_CancelButtonText: "Cancel",
            AuthDialog_Configure: "Configure",
            AuthDialog_FieldName_Authentication: "Authentication Method:",
            AuthDialog_FieldName_Username: "Username",
            AuthDialog_FieldName_Password: "Password",
            AuthDialog_FieldName_AccountKey: "Account key",
            AuthDialog_LinkText_GetYourMarketplaceAccountKey: "Get your marketplace account key",
            AuthDialog_LinkText_SignUpForWindowsAzureMarketplace: "Sign up for windows azure marketplace",
            AuthDialog_DisablePopupBlocker_OAuth: "Ensure pop-ups are not being blocked by your browser",
            AuthDialog_LinkText_SignIn: "Sign In",
            AuthDialog_LinkText_Edit: "Edit",
            AuthDialog_LinkMessage_YouAreSignedIn: "You are signed in",
            AuthDialog_Error_LoginFailed: "Login failed.",
            AuthDialog_Error_FailedToUpdateDatasource: "Failed to update the datasource",
            Dashboard_AddFeaturedQuestion: "Add Featured Question...",
            DashboardTaskPane_Title: "Welcome to Power BI",
            ContentProvider_Title: "Bring your own data",
            ContentProvider_GetConfigurationFailed: "Failed to retrieve configuration page for content provider.",
            ContentProvider_LoadingConfigurationPage: "Loading configuration page",
            DashboardContainer_Ok: "OK",
            TileEditor_PaneTitle_Details: "Tile Details",
            TileEditor_PaneSubtitle_Title: "Tile Title",
            TileEditor_EmptyTitleWarning: "Title cannot be empty",
            TileEditor_EmptySubtitleWarning: "Subtitle cannot be empty",
            TileEditor_SetCustomLink: "Set custom link",
            TileEditor_UseDefaultText: "Restore Default",
            TileEditor_UpdateFailed: "Failed to update tile",
            TileHeadings_By: "by {0}",
            ListJoin_Separator: ", ",
            TileEditor_Action_Url_WarningInvalidUrl: "Please provide a valid URL beginning with http:// or https://",
            TileEditor_ApplyButtonText: "Apply",
            TileEditor_DiscardButtonText: "Discard",
            UploadExcel_BrowserPopUpDisabled: "Browser pop-up is disabled. Please verify browser settings.",
            UploadExcel_Cancel: "Cancel",
            UploadExcel_ConfigureFileFailed: "Failed to configure selected file",
            UploadExcel_Error_WorkbookAlreadyExists: "Workbook already exists",
            UploadExcel_ConfirmButtonText: "upload",
            UploadExcel_DropBox: "DropBox",
            UploadExcel_DropboxSignIn: "Sign in to access your files",
            UploadExcel_Description: "Add Excel data to your dashboard",
            UploadExcel_GetAuthEndpointFailed: "Unable to retrieve authorization endpoint",
            UploadExcel_GetUserPropertiesFailed: "Failed to retrieve user properties",
            UploadExcel_GetFileMetadataFailed: "Failed to retrieve file metadata",
            UploadExcel_GetServicePropertiesFailed: "Failed to retrieve service properties",
            UploadExcel_LocalBrowse: "Browse",
            UploadExcel_LocalDevice: "upload from device",
            UploadExcel_LoadingFiles: "Loading files ...",
            UploadExcel_Connect: "Connect",
            UploadExcel_ChooseFormatDescription: "Choose how to connect to your Excel workbook",
            UploadExcel_ChooseFormat_Or: "or",
            UploadExcel_ChooseFormat_ViewExcel: "Connect, Manage and View Excel in Power BI",
            UploadExcel_ChooseFormat_ViewExcelDescription: "Connect to your workbook and see it exactly as it is in Excel Online -- charts, PivotTables, worksheets, Power View sheets, and all.",
            UploadExcel_ChooseFormat_ImportData: "Connect Power BI to data in Excel",
            UploadExcel_ChooseFormat_ImportDataDescription: "Connect to the data in your workbook on OneDrive so you can create Power BI reports and dashboards for it. Data is automatically refreshed from OneDrive.",
            UploadExcel_ChooseFormat_Get: "Connect",
            UploadExcel_Connecting_Toast: "Connecting to your Excel workbook...",
            UploadExcel_Success_Toast: "Your Excel workbook is ready in your list of reports.",
            UploadExcel_Success_Toast_MetaText: "Take a look: {0}",
            UploadExcel_OfflineAccessRequest: "Please provide offline access to the document",
            UploadExcel_OneDrive: "OneDrive - Personal",
            UploadExcel_OneDriveDescription: "Use OneDrive to access your files from anywhere and share with anyone.",
            UploadExcel_OneDriveFileName: "Name",
            UploadExcel_OneDriveFileModifiedDate: "Modified Date",
            UploadExcel_OneDriveFileSize: "Size",
            UploadExcel_OneDriveSignIn: "Sign in",
            UploadExcel_OneDriveSignOut: "Sign out",
            UploadExcel_OneDrivePersonal: "OneDrive - Personal",
            UploadExcel_OneDrivePro: "OneDrive for Business",
            UploadExcel_OneDriveProDescription: "Save your work files to OneDrive for Business so they're always with you.",
            UploadExcel_OneDriveProNoSharePointError: "It looks like you don't have OneDrive for Business. Try using OneDrive - Personal.",
            UploadExcel_OneDriveProNoPowerBiForO365Error: "In order to use Power BI with OneDrive for Business you need to sign up for Power BI for Office 365.",
            UploadExcel_OneDriveProNoPowerBiForO365Error2: "If you have already signed up for Power BI for Office 365 please try again in 1 hour.",
            UploadExcel_OneDriveProConnecting: "Connecting ...",
            UploadExcel_OneDriveProSignUp: "Sign up",
            UploadExcel_OneDriveProSignUpForPowerBIForOffice365: "Sign up for Power BI for Office 365",
            UploadExcel_OneDriveBusiness: "OneDrive - Business",
            UploadExcel_NoOneDriveEmail: "Unspecified account address",
            UploadExcel_ProcessingInProgress: "Processing selected file, please wait ...",
            UploadExcel_ProgressDescriptionLoading: "Loading ...",
            UploadExcel_PublishInProgress: "Publishing selected file, please wait ...",
            UploadExcel_PublishWorkbookCanceled: "Excel workbook publishing has been canceled",
            UploadExcel_PublishWorkbookFailed: "Failed to publish Excel workbook",
            UploadExcel_ResolveAccessTokenFailed: "Failed to resolve access token",
            UploadExcel_Title: "Excel Workbook",
            UploadExcel_TitleUpload: "Excel Workbook Upload",
            UploadExcel_UploadLimit: "Only Excel workbooks up to 250 MB are supported.",
            UploadExcel_UploadLimit_ViewExcelMode: "Power BI supports workbooks up to 250 MB, and the non-model part of the workbook must be less than 10MB. Get tips for ways to reduce workbook size.",
            UploadExcel_UnsupportedFileType: "Only Excel 2007 or newer workbooks are supported",
            UploadExcel_WatermarkDescription: "Drop file here",
            UploadExcel_Computer: "Computer",
            UploadExcel_PlaceholderText: "Choose file",
            ReportOptStatus_Idle: "",
            ReportOptStatus_Saving: "SAVING...",
            ReportOptStatus_Saved: "SAVED",
            ReportOptStatus_SaveFailed: "FAILED",
            ReportOptStatus_Default: "",
            Landing_DashboardConnectionsButtonText: "CONNECTIONS: ",
            Landing_DashboardConnectionsTitleText: "Dashboard Connections",
            Landing_DashboardConnectionsLastUpdatedText: "Last updated: ",
            Landing_DashboardConnectionsNoDataAvailableText: "No Data Connection Available",
            ModalDialog_Save: "Save",
            ModalDialog_Send: "Send",
            ModalDialog_Cancel: "Cancel",
            PowerViewError_Reload: "Reload",
            PowerViewError_Close: "Close",
            PowerViewError_DefaultTitle: "oops, something went wrong",
            RenameService_Success: "Rename Successful",
            RenameService_Error: "Unable to rename tile group",
            RenameService_Reason: "Could not contact service",
            ErrorBar_ConnectionErrorText: "Connection Error",
            ErrorBar_FixItText: "Fix it",
            ErrorBar_YesText: "YES",
            ErrorBar_NoText: "NO",
            ExternalContentViewer_BackToDashboard: "Back to Dashboard",
            ExternalContentViewer_Title: "Get data",
            ExternalContentViewer_GiveFeedback: "Suggest a data source",
            ExternalContentViewer_UploadInProgress: "Upload in Progress",
            ExternalContentViewer_Upload: "Uploading your file to Power BI...",
            ExternalContentViewer_Cancel: "Cancel",
            ShareView_Invite: "Invite",
            ShareView_SharedWith: "Shared With",
            ActivityPane_Tooltip: "Activity Pane",
            ActivityPane_ConnectAction: "Connect",
            ActivityPane_ShareAction: "Share Dashboard",
            ActivityPane_SettingsAction: "Settings",
            ActivityPane_AddTileAction: "Add Tile",
            DashboardTaskPane_ReportsSectionHeader: "Reports",
            DashboardTaskPane_DateSourcesSectionHeader: "Data Sources",
            DashboardContextMenu_Open: "OPEN",
            DashboardContextMenu_Explore: "EXPLORE",
            DashboardContextMenu_ManageRefresh: "SCHEDULE REFRESH",
            DashboardContextMenu_RefreshNow: "REFRESH NOW",
            DashboardContextMenu_Rename: "RENAME",
            DashboardContextMenu_Remove: "REMOVE",
            DashboardContextMenu_Delete: "DELETE",
            DashboardContextMenu_Settings: "SETTINGS",
            DashboardContextMenu_Share: "SHARE",
            DashboardContextMenu_Export: "EXPORT",
            DashboardContextMenu_AllPermissionMessage: "You can access, edit and reshare this dashboard",
            DashboardContextMenu_NonePermissionMessage: "You don't have any permission on this dashboard",
            DashboardContextMenu_ReadPermissionMessage: "You can access this dashboard",
            DashboardContextMenu_ReadResharePermissionMessage: "You can access and reshare this dashboard",
            DashboardContextMenu_ReadWritePermissionMessage: "You can access and edit this dashboard",
            DashboardContextMenu_ReSharePermissionMessage: "You can reshare this dashboard",
            DashboardContextMenu_WritePermissionMessage: "You can edit this dashboard",
            DashboardContextMenu_UnknownPermissionMessage: "Cannot identify your permission on this dashboard",
            Model_FailToDeleteModelMessage: "We failed to delete the dataset. Please try again later.",
            Model_FailToRenameModelMessage: "We failed to rename the dataset. Please try again later.",
            Model_NoPermissionToDeleteMessage: "You don't have permission to delete this dataset.",
            Model_NoPermissionToRenameMessage: "You don't have permission to rename this dataset.",
            Report_NoPermissionToDeleteMessage: "You don't have permission to delete this report.",
            Workbook_NoPermissionToRemoveMessage: "You don't have permission to remove this workbook.",
            Report_NoPermissionToRenameMessage: "You don't have permission to rename this report.",
            Workbook_NoPermissionToRenameMessage: "You don't have permission to rename this workbook.",
            Report_FailToDeleteReportMessage: "We failed to delete the report. Please try again later.",
            Workbook_FailToRemoveMessage: "We failed to remove the workbook. Please try again later.",
            Report_FailToRenameReportMessage: "We failed to rename the report. Please try again later.",
            Workbook_FailToRenameWorkbookMessage: "We failed to rename the workbook. Please try again later.",
            Dashboard_FailToCreateDashboardMessage: "We failed to create the dashboard. Please try again later.",
            Dashboard_FailToDeleteDashboardMessage: "We failed to delete the dashboard. Please try again later.",
            Dashboard_FailToExportDashboardMessage: "We failed to export the dashboard. Please try again later.",
            Dashboard_FailToRenameDashboardMessage: "We failed to rename the dashboard. Please try again later.",
            Dashboard_FailToRemoveDashboardMessage: "We failed to remove the dashboard. Please try again later.",
            DashboardDoesNotExistMessage: "It may have been deleted or you may not have access to view it.",
            DashboardDoesNotExistTitle: "Sorry, we couldn't find that dashboard",
            NotificationMessage_ExportingPackage: "Exporting package",
            DashboardReadOnlyExportWarning_Message: "This dashboard is read only, export is not allowed.",
            Dashboard_DeleteConfirmationMessage: "Are you sure you want to permanently delete this dashboard?",
            Dashboard_DeleteConfirmationTitle: "Delete Dashboard",
            Dashboard_RemoveConfirmationTitle: "Remove Dashboard",
            Dashboard_RemoveConfirmationMessage: "Are you sure you want to remove this dashboard?",
            Report_DeleteConfirmationMessage: "Are you sure you want to permanently delete this report?",
            Workbook_RemoveConfirmationMessage: "Are you sure you want to permanently remove this workbook?",
            Report_DeleteConfirmationTitle: "Delete Report",
            Workbook_RemoveConfirmationTitle: "Remove Workbook",
            Report_ExitOnDeletionConfirmationMessage: "Another user has deleted this report.",
            Report_ExitOnDeletionConfirmationTitle: "Report deleted",
            Report_ExitOnDeletionConfirmationButtonText: "Close report",
            Model_DeleteConfirmationMessage: "Are you sure you want to permanently delete this dataset?",
            Model_DeleteConfirmationTitle: "Delete Dataset",
            Tile_LoadingText: "LOADING...",
            Tile_ErrorText: "We can’t load the content of this tile now. Please try again later.",
            PinTile_Error: "Sorry, can't pin this visualization yet",
            PinTile_Error_DefaultDetails: "We're working on this feature. Please send us any other feedback about Power BI.",
            PinTile_Success: "Pinned to Dashboard",
            PinTile_Success_DefaultDetails: "The visualization has been pinned to your dashboard.",
            SaveReport_Success: "Report successfully saved.",
            SaveReport_Success_DefaultDetails: "This report has been saved.",
            SaveReport_Error: "An error occured during save.",
            SaveReport_Error_DefaultDetails: "This report currently cannot be saved.",
            DashboardReadOnlyWarning_Title: "Warning",
            DashboardReadOnlyWarning_Message: "This dashboard is read only, your changes will not be saved.",
            BingSearchMetricsContentProvider_EnterUrl: "Please enter a URL.",
            BingSearchMetricsContentProvider_SelectVisual: "Please select at least one visual.",
            BingSearchMetricsContentProvider_Title: "Bing Search Metrics",
            BingSearchMetricsContentProvider_Description: "Track and explore search trends from Bing for the topics, search terms, or websites that matter most to you.",
            BingSearchMetricsContentProvider_UrlPrompt: "Get metrics for URL:",
            BingSearchMetricsContentProvider_AddButtonText: "Add",
            BingNewsContentProvider_EnterSearchTerm: "Bing News Search:",
            BingNewsContentProvider_NoSearchTerm: "Please enter a search term.",
            BingNewsContentProvider_AddButtonText: "Add",
            BingNewsContentProvider_Title: "Bing News",
            BingNewsContentProvider_Description: "Track the latest news headlines on your dashboard with Bing News and stay up to date with news for the topics that matter most to you. Provide the search terms for topics you want to track and add a news tiles to the currently selected dashboard. Clicking on the listed news headlines opens the original articles so you can read further.",
            BingNewsTile_NoResults: "We didn't find any results",
            AdditionalErrorInfo_RequestIdText: "Request Id",
            AdditionalErrorInfo_ActivityIdText: "Activity Id",
            AdditionalErrorInfo_TimestampText: "Time",
            AdditionalErrorInfo_ErrorCodeText: "Status Code",
            AdditionalErrorInfo_VersionText: "Version",
            AdditionalErrorInfo_ClusterUriText: "Cluster URI",
            AdditionalErrorInfo_ecsCorrelationId: "ecsCorrelationId",
            ErrorMessage_FailedLoadGroup: "Failed to load group content",
            ErrorMessage_FailedLoadDashboards: "Failed to load all dashboards",
            ErrorMessage_FailedLoadContentProviders: "Failed to load content providers",
            ErrorTitle_FailedToStorePackage: "We couldn't import data from ",
            ErrorMessage_FailedToStorePackageExcel: "Your data might not be formatted properly. You'll need to edit your workbook in Excel and then import it again.",
            ErrorMessage_FailedToGetPackageModels: "Failed to store the data for new tile",
            ErrorMessage_DefaultTitle: "oops, something went wrong",
            ErrorMessage_FailedToOpenExcelFile: "This is not an Excel file or it is a password protected Excel file. If that's the case, try removing the password and uploading the file again.",
            ErrorMessage_NoConnectorAssociatedWithModel: "This workbook connects to an Analysis Services server, but the server has not yet been connected to Power BI. Contact your administrator to configure a Analysis Services Connector to connect the server and Power BI.",
            ErrorTitle_FailedToStorePackageExcel: "We couldn't find any data in your Excel workbook",
            NotificationMessage_ImportingPackage: "Importing data",
            NotificationMessage_ImportingMashUpPackage: "Connecting to data sources, please stay on this page",
            NotificationMessage_RetrievingAggregatedDataSourcesFromModel: "Retrieving data sources, please stay on this page",
            NotificationMessage_NewDashboardCreatedTitle: "Your new dashboard is ready",
            NotificationMessage_NewDashboardCreatedLinkDescription: "Take a look",
            DisplayUnitSystem_E3_LabelFormat: "{0}K",
            DisplayUnitSystem_E3_Title: "Thousands",
            DisplayUnitSystem_E6_LabelFormat: "{0}M",
            DisplayUnitSystem_E6_Title: "Millions",
            DisplayUnitSystem_E9_LabelFormat: "{0}bn",
            DisplayUnitSystem_E9_Title: "Billions",
            DisplayUnitSystem_E12_LabelFormat: "{0}T",
            DisplayUnitSystem_E12_Title: "Trillions",
            Percentage: "#,0.##%",
            Percentage1: "#,0.#%",
            ResyncSessionTile_Warning: "Warning",
            ResyncSessionToPreviousState_WarningMessage: "We were unable to restore your session to the latest state. We have restored your session to a previously saved state.",
            NewDashboard_Placeholder: "New Dashboard",
            NewDashboard_AddDashboardLabelText: "Add Dashboard",
            DashboardName_InvalidNameNotificationTitle: "Dashboard name invalid",
            DashboardName_EmptyWhitespaceErrorMessage: "Dashboard name cannot be empty or whitespaces.",
            DashboardName_DuplicatedNameErrorMessage: "Duplicate name exists.",
            SalesforceContentProvider_Landing_Title: "Salesforce",
            SalesforceContentProvider_Landing_Description_Top1: "With the Salesforce connector, you import and analyze your Salesforce data in Power BI. After connecting to your Salesforce account, you import a variety of data to explore and monitor in your Power BI dashboards.",
            SalesforceContentProvider_Landing_Description_Top2: "Based on the persona you select, Power BI automatically creates a dashboard with customized visualizations of your data. This dashboard provides immediate insights into your data.",
            SalesforceContentProvider_Landing_Description_Bottom: "You can also customize the dashboard, adding metrics that are important to you. All of your Salesforce data is updated automatically, ensuring you have the latest information available.",
            SalesforceContentProvider_Landing_MetricsHeading: "Sample metrics include:",
            SalesforceContentProvider_Landing_Metrics_OpportunitiesValue: "Value of opportunities in each stage",
            SalesforceContentProvider_Landing_Metrics_OpportunitiesCount: "Number of open opportunities",
            SalesforceContentProvider_Landing_Metrics_Accounts: "Top accounts by the total amount",
            SalesforceContentProvider_Landing_More1: "More about",
            SalesforceContentProvider_Landing_More2: " connecting to Salesforce data",
            SalesforceContentProvider_Landing_ConnectButton: "Connect",
            SalesforceContentProvider_Landing_Error_BrowserPopUpDisabled: "Browser pop-up is disabled. Please verify browser settings.",
            SalesforceContentProvider_Landing_Error_GetAuthEndpointFailed: "Unable to resolve Salesforce authentication endpoint. Please try again later.",
            SalesforceContentProvider_Landing_Error_ConfigurationOptionsUnavailable: "Unable to log in to Salesforce with provided credentials. Please make sure your Salesforce account allows API access and try again.",
            SalesforceContentProvider_Configuration_Title: "Import from Salesforce",
            SalesforceContentProvider_Configuration_Type_Templates: "Dashboards",
            SalesforceContentProvider_Configuration_Type_Reports: "Reports",
            SalesforceContentProvider_Configuration_OKButtonText: "OK",
            SalesforceContentProvider_Configuration_CancelButtonText: "Cancel",
            SalesforceContentProvider_Configuration_ConnectButton: "Connect",
            SalesforceContentProvider_Configuration_Dashboards_Title: "Select an out of box dashboard customized by persona:",
            SalesforceContentProvider_Configuration_Embedded_Title: "Salesforce",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Title: "Select an out of box dashboard designed to get the most of your Salesforce data",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Title: "Preview",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Description_SalesManager: "Sales Manager Dashboard contains lots of info that may be relevant to you if you were a sales manager. Included tiles:",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Description_SalesRep: "Sales Rep Dashboard contains lots of info that may be relevant to you if you were a sales representative. Included tiles:",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Metric_SaleOverTime: "Sale over time",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Metric_CustomerRepsInLocation: "Customer Reps in Location",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_Preview_Metric_TrendingSales: "Trending Sales",
            SalesforceContentProvider_Configuration_Embedded_Reports_Title: "Choose any Salesforce reports you would like to import into PowerBI.com.",
            SalesforceContentProvider_Configuration_Embedded_Reports_DateTime_Never: "Never",
            SalesforceContentProvider_Configuration_Dashboards_SalesManager: "Sales Manager Dashboard",
            SalesforceContentProvider_Configuration_Dashboards_SalesRep: "Sales Rep Dashboard",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_SalesManager: "Sales Manager",
            SalesforceContentProvider_Configuration_Embedded_Dashboards_SalesRep: "Sales Rep",
            SalesforceContentProvider_Configuration_Reports_NameHeader: "Name",
            SalesforceContentProvider_Configuration_Reports_LastViewedHeader: "Last Viewed",
            SalesforceContentProvider_Configuration_Reports_LastEditied: "Last Edited",
            SalesforceContentProvider_Configuration_Reports_Loading: "Loading your Salesforce reports...",
            SalesforceContentProvider_Configuration_Reports_NoneAvailable: "We didn’t find any reports in your Salesforce account. Please add some and then try again.",
            SalesforceContentProvider_Configuration_ReportsSelectionInfo_Single: "You've selected {0} report.",
            SalesforceContentProvider_Configuration_ReportsSelectionInfo_Multiple: "You've selected {0} reports.",
            SalesforceContentProvider_Configuration_Error_UnableToAccessSalesforceAccount: "Sorry, we weren't able to access your account. Please contact your administrator.",
            SalesforceContentProvider_Configuration_Error_ReportsLoadFailedGeneric: "Sorry, something went wrong while retrieving the list of your reports. Please try again later.",
            SalesforceContentProvider_Configuration_Error_Unknown: "Sorry, something went wrong. Please try again later.",
            MashUpContentProvider_Title: "MashUp Content Provider",
            MashUpContentProvider_Description: "Third party content providers for PowerBI.",
            MashUpContentProvider_ImportButtonText: "Connect",
            MashUpContentProvider_Error_MissingModelFromPackage: "Missing model from the package",
            MashUpContentProvider_RetailSalesSample_Title: "Retail Sales Sample",
            MashUpContentProvider_RetailSalesSample_Description1: "This industry sample dashboard and underlying report analyzes retail sales data of items sold across multiple stores and districts. The metrics compare this year's performance to last year's in these areas: sales, units, gross margin, and variance, as well as new store analysis. This is real data that has been anonymized.",
            MashUpContentProvider_Sample_Usage: "How to use this sample",
            MashUpContentProvider_Sample_DataReportDashboard: "This sample contains a dashboard, a report, and data.",
            MashUpContentProvider_NFL2014SeasonRecap_Description1: "Explore statistics from National Football League regular season and playoff games for the 2014 season. Statistics and key measures are provided game by game for each team and player, with additional data for fan attendance, game day weather, and player backgrounds. ",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted: "To get you started with the data, the sample provides these reports:",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted1: "Team weekly scoring recap with statistical leaders",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted2: "Game by game recap",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted3: "Passing, rushing, receiving, and defensive stat recaps",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted4: "Outcomes against the spread",
            MashUpContentProvider_NFL2014SeasonRecap_GetStarted5: "Player demographics",
            MashUpContentProvider_NFL2014SeasonRecap_ExploreFurtherDesc1: "Want to explore the data further? Go ahead! Ever wondered… ",
            MashUpContentProvider_NFL2014SeasonRecap_ExploreFurther1: "Which draft round produced the players who scored most touchdowns in the playoffs?",
            MashUpContentProvider_NFL2014SeasonRecap_ExploreFurther2: "How colleges rank based on the number of snaps their former players were on the field for?",
            MashUpContentProvider_NFL2014SeasonRecap_ExploreFurther3: "The average QB rating for quarterbacks playing in domed stadiums, when favored? ",
            MashUpContentProvider_NFL2014SeasonRecap_ExploreFurtherDesc2: "If so, then this data set is for you. The answers to these and many other questions are waiting in this data.",
            MashUpContentProvider_NFL2014SeasonRecap_Description2: "This copy of the sample is yours to experiment with. You can always connect to the sample again for a fresh copy.",
            MashUpContentProvider_Sample_Click: "Click ",
            MashUpContentProvider_Sample_Connect: "Connect ",
            MashUpContentProvider_Sample_ConnectSuffix: "above to get started. Power BI automatically creates a dashboard with visualizations based on the sample data.",
            MashUpContentProvider_Sample_InDashboard: "In the dashboard:",
            MashUpContentProvider_Sample_InDashboard1: "Try typing natural-language questions to explore the data. Pin the resulting visualizations and metrics to your dashboard.",
            MashUpContentProvider_Sample_InDashboard2: "Click a tile to explore the underlying data and reports.",
            MashUpContentProvider_Sample_InReport: "In the report:",
            MashUpContentProvider_Sample_Report1: "Change visualizations from one type to another.",
            MashUpContentProvider_Sample_Report2: "Move visualizations and add new ones.",
            MashUpContentProvider_Sample_Report3: "Pin interesting visualizations to the dashboard. ",
            MashUpContentProvider_Sample_Report4: "See what insights you can discover in the data.",
            MashUpContentProvider_Sample_Description3: "This copy of the sample is yours to experiment with. You can always connect to the sample again for another copy.",
            MashUpContentProvider_Sample_More: "About the sample",
            MashUpContentProvider_Sample_LearnMore: "More about the specifics of this sample",
            MashUpContentProvider_Sample_LearnMoreDescription: "and how you can enhance it.",
            MashUpContentProvider_GitHub_Description1: "Visualize different types of repository activity in Power BI by connecting to your GitHub data. You get a Power BI dashboard and reports with insights about how many commits, who contributes most, and at what time of day. Use the dashboard and reports provided, or customize them to highlight the information you care about most.",
            MashUpContentProvider_GitHub_Description2: "The data in Power BI is updated daily from GitHub according to a schedule that you control.",
            MashUpContentProvider_GitHub_More1: "More about",
            MashUpContentProvider_GitHub_More2: " connecting to GitHub Data",
            MashUpContentProvider_GoogleAnalytics_Description1: "Visualize data from your Google Analytics account directly in Power BI. Connect using your Google credentials and immediately gain insights from the sites that you’re tracking, such as the site traffic over the last 30 days or the days of the week your site is most popular. Data from the last 180 days is included and will automatically refresh each day. Existing reports provide a view of trends over time and can be customized based on the metrics important to you.",
            MashUpContentProvider_Marketo_Description1: "Bring rich marketing analytics directly into Power BI by connecting to Marketo. Extend the power of your Power BI dashboards with reports that provide rich insights into your buyer profiles, marketing campaign success rates, email engagement, and more. Use the dashboard and reports provided, or customize them to highlight the information you care about most.",
            MashUpContentProvider_Marketo_Description2: "The data in Power BI is automatically updated from Marketo, so you always see the latest data.",
            MashUpContentProvider_Marketo_More1: "More about",
            MashUpContentProvider_Marketo_More2: " connecting to Marketo Data",
            MashUpContentProvider_QuickBooks_Description1: "Get insights into your business by connecting Power BI with QuickBooks Online.  Connect Power BI to QuickBooks Online using you QuickBooks Online admin credentials to get a dashboard with insights to your business cash flow, profitability, customers, and more.  Use the default dashboard and reports, or customize them to highlight the information you care most about.",
            MashUpContentProvider_QuickBooks_Description2: "The data that appears in Power BI will be updated daily from QuickBooks Online based on the schedule that you set.",
            MashUpContentProvider_QuickBooks_Description3: "With the current version of the Power BI and QuickBooks Online integration, one QuickBooks Online admin user can connect and create the Power BI dashboard, which can then be shared with other Power BI users.",
            MashUpContentProvider_QuickBooks_More1: "More about",
            MashUpContentProvider_QuickBooks_More2: " connecting to QuickBooks Online data",
            MashUpContentProvider_Zendesk_Description1: "Analyze your Zendesk data in Power BI by connecting with your Zendesk admin account credentials. Power BI creates a dashboard with reports that provide insights about your ticket volumes and agent performance. Use the dashboard and reports provided, or customize them to highlight the information you care about most.",
            MashUpContentProvider_Zendesk_Description2: "Your data in the Zendesk service is transmitted to Power BI so that you can perform business analytics. This data is updated daily from Zendesk according to a schedule that you control.",
            MashUpContentProvider_Zendesk_More1: "More about",
            MashUpContentProvider_Zendesk_More2: " connecting to Zendesk data",
            MashUpContentProvider_VisualStudioOnline_Description1: "Visualize your source code activity in Power BI by connecting to Microsoft Visual Studio Online. The default dashboard and report provide at-a-glance views of git, pull request, and version control activity across the projects you configure for your account.  You can customize the dashboard and report to highlight the deeper insights you care about most.",
            MashUpContentProvider_VisualStudioOnline_Description2: "The data that appears in Power BI will be updated from Microsoft Visual Studio Online according to a schedule that you control.",
            MashUpContentProvider_VisualStudioOnline_More1: "More about",
            MashUpContentProvider_VisualStudioOnline_More2: " connecting to Visual Studio Online data",
            MashUpContentProvider_Sage_Description1: "The Sage One Accounting application allows you to import and analyze your financial and sales data in Power BI. After connecting to your Sage One account, you'll be able to import your data and view your company's performance using flexible Power BI dashboards. You’ll have immediate insight into your data to make informed business decisions.",
            MashUpContentProvider_Sage_Description2: "Customize the dashboards to include metrics that provide you with the information you need for your business, then slice, dice and analyze the data any way you like using the variety of tools available in Power BI. All your latest Sage One Accounting information will be updated automatically, ensuring you always have your finger on the pulse.",
            MashUpContentProvider_Sage_Title: "Sample metrics include:",
            MashUpContentProvider_Sage_Top4Sales: "Top 5 Items by Sales",
            MashUpContentProvider_Sage_Top5Customers: "Top 5 Customers by Sales",
            MashUpContentProvider_Sage_AndMore: "And More.",
            MashUpContentProvider_Sage_More1: "More about",
            MashUpContentProvider_Sage_More2: " connecting to Sage data",
            MashUpContentProvider_SendGrid_Description1: "With the SendGrid connector, monitor all your important email metrics in one dashboard using Power BI. After you connect with your SendGrid credentials, Power BI imports your email metrics into a single dashboard. From there, you can customize your dashboard and drill down for greater detail.",
            MashUpContentProvider_SendGrid_Description2: "With SendGrid advanced statistics enabled, you can monitor your most important metrics at a glance and measure user engagement for the emails you send.",
            MashUpContentProvider_SendGrid_Title: "Sample metrics include:",
            MashUpContentProvider_SendGrid_AggregatedStats: "Trend data for specified periods of time including requests, delivered, opens, clicks, unsubscribes, bounces, and spam reports",
            MashUpContentProvider_SendGrid_EmailMetricsByCategory: "By client, device, ISP, and browser",
            MashUpContentProvider_SendGrid_EmailMetricsByGeography: "By geographical location including country, state, and city",
            MashUpContentProvider_SendGrid_EmailMetricsByISP: "By email category (for example, user alerts, welcome emails, confirmations, or newsletters)",
            MashUpContentProvider_SendGrid_More1: "More about",
            MashUpContentProvider_SendGrid_More2: " connecting to SendGrid data",
            MashUpContentProvider_DynamicCRM_Description1: "Connect to your Microsoft Dynamics CRM account for immediate access to insights about your opportunities, accounts, and more. This connector is designed specifically for sales managers, providing details on sales performance, pipeline, and activities. The dashboard and report are built on top of a fully featured model, so you can explore and analyze your data as you need. Automatic refresh ensures you always see the latest data.",
            MashUpContentProvider_DynamicCRM_More1: "More about",
            MashUpContentProvider_DynamicCRM_More2: " connecting to Microsoft Dynamics CRM data",
            MashUpContentProvider_DynamicMarketing_Description1: "Use the Microsoft Dynamics Marketing Content Pack for Power BI to quickly build your marketing performance analytics. The content pack is designed specifically for marketing managers who focus on demand generation. Its components draw directly from your marketing database to provide reports on topics that include: marketing contacts and companies; territory analysis; campaign ownership and ROMI; lead pipeline, scoring and generation over time; segment analysis; and the performance of landing pages, marketing emails and tracked web pages. The reports and dashboards are built on top of a model that focuses on demand generation. The out-of-box reports and dashboards give you a great starting point for exploring and analyzing your marketing data.",
            MashUpContentProvider_PBIExecutionReview_Title: "PowerBI Execution Review",
            MashUpContentProvider_PBIExecutionReview_Description1: "Power BI enables your organization to publish sources of data that are relevant to your business. This sample includes a collection of data, reports and a dashboard.",
            MashUpContentProvider_PBIExecutionReview_Description2: "Click on the Connect button to get started. You will see a new dashboard automatically created with a collection of visuals based on the sample data. From the dashboard, you can click on a tile to explore the underlying data and reports. You will also be able to pin interesting visuals to the dashboard, that you can continue to monitor. Additionally you can use natural language to explore the data and pin interesting visuals and metrics to your dashboard.",
            MashUpContentProvider_MSITNTA_Title: "IT New Technology Adoption",
            MashUpContentProvider_MSITNTA_Description1: "Connect to Microsoft’s organizational data to gain insights into Microsoft IT Applications’ adoption of latest technologies across the portfolio of solutions Microsoft employees use. You will get a dashboard with a report backed by data from an on premise SQL Server Analysis Services instance.  You will be able to customize the dashboard adding metrics that are important to you.",
            MashUpContentProvider_MSITNTA_Support: "Questions on data and reports: ntacore@microsoft.com",
            MashUpContentProvider_WinUserVoice_Title: "Windows UserVoice",
            MashUpContentProvider_WinUserVoice_Description1: "Windows and Windows Phone UserVoice are feedback portals where Windows and Windows Phone users can submit feature suggestions, vote and/comment on those suggestions, and be heard! Through the portals, engineering teams can identify innovative features that our users crave.",
            MashUpContentProvider_WinUserVoice_Description2: "Connect to Microsoft’s organizational data of Windows and Windows Phone UserVoice feedback to get a quick and up-to-date view of the total users, total suggestions and total votes for both Windows UserVoice and Windows Phone UserVoice. You will get a dashboard with a report backed by data from an on premise SQL Server Analysis Services instance.  The reports include top categories for both portals, and trends in suggestions, votes and comments, during a given period of time. You will be able to customize the dashboard adding metrics that are important to you.",
            MashUpContentProvider_WinUserVoice_Support: "Questions on data and reports: winuservoice@microsoft.com",
            MashUpContentProvider_DCU_Title: "Digital Crimes Unit",
            MashUpContentProvider_DCU_Description1: "The Digital Crimes Unit (DCU) is an international legal and technical team working with partners, to help create a safe digital world. The DCU operates in conjunction with Internet Service Providers and Computer Emergency Response Teams to disrupt botnets from cybercriminals. These botnets can be involved in activities ranging from e-mail spam and click fraud to financial fraud and privacy invasion. After Microsoft disrupts these botnets, affected devices continue to call into Digital Crimes Unit allowing reporting and to notify those still affected by malware.",
            MashUpContentProvider_DCU_Description2: "Connect to Microsoft’s organizational data to gain insights into the summary of calls that are made to the DCU every day by devices still affected by several of the botnets that the Digital Crimes Unit has disrupted. You will get a dashboard with a report backed by data from an on premise SQL Server Analysis Services instance.  You will be able to customize the dashboard adding metrics that are important to you.",
            MashUpContentProvider_DCU_Support: "Questions on data and reports: DCU_BI_Status@microsoft.com",
            MashUpContentProvider_HR_Title: "People View",
            MashUpContentProvider_HR_Description1: "Connect to Microsoft’s organizational data to gain insights into Headcount, Average Directs and Anniversaries. You will get a dashboard with a report backed by data from an on premise SQL Server Analysis Services instance.  You will be able to customize the reports and dashboard adding metrics that are important to your group.",
            MashUpContentProvider_HR_Support: "Questions on data and reports: hrreport@microsoft.com",
            MashUpContentProvider_OrgApps_Legal: "This dataset is based on Microsoft confidential information and cannot be shared with external non-Microsoft parties under any circumstances",
            DashboardInvitationInvalid: "This invitation is invalid",
            DashboardInvitationRevoked: "The dashboard owner has removed access to this dashboard",
            DashboardInvitationExpired: "This invitation has expired",
            DashboardInvitationRemoteTenant: "The data for the invitation is not currently available",
            DashboardInvitationUnverifiedEmail: "This invitation was not intended for the current signed in user. Only the intended recipient can access this dashboard",
            DashboardInvitationInvalidTenant: "This invitation contains dashboards, reports or data outside your organization which cannot be viewed",
            DashboardInvitationInvalidParameters: "Invalid parameters specified",
            DashboardInvitationInvalidRequest: "There was an error processing the invitation",
            DashboardInvitationErrorTitle: "You do not have access to this dashboard",
            Sharing_WrongEmailAddresses: "Invalid list of email addresses. Please correct them",
            Sharing_EmailAddressExceeded: "You can only share to {{maxEmails}} contacts at a time, please remove some",
            Sharing_NoEmailAddressSpecified: "Please specify one or more e-mail addresses",
            Sharing_InvalidEntry: "Invalid entry",
            Sharing_MessageSizeExceeded: "Message is too long",
            Sharing_FailedToLoadInvitedUsers: "Failed to load invited users",
            Sharing_FailedToLoadUsers: "Failed to load dashboard users",
            Sharing_FailedToInvitedUsers: "Failed to send email to invite users",
            Sharing_FailedToCancelInvitation: "Failed to cancel invite",
            Sharing_FailedToDeleteDashboardUser: "Failed to delete dashboard user",
            Sharing_Status: "Status",
            Sharing_Success: "Success!",
            Sharing_Failure: "Failure",
            Sharing_EditDashboardUsersSuccess: "Your changes were successfully saved",
            Sharing_SendEmailSuccess: "Your dashboard has been shared successfully.",
            Sharing_UsersCanReshare: "Allow recipients to share your dashboard",
            Sharing_CancelInvite: "Cancel Invite",
            Sharing_StopSharing: "Stop Sharing",
            Sharing_InviteWillBeCancelled: "Invite will be cancelled",
            Sharing_UserDeleted: "Sharing will be removed",
            Sharing_Owner: "Owner",
            Sharing_DashboardOwner: "Dashboard owner is ",
            Sharing_OnlyWithYou: "Not shared with anyone",
            Sharing_SharedWith: "Shared with ",
            Sharing_EmailText: "Check out this dashboard I created to track our data.",
            Sharing_EnterEmailText: "Enter email addresses separated by ; or ,",
            Sharing_UsersCannotReshare: "You do not have sufficient permissions to share this dashboard",
            Sharing_SharedWithNOthers: " and {{numberOthers}} others",
            Sharing_FailedToEditPermissions: "Unable to edit permissions",
            Sharing_PermissionDisplay_CanView: "Can view",
            Sharing_PermissionDisplay_CanEdit: "Can edit",
            Sharing_PermissionOptions_StopSharing: "Stop sharing",
            Sharing_PermissionOptions_DisableReshares: "Disable reshares",
            Sharing_PermissionOptions_EnableReshares: "Enable reshares",
            Sharing_EmailDomainNotInTenant: "One or more e-mail addresses are outside your organization: {{invalidDomains}}",
            Sharing_DataAccessNotification: "Recipients will have access to the same data and reports as you have in this dashboard.",
            Sharing_DataAccessNotificationLink: "Learn more",
            Publish_SuccessMessage: 'The content pack "{0}" has been published to the organization content gallery.',
            Publish_Success: "Success!",
            Publish_Failure: "Failure",
            ActivityPane_ErrorMessage_FailedLoadPaneContent: "Failed to load activity pane data.",
            ActivityPane_ConnectionOptionsText: "Connection Options",
            ActivityPane_Explore: "EXPLORE",
            ActivityPane_CuratedContentReportTitle: "REPORTS",
            ActivityPane_CuratedContentDashboardTitle: "DASHBOARDS",
            ActivityPane_CuratedContentTileTitle: "TILES",
            ConnectionsSettingsDialog_Title_Text: "Connection Settings",
            ConnectionsSettingsDialog_Load_Content_Error_Text: "An error occured during getting data for connection settings dialog.",
            ConnectionsSettingsDialog_Refresh_Settings_Title_Text: "Refresh Settings",
            ConnectionsSettingsDialog_Refresh_Settings_Last_Updated_Title_Text: "Last updated: ",
            ConnectionsSettingsDialog_Delete_Connection_Title_Text: "Delete Connection",
            ConnectionsSettingsDialog_Delete_Connection_Content_Text: "Deleteing a connection cannot be undone.",
            ConnectionsSettingsDialog_Delete_Connection_Link_Text: "Delete Connection",
            ConnectionsSettingsDialog_Delete_Done_Button_Text: "Done",
            ConnectionsSettingsDialog_Delete_Confirmation_Text: "Are you sure you want to delete this connection?",
            ConnectionsSettingsDialog_Delete_Error_Text: "An error happened during deleting the package.",
            TableTotalLabel: "Total",
            ExpiredTokenError_Title: "Session has expired",
            ExpiredTokenError_Text: "Your login session has expired. Please refresh the page.",
            ExcelContentProvider_Landing_Title: "Excel Workbook",
            ExcelContentProvider_Landing_Description: "Unlocking the insights stored in your Excel workbooks couldn't be easier. By either directly uploading or connecting Power BI to your OneDrive account, you can begin to track your most important metrics on an interactive, real-time dashboard. Data is automatically refreshed from OneDrive, ensuring you have the latest information as you make decisions and take actions.",
            ExcelContentProvider_Landing_SupportedObjectsHeading: "Supported Excel objects:",
            ExcelContentProvider_Landing_Supported_1: "Worksheet tables",
            ExcelContentProvider_Landing_Supported_2: "Excel Data Model tables",
            ExcelContentProvider_Landing_Supported_3: "Power View sheets",
            ExcelContentProvider_Landing_WorksWellHeading: "Works well with:",
            ExcelContentProvider_Landing_WorksWell_1: "Excel 2007 workbooks and later (.xlsx and .xlsm files)",
            ExcelContentProvider_Landing_DownloadSample_1: "Need a workbook to try?",
            ExcelContentProvider_Landing_DownloadSample_2: "Download this one",
            ExcelContentProvider_Landing_LearnMore1: "More about",
            ExcelContentProvider_Landing_LearnMore2: " connecting to Excel data",
            ExcelContentProvider_Landing_ConnectButton: "Connect",
            QnAVisualization_ModelDetailsTitle: "Showing data from",
            QnAVisualization_ModelDetailsExploreLink: "explore more...",
            ModalDialogButtonText_Yes: "Yes",
            ModalDialogButtonText_No: "No",
            PowerBICompanionProvider_Landing_Title: "Power BI Designer File",
            PowerBICompanionContentProvider_Landing_Description1: "Upload reports and data created with Power BI Designer. With the Designer app, you unleash the full power of Power BI: easily create reports based on data from a wide range of data sources, shape and combine the data to fit your needs, and create stunning visualizations to make your data speak for itself.",
            PowerBICompanionContentProvider_Landing_Description2: "If you haven't tried it yet, ",
            PowerBICompanionContentProvider_Landing_Description3: "download Power BI Designer today",
            PowerBICompanionContentProvider_Landing_Description4: " and bring your Power BI reports and dashboards to the next level.",
            PowerBICompanionContentProvider_Landing_PowerBIDesignerData_1: "More about",
            PowerBICompanionContentProvider_Landing_PowerBIDesignerData_2: " connecting to Power BI Designer data",
            PowerBICompanionContentProvider_Landing_ConnectButton: "Connect",
            UploadPowerBICompanion_YourComputer: "Computer",
            UploadPowerBICompanion_Connect: "Connect",
            UploadPowerBICompanion_Cancel: "Cancel",
            UploadPowerBICompanion_LocalBrowse: "Browse",
            UploadPowerBICompanion_PlaceholderText: "Choose file",
            UploadPowerBICompanion_UnsupportedFileType: "Only .pbix files are supported",
            UploadPowerBICompanion_PublishInProgress: "Publishing selected file, please wait ...",
            UploadPowerBICompanion_PublishFileCanceled: ".pbix file publishing has been canceled",
            UploadPowerBICompanion_PublishFileFailed: "Failed to publish .pbix file",
            UploadPowerBICompanion_UploadLimit: "Only .pbix files up to 250 MB are supported.",
            UploadPowerBICompanion_TitleUpload: ".pbix file Upload",
            QnAVisualization_ModelsListDescription: "Here's the data used on this dashboard. To ask questions about this data try starting with words that appear in the data (such as column names or row values). Or, open any of the data sources to explore on your own...",
            QnAVisualization_NoModelMessage: "It looks like you haven't added any data to this dashboard.",
            QnAVisualization_NoSupportedModelMessage: "You're connected to data sources that are not supported by Q&A. Open any of the data sources to explore on your own...",
            QnAVisualization_NoModelDescription1: "Get data",
            QnAVisualization_NoModelDescription2: "or add tiles to this dashboard from data sources you've already connected to and Q&A will allow you to ask questions about this data.",
            QnAVisualization_DataSources: "Data sources",
            AddDashboard_ToolTip: "Add a dashboard",
            SettingsGroupsNames_General: "General",
            SettingsGroupsNames_Dashboards: "Dashboards",
            SettingsGroupsNames_Datasets: "Datasets",
            SettingsGroupsNames_Workbooks: "Workbooks",
            QnaTextBoxPlaceholder: "Ask a question about the data on this dashboard",
            QnaTextBoxLoadingPlaceholder: "LOADING...",
            InterpretRetryMaxCountExceededMessageText: "There was a timeout executing your query. Please try again later.",
            WorkbooksLoadingTimeoutTitle: "Please wait",
            WorkbooksLoadingTimeoutText: "Contacting Power BI Q&A service...",
            UtteranceFeedbackTooltip: "Help improve Q&A",
            UtteranceFeedbackDialogTitle: "Q&A Feedback",
            UtteranceFeedbackDialogPrompt: "Please rate how well Q&A helped find data to answer your question.",
            UtteranceFeedbackResultBad: "Way Off",
            UtteranceFeedbackResultMedium: "Got Close",
            UtteranceFeedbackResultGood: "Great",
            PackageOperationBlocked: "We can’t perform this operation right now because another delete or refresh is in progress. Try again later.",
            PackageRefreshUnknownFailure: "There was an unknown error while refreshing your data.",
            DataRefreshBlocked: "We cannot refresh your workbook right now. Try again after five minutes.",
            RefreshingData: "Refreshing data",
            PreparingForRefresh: "Preparing for refresh",
            TutorialPopup_GetStarted: "Get started",
            TutorialPopup_GotIt: "Got it",
            TutorialPopup_WelcomeButtonLabel: "Get Data",
            TutorialPopup_WelcomeTitle: "Welcome to Power BI",
            TutorialPopup_WelcomeText: "You're on your way to exploring your data and monitoring what matters. \\n Let's start by getting some data.",
            TutorialPopup_WelcomeTutorialLinkText: "View a Tutorial",
            TutorialPopup_WelcomeLearnMoreText: "Want to learn more first?",
            TutorialPopup_FindContentTitle: "Find your content",
            TutorialPopup_FindContentText: "Notice that your new dashboards, reports and datasets show up in this pane. Click one to take a look.",
            TutorialPopup_ConnectDataTitle: "Connect to your data",
            TutorialPopup_ConnectDataText: "Start by connecting your own data to Power BI. Click Get Data and select your source.",
            TutorialPopup_PinVisualTitle: "Pin to the dashboard",
            TutorialPopup_PinVisualText: "Want to monitor this chart? Click this button to pin the chart to your dashboard so you can easily monitor it.",
            TutorialPopup_CreateFirstChartTitle: "Create your first chart",
            TutorialPopup_CreateFirstChartText: "Drag a field onto the screen to start building a new chart.",
            TutorialPopup_CustomizeChartTitle: "Customize your chart",
            TutorialPopup_CustomizeChartText: "Drag fields to or from these buckets to customize your chart.",
            Role_DisplayName_Axis: "Axis",
            Role_DisplayName_Category: "Category",
            Role_DisplayName_Color: "Color",
            Role_DisplayName_Columns: "Columns",
            Role_DisplayName_Details: "Details",
            Role_DisplayName_Field: "Field",
            Role_DisplayName_Fields: "Fields",
            Role_DisplayName_Group: "Group",
            Role_DisplayName_Latitude: "Latitude",
            Role_DisplayName_Legend: "Legend",
            Role_DisplayName_Location: "Location",
            Role_DisplayName_Longitude: "Longitude",
            Role_DisplayName_MaxValue: "Maximum Value",
            Role_DisplayName_MinValue: "Minimum Value",
            Role_DisplayName_Rows: "Rows",
            Role_DisplayName_Series: "Series",
            Role_DisplayName_Size: "Size",
            Role_DisplayName_Slices: "Slices",
            Role_DisplayName_TargetValue: "Target Value",
            Role_DisplayName_Value: "Value",
            Role_DisplayName_Values: "Values",
            Role_DisplayName_X: "X Axis",
            Role_DisplayName_Y: "Y Axis",
            Role_DisplayName_Y2: "Y2",
            Aggregate_Sum: "Sum",
            Aggregate_Avg: "Average",
            Aggregate_Min: "Minimum",
            Aggregate_Max: "Maximum",
            Aggregate_CountNonNull: "Count",
            Aggregate_Count: "Count (Distinct)",
            FieldWell_Remove: "Remove Field",
            FieldWell_RemoveAggregate: "Do Not Summarize",
            DisplayName_Sum: "Sum of {0}",
            DisplayName_Avg: "Average of {0}",
            DisplayName_Count: "Count of {0}",
            DisplayName_Min: "Min of {0}",
            DisplayName_Max: "Max of {0}",
            DisplayName_CountNonNull: "Count of {0}",
            TaskPane_Fields: "Fields",
            TaskPane_Format: "Format",
            VisualizationPane_Title: "Visualizations",
            VisualizationPane_Filters: "Filters",
            VisualizationPane_Section_Fields: "Fields",
            VisualizationPane_Section_Format: "Format",
            VisualizationPane_Watermark: "Drag data fields here",
            AnalysisServerContentProvider_Title: "SQL Server Analysis Services Servers in your organization",
            AnalysisServerContentProvider_Description: "With Power BI, you can create dynamic reports and mashups with data and metrics you already have in your on-premises SQL Server Analysis Services solutions. To get started, click Connect, select a server, then select a data model.",
            AnalysisServerContentProvider_SupportedObjectsHeading: "Supported Analysis Services Servers: ",
            AnalysisServerContentProvider_Landing_Supported_1: "SQL Server 2012 and later Analysis Services Tabular models",
            AnalysisServerContentProvider_Landing_More_1: "More about",
            AnalysisServerContentProvider_Landing_More_2: " connecting to Analysis Services data",
            AnalysisServerContentProvider_ConnectButtonText: "Connect",
            AnalysisServer_ResourceName: "Name",
            AnalysisServer_ResourceDescription: "Description",
            AnalysisServer_ServerName: "Server Name",
            AnalysisServer_PublishedBy: "Published By",
            AnalysisServer_PublishedDate: "Published Date",
            AnalysisServer_DatabaseName: "Name",
            AnalysisServer_DatabaseType: "Type",
            AnalysisServer_ResourceDatabaseType_Model: "Model",
            AnalysisServer_ResourceDatabaseType_Perspective: "Perspective",
            AnalysisServer_Loading: "Loading...",
            AnalysisServer_LoadResourcesFailed: "Could not load list of resources.",
            AnalysisServer_LoadDatabasesFailed: "Could not load list of databases.",
            AnalysisServer_ResourcesEmpty: "No resources found.",
            AnalysisServer_DatabasesEmpty: "No databases found.",
            LearnMore_Title: "Learn to add your own data",
            LearnMore_Designer_Title: "Excel + Power BI Designer",
            LearnMore_Designer_Description: "Is Excel your go-to tool for working with data? Leverage your Excel expertise and investments by uploading your Excel workbooks to Power BI. Don't have the latest version of Excel? Download the optional, dedicated Power BI Designer to begin building your reports for Power BI.",
            LearnMore_Excel1: "More about",
            LearnMore_Excel2: " Excel 2013",
            LearnMore_PowerBI_Designer1: "More about",
            LearnMore_PowerBI_Designer2: " Power BI Designer",
            LearnMore_OrganizationalData_Title: "Organizational Data",
            LearnMore_OrganizationalData_Description: "Are you looking for your organization's data? With Power BI you can securely and easily connect to a wide range of data sources like SQL Server and SQL Server Analysis Services tabular models, both on premises and in the cloud.",
            LearnMore_OrganizationalData_Link1: "More about",
            LearnMore_OrganizationalData_Link2: " Organizational Data",
            LearnMore_DataAnywhere_Title: "Data From Anywhere",
            LearnMore_DataAnywhere_Description: "Are you a developer? Do you want to partner with us to extend Power BI to your data source? Use our developer APIs and tools to connect to your data sources with Power BI.",
            LearnMore_PowerBI_Developer_Center: "Power BI Developer Center",
            LearnMore_DataAnywhere_Link1: "More about",
            LearnMore_DataAnywhere_Link2: " Data From Anywhere",
            AnalysisServer_CustomErrorTechnicalDetails: "Technical details:",
            AnalysisServer_CustomErrorTechnicalDetails_ActivityId: "Activity Id: {0}",
            AnalysisServer_CustomErrorTechnicalDetails_RequestId: "Request Id: {0}",
            AnalysisServer_CustomErrorTechnicalDetails_Date: "Date: {0}",
            AnalysisServer_CustomErrorTechnicalDetails_ErrorText: "Error Text: {0}",
            AnalysisServer_CustomErrorTechnicalDetails_ClusterUriText: "Cluster URI: {0}",
            CollapsibleSectionControl_Title_More: "More",
            CollapsibleSectionControl_Title_Less: "Less",
            PinTile_SaveReportFirstDialog_CancelButtonText: "Cancel",
            PinTile_SaveReportFirstDialog_Message: "We'll need to point this tile to a report that has been saved at least once so it exists in our system.",
            PinTile_SaveReportFirstDialog_SaveButtonText: "Save, then pin",
            PinTile_SaveReportFirstDialog_Title: "Please save before pinning",
            Tile_LoseReportConnection: "Looks like the report no longer exists.",
            OAuth_Security_Error: "You need to use SSL (HTTPS) when you use OAuth 2.0 authentication.",
            ErrorDescription_StillSettingUpAccount: "We are still setting up your account. Please refresh the page in a few minutes. If this persists, please {0}contact us{1}.",
            ErrorTitle_StillSettingUpAccount: "Almost there",
            FieldListMenuItem_AddFilter: "Add Filter",
            FieldListMenuItem_Rename: "Rename",
            FieldListMenuItem_Delete: "Delete",
            FieldListMenuItem_Hide: "Hide",
            FieldListMenuItem_ViewHidden: "View Hidden",
            FieldListMenuItem_UnHideAll: "Unhide All",
            Field_Tooltip: "'{0}'[{1}]",
            AdvancedFilter_ApplyFilter: "Apply Filter",
            AdvancedFilter_Description: "Show items when the value:",
            FilterOperator_Is: "is",
            FilterOperator_GreaterThan: "is greater than",
            FilterOperator_GreaterThanOrEqual: "is greater than or equal to",
            FilterOperator_LessThan: "is less than",
            FilterOperator_LessThanOrEqual: "is less than or equal to",
            FilterOperator_IsNot: "is not",
            Logical_And_Operator: "And",
            Logical_Or_Operator: "Or",
            FilterPane_Page: "Page Level Filters",
            FilterPane_Visual: "Visual Level Filters",
            FilterPane_Advanced: "Advanced Filtering",
            TileEditor_DeleteTile: "Delete Tile",
            QueryFailed: "Query Failed",
            VisualContainer_UnableToFindVisualKey: "Visual not supported.",
            NavigationPane_DashboardsTitle: "Dashboards",
            NavigationPane_DatasetsTitle: "Datasets",
            NavigationPane_ReportsTitle: "Reports",
            PowerBI_Landing_Title: "Power BI",
            ShareView_ShareButtonText: "Share",
            ShareView_ShareDashboard: "Share Dashboard",
            ExplorationContainer_FailedToLoadReport: "Unable to load report",
            ExplorationContainer_FailedToLoadReport_DefaultDetails: "The requested report failed to load",
            FilterRestatement_All: "(All)",
            FilterRestatement_CompoundAnd: "{0} and {1}",
            FilterRestatement_CompoundOr: "{0} or {1}",
            FilterRestatement_Equal: "is {0}",
            FilterRestatement_GreaterThan: "is greater than {0}",
            FilterRestatement_GreaterThan_DT: "is after {0}",
            FilterRestatement_GreaterThanOrEqual: "is greater than or equal to {0}",
            FilterRestatement_GreaterThanOrEqual_DT: "is on or after {0}",
            FilterRestatement_LessThan: "is less than {0}",
            FilterRestatement_LessThan_DT: "is before {0}",
            FilterRestatement_LessThanOrEqual: "is less than or equal to {0}",
            FilterRestatement_LessThanOrEqual_DT: "is on or before {0}",
            FilterRestatement_NotEqual: "is not {0}",
            FilterOperator_Contains: "contains",
            FilterOperator_DoesNotContain: "does not contain",
            FilterOperator_DoesNotStartWith: "does not start with",
            FilterOperator_GreaterThanOrEqual_DT: "is on or after",
            FilterOperator_GreaterThan_DT: "is after",
            FilterOperator_IsBlank: "is blank",
            FilterOperator_IsNotBlank: "is not blank",
            FilterOperator_LessThanOrEqual_DT: "is on or before",
            FilterOperator_LessThan_DT: "is before",
            FilterOperator_StartsWith: "starts with",
            FilterRestatement_Contains: "contains '{0}'",
            FilterRestatement_DoesNotContain: "does not contain '{0}'",
            FilterRestatement_DoesNotStartWith: "does not start with '{0}'",
            FilterRestatement_StartWith: "starts with '{0}'",
            ErrorDialogOption_FailedToStorePackageExcel: "Learn how to solve this problem",
            ExternalContentViewer_Search: "Search",
            FilterPane_ClearFilter: "Clear filter",
            FilterPane_DeleteFilter: "Delete filter",
            ExplorationContainer_FailedToSaveReport: "Unable to save the report",
            ExplorationContainer_FailedToSaveReportDefaultDetails: "The server failed to save the report",
            MobileLandingPage_ContinueToPbiCom: "continue to powerbi.com",
            MobileLandingPage_DownloadApp: "Download the app",
            MobileLandingPage_SubTitle: "Bring your data to life",
            MobileLandingPage_Title: "Power BI",
            DataSourceSupport_LearnMore: "Learn More",
            DataSourceSupport_LearnMoreMessage: "about data sources that currently support refresh.",
            OnPremises_Admin_Error: "Power BI can't connect to the On-Premises Analysis Services Server {0}. The administrator of the server provided the following message : {1}.",
            ServerError_OnPremises_Admin_Error: "Power BI can't connect to the On-Premises Analysis Services Server {resourceName}. The administrator of the server provided the following message : {adminMessage}.",
            ServerError_HRESULT_0x82040136: "SQL Server Analysis Services Connector appears to be offline(error code: 0x82040136). Please contact your Server Administrator.",
            ServerError_HRESULT_0x82070BC4: "SQL Server Analysis Services Connector appears to be offline(error code: 0x82070BC4). Please contact your Server Administrator.",
            ServerError_HRESULT_0x82031772: "SQL Server Analysis Services Connector is unable to connect to the Analysis Server. Please make sure that the password in the Connector is up to date and the Analysis Server is running.",
            FilterRestatement_Comma: "{0}, {1}",
            QnAVisualization_EmptyResultTitleText: "Sorry, I wasn't able to find a good answer.",
            Visualization_NoData: "This result returned no data.",
            SettingsDataset_DisableEntireRefreshPageErrorMessage_OnPremAnalysisServicesScheduleInfo: "This dataset connects to a SQL Server Analysis Services Tabular database & is always up-to-date. You do not have to schedule a refresh on this dataset.",
            SettingsDataset_DisableEntireRefreshPageErrorMessage_SalesforceScheduleRefreshInfo: "Your Salesforce dataset is updated daily. You do not need to schedule a periodic refresh for this dataset.",
            ExplorationContainer_FailedToLoadModel: "Unable to Load the Model",
            ExplorationContainer_FailedToLoadModel_DefaultDetails: "Unable to retrieve the model information at this time",
            Dataset_Mashup_Desc_DynamicsCRM_0: "Dynamics CRM OData Service URL",
            Dataset_Mashup_Desc_DynamicsMarketing_0: "Dynamics Marketing OData Service URL (case sensitive)",
            Dataset_Mashup_Desc_GitHub_0: "Owner or organization of the GitHub repository",
            Dataset_Mashup_Desc_GitHub_1: "GitHub repository name",
            Dataset_Mashup_Desc_GoogleAnalytics_0: "Account Name (case sensitive) configured for your Google Analytics account",
            Dataset_Mashup_Desc_GoogleAnalytics_1: "Property Name (case sensitive)",
            Dataset_Mashup_Desc_GoogleAnalytics_2: "View Name (case sensitive)",
            Dataset_Mashup_Desc_Zendesk_0: "Enter the web address for your account",
            Dataset_Mashup_Name_DynamicsCRM_0: "Service URL",
            Dataset_Mashup_Name_DynamicsMarketing_0: "Service URL",
            Dataset_Mashup_Name_GitHub_0: "Repository Owner",
            Dataset_Mashup_Name_GitHub_1: "Repository",
            Dataset_Mashup_Name_GoogleAnalytics_0: "Account",
            Dataset_Mashup_Name_GoogleAnalytics_1: "Property",
            Dataset_Mashup_Name_GoogleAnalytics_2: "View",
            Dataset_Mashup_Name_Zendesk_0: "Zendesk URL",
            ServerError_HRESULT_0x82030FA4: "User name and password provided to the SQL Server Analysis Services Connector is no longer correct.",
            ServerError_HRESULT_0x82031774: "SQL Server Analysis Services Connector is unable to connect to the Analysis Server instance. Please make sure the Analysis Server instance is up and running.",
            ServerError_OnPremisesNoConnectorError: "Power BI service requires SQL Server Analysis Services Connector installed on-premises in order to be able to access the server {resourceName}.",
            ServerError_OnPremisesTechnicalDetailsOpenConnectionError: "Power BI service is unable to connect to SQL Server Analysis Services Connector. Please make sure the Connector is up and running.",
            ServerError_OnPremisesTechnicalDetailsConnectorError: "Connector Error Message",
            ServerError_OnPremisesTechnicalDetailsConnectorErrorCode: "Connector Error Code",
            ServerError_OnPremisesTechnicalDetailsDataSourceError: "Analysis Services Error",
            PBIDesigner_ContentProvider_LandingTitle: "Power BI Designer",
            DatasetParametersDialog_HelpMessage: "Need help entering this information? ",
            DatasetParametersDialog_LearnMore: "Learn More",
            ErrorDialogOption_FailedToStorePackage: "Learn More",
            ErrorMessage_FailedToStorePackage: "Make sure you're entering the information correctly.",
            SR_GatewayOffline_Details: "Ensure that the computer on which the gateway is installed is turned on and the gateway is running",
            SR_GatewayOffline_Heading: "! {0} failed to refresh. Your gateway on {1} is offline or can not be reached.",
            SR_Failure_Subject: "Refresh failed: {0} has failed to refresh",
            SR_Failure_DebugClusterName: "Cluster Name: {0}",
            SR_Failure_DebugCorrelationId: "Correlation ID: {0}",
            SR_Failure_DebugStartTimeStamp: "Refresh Start Time: {0}",
            SR_Failure_NextRefreshTime: "Next refresh for {0} is scheduled for {1}.",
            SR_Failure_DebugEndTimeStamp: "Refresh End Time: {0}",
            Explore_Section_Page: "Page {0}",
            MashUpContentProvider_Sample_Origin: "This sample is part of a series that illustrates how you can use Power BI with business-oriented data, reports, and dashboards. This is real data from Obvience (",
            MashUpContentProvider_Sample_OriginSuffix: ") that has been anonymized.",
            MashUpContentProvider_SupplierQualityAnalysisSample_Description1: "This industry sample dashboard and underlying report focus on one of the typical supply chain challenges — supplier quality analysis. Two primary metrics are at play in this analysis: total number of defects and the total downtime that these defects caused. This sample has two main objectives:",
            MashUpContentProvider_SupplierQualityAnalysisSample_Description2: "Understand who the best and worst suppliers are, with respect to quality.",
            MashUpContentProvider_SupplierQualityAnalysisSample_Description3: "Identify which plants do a better job finding and rejecting defects, to minimize downtime.",
            MashUpContentProvider_SupplierQualityAnalysisSample_Title: "Supplier Quality Analysis Sample",
            MashUpContentProvider_CustomerProfitabilitySample_Description1: "This industry sample dashboard and underlying report analyze a company that manufactures marketing materials.  This dashboard was created by a CFO to see key metrics about her 5 business unit managers (aka executives), products, customers, and gross margins (GM). At a glance she can see what factors are impacting profitability.",
            MashUpContentProvider_HumanResourcesSample_Description1: "This industry sample dashboard and underlying report analyze HR information. The HR department has the same reporting model across different companies, even when they differ by industry or size. This sample looks at new hires, active employees, and employees who left and tries to uncover any trends in the hiring strategy. Our main objectives are to understand:",
            MashUpContentProvider_HumanResourcesSample_Description2: "Who we hire.",
            MashUpContentProvider_HumanResourcesSample_Description3: "Biases in our hiring strategy.",
            MashUpContentProvider_HumanResourcesSample_Description4: "Trends in voluntary separations.",
            MashUpContentProvider_ITSpendAnalysisSampleSample_Description1: "This industry sample dashboard and underlying report analyze the planned vs. actual costs of the IT department of a company. This comparison helps us understand how well the company planned for the year and allows us to investigate areas with huge deviations from the plan. The company in this example goes through a yearly planning cycle, and then quarterly it produces a new Latest Estimate (LE) to help analyze changes in IT spend over the fiscal year.",
            MashUpContentProvider_OpportunityTrackingSample_Description1: "This industry sample dashboard and underlying report analyze a software company that has 2 sales channels: direct and partner.  The Sales Manager created this dashboard to track opportunities and revenue by region, deal size, and channel. The Sales Manager relies on 2 measures of revenue:",
            MashUpContentProvider_OpportunityTrackingSample_Description2: "Revenue – this is a salesperson’s estimate of what the company’s revenue will be.",
            MashUpContentProvider_OpportunityTrackingSample_Description3: "Factored Revenue – this is calculated as Revenue X Probability % and is generally accepted as being a more-accurate predictor of actual sales revenue.  Probability is determined by the deal’s current Sales Stage.",
            MashUpContentProvider_ProcurementAnalysisSample_Description1: "This industry sample dashboard and underlying report analyze a manufacturing company’s spending on vendors by category and location, and lets us explore the following areas:",
            MashUpContentProvider_ProcurementAnalysisSample_Description2: "Who the top vendors are",
            MashUpContentProvider_ProcurementAnalysisSample_Description3: "What categories we spend most on",
            MashUpContentProvider_ProcurementAnalysisSample_Description4: "Which vendors give us the highest discount and when",
            MashUpContentProvider_SalesAndMarketingSample_Description1: "This industry sample dashboard and underlying report analyze a manufacturing company named VanArsdel Ltd.  This dashboard was created by the VanArsdel Chief Marketing Officer (CMO) to keep an eye on the industry and his company’s market share, product volume, sales, and sentiment.",
            FeedbackTicket_Message: "Microsoft uses third-party services to deliver a great feedback experience. By clicking Next, you agree to the {{startLink}} UserVoice Terms of Service and Privacy Policy {{endLink}} and Microsoft will contact you by email associated with your organizational account",
            PowerBI_Build_Version_Text: "Version",
            PowerBI_Copyright_Text: "Microsoft Corporation {{year}}. All rights reserved.",
            SupportTicket_Message: "Microsoft uses third-party services to deliver a great support experience. By clicking Next, you agree to the {{startLink}} UserVoice Terms of Service and Privacy Policy {{endLink}} and Microsoft will contact you by email associated with your organizational account",
            Sort_SortBy: "Sort By",
            Remove_visual: "Remove",
            VisualTitle_By_Template: "{0} by {1}",
            VisualTitle_And_Template: "{0} and {1}",
            BarChart_ToolTip: "Bar Chart",
            Card_ToolTip: "Card",
            ClusteredBarChart_ToolTip: "Clustered Bar Chart",
            ClusteredColumnChart_ToolTip: "Clustered Column Chart",
            ColumnChart_ToolTip: "Column Chart",
            Funnel_ToolTip: "Funnel",
            Gauge_ToolTip: "Gauge",
            HundredPercentStackedBarChart_ToolTip: "100% Stacked Bar Chart",
            HundredPercentStackedColumnChart_ToolTip: "100% Stacked Column Chart",
            LineChart_ToolTip: "Line Chart",
            Map_ToolTip: "Map",
            Matrix_ToolTip: "Matrix",
            MultiRowCard_ToolTip: "Multi Row Card",
            PieChart_ToolTip: "Pie Chart",
            ScatterChart_ToolTip: "Scatter Chart",
            Table_ToolTip: "Table",
            Treemap_ToolTip: "Treemap",
            Delete_ToolTip: "Delete",
            Remove_ToolTip: "Remove Visual",
            PinVisual_ToolTip: "Pin Visual",
            ShowConversionOptions_ToolTip: "Show Conversion Options",
            Sort_ToolTip: "Sort",
            NavigationPane_GroupsTitle_HasGroups: "GROUPS",
            NavigationPane_CreateGroup: "Create Group",
            NavigationPane_NoGroupText: "You have no groups",
            Waterfall_TotalLabel: "Total",
            Visual_DataPoint: "Data Points Colors",
            GeotaggingString_Address: "Address",
            GeotaggingString_Addresses: "Addresses",
            GeotaggingString_Cities: "Cities",
            GeotaggingString_City: "City",
            GeotaggingString_Code: "Code",
            GeotaggingString_Continent: "Continent",
            GeotaggingString_Continents: "Continents",
            GeotaggingString_Counties: "Counties",
            GeotaggingString_Countries: "Countries",
            GeotaggingString_Country: "Country",
            GeotaggingString_County: "County",
            GeotaggingString_Latitude: "Latitude",
            GeotaggingString_Longitude: "Longitude",
            GeotaggingString_Place: "Place",
            GeotaggingString_Places: "Places",
            GeotaggingString_Post: "Post",
            GeotaggingString_Province: "Province",
            GeotaggingString_Provinces: "Provinces",
            GeotaggingString_State: "State",
            GeotaggingString_States: "States",
            GeotaggingString_Street: "Street",
            GeotaggingString_Streets: "Streets",
            GeotaggingString_Town: "Town",
            GeotaggingString_Towns: "Towns",
            GeotaggingString_Village: "Village",
            GeotaggingString_Villages: "Villages",
            GeotaggingString_Zip: "Zip",
            GeotaggingString_Latitude_Short: "Lat",
            GeotaggingString_Longitude_Short: "Lon",
            GeotaggingString_PostalCode: "Postal Code",
            GeotaggingString_PostalCodes: "Postal Codes",
            GeotaggingString_ZipCode: "Zip Code",
            GeotaggingString_ZipCodes: "Zip Codes",
            GeotaggingString_Territories: "Territories",
            GeotaggingString_Territory: "Territory",
            Visual_Legend: "Legend",
            Visual_CategoryAxis: "Category Axis",
            Visual_CategoryAxis_Scalar: "Scalar Axis",
            Visual_Fill: "Fill",
            Visual_LegendPosition: "Legend Position",
            Visual_Show: "Show",
            NavigationPane_Groups_MyWorkspace: "My Workspace",
            NavigationPane_GroupIconTitle: "Group",
            Landing_DefaultReportName: "Untitled",
            Slicer_ToolTip: "Slicer",
            WaterfallChart_ToolTip: "Waterfall Chart",
            SqlAzureDbContentProvider_DatabaseName: "Database:",
            SqlAzureDbContentProvider_Description1: "Azure SQL Database is a fully managed relational database-as-a-service that makes tier-1 capabilities easily accessible. SQL Database supports massive scale-out, predictable performance, flexible manageability and includes built-in high availability and self-management for near-zero maintenance.",
            SqlAzureDbContentProvider_Description2: "With Power BI, you can create dynamic reports, mashups with data and metrics you already have in your Azure SQL Database. To get started, we need some information to connect to your database.",
            SqlAzureDbContentProvider_Description3: 'NOTE: To allow Power BI to connect to your Azure SQL Database, please make sure firewall rules for the database are configured to "Allow access to Azure services".',
            SqlAzureDbContentProvider_Description4: "More about",
            SqlAzureDbContentProvider_Error1: "Please enter Server.",
            SqlAzureDbContentProvider_Error2: "Please enter Database.",
            SqlAzureDbContentProvider_Error3: "Please enter User.",
            SqlAzureDbContentProvider_Error4: "Please enter Password.",
            SqlAzureDbContentProvider_Landing_ConnectButton: "Connect",
            SqlAzureDbContentProvider_Password: "Password:",
            SqlAzureDbContentProvider_ServerName: "Server:",
            SqlAzureDbContentProvider_Title: "Azure SQL Database",
            SqlAzureDbContentProvider_UserName: "User:",
            SqlAzurePdwContentProvider_DatabaseName: "Database:",
            SqlAzurePdwContentProvider_Description1: "Drive immediate insight from all of your data using the elastic scale SQL Data Warehouse with Direct Connect. Seamlessly combine a petabyte or more of relational data with non-relational Hadoop data using Polybase for a full view of your data. To get started, simply click Connect.",
            SqlAzurePdwContentProvider_Description3: "More about",
            SqlAzurePdwContentProvider_Description2: "With Power BI, you can create dynamic reports, mashups with data and metrics you already have in your Azure SQL Data Warehouse. To get started, we need some information to connect to your database.",
            SqlAzurePdwContentProvider_Error1: "Please enter Server.",
            SqlAzurePdwContentProvider_Error2: "Please enter Database.",
            SqlAzurePdwContentProvider_Error3: "Please enter User.",
            SqlAzurePdwContentProvider_Error4: "Please enter Password.",
            SqlAzurePdwContentProvider_Password: "Password:",
            SqlAzurePdwContentProvider_ServerName: "Server:",
            SqlAzurePdwContentProvider_Title: "Azure SQL Data Warehouse",
            SqlAzurePdwContentProvider_UserName: "User:",
            SqlAzurePdwontentProvider_Landing_ConnectButton: "Connect",
            ComboChart_ToolTip: "Combo Chart",
            Role_ComboChart_Category: "Shared Axis",
            Role_ComboChart_Series: "Column Series",
            Role_ComboChart_Y: "Column Values",
            Role_ComboChart_Y2: "Line Values",
            Dataset_Mashup_Desc_Marketo_0: "Marketo REST API endpoint",
            Dataset_Mashup_Name_Marketo_0: "Endpoint",
            TopNav_Download: "Download",
            TopNav_Feedback: "Feedback",
            TopNav_Help: "Help & Support",
            Tooltip_HighlightedValueDisplayName: "Highlighted",
            ReportAppBar_SwitchModeButton: "PRESENTATION MODE",
            SqlAzureDbContentProvider_Description5: "direct connect with Azure SQL Database",
            SqlAzurePdwContentProvider_Description4: "direct connect with Azure SQL Data Warehouse",
            MashupContentProvider_SQLDBAuditing_More2: " connecting to SQL Database Auditing data",
            MashupContentProvider_Moreabout: "More about",
            MashUpContentProvider_SQLDBAuditing_Description1: "Azure SQL Database Auditing",
            MashUpContentProvider_SQLDBAuditing_Description2: " tracks database events and writes audited events to an audit log in your Azure Storage account. Auditing is generally available for Basic, Standard, and Premium service tiers.",
            MashUpContentProvider_SQLDBAuditing_Description3: "This content pack can help maintain regulatory compliance, understand database activity, and gain insight into discrepancies and anomalies that could indicate business concerns or suspected security violations.",
            MashUpContentProvider_SQLDBAuditing_Description4: "The content pack imports data from all tables that contain “AuditLogs” in their name and append it to a single data model table named “AuditLogs”.",
            MashUpContentProvider_Twilio_Description1: "Visualize data from your Twilio account directly in Power BI. Connect using your Twilio credentials and immediately gain insights from your Twilio usage, such as your calls and messages over time, your most active Twilio phone numbers, amount of messages and calls sent and received and many more. A full dashboard will be created for you to monitor your data as well as a rich report to further explore your data.",
            MashUpContentProvider_Twilio_More2: " connecting to Twilio data",
            Publish_ChooseContentPackAccess: "Choose who will have access to this content pack:",
            Publish_ContentPack: "Publish Content Packs",
            Publish_ContentPackCancelButton: "Cancel",
            Publish_ContentPackName: "Name",
            Publish_ContentPackPublishButton: "Publish",
            Publish_ContentPackPublishedTo: "Published To",
            Publish_CreateContentPack: "Create Content Pack",
            Publish_DataAccessNotification: "The content pack will be available in your organization's content gallery.",
            Publish_DataAccessNotificationLink: "Learn more",
            Publish_DeleteContentPack: "Delete",
            Publish_Description: "Description",
            Publish_EditContentPack: "Edit",
            Publish_Group: "Specific Groups",
            Publish_Organization: "My Entire Organization",
            Publish_Title: "Title",
            Publish_ViewContentPack: "View Content Packs",
            TopNav_SettingsMenu_CreateContentPack: "Create Content Pack",
            Publish_DescriptionText: "This is the People View content pack created for anyone in the company and get business insights. If you need help, contact hrbisupport.com.",
            Publish_EnterTitleText: "People View",
            Publish_Dashboards: "Dashboards",
            TopNav_Settings: "Settings",
            Publish_Datasets: "Datasets",
            Publish_ImageText: "Image:",
            Publish_ItemsToPublish: "Select items to publish",
            Publish_Reports: "Reports",
            Publish_UpdateContentPackInfo: "You've made changes to a dashboard or report from this content pack that's published to 'My Entire Organization'. In order for others to see your changes, click here to update",
            Publish_UploadImage: "Upload",
            Publish_UploadText: "an image or company logo",
            Publish_UseDefaultImage: "Use Default",
            Publish_GroupsText: "Enter group names separated by ; or ,",
            GroupNavigationPaneContextMenuItem_Calendar: "Calendar",
            GroupNavigationPaneContextMenuItem_Conversations: "Conversations",
            GroupNavigationPaneContextMenuItem_EditGroup: "Edit Group",
            GroupNavigationPaneContextMenuItem_Files: "Files",
            GroupNavigationPaneContextMenuItem_LeaveGroup: "Leave Group",
            GroupNavigationPaneContextMenuItem_Members: "Members",
            GroupNavigationPaneContextMenuItem_Notebook: "Notebook",
            GroupNavigationPaneContextMenuItem_Subscribe: "Subscribe",
            Groups_LessButtonText: "Less",
            Groups_MoreButtonText: "More",
            NotificationMessage_ImportingPackage_AdditionalMessage: "This could take a little while.",
            GetData_Connect: "Connect",
            GetData_SelectAFileFromYourOneDrivePersonalAccount: "Select a file from your OneDrive Personal account",
            GetData_SignInToYourOneDrivePersonalAccount: "Sign in to your OneDrive personal account",
            GetData_Cancel: "Cancel",
            GetData_Uploading: "Uploading",
            GetData_SalesforceEmbeddedConfigurationDescription: "Get the most from your Salesforce data by letting Power BI build a custom dashboard. You also have the option to import your Salesforce reports.",
            GetData_SelectADashboardBasedOnYourRoleInYourOrganization: "Select a dashboard based on your role in your organization.",
            GetData_SelectYourSalesforceData: "Select Your Salesforce Data",
            GetData_SignInToYourSalesforceAccount: "Sign in to your Salesforce account",
            GetData_ConnectTo: "Connect to",
            GetData_DataInPowerBIFollowThePromptsBelow: "data in Power BI, follow the prompts below.",
            GetData_LearnMore: "Learn More",
            GetDataSeeMoreOptions: "See more options.",
            GetData_LearnToAddTileCategoryDescription: "Select your role within your organization to learn more about getting your data into Power BI.",
            GetData_ToStartUsingYour: "To start using your",
            MashUpContentProvider_AppFigures_Description1: "Connect and explore your appFigures data in Power BI. The out of box dashboard allows you to monitor and explore data about all your apps in a single place. For each app you can track the number of downloads, including how they’re being rated and which countries are using your app. You can also track in-app purchases and ad clicks, to fully understand the revenue from your apps.",
            MashUpContentProvider_AppFigures_More2: " connecting to appFigures data",
            GetData_ChooseDataSource: "Choose a Data Source",
            GetData_ConnectYourData: "Connect Your Data",
            GetData_Dashboard: "Dashboard",
            GetData_Files: "Files",
            GetData_FilesDesc: "Import data from Excel workbooks or Power BI Designer files.",
            GetData_Get: "Get",
            GetData_HelpfulLinks: "Explore other options:",
            GetData_AddYourContent: "Add Your Content",
            GetData_MyOrganization: "My Organization",
            GetData_Or: "or",
            GetData_Samples: "Samples",
            GetData_Services: "Services",
            GetData_ServicesDesc: "Connect to online services you use and we’ll create dashboards and reports for you.",
            GetData_ViewTutorial: "Tutorial",
            GetData_WelcomeDescLine1: "You’re on your way to exploring your data and monitoring what matters.",
            GetData_WelcomeDescLine2: "Let's start by getting some data.",
            GetData_WelcomeTitle: "Welcome to Power BI",
            GetData_MyOrganizationDesc: "Get content that other people in your organization have published.",
            GetData_ConnectData: "Connect your data",
            GetData_NeedHelpConnecting: "Need help connecting?",
            GetData_BigDataAndMore: "Databases & More",
            GetData_LearnToAddData: "Learn to Add Data",
            GetData_SubmitAnIdea: "Submit an Idea",
            GetData_DontSeeWhatYoureLookingFor: "Don't see what you're looking for?",
            GetData_ConnectToPartner: "Connect to a partner",
            GetData_ConnectToPartnerBlurb: "Don’t see the data you care most about in Power BI? We have a global network of Power BI partners ready to help. ",
            GetData_MyWorkspace: "My Workspace",
            GetData_GetData: "Get Data",
            GetData_MsftDigitalCrimesUnit: "The Digital Crimes Unit is an international legal and technical team working with partners, to help create a safe digital world. The DCU operates in conjunction with Internet Service Providers and Computer Emergency Response Teams to disrupt botnets from cybercriminals. These botnets can be involved in activities ranging from e-mail spam and click fraud to financial fraud and privacy invasion. This dashboard shows a summary of the calls that are made every day by devices still affected by several of the botnets that the Digital Crimes Unit has disrupted.",
            GetData_AzureSqlDatabaseWithLiveConnect: "Azure SQL Database is a fully managed relational database-as-a-service that makes tier-1 capabilities easily accessible. SQL Database supports massive scale-out, predictable performance, flexible manageability and includes built-in high availability and self-management for near-zero maintenance. With Power BI, you can create dynamic reports, mashups with data and metrics you already have in your Azure SQL Database.",
            GetData_AzureSqlDatawarehouseLiveConnect: "Gain immediate insights from your data using the elastic scale SQL Data Warehouse with direct connect. Seamlessly combine a petabyte or more of relational data with non-relational Hadoop data using Polybase for a full view of your data. To get started, simply click Connect.",
            GetData_BingNews: "Track the latest news headlines on your dashboard with Bing News and stay up to date with news for the topics that matter most to you. Provide the search terms for topics you want to track and add a news tiles to the currently selected dashboard. Clicking on the listed news headlines opens the original articles so you can read further.",
            GetData_GitHub: "Visualize different types of repository activity in Power BI by connecting to your GitHub data. With the GitHub content pack, you get a Power BI dashboard and reports with insights about how many commits, who contributes most, and at what time of day. Use the dashboard and reports as provided, or customize them to highlight the information you care about most.<br/><br/>The data in Power BI is updated daily from GitHub according to a schedule that you control.",
            GetData_GoogleAnalytics: "Visualize data from your Google Analytics account directly in Power BI. Gain insights from the sites that you’re tracking, such as the site traffic over the last 30 days, or the days of the week when your site is most popular. The content pack includes data from the last 180 days. Use the reports that Power BI creates as is, or customize them for the metrics important to you.",
            GetData_HideDetails: "Hide details.",
            GetData_Marketo: "Bring rich marketing analytics directly into Power BI with the Marketo content pack. Your Marketo dashboards and reports in Power BI provide rich insights into your buyer profiles, marketing campaign success rates, email engagement, and more. Use the dashboard and reports as provided, or customize them to highlight the information you care about most.",
            GetData_MicrosoftDynamicsCrm: "Connect to your Microsoft Dynamics CRM account for access to insights about your opportunities, accounts, and more. This content pack is designed specifically for sales managers, providing details on sales performance, pipeline, and activities. The dashboard and report are built on top of a fully featured model, so you can explore and analyze your data as you need.",
            GetData_MicrosoftDynamicsMarketing: "With the Microsoft Dynamics Marketing content pack for Power BI, quickly build your marketing performance analytics. The content pack is designed specifically for marketing managers who focus on demand generation. Its components draw directly from your marketing database to provide reports on marketing contacts, lead pipeline, segment analysis, and more. Power BI automatically creates reports and dashboards that give you a great starting point for exploring and analyzing your marketing data.",
            GetData_MsftItNewTechnologyAdoption: "This dashboard and report provides a glimpse into the complexity of adopting the latest technologies across more than 50k servers across the world, managed by IT to run the Application Portfolios that Microsoft employees use every day. These technologies span OnPrem, Azure (IaaS & PaaS), Cloud SaaS, Marketplaces, and modern UIs (across phones, tablets, and the browser). You can explore the data model and add your own analytic charts while you explore for insights. The data refreshes daily.",
            GetData_MsftPeopleView: "People View provides a collection of data, reports and a dashboard around people at Microsoft, including such topics as Headcount, Average Directs and Anniversaries. From the dashboard, you can explore the underlying data model and add new interesting visuals while you gain deeper insights. The data refreshes daily.",
            GetData_MsftWindowsUservoice: "This dashboard provides a quick and up-to-date view of the total users, suggestions and votes for both Windows and Windows Phone UserVoice.  It also lists the top categories, trends in suggestions, votes and comments, during any given period of time.  The data refreshes daily.  This is for internal Microsoft use only and cannot be shared outside of Microsoft without written approval from OSG. For more information, please contact winuservoice@microsoft.com.",
            GetData_QuickbooksOnline: "Get insights into your business by connecting to QuickBooks Online with this Power BI content pack. With your QuickBooks Online admin credentials, Power BI automatically creates a dashboard with insights into your business cash flow, profitability, customers, and more. Use the default dashboard and reports, or customize them to highlight the information you care about most.",
            GetData_Salesforce: "Import and analyze your Salesforce data in Power BI. After connecting to your Salesforce account, you import a variety of data to explore and monitor in your Power BI dashboards. Based on the persona you select, Power BI automatically creates a dashboard with customized visualizations of your data.",
            GetData_SeeDetails: "See details.",
            GetData_Sendgrid: "With the SendGrid content pack, monitor all your important email metrics in one dashboard using Power BI. Drill into detailed reports that you can customize as needed. With SendGrid advanced statistics enabled, monitor your most important metrics at a glance and measure user engagement for the emails you send.",
            GetData_SqlServerAnalysisServices: "With Power BI, you can create dynamic reports and mashups with data and metrics you already have in your on-premises SQL Server Analysis Services solutions. To get started, click Connect, select a server, then select a data model.<br/><br/>Supported Analysis Services Servers:<br/>	- SQL Server 2012 and later Analysis Services Tabular models",
            GetData_VisualStudioOnline: "Visualize your source code activity in Power BI by connecting to Microsoft Visual Studio Online. The Power BI content pack automatically creates a dashboard and report with at-a-glance views of Git, pull request, and version control activity across the projects you configure for your account.  You can customize the dashboard and report to highlight the deeper insights you care about most.<br/><br/>The data that appears in Power BI will be updated from Microsoft Visual Studio Online according to a schedule that you control.",
            GetData_Zendesk: "Analyze your Zendesk data in Power BI with the Zendesk content pack. Connect with your Zendesk admin account credentials, and Power BI creates a dashboard with reports that provide insights about your ticket volumes and agent performance. Use the dashboard and reports provided, or customize them to highlight the information you care about most.",
            GetData_Appfigures: "Connect and explore your appFigures data in Power BI. The appFigures content pack automatically creates a dashboard where you can monitor and explore data about all your apps in a single place. For each app you can track the number of downloads, including how they’re being rated and which countries are using your app. You can also track in-app purchases and ad clicks, to fully understand the revenue from your apps.",
            GetData_SqlDbAuditing: "Azure SQL Database Auditing tracks database events and writes audited events to an audit log in your Azure Storage account. The Power BI content pack reports over the audit log data, and can help you maintain regulatory compliance and understand database activity. Gain insights into discrepancies and anomalies that could indicate business concerns or suspected security violations,  using the dashboard and reports that Power BI creates automatically.",
            GetData_Twilio: "Visualize data from your Twilio account directly in Power BI. Connect using your Twilio credentials and immediately gain insights from your Twilio usage, such as your calls and messages over time, your most active Twilio phone numbers, amount of messages and calls sent and received and much more. The Power BI content pack creates a full dashboard for you to monitor your data, plus a rich report to explore your data further.",
            GetData_NoSearchResultsFound: "No search results found.",
            GetData_CustomerProfitabilitySample: "This industry sample dashboard and underlying report analyze a company that manufactures marketing materials. This dashboard was created by a CFO to see key metrics about her 5 business unit managers (aka executives), products, customers, and gross margins (GM). At a glance she can see what factors are impacting profitability. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_HumanResourcesSample: "This industry sample dashboard and underlying report analyze HR information. The HR department has the same reporting model across different companies, even when they differ by industry or size. This sample looks at new hires, active employees, and employees who left and tries to uncover any trends in the hiring strategy. Our main objectives are to understand who we hire, biases in our hiring strategy, and trends in voluntary separations. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_ITSpendAnalysisSample: "This industry sample dashboard and underlying report analyze the planned vs. actual costs of the IT department of a company. This comparison helps us understand how well the company planned for the year and allows us to investigate areas with huge deviations from the plan. The company in this example goes through a yearly planning cycle, and then quarterly it produces a new Latest Estimate (LE) to help analyze changes in IT spend over the fiscal year. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_OpportunityAnalysisSample: "This industry sample dashboard and underlying report analyze a software company that has 2 sales channels: direct and partner. The Sales Manager created this dashboard to track opportunities and revenue by region, deal size, and channel. The Sales Manager relies on 2 measures of revenue, revenue and factored revenue. Revenue is a salesperson’s estimate of what the company’s revenue will be. Factored Revenue is calculated as Revenue X Probability % and is generally accepted as being a more-accurate predictor of actual sales revenue. Probability is determined by the deal’s current Sales Stage. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_ProcurementAnalysisSample: "This industry sample dashboard and underlying report analyze a manufacturing company’s spending on vendors by category and location, and lets us explore the following areas: who the top vendors are, what categories we spend most on, which vendors give us the highest discount, and when those discounts occur. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_Retail_Analysis_Sample: "This industry sample dashboard and underlying report analyzes retail sales data of items sold across multiple stores and districts. The metrics compare this year's performance to last year's in sales, units, gross margin, and variance, as well as new store analysis. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_SalesAndMarketingSample: "This industry sample dashboard and underlying report analyze a manufacturing company named VanArsdel Ltd. This dashboard was created by the VanArsdel Chief Marketing Officer (CMO) to keep an eye on the industry and his company’s market share, product volume, sales, and sentiment. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            GetData_SupplierQualityAnalysisSample: "This industry sample dashboard and underlying report focus on one of the typical supply chain challenges — supplier quality analysis. Two primary metrics are at play in this analysis: total number of defects and the total downtime that these defects caused. This sample has two main objectives. The first is to understand who the best and worst suppliers are, with respect to quality. The second is to identify which plants do a better job finding and rejecting defects, to minimize downtime. This is real data from obviEnce (www.obvience.com) that has been anonymized.",
            ToggleSwitchOff: "Off",
            ToggleSwitchOn: "On",
            NavigationPane_GroupsTitle_CreateGroup: "CREATE A GROUP",
            Visual_DisplayUnits: "Display Units",
            Visual_LabelsFill: "Color",
            Visual_DataPointsLabels: "Data Points Labels",
            Visual_Precision: "Precision",
            Visual_Position: "Position",
            Role_DisplayName_Gradient: "Gradient",
            Visual_Gradient: "Gradient",
            Visual_Axis_End: "End",
            Visual_Axis_Intersection: "Intersection",
            Visual_Axis_Start: "Start",
            Visual_Axis_Style: "Style",
            Visual_Axis_Title: "Title",
            Visual_Axis_Type: "Type",
            Visual_Axis_Scalar: "Continuous",
            Visual_Axis_Categorical: "Categorical",
            Visual_CategoryLabels: "Category Labels",
            Visual_Axis_ShowBoth: "Show Both",
            Visual_Axis_ShowTitleOnly: "Show title only",
            Visual_Background: "Background",
            Visual_Background_Color: "Color",
            Visual_Background_Transparency: "Transparency",
            Visual_DataPoint_Show_All: "Show All",
            Visual_LegendShowTitle: "Title",
            Visual_LegendTitleText: "Text",
            Visual_RevertToDefault: "Revert To Default",
            Visual_Title: "Title",
            Visual_Title_Alignment: "Alignment",
            Visual_Title_BackgroundColor: "Background Color",
            Visual_Title_FontColor: "Font Color",
            Visual_Title_Text: "Text",
            Visual_XAxis: "X-Axis",
            Visual_YAxis: "Y-Axis",
            Visual_YAxis_ColumnTitle: "Y-Axis (Column)",
            Visual_YAxis_LineTitle: "Y-Axis (Line)",
            Visual_YAxis_Position: "Position",
            Visual_YAxis_ShowSecondery: "Show Secondery",
            ColorPicker_CustomColor: "Custom color",
            ColorPicker_RecentColors: "Recent Colors",
            ColorPicker_RevertToDefault: "Revert to default",
            ColorPicker_ThemeColors: "Theme Colors",
            ColorWheel_Cancel: "Cancel",
            Publish_ContentPackActions: "Actions",
            Publish_ContentPackDatePublished: "Date Published",
            Publish_ViewContentPacks: "View Content Packs",
            TopNav_SettingsMenu_ViewContentPack: "View Content Pack",
            TaskPane_Toggle: "Toggle Task Pane",
            VisualizationPane_Toggle: "Toggle Visualization Pane",
            MashUpContentProvider_MailChimp_Description1: "Use MailChimp’s analytics to quickly identify trends within your campaigns, reports, and individual subscribers. Find out who your most engaged subscribers are, which countries open the most campaigns, or how trends have changed over time. Power BI lets users drill down into their MailChimp data without any coding knowledge, and automatic data updates help you make the most informed decisions possible.",
            MashUpContentProvider_MailChimp_More2: " connecting to MailChimp data",
            MashUpContentProvider_SQLSentry_Bullet1: "Server Health",
            MashUpContentProvider_SQLSentry_Bullet2: "Server Availability",
            MashUpContentProvider_SQLSentry_Bullet3: "Disk Utilization",
            MashUpContentProvider_SQLSentry_Bullet4: "CPU Utilization",
            MashUpContentProvider_SQLSentry_Bullet5: "Memory Utilization",
            MashUpContentProvider_SQLSentry_Description1: "Use Power BI to analyze and share performance and operational data collected by SQL Sentry. Get insights into the health of your SQL Server and Windows environment. This content pack includes powerful visualizations to help you to better evaluate and manage resources for several key areas, including:",
            MashUpContentProvider_SQLSentry_Description2: "To use this dashboard, you must have SQL Sentry installed and monitoring at least one server, and cloud synchronization must be enabled.",
            MashUpContentProvider_SQLSentry_More2: " connecting to SQL Sentry data to the cloud",
            QuotaManagement_FreeUser: "Free User",
            QuotaManagement_ManageAccount: "Manage Account",
            QuotaManagement_ModelAssociatedWith: "Associated With",
            QuotaManagement_ModelLastRefreshedTime: "Last Refreshed",
            QuotaManagement_ModelName: "Name",
            QuotaManagement_ModelSize: "Size",
            QuotaManagement_ModelType: "Type",
            QuotaManagement_ModelType_Report: "Report",
            QuotaManagement_ModelType_Dataset: "Dataset",
            QuotaManagement_OwnedByMe: "Owned By Me",
            QuotaManagement_OwnedByOthers: "Owned By Others",
            QuotaManagement_OwnedByUs: "Owned By Us",
            QuotaManagement_PaidUser: "Paid User",
            QuotaManagement_UpgradeAccount: "Upgrade Account",
            QuotaManagement_ManageStorage: "Manage Storage",
            QuotaManagement_ManagePersonalStorage: "Manage Personal Storage",
            QuotaManagement_ManageGroupStorage: "Manage Group Storage",
            QuotaManagement_AssociatedDashboards: "Associated Dashboards",
            QuotaManagement_AssociatedReports: "Associated Reports",
            QuotaManagement_AssociatedWorkbooks: "Associated Workbooks",
            QuotaManagement_DeleteButtonText: "Delete",
            QuotaManagement_DeleteConfirmationTitle: "Delete Item",
            QuotaManagement_DeleteConfirmationMessage: "Are you sure you want to delete this item? This action may affect some of your dashboards and reports, and anyone with whom those dashboards and reports are shared.",
            QuotaManagement_RemoveConfirmationTitle: "Remove Item",
            QuotaManagement_RemoveConfirmationMessage: "Are you sure you want to remove the link to this item? This action may affect some of your dashboards, reports, and shared datasets.",
            QuotaExceedDialogButtonText_DismissMessage: "Dismiss Message",
            QuotaExceedDialogButtonText_ManageAccount: "Manage Account",
            QuotaExceedDialogButtonText_ManageStorage: "Manage Storage",
            QuotaExceedDialogButtonText_UpgradeAccount: "Upgrade Account",
            QuotaExceedDialogTitle: "Over your storage limit",
            QuotaExceedDialogMessage_FreeUser: "You are over your storage limit. To get data, pin tiles or share your dashboards, upgrade your account to Power BI Pro or manage your storage.",
            QuotaExceedDialogMessage_TrialAndPaidUser: "You are over your storage limit. To get data, pin tiles or share your dashboards, you need to manage your storage.",
            QuotaExceedBannerMessage_FreeUser: "You are over your storage limit. To get data or share your dashboards, upgrade your account to Power BI Pro or manage your storage.",
            QuotaExceedBannerMessage_TrialAndPaidUser: "You are over your storage limit. To get data or share your dashboards, you need to manage your storage.",
            QuotaManagement_UsageDescription: "{0} of {1} used",
            QuotaManagement_CancelButtonText: "Cancel",
            QuotaManagement_RemoveButtonText: "Remove",
            QuotaUsage_SizeInMB: "{0} MB",
            QuotaUsage_SizeInGB: "{0} GB",
            InfoNav_SourceLabel: "Source: {0}",
            UserMetadata_FailedRefresh: "We failed to refresh user metadata. Please try again later.",
            Visual_DefaultColor: "Default Color",
            FieldListMenuItem_NewColumn: "New Column",
            FieldListMenuItem_NewMeasure: "New Measure",
            Visual_ColumnTotals: "Column Totals",
            Visual_General: "General",
            Visual_RowTotals: "Row Totals",
            Visual_Totals: "Totals",
            NavigationPane_ExcelWorkbook: "Excel Workbook",
            WorkbookContextMenu_Edit: "EDIT",
            WorkbookContextMenu_RefreshNow: "REFRESH NOW",
            WorkbookContextMenu_Remove: "REMOVE",
            WorkbookContextMenu_Rename: "RENAME",
            WorkbookContextMenu_ScheduleRefresh: "SCHEDULE REFRESH",
            WorkbookContextMenu_View: "VIEW",
            WorkbookReadyNotificationTitle: "Your workbook is ready",
            WorkbookReadyNotificationMessage: "Your Excel workbook is now in your list of reports. Take a look: {0}",
            UpgradeDialogButtonText_Trial: "Try Power BI Pro",
            UpgradeDialogButtonText_UpgradeAccount: "Upgrade Account",
            UpgradeDialogMessage: "Want to use Power BI with {0}? Try Power BI Pro for free or upgrade your account today.",
            UpgradeDialogTitle: "Need Power BI Pro for {0}",
            UpgradeReasonText_Groups: "Groups",
            ServiceError_CannotLoadVisual: "Can't display this visual.",
            ServiceError_ExecuteSemanticQueryErrorKey: "Can't display this visual",
            ServiceError_ExecuteSemanticQueryErrorValue: "Couldn’t retrieve the data for this visual. Please try again later.",
            ServiceError_ExecuteSemanticQueryInvalidStreamFormatKey: "Can't display this visual",
            ServiceError_ExecuteSemanticQueryInvalidStreamFormatValue: "Power BI couldn’t load the data for this visual because it isn’t in the right format. Please contact the dashboard owner.",
            ServiceError_GeneralError: "An unexpected error occurred.",
            ServiceError_GeneralErrorKey: "An unexpected error occurred",
            ServiceError_GeneralErrorValue: "An unexpected error occurred. Please try again later.",
            ServiceError_ModelCannotLoad: "Couldn’t load the model schema.",
            ServiceError_ModelConvertFailureKey: "Internal error prevented loading the schema",
            ServiceError_ModelConvertFailureValue: "An internal error prevented loading the model schema associated with this report. Please try again later. If the issue persists, contact Power BI support.",
            ServiceError_ModelCreationFailureKey: "Internal error prevented preparing the schema",
            ServiceError_ModelCreationFailureValue: "An internal error prevented preparing the model schema associated with this report. Please try again later. If the issue persists, contact Power BI support.",
            ServiceError_ModelFetchingFailureKey: "Couldn’t load the schema for the database model",
            ServiceError_ModelFetchingFailureValue: "Couldn’t load the model schema associated with this report. Make sure you have a connection to the server, and try again.",
            VisualContainer_FailedToLoadVisual: "Can't display this visual.",
            VisualContainer_ShowErrorDetails: "See details",
            ClientError_UnknownClientErrorKey: "Unknown error",
            ClientError_UnknownClientErrorValue: "An unexpected script error occurred.",
            VisualContainer_UnableToFindVisualValue: "Support for this type of visual is coming soon.",
            DsrError_LoadingModelKey: "The model could not be loaded",
            DsrError_InvalidDataShapeValue: "Data shapes must contain at least one group or calculation that outputs data. Please contact the dashboard owner.",
            DsrError_InvalidUnconstrainedJoinKey: "Can’t determine relationships between the fields",
            DsrError_InvalidUnconstrainedJoinValue: "Can’t display the data because Power BI can’t determine the relationship between two or more fields.",
            DsrError_Key: "Couldn't load the data for this visual",
            DsrError_LoadingModelValue: "Power BI encountered an unexpected error while loading the model. Please try again later.",
            DsrError_Message: "Can't display the visual.",
            DsrError_ModelGroupingInstructionsIgnoredKey: "Model grouping instructions ignored",
            DsrError_ModelGroupingInstructionsIgnoredValue: "The groups on a key should be grouped on another field.",
            DsrError_ModelUnavailableValue: "Couldn’t retrieve the data model. Please contact the dashboard owner to make sure the data sources and model exist and are accessible.",
            DsrError_MoreInfo: "More Details",
            DsrError_OverlappingKeysKey: "Data in the visual is structured incorrectly",
            DsrError_OverlappingKeysValue: "The groups in the primary axis and the secondary axis overlap. Groups in the primary axis can’t have the same keys as groups in the secondary axis.",
            DsrError_SuppressJoinPredicateValue: "The column included in the join predicate must refer to a measure. Please contact the dashboard owner.",
            DsrError_UnknownErrorValue: "Couldn’t retrieve the data for this visual. Please try again later.",
            Publish_DescriptionSizeExceeded: "Description is too long",
            Publish_GroupAddressExceeded: "You can only publish to {maxGroups} groups at a time, please remove some",
            Publish_InvalidEntry: "Invalid entry",
            Publish_NoGroupAddressSpecified: "Please specify one or more group addresses",
            Publish_TitleSizeExceeded: "Title is too long",
            Publish_WrongGrouplAddresses: "Invalid list of group addresses. Please correct them",
            Visual_LegendPosition_Bottom: "Bottom",
            Visual_LegendPosition_Left: "Left",
            Visual_LegendPosition_Right: "Right",
            Visual_LegendPosition_Top: "Top",
            Visual_yAxis_Left: "Left",
            Visual_yAxis_Right: "Right",
            DashboardReadOnly_Tooltip: "This is a read-only dashboard",
            GetData_BrowserPopUpDisabled: "Browser pop-up is disabled. Please verify browser settings.",
            GetData_AuthenticationError_Title: "Failed to show authentication dialog",
            GetData_OK: "OK",
            GetData_UnableToRetrieveTheAuthenticationEndpoint: "Unable to retrieve the authentication endpoint",
            GetData_Zendesk_FinePrint: "Your data in the Zendesk service is transmitted to Power BI so that you can perform business analytics.",
            DataDotClusteredColumnComboChart_ToolTip: "Data-Dot and Clustered Column Chart",
            DataDotStackedColumnComboChart_ToolTip: "Data-Dot and Stacked Column Chart",
            Visual_DisplayUnits_Auto: "Auto",
            Visual_LabelPosition_BottomCenter: "Bottom Center",
            Visual_LabelPosition_BottomLeft: "Bottom Left",
            Visual_LabelPosition_BottomRight: "Bottom Right",
            Visual_LabelPosition_InsideBase: "Inside Base",
            Visual_LabelPosition_InsideCenter: "Inside Center",
            Visual_LabelPosition_InsideEnd: "Inside End",
            Visual_LabelPosition_MiddleCenter: "Middle Center",
            Visual_LabelPosition_MiddleLeft: "Middle Left",
            Visual_LabelPosition_MiddleRight: "Middle Right",
            Visual_LabelPosition_OutsideBase: "Outside Base",
            Visual_LabelPosition_OutsideEnd: "Outside End",
            Visual_LabelPosition_TopCenter: "Top Center",
            Visual_LabelPosition_TopLeft: "Top Left",
            Visual_LabelPosition_TopRight: "Top Right",
            Visual_DisplayUnits_Billions: "B",
            Visual_DisplayUnits_Millions: "M",
            Visual_DisplayUnits_Thousands: "K",
            Visual_Card_Placeholder_Auto: "Automatic",
            AreaChart_ToolTip: "Area Chart",
            VisualContainer_UnableToFindVisualMessage: "This visual type is not yet supported.",
            Waterfall_DecreaseLabel: "Decrease",
            Waterfall_IncreaseLabel: "Increase",
            Waterfall_SentimentColors: "Sentiment Colors",
            GetData_StatsNFL2014SeasonRecap: "Explore statistics from National Football League regular season and playoff games for the 2014 season. Statistics and key measures are provided game by game for each team and player, with additional data for fan attendance, game day weather, and player backgrounds.<br>This copy of the sample is yours to experiment with. You can always connect to the sample again for a fresh copy.",
            ExploreCompatibility_ToggleExplore: "Explore the new Power BI report canvas",
            ExploreCompatibility_ToggleLegacy: "Go back to classic report",
            ExploreCompatibility_WarnMessage: 'Would you like to keep a copy of your report in the classic format? Selecting "No" will overwrite the file and you will be unable to go back.',
            ExploreCompatibility_WarnTitle: "You're about to save your report in the new format",
            ExploreCompatibility_PromptMessageLegacy: "Power BI is changing the way you view, interact with and create reports. Please {0}send us feedback{1} about the new experience.",
            ExploreCompatibility_PromptTitleLegacy: "New Power BI report canvas",
            ExploreCompatibility_TryNow: "Try it now",
            MashUpContentProvider_UserVoice_Description1: "Monitor and explore your UserVoice data in Power BI by simply connecting to UserVoice using your admin credentials. With Power BI, you will have your tickets, suggestions and user satisfaction data right at your fingertips. Use the dashboard and reports that are readily available for you to analyze your data, or customize your own to highlight the information you care about most. Power BI will refresh your User Voice data daily so your dashboards and reports are always up to date.",
            MashUpContentProvider_UserVoice_More2: " connecting to UserVoice data",
            GetData_Mailchimp: "With the MailChimp content pack for Power BI, quickly identify trends within your campaigns, reports, and individual subscribers. Find out who your most engaged subscribers are, which countries open the most campaigns, or how trends have changed over time. Drill down into your MailChimp data in Power BI without any coding knowledge. Automatic data updates help you make the most timely decisions.",
            FilledMap_ToolTip: "Filled Map",
            Visual_Gradient_Diverging: "Diverging",
            Visual_Gradient_MaxColor: "Maximum",
            Visual_Gradient_MaxValue: "Maximum",
            Visual_Gradient_MidColor: "Center",
            Visual_Gradient_MidValue: "Center",
            Visual_Gradient_MinColor: "Minimum",
            Visual_Gradient_MinValue: "Minimum",
            DonutChart_ToolTip: "Donut Chart",
            MashUpContentProvider_SweetIQ_Description1: "Easily track and analyze your local search ecosystem with the SweetIQ Power BI connector. Log in with your SweetIQ account to review search listings for all of your locations as well as analyze and monitor customer reviews. Use the dashboard and reports provided, or customize them to highlight the information you care about most. Data is automatically updated daily with the latest from SweetIQ based on a schedule that you set.",
            MashUpContentProvider_SweetIQ_More2: " connecting to SweetIQ data",
            DirectQueryContentProvider_Error1: "Please enter Server.",
            DirectQueryContentProvider_Error2: "Please enter Database.",
            DirectQueryContentProvider_Error3: "Please enter User.",
            DirectQueryContentProvider_Error4: "Please enter Password.",
            DirectQueryContentProvider_Error5: "Refresh Interval cannot be less than 15 minutes",
            DirectQueryContentProvider_InvalidConnectionString: "We are unable to establish connection, please check connection information.",
            DirectQueryContentProvider_UnableToReachService: "We are unable to reach our service to perform test connection, please retry.",
            DirectQueryContentProvider_RefreshInterval: "Refresh Interval in Minutes:",
            SettingsDataset_DisableEntireRefreshPageErrorMessage_DirectQueryScheduleInfo: "This dataset connects to a source with direct connect which is always up-to-date. You do not have to schedule a refresh on this dataset.",
            SettingsWorkbook_NoModel_workbookIsUpToDate: "This workbook is always up-to-date.",
            LineClusteredColumnComboChart_ToolTip: "Line and Clustered Column Chart",
            LineStackedColumnComboChart_ToolTip: "Line and Stacked Column Chart",
            ReportAppBar_InsertTextboxButton: "Insert Textbox",
            GetData_SweetIQ: "Easily track and analyze your local search ecosystem with the SweetIQ Power BI connector. Log in with your SweetIQ account to review search listings for all of your locations as well as analyze and monitor customer reviews. Use the dashboard and reports provided, or customize them to highlight the information you care about most. Data is automatically updated daily with the latest from SweetIQ based on a schedule that you set.",
            GetData_Acumatica: "Connecting to Acumatica directly from Power BI allows you to access powerful business insights. Log in to Power BI using Acumatica ERP credentials, and build valuable insights into the opportunity pipeline, opportunities in various stages, and opportunities won and lost. The out-of-the-box dashboard provides a set of views and this can be fully customized. You can ask a question about the data in Q&A, or click a tile to open the underlying report and change the tiles in the dashboard. Acumatica will continue to release additional dashboards for leads, support analysis, financials and more.",
            Clear: "Clear",
            DsrLimitWarning_RepresentativeSampleKey: "Showing representative sample.",
            DsrLimitWarning_RepresentativeSampleMessage: "Showing representative sample.",
            DsrLimitWarning_RepresentativeSampleVal: "Too many '{0}' values. Showing a representative sample. Filter the data or choose another field.",
            DsrLimitWarning_RepresentativeSampleValMultipleColumns: "Showing representative sample. Filter the data or choose another field.",
            DsrLimitWarning_TooMuchDataKey: "Too many values",
            DsrLimitWarning_TooMuchDataMessage: "Too many values. Not showing all data.",
            DsrLimitWarning_TooMuchDataVal: "Too many '{0}' values. Not displaying all data. Filter the data or choose another field.",
            DsrLimitWarning_TooMuchDataValMultipleColumns: "Too many values. Not showing all data. Filter the data or choose another field.",
            GroupEditor_DiscardButton_Text: "Discard",
            GroupEditor_SaveButton_Text: "Save",
            GroupEditor_Title_CreateGroup: "Create a Group",
            GroupEditor_Title_EditGroup: "Edit Group",
            GroupEditor_GroupNameLabel_Text_CreateGroup: "Name your group",
            GroupEditor_GroupNameLabel_Text_EditViewGroup: "Name",
            GroupEditor_PrivacyLabel_Text: "Privacy",
            GroupEditor_PrivacyOptions_Private: "Private - Only approved members can see what's inside",
            GroupEditor_PrivacyOptions_Public: "Public - Anyone can see what's inside",
            GroupEditor_AddGroupMembersLabel_Text: "Add group members",
            GroupEditor_AddButton_Text: "Add",
            GroupEditor_GroupIdLabel_Text: "Group ID",
            GroupEditor_CreateGroup_GroupId_Available_Text: "Available",
            GroupEditor_CreateGroup_GroupId_NotAvailable_Text: "Not available; please edit",
            EmailsListPlaceholder: "Enter email addresses separated by ; or ,",
            EmailsList_EmailAddressExceeded: "You can only email {{maxEmails}} contacts at a time, please remove some.",
            EmailsList_EmailDomainNotInTenant: "One or more email addresses are outside your organization: {{invalidDomains}}",
            EmailsList_FailureToValidateEmailsDomains_Message: "Couldn't validate the domains for these email addresses",
            EmailsList_FailureToValidateEmailsDomains_Title: "Couldn't validate",
            EmailsList_NoEmailAddressSpecified: "Specify at least one email address",
            EmailsList_WrongEmailAddresses: "These email addresses aren’t valid: {0}",
            GroupEditor_CreateGroup_GroupId_GroupIdEditing_NotAvailable_Text: "Not available",
            GroupEditor_CreateGroup_GroupId_HasInvalidCharacters: "The Group ID can't contain symbols",
            GroupEditor_AreYouSureYouWantToDiscard_Message: "Your changes will be lost.",
            GroupEditor_AreYouSureYouWantToDiscard_Title: "Are you sure you want to leave Group Editor?",
            GroupEditor_DeleteGroup_Text: "Delete Group",
            ServerError_PersonalGateway_DataSourceErrorLabel: "Data Source Error",
            ServerError_PersonalGateway_LongMessage_DataSource_Inaccessible: "Last refresh attempt failed. Cannot connect to the data source. Ensure the data source is accessible.",
            ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential: "Last refresh attempt failed. The data source has invalid credentials. Update the credentials & also ensure the rest of the data sources in the dataset have valid credentials.",
            ServerError_PersonalGateway_LongMessage_DataSource_MissingProvider: "Last refresh attempt failed. The right data provider must be installed on the computer on which the gateway is installed.",
            ServerError_PersonalGateway_LongMessage_Gateway_Offline: "Last refresh attempt failed. Your gateway is offline or could not be reached. Ensure the computer on which the gateway is installed is not switched off during the scheduled refresh period.",
            ServerError_PersonalGateway_LongMessage_Gateway_OfflineNonAdminUser: "Last refresh attempt failed. Your gateway is offline or could not be reached. Ensure the computer on which the gateway is installed is not switched off or logged off during the scheduled refresh period.",
            ServerError_PersonalGateway_LongMessage_Gateway_WindowsCredentialError: "Last refresh attempt failed. Power BI Personal Gateway cannot connect due to invalid windows credentials. Go to the machine where gateway was installed and update the windows credentials in the gateway. You can find the gateway in the tray or can search for 'Power BI Gateway' on your computer.",
            ServerError_PersonalGateway_LongMessage_ProcessingError: "Error during processing the data in the dataset",
            ServerError_PersonalGateway_LongMessage_ServiceError: "Last refresh attempt failed. An unexpected error happened in the service that prevented the refresh.",
            ServerError_PersonalGateway_ProcessingErrorLabel: "Processing Error",
            ServerError_PersonalGateway_ShortMessage_DataSource_Inaccessible: "Last refresh attempt failed. Cannot connect to the data source.",
            ServerError_PersonalGateway_ShortMessage_DataSource_InvalidCredential: "Last refresh attempt failed. Cannot connect to the data source.",
            ServerError_PersonalGateway_ShortMessage_DataSource_MissingProvider: "Last refresh attempt failed.",
            ServerError_PersonalGateway_ShortMessage_Gateway_Offline: "Last refresh attempt failed. Your gateway is offline or could not be reached.",
            ServerError_PersonalGateway_ShortMessage_Gateway_OfflineNonAdminUser: "Last refresh attempt failed. Your gateway is offline or could not be reached.",
            ServerError_PersonalGateway_ShortMessage_Gateway_WindowsCredentialError: "Last refresh attempt failed. Power BI Personal Gateway cannot start due to invalid windows credentials.",
            ServerError_PersonalGateway_ShortMessage_ProcessingError: "Error during processing the data in the dataset",
            ServerError_PersonalGateway_ShortMessage_ServiceError: "Last refresh attempt failed. Internal service error.",
            NavigationPane_ArchivedContent: "Archived Content",
            TutorialPopup_ViewArchivedContentText: "To view and interact with your archived content click on the button below.",
            TutorialPopup_ViewArchivedContentTitle: "View archived content",
            TutorialPopup_WelcomeArchivedContentGoingForward: "Going forward, create and share content in this new space managed by your administrator.",
            TutorialPopup_WelcomeArchivedContentLearnMoreLinkText: "Learn more about archived Power BI content",
            TutorialPopup_WelcomeArchivedContentParagraphOne: "An administrator has started managing Power BI for users at your organization. A new space has been created for all of your business data so it can be securely stored and shared with others in your organization.",
            TutorialPopup_WelcomeArchivedContentParagraphTwo: "As a part of this transition, we have archived all of the Power BI content you created before your administrator started managing Power BI. You can click the Archived Content button to view this  archive at any time. Data in your archive will continue to refresh. You and any existing users that your content is shared with will be able to continue viewing dashboards and reports. However, you can’t share your archived content with new users in your organization.",
            TutorialPopup_WelcomeArchivedContentTitle: "Say hello to the new Power BI for your organization",
            TutorialPopup_ArchivedContentText: "Your previously acquired content.",
            TutorialPopup_ArchivedContentTitle: "Archived<br/>Content",
            TutorialPopup_ForYourOrganizationText: "New content you create and share with others.",
            TutorialPopup_ForYourOrganizationTitle: "Power BI for your organization",
            ArchivedContent_BackToPowerBI: "Back to Power BI",
            ArchivedContent_HeaderLinkText: "Learn More",
            ArchivedContent_HeaderMessage: "This is your archived content. Some features, like sharing and access on mobile devices, are disabled.",
            ArchivedContent_ErrorMessageGroup: "Creating a group is not supported while you are in your archived content. Go back to Power BI to create a group with others in your organization.",
            ArchivedContent_ErrorMessageOneDrivePro: "OneDrive for Business is not supported while you are in your archived content. Go back to PowerBI to connect to your OneDrive for Business account.",
            ArchivedContent_ErrorMessageSharing: "Sharing with other members of your organization is not supported while you are in your archived content. Go to back to Power BI to share work.",
            ArchivedContent_ErrorOptionOneText: "Go back to Power BI",
            ArchivedContent_ErrorOptionTwoText: "Stay in Archived Content",
            ArchivedContent_ErrorTitle: "You're in Archived Content",
            CloseAccount_Description: "Didn't mean to close your account?",
            CloseAccount_ReopenYourAccount: "Reopen your account",
            CloseAccount_YourAccountIsClosed: "Your account is closed.",
            GetData_FindAPartner: "Find a Partner",
            Groups_Splash_Description1: "You're on your way to exploring your data and monitoring what matters with all your group members.",
            Groups_Splash_Description2: "Let's start by getting some data.",
            Groups_Splash_Title: "Welcome to the {0} group",
            GroupEditor_Email_Address_DoNotExist: "These email addresses don’t exist in your organization: {0}",
            GroupEditor_Email_Address_DoNotExistOrNotPowerBiUsers: "These email addresses don’t exist in your organization or aren’t Power BI users: {0}",
            Settings_CloseAccount: "Close Account",
            Settings_CloseAccount_Button: "Close Account",
            Settings_CloseAccount_Description: "You can close your Power BI account. You will no longer be able to access Power BI and any content you created will be deleted.",
            Settings_CloseAccount_Reason_DecidedToUseOtherSoftware: "Decided to use other software",
            Settings_CloseAccount_Reason_DidntNeedToUseIt: "Didn't need to use it",
            Settings_CloseAccount_Reason_ForgotAboutIt: "Forgot about it",
            Settings_CloseAccount_Reason_HardToUse: "Hard to use",
            Settings_CloseAccount_Reason_HaventHadTimeToUseIt: "Haven't had time to use it",
            Settings_CloseAccount_Reason_MissingFeatures: "Missing features",
            Settings_CloseAccount_Reason_NotValuableEnoughToMe: "Not valuable enough to me",
            Settings_CloseAccount_Reason_PlaceHolder: "Select Reason (optional)",
            Settings_CloseAccount_Reason_TooManyErrors: "Too many errors",
            Settings_CloseAccount_WhyAreYouClosingYourAccount: "Why are you closing your account?",
            AfterUpgradeDialogTitle: "After you upgrade",
            AfterUpgradeDialogMessage: "After you upgrade successfully to Power BI Pro, click Refresh to take advantage of new features.",
            AfterUpgradeDialogRefreshButton: "Refresh",
            UpgradeAccount_BrowseContentMessage: "You may browse through the gallery of your organizational content. To connect to them, upgrade your account to Power BI Pro.",
            UpgradeAccount_ConnectContentMessage: "To connect to your organizational content in Power BI, upgrade your account to Power BI Pro.",
            UpgradeAccount_ConnectContentTitle: "Organizational content in Power BI",
            UpgradeAccount_GroupsCollaborationMessage: "To collaborate with your team in Power BI, upgrade your account to Power BI Pro.",
            UpgradeAccount_GroupsCollaborationTitle: "Team Collaboration in Power BI",
            UpgradeAccount_ScheduleOnPremDataRefreshMessage: "This dataset contains on-premise data source. To schedule data refresh, upgrade your account to Power BI Pro.",
            UpgradeAccount_ScheduleDataRefreshMessage: "To schedule hourly data refresh, upgrade your account to Power BI Pro.",
            UpgradeAccount_ShareDashboardWarnMessage: "This dashboard contains {0}. Only users who have Power BI Pro can access this dashboard. {1}Learn more{2}",
            UpgradeAccount_ShareDashboardTitle: "{0} contains Power BI Pro content",
            UpgradeAccount_ShareDashboardMessage: "To see this dashboard, upgrade your account to Power BI Pro.",
            UpgradeAccount_TryfreeButton: "Try free for {0} days",
            UpgradeAccount_SuccessMessage: "After you have successfully upgraded to Power BI Pro, click reload to refresh this page and take advantage of new features.",
            UpgradeAccount_SuccessTitle: "Once you've upgraded..",
            GetData_UserVoice: "Monitor and explore your UserVoice data in Power BI by simply connecting to UserVoice using your admin credentials. With Power BI, you will have your tickets, suggestions and user satisfaction data right at your fingertips. Use the dashboard and reports that are readily available for you to analyze your data, or customize your own to highlight the information you care about most. Power BI will refresh your UserVoice data daily so your dashboards and reports are always up to date.",
            PublishContentPack_EmptyTitle: "Be sure to enter a title for your content pack.",
            PublishContentPack_EmptyDescription: "Be sure to enter a description for your content pack.",
            PublishContentPack_Changes: "You've made changes to this published content pack. Do you want others to see these changes?",
            PublishContentPack_NoItemsSelected: "Be sure to select a dashboard, report or dataset for your content pack.",
            PublishContentPack_PersonalizeDashboard_Desc: "You're making changes to a dashboard created from an organizational content pack. Click Save to create your own personal copy.",
            PublishContentPack_PersonalizeReport_Desc: "You're making changes to a report created from an organizational content pack. Click Save to create your own personal copy.",
            PublishContentPack_Personalize_Dashboard: "Personalize this dashboard",
            PublishContentPack_Personalize_DontSave: "Don't Save",
            PublishContentPack_Personalize_Save: "Save",
            PublishContentPack_UnsavedChanges: "You have unsaved changes",
            PublishContentPack_UnsavedChanges_Desc: "You've made changes to a content pack. Do you want to publish them or cancel?",
            PublishContentPack_Failed_Desc: "Failed to publish Organizational Apps",
            UploadReplace_DatasetExists: "You already have a dataset named {0} in Power BI. Do you want to replace the existing dataset with this one?",
            UploadReplace_MultipleDatasetExists: "You already have more than one dataset named {0} in Power BI. To replace an existing dataset make sure you have only one dataset with this name. Otherwise rename the file and try again.",
            UploadReplace_ReplaceButton: "Replace it",
            UploadReplace_DontImportButton: "Don't import",
            NewVisualThemeWelcomeNotificationText: "You might notice our new look and feel. We’ve optimized our visualization colors across dashboards and reports to make your Power BI experience even better.",
            NavigationPane_DevTools: "Dev Tools",
            Extensibility_DevTools: "Dev Tools",
            Error_PleaseWait: "Preparing Power BI",
            Error_PleaseWaitDescription: "Finishing set up...",
            ErrorDescription_TenantNotAllowed_RetryLimitReached: "We were not able to retrieve your tenant license within the allotted time limit.",
            ErrorDescription_UserNotLicensed_RetryLimitReached: "We were not able to retrieve your user license within the allotted time limit.",
            ServerError_ActivityIdText: "Activity Id",
            ServerError_ClusterUriText: "Cluster URI",
            ServerError_RequestIdText: "Request Id",
            ServerError_TimestampText: "Time",
            ServerError_VersionText: "Version",
            VisualContainer_Hide: "Hide",
            GetData_FindOneHere: "Find one here!",
            ExploreCompatibility_PromptMessageNew: "We encourage you to try out the new report canvas and {0}send us your feedback{1}.  Prefer the classic report canvas?  You can go back by clicking above.",
            ExploreCompatibility_PromptTitleNew: "Welcome to the new Power BI report canvas",
            ExploreCompatibility_TakeTour: "Take the tour",
            Error_PleaseWaitSubtext: "less than a minute remaining",
            GroupEditor_FailedCreateGroup_Message: "Couldn't create the group",
            GroupEditor_FailedValidateMembers_Message: "Couldn't validate group members",
            GroupEditor_FailedGetGroupMembers_Message: "Couldn't get group members",
            GroupEditor_AreYouSureYouWantToDeleteGroup_Message: "Power BI will delete all dashboards, reports, and models in this group.",
            GroupEditor_AreYouSureYouWantToDeleteGroup_Title: "Are you sure you want to delete this group?",
            GroupEditor_FailedDeleteGroup_Message: "Couldn't delete the group",
            GroupEditor_FailedUpdateGroup_Message: "Couldn't update the group",
            GroupEditor_FailedValidateGroupId_Message: "Unable to validate group ID, please try again later.",
            GroupEditor_WaitForSave: "Saving...",
            GroupEditor_WaitForAddingMembers: "Adding members...",
            GroupEditor_WaitLoadMembers: "Loading members...",
            GroupEditor_WaitDeleteGroup: "Deleting group...",
            GetData_Zuora: "Visualize important revenue, billing, and subscription data in Power BI by connecting your Zuora account. Use the default dashboard and reports to analyze usage trends, track billings and payments, and monitor recurring revenue, or customize them to meet your own unique dashboard and reporting needs. Different users in your organization can customize their own reports and dashboards, and these can be shared with other users if desired. Data is automatically updated daily, ensuring you have the latest information available.",
            GetData_BIProfessional_Title: "BI Professional",
            GetData_BusinessAnalyst_Title: "Business Analyst",
            GetData_BusinessUser_Title: "Business User",
            GetData_CustomerProfitabilitySample_Title: "Customer Profitability Sample",
            GetData_Developer_Title: "Developer",
            GetData_FilesTutorial_Title: "Learn about importing files",
            GetData_HumanResourcesSample_Title: "Human Resources Sample",
            GetData_ITSpendAnalysisSample_Title: "IT Spend Analysis Sample",
            GetData_LocalFile_Title: "Local File",
            GetData_OpportunityAnalysisSample_Title: "Opportunity Analysis Sample",
            GetData_ProcurementAnalysisSample_Title: "Procurement Analysis Sample",
            GetData_Retail_Analysis_Sample_Title: "Retail Analysis Sample",
            GetData_SalesAndMarketingSample_Title: "Sales and Marketing Sample",
            GetData_StatsNFL2014SeasonRecap_Title: "STATS NFL 2014 Season Recap",
            GetData_SupplierQualityAnalysisSample_Title: "Supplier Quality Analysis Sample",
            GetData_OneDriveBusiness_Title: "OneDrive - Business",
            GetData_OneDrivePersonal_Title: "OneDrive - Personal",
            NoMapLocationKey: "Need a location to place values on the map",
            NoMapLocationMessage: "Location is required to create a map.",
            NoMapLocationValue: "Add a field to the Location box that specifies the position of data points on the map. The field can contain either specific geographic names or longitude and latitude values.",
            GetData_AzureHDInsightSparkLiveConnect: "Apache Spark™ is a fast and general engine for large-scale data processing. Azure HDInsight offers a fully managed Spark service which allows for massive scale-out and interactive performance. HDInsight Spark can connect to any Blob storage in Azure Storage or Azure Data Lake. With the Spark on Azure HDInsight connector for Power BI, users can query and visualize the large volumes of unstructured data that have been modeled in Spark. The result is interactive data exploration and reporting in Power BI on a massive scale of data.",
            SparkContentProvider_Description: "With Power BI you can create dynamic reports mashups with data and metrics you already have in Spark on Azure HDInsight. To get started, we need some information to connect.",
            SparkContentProvider_Landing_ConnectButton: "Connect",
            SparkContentProvider_Password: "Password:",
            SparkContentProvider_ServerName: "Server:",
            SparkContentProvider_Title: "Spark on Azure HDInsight",
            SparkContentProvider_UserName: "User:",
            SparkContentProvider_Description2: "More about",
            SparkContentProvider_Description3: "direct connect with Spark on Azure HDInsight",
            PropertyPane_Unavailable: "Formatting options are unavailable for this visual",
            DesignerContainer_FailedToLoadReport: "Failed to load the report.",
            GetData_VisualStudioOnlineVNext: "Visualize your engineering activity in Power BI by connecting to Microsoft Visual Studio Online. The default dashboard and report provide at-a-glance views of work and code across the projects you configure for your account.  You can customize the dashboard and report to highlight the deeper insights you care about most. The data that appears in Power BI will be updated from Microsoft Visual Studio Online according to a schedule that you control.",
            GroupEditor_Title_ViewGroup: "View Group",
            GroupNavigationPaneContextMenuItem_ViewGroup: "View Group",
            GroupEditor_AddGroupMembers_ViewMode_Label_Text: "Group members",
            HistoryDialog_RefreshStatus_TimedOut: "Timed Out",
            GroupEditor_ViewMode_OkButton_Text: "Ok",
            GroupEditor_WaitForGroupIdValidation: "Validating...",
            PublishContentPack_Update: "Update",
            Publish_UpdateContentPack: "Update Content Pack",
            UpdateContentPack_NoChangesMade: "No content pack changes has been made.",
            PublishContentPack_GroupsValidationFailed: "Be sure to enter valid groups",
            PublishContentPack_InvalidGroupAddresses: "The following groups have failed validation : {0}",
            DashboardContentPackNewVersion: 'A new version of the "{0}" content pack is available.',
            Extensibility_Download: "Download",
            Extensibility_Import: "Import",
            Extensibility_Properties: "Properties",
            Extensibility_Run: "Run",
            Extensibility_Undo: "Undo",
            Extensibility_DeveloperTools: "Developer Tools",
            Extensibility_Extensibility: "Extensibility",
            FixReferences_ToolTip: "Fix References",
            Missing_References_Details_Title: "List of Missing References",
            Missing_References_Message: "This visual in broken due to missing references",
            Fix_This: "Fix This",
            NaNValue: "NaN",
            InfinityValue: "+Infinity",
            NegativeInfinityValue: "-Infinity"
        };
    }(b = a.localization || (a.localization = {}));
}(powerbi || (powerbi = {}));

var powerbi;

!function(a) {
    var b;
    !function(b) {
        var c;
        !function(b) {
            var c = function() {
                function b(a) {
                    this.isDataLoaded = !1, this.isDataLoading = !1, this.isDefaultLanguage = !1, this.currentLanguageLocale = a;
                }
                return b.prototype.load = function(a) {
                    var c = this, d = /en-\w+/;
                    d.test(this.currentLanguageLocale) && (this.currentLanguageLocale = a ? "en-US" : this.currentLanguageLocale);
                    var e = b.promiseFactory.defer();
                    return this.currentLanguageLocale !== b.defaultLanguageLocale ? (this.isDefaultLanguage = this.isDataLoaded = !1, 
                    this.isDataLoading = !0, b.requestLocalizedStrings(this.currentLanguageLocale).promise.then(function(a) {
                        c.isDataLoaded = !0, c.isDataLoading = !1, c.strings = a, e.resolve({});
                    }, function() {
                        c.isDefaultLanguage = c.isDataLoaded = !0, c.isDataLoading = !1, e.resolve({});
                    })) : (this.isDefaultLanguage = this.isDataLoaded = !0, this.isDataLoading = !1, 
                    e.resolve({})), e;
                }, b.requestLocalizedStrings = function(c) {
                    var d = b.promiseFactory.defer(), e = window.parent, f = window;
                    return e.localizedStrings ? (f.localizedStrings = e.localizedStrings, d.resolve(f.localizedStrings)) : (f.localizedStrings = a.common.localizedStrings, 
                    f.localizedStrings ? d.resolve(f.localizedStrings) : d.reject()), d;
                }, b.promiseFactory = a.createJQueryPromiseFactory(), b.defaultLanguageLocale = "en-US", 
                b;
            }();
            b.LocalizationLoader = c, b.loader = new c(a.common.cultureInfo || window.navigator.language || window.navigator.userLanguage), 
            b.promiseLoad = b.loader.load();
        }(c = b.localization || (b.localization = {}));
    }(b = a.common || (a.common = {}));
}(powerbi || (powerbi = {}));

var powerbi;

!function(a) {
    var b;
    !function(b) {
        function c(a, c) {
            return void 0 === c && (c = b.localization.loader), new e(c, a);
        }
        var d = powerbitests.helpers;
        b.createLocalizationService = c;
        var e = function() {
            function c(b, c) {
                this.promiseFactory = c || a.createJQueryPromiseFactory(), this.loader = b;
            }
            return Object.defineProperty(c.prototype, "currentLanguageLocale", {
                get: function() {
                    return this.loader.currentLanguageLocale;
                },
                enumerable: !0,
                configurable: !0
            }), c.prototype.get = function(a) {
                return this.getImpl(a);
            }, c.prototype.getOptional = function(a) {
                return this.getImpl(a, !0);
            }, c.prototype.ensureLocalization = function(a) {
                var c = this.promiseFactory.defer();
                return this.loader.isDataLoaded ? (a(), c.resolve({})) : this.loader.isDataLoading ? b.localization.promiseLoad.promise.then(function() {
                    a(), c.resolve({});
                }, function() {
                    c.resolve({});
                }) : (b.localization.promiseLoad = this.loader.load(), b.localization.promiseLoad.promise.then(function() {
                    a(), c.resolve({});
                }, function() {
                    c.resolve({});
                })), c;
            }, c.prototype.format = function(a, b) {
                for (var c = this.get(a), d = b.length; d--; ) c = c.replace(new RegExp("\\{" + d + "\\}", "gm"), this.formatValue(b[d]));
                return c;
            }, c.prototype.formatValue = function(a) {
                return null == a ? "" : jsCommon.Utility.isString(a) ? a : jsCommon.Utility.isNumber(a) ? a.toLocaleString() : jsCommon.Utility.isDate(a) ? a.toLocaleString() : jsCommon.Utility.isObject(a) ? null != a.toLocaleString ? a.toLocaleString() : a.toString() : "";
            }, c.prototype.getImpl = function(b, c) {
                if (this.loader.isDataLoaded && !this.loader.isDefaultLanguage) {
                    var e = this.loader.strings[b];
                    if (!d.isUndefined(e) && null !== e) return e;
                }
                var f = a.localization.defaultLocalizedStrings[b];
                return d.isUndefined(f) || null === f, f;
            }, c;
        }();
        b.localize;
    }(b = a.common || (a.common = {}));
}(powerbi || (powerbi = {}));

var powerbitests;

!function(a) {
    var b;
    !function(a) {
        var b;
        !function(a) {
            function b(a) {
                return a.match(e) ? a : c(a);
            }
            function c(a) {
                var b, c, e, g, h = "";
                return (b = f.exec(a)) && (c = d(b[1], b[2]), e = d(b[3], b[4]), g = d(b[5], b[6]), 
                h = "#" + (16777216 + (c << 16) + (e << 8) + g).toString(16).slice(1)), h;
            }
            function d(a, b) {
                var c = Math.max(0, parseInt(a, 10));
                return b ? Math.floor(255 * Math.min(100, c) / 100) : Math.min(255, c);
            }
            var e = "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$", f = /^rgb\(\s*(-?\d+)(%?)\s*,\s*(-?\d+)(%?)\s*,\s*(-?\d+)(%?)\s*\)$/;
            a.convertFromRGBorHexToHex = b;
        }(b = a.ColorUtility || (a.ColorUtility = {}));
    }(b = a.utils || (a.utils = {}));
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    describe("GradientUtils", function() {
        it("getFillRuleRole with fillRule", function() {
            var a = {
                test: {
                    displayName: "displayName",
                    properties: {
                        fillRule: {
                            displayName: "fillRule",
                            type: {
                                fillRule: {}
                            },
                            rule: {
                                inputRole: "inputRoleValue"
                            }
                        }
                    }
                }
            };
            expect(powerbi.visuals.GradientUtils.getFillRuleRole(a)).toBe("inputRoleValue");
        }), it("getFillRuleRole without fillRule", function() {
            var a = {
                test: {
                    displayName: "displayName",
                    properties: {
                        fill: {
                            displayName: "fill",
                            type: {
                                fill: {
                                    solid: {
                                        color: !0
                                    }
                                }
                            }
                        }
                    }
                }
            };
            expect(powerbi.visuals.GradientUtils.getFillRuleRole(a)).toBeUndefined();
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.AxisHelper, c = powerbi.ValueType;
    describe("AxisHelper invertOrdinalScale tests", function() {
        var a, c, d;
        beforeEach(function() {
            a = [ 0, 99 ], d = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ], c = d3.scale.ordinal(), c.rangeRoundBands(a, .1), 
            c.domain(d);
        }), it("invertOrdinalScale in middle", function() {
            var a = b.invertOrdinalScale(c, 50);
            expect(a).toBe(5);
        }), it("invertOrdinalScale at start", function() {
            var a = b.invertOrdinalScale(c, 0);
            expect(a).toBe(0);
        }), it("invertOrdinalScale at end", function() {
            var a = b.invertOrdinalScale(c, 99);
            expect(a).toBe(9);
        }), it("invertOrdinalScale at before start", function() {
            var a = b.invertOrdinalScale(c, -4);
            expect(a).toBe(0);
        }), it("invertOrdinalScale at after end", function() {
            var a = b.invertOrdinalScale(c, 1222);
            expect(a).toBe(9);
        });
    }), describe("AxisHelper create scales tests", function() {
        var d = [ "Sun", "Mon", "Holiday" ], e = [ 47.5, 98.22, 127.3 ], f = [ new Date("10/15/2014"), new Date("10/15/2015"), new Date("10/15/2016") ], g = [ 0, 1, 2 ], h = [ 0, 1 ], i = [ NaN, NaN ], j = {
            displayName: "Column",
            type: c.fromDescriptor({
                text: !0
            })
        }, k = {
            displayName: "Column",
            type: c.fromDescriptor({
                numeric: !0
            })
        }, l = {
            displayName: "Column",
            type: c.fromDescriptor({
                bool: !0
            })
        }, m = {
            displayName: "Column",
            type: c.fromDescriptor({
                dateTime: !0
            })
        }, n = {
            objectName: "general",
            propertyName: "formatString"
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("create ordinal scale", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: g,
                metaDataColumn: j,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return d[a];
                }
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeUndefined();
            var e = a.values;
            expect(e).toBeDefined(), expect(e.length).toEqual(3), expect(e[0]).toBe("Sun");
            var f = a.categoryThickness;
            expect(f).toBeUndefined();
            var h = a.xLabelMaxWidth;
            expect(h).toBeDefined(), expect(h).toEqual(25);
        }), it("create ordinal scale with linear values", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: g,
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return e[a];
                }
            }), c = a.scale;
            expect(c).toBeDefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(3), expect(d[0]).toBe("47.50"), 
            expect(c.invert).toBeUndefined();
        }), it("create ordinal scale with no categories", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: g,
                metaDataColumn: void 0,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return d[a];
                }
            }), c = a.values;
            expect(c).toBeDefined(), expect(c.length).toEqual(0);
        }), it("create ordinal scale with boolean values", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: h,
                metaDataColumn: l,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return 0 === a ? !0 : !1;
                }
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeUndefined(), expect(a.values[0]).toBe("True"), 
            expect(a.values[1]).toBe("False");
        }), it("create ordinal scale with category thickness", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: g,
                metaDataColumn: j,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                categoryThickness: 5,
                getValueFn: function(a, b) {
                    return d[a];
                }
            }), c = a.values;
            expect(c).toBeDefined(), expect(c.length).toEqual(3), expect(c[0]).toBe("Sun");
            var e = a.categoryThickness;
            expect(e).toBeDefined(), expect(e).toEqual(5);
            var f = a.xLabelMaxWidth;
            expect(f).toBeDefined(), expect(f).toEqual(5);
        }), it("create linear scale", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: [ e[0], e[2] ],
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.categoryThickness;
            expect(d).toBeUndefined();
            var f = a.values;
            expect(f).toBeDefined(), expect(f.length).toEqual(2), expect(f[1]).toBe("100.00");
            var g = a.xLabelMaxWidth;
            expect(g).toBeDefined(), expect(g).toBeGreaterThan(33), expect(g).toBeLessThan(34);
        }), it("create linear scale with NaN domain", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: i,
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !0
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(3), expect(d[2]).toBe("10.00");
        }), it("create value scale - near zero min check", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: [ -1725e-9, 15 ],
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !0
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(2), expect(d[0]).toBe("0.00");
        }), it("create linear scale with category thickness", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: [ 40, 60 ],
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1,
                categoryThickness: 20
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.categoryThickness;
            expect(d).toBeDefined(), expect(d).toEqual(20);
            var e = a.xLabelMaxWidth;
            expect(e).toBeDefined(), expect(e).toBe(25);
        }), it("create linear scale with category thickness that needs to change", function() {
            var a = b.createAxis({
                pixelSpan: 200,
                dataDomain: [ 2007, 2011 ],
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1,
                categoryThickness: 50
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.categoryThickness;
            expect(d).toBeDefined(), expect(d).toBeCloseTo(33.3, 1);
        }), it("create linear scale with category thickness and zero range (single value)", function() {
            var a = b.createAxis({
                pixelSpan: 200,
                dataDomain: [ 9, 9 ],
                metaDataColumn: k,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1,
                categoryThickness: 50
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.categoryThickness;
            expect(d).toBeDefined(), expect(d).toBe(50);
        }), it("create scalar time scale", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: [ f[0].getTime(), f[2].getTime() ],
                metaDataColumn: m,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return new Date(a);
                }
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(2), expect(d[0]).toBe("2015");
        }), it("create scalar time scale - single day", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: [ f[0].getTime(), f[0].getTime() ],
                metaDataColumn: m,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !0,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return new Date(a);
                }
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeDefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(1), expect(d[0]).toBe("Oct 15");
        }), it("create ordinal time scale", function() {
            var a = b.createAxis({
                pixelSpan: 100,
                dataDomain: g,
                metaDataColumn: m,
                formatStringProp: n,
                outerPadding: .5,
                isScalar: !1,
                isVertical: !1,
                getValueFn: function(a, b) {
                    return f[a];
                }
            }), c = a.scale;
            expect(c).toBeDefined(), expect(c.invert).toBeUndefined();
            var d = a.values;
            expect(d).toBeDefined(), expect(d.length).toEqual(3), expect(d[0]).toBe("2014");
        });
    }), describe("AxisHelper column type tests", function() {
        it("createOrdinalType", function() {
            var a = b.createOrdinalType();
            expect(b.isOrdinal(a)).toBe(!0), expect(b.isDateTime(a)).toBe(!1);
        }), it("isOrdinal not valid for DateTime", function() {
            expect(b.isOrdinal(c.fromDescriptor({
                dateTime: !0
            }))).toBe(!1);
        }), it("isOrdinal valid for bool", function() {
            expect(b.isOrdinal(c.fromDescriptor({
                bool: !0
            }))).toBe(!0);
        }), it("isOrdinal not valid for numeric", function() {
            expect(b.isOrdinal(c.fromDescriptor({
                numeric: !0
            }))).toBe(!1);
        }), it("isOrdinal valid for text", function() {
            expect(b.isOrdinal(c.fromDescriptor({
                text: !0
            }))).toBe(!0);
        }), it("isDateTime valid for DateTime", function() {
            expect(b.isDateTime(c.fromDescriptor({
                dateTime: !0
            }))).toBe(!0);
        }), it("isDateTime not valid for non-DateTIme", function() {
            expect(b.isDateTime(c.fromDescriptor({
                numeric: !0
            }))).toBe(!1), expect(b.isDateTime(c.fromDescriptor({
                text: !0
            }))).toBe(!1), expect(b.isDateTime(c.fromDescriptor({
                bool: !0
            }))).toBe(!1);
        }), it("isDateTime null", function() {
            expect(b.isDateTime(null)).toBe(!1);
        }), it("isDateTime undefined", function() {
            expect(b.isDateTime(void 0)).toBe(!1);
        });
    }), describe("AxisHelper get Recommended tick values tests", function() {
        var a = [ "VRooom", "FROM", "1984", "OR", "YEAR", "3000", "?", "?" ];
        it("max is half the ticks", function() {
            var c = [ "VRooom", "1984", "YEAR", "?" ], d = b.getRecommendedTickValuesForAnOrdinalRange(4, a);
            expect(d).toEqual(c);
        }), it("max is zero ticks", function() {
            var c = [], d = b.getRecommendedTickValuesForAnOrdinalRange(0, a);
            expect(d).toEqual(c);
        }), it("max is negative ticks", function() {
            var c = [], d = b.getRecommendedTickValuesForAnOrdinalRange(-1, a);
            expect(d).toEqual(c);
        }), it("max is equal to ticks", function() {
            var c = a, d = b.getRecommendedTickValuesForAnOrdinalRange(8, a);
            expect(d).toEqual(c);
        }), it("max is more than ticks", function() {
            var c = a, d = b.getRecommendedTickValuesForAnOrdinalRange(10, a);
            expect(d).toEqual(c);
        }), it("getRecommendedTickValues: ordinal index", function() {
            var a = [ 0, 2, 4, 6, 8 ], d = b.createOrdinalScale(400, [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ], .4), e = b.getRecommendedTickValues(5, d, c.fromDescriptor({
                text: !0
            }), !1);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: ordinal index - zero maxTicks", function() {
            var a = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ], d = b.createOrdinalScale(400, a, .4), e = b.getRecommendedTickValues(0, d, c.fromDescriptor({
                text: !0
            }), !1);
            expect(e).toEqual([]);
        }), it("getRecommendedTickValues: ordinal index - maxTicks greater than len", function() {
            var a = [ 0, 1, 2, 3, 4 ], d = b.createOrdinalScale(400, a, .4), e = b.getRecommendedTickValues(6, d, c.fromDescriptor({
                text: !0
            }), !1);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: scalar numeric - easy", function() {
            var a = [ 0, 20, 40, 60, 80, 100 ], d = b.createLinearScale(400, [ 0, 100 ]), e = b.getRecommendedTickValues(6, d, c.fromDescriptor({
                numeric: !0
            }), !0);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: 0 tick count", function() {
            var a = [], d = b.createLinearScale(400, [ 0, 100 ]), e = b.getRecommendedTickValues(0, d, c.fromDescriptor({
                numeric: !0
            }), !0);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: positive range", function() {
            var a = [ 60, 80, 100 ], d = b.createLinearScale(400, [ 60, 100 ]), e = b.getRecommendedTickValues(3, d, c.fromDescriptor({
                numeric: !0
            }), !0);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: negative range", function() {
            var a = [ -200, -180, -160, -140, -120, -100 ], d = b.createLinearScale(400, [ -200, -100 ]), e = b.getRecommendedTickValues(6, d, c.fromDescriptor({
                numeric: !0
            }), !0);
            expect(e).toEqual(a);
        }), it("getRecommendedTickValues: 0 between min and max", function() {
            var a = [ 0, 50, 100 ], d = b.createLinearScale(400, [ -20, 100 ]), e = b.getRecommendedTickValues(4, d, c.fromDescriptor({
                numeric: !0
            }), !0);
            expect(e).toEqual(a);
        }), it("ensureValuesInRange: unsorted tick values", function() {
            var a = [ 1, 2, 3, 4, 5 ], c = b.ensureValuesInRange(a, 2.2, 5.5);
            expect(c).toEqual([ 3, 4, 5 ]);
        }), it("ensureValuesInRange: only one value in range", function() {
            var a = [ 1, 2, 3, 4, 5 ], c = b.ensureValuesInRange(a, 1.5, 2.5);
            expect(c).toEqual([ 1.5, 2.5 ]);
        }), it("ensureValuesInRange: no value in range", function() {
            var a = [ 1, 2 ], c = b.ensureValuesInRange(a, 1.25, 1.75);
            expect(c).toEqual([ 1.25, 1.75 ]);
        });
    }), describe("AxisHelper get best number of ticks tests", function() {
        var a = [ {
            displayName: "col1",
            isMeasure: !0,
            type: c.fromDescriptor({
                integer: !0
            })
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: c.fromDescriptor({
                integer: !0
            })
        } ], d = [ {
            displayName: "col1",
            isMeasure: !0,
            type: c.fromDescriptor({
                integer: !0
            })
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: c.fromDescriptor({
                numeric: !0
            })
        } ];
        it("dataViewMetadataColumn with only integers small range", function() {
            var c = b.getBestNumberOfTicks(0, 3, a, 6);
            expect(c).toBe(4);
        }), it("dataViewMetadataColumn with only integers large range", function() {
            var c = b.getBestNumberOfTicks(0, 10, a, 6);
            expect(c).toBe(6);
        }), it("hundred percent dataViewMetadataColumn with only integers", function() {
            var c = b.getBestNumberOfTicks(0, 1, a, 6);
            expect(c).toBe(6);
        }), it("dataViewMetadataColumn with non integers", function() {
            var a = b.getBestNumberOfTicks(0, 3, d, 6);
            expect(a).toBe(6);
        }), it("dataViewMetadataColumn with NaN min/max", function() {
            var a = b.getBestNumberOfTicks(NaN, 3, d, 6);
            expect(a).toBe(3), a = b.getBestNumberOfTicks(1, NaN, d, 6), expect(a).toBe(3), 
            a = b.getBestNumberOfTicks(NaN, NaN, d, 6), expect(a).toBe(3);
        });
    }), describe("AxisHelper diffScaled", function() {
        var a;
        beforeEach(function() {
            var b = [ 0, 999 ], c = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 999 ];
            a = d3.scale.linear().range(b).domain(c);
        }), it("diffScaled: zero", function() {
            expect(b.diffScaled(a, 0, 0)).toBe(0);
        }), it("diffScaled: small nonzero +ve", function() {
            expect(b.diffScaled(a, 1e-8, 0)).toBe(1);
        }), it("diffScaled: small nonzero -ve", function() {
            expect(b.diffScaled(a, -1e-8, 0)).toBe(-1);
        });
    }), describe("AxisHelper getRecommendedNumberOfTicks tests", function() {
        it("getRecommendedNumberOfTicksForXAxis small tile", function() {
            var a = b.getRecommendedNumberOfTicksForXAxis(220);
            expect(a).toBe(3);
        }), it("getRecommendedNumberOfTicksForXAxis median tile", function() {
            var a = b.getRecommendedNumberOfTicksForXAxis(480);
            expect(a).toBe(6);
        }), it("getRecommendedNumberOfTicksForXAxis large tile", function() {
            var a = b.getRecommendedNumberOfTicksForXAxis(730);
            expect(a).toBe(6);
        }), it("getRecommendedNumberOfTicksForYAxis small tile", function() {
            var a = b.getRecommendedNumberOfTicksForYAxis(80);
            expect(a).toBe(3);
        }), it("getRecommendedNumberOfTicksForYAxis median tile", function() {
            var a = b.getRecommendedNumberOfTicksForYAxis(230);
            expect(a).toBe(6);
        }), it("getRecommendedNumberOfTicksForYAxis large tile", function() {
            var a = b.getRecommendedNumberOfTicksForYAxis(350);
            expect(a).toBe(6);
        });
    }), describe("AxisHelper margins", function() {
        var a = {
            width: 10,
            height: 20
        }, c = {
            scale: void 0,
            axis: void 0,
            values: [ 87, 78 ],
            axisType: void 0,
            formatter: void 0,
            axisLabel: "",
            isCategoryAxis: !0,
            xLabelMaxWidth: 20
        }, d = {
            scale: void 0,
            axis: void 0,
            values: [ 20, 30, 50 ],
            axisType: void 0,
            formatter: void 0,
            axisLabel: "",
            isCategoryAxis: !0,
            xLabelMaxWidth: 20
        }, e = {
            scale: void 0,
            axis: void 0,
            values: [ 2e3, 3e3, 5e3 ],
            axisType: void 0,
            formatter: void 0,
            axisLabel: "",
            isCategoryAxis: !0,
            xLabelMaxWidth: 20
        }, f = {
            fontFamily: "",
            fontSize: "16"
        };
        it("Check that margins are calculatde correctly when you render 2 axes", function() {
            var g = b.getTickLabelMargins(a, 20, powerbi.TextMeasurementService.measureSvgTextWidth, c, d, !0, 77, f, e, void 0, !1, !0, !0, !0);
            expect(g.xMax).toBe(7), expect(g.yLeft).toBe(12), expect(g.yRight).toBe(24);
        }), it("Check that margins are calculated correctly when you hide all axes", function() {
            var g = b.getTickLabelMargins(a, 20, powerbi.TextMeasurementService.measureSvgTextWidth, c, d, !0, 77, f, e, void 0, !1, !1, !1, !1);
            expect(g.xMax).toBe(0), expect(g.yLeft).toBe(0), expect(g.yRight).toBe(0);
        }), it("Disable the secondary axis", function() {
            var g = b.getTickLabelMargins(a, 20, powerbi.TextMeasurementService.measureSvgTextWidth, c, d, !0, 77, f, e, void 0, !1, !0, !0, !1);
            expect(g.xMax).toBe(7), expect(g.yLeft).toBe(12), expect(g.yRight).toBe(0);
        }), it("Switch the y-axes, and disable the secondary axis", function() {
            var g = b.getTickLabelMargins(a, 20, powerbi.TextMeasurementService.measureSvgTextWidth, c, d, !0, 77, f, e, void 0, !0, !0, !0, !1);
            expect(g.xMax).toBe(7), expect(g.yLeft).toBe(0), expect(g.yRight).toBe(12);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.ColorHelper, c = powerbi.data.SQExprShortSerializer;
    describe("Color Helper", function() {
        var a, d, e, f = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "sales"
        });
        beforeEach(function() {
            d = powerbi.visuals.visualStyles.create(), e = d.colorPalette.dataColors, a = new b(e, null);
        }), it("getColorForSeriesValue should handle undefined identity array", function() {
            var b = a.getColorForSeriesValue(void 0, void 0, "value"), d = e.getColorByScale(c.serializeArray([]), "value").value;
            expect(b).toEqual(d);
        }), it("getColorForSeriesValue should return the same color for the same series and value", function() {
            var b = a.getColorForSeriesValue(null, [ f ], "value"), c = a.getColorForSeriesValue(null, [ f ], "value");
            expect(b).toEqual(c);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    describe("converterHelper tests", function() {
        function b(a) {
            expect(a.categories).toEqual([ null ]), expect(a.categoryIdentities).toBeUndefined();
        }
        function c(b) {
            var c = {
                columns: [ {
                    displayName: "col1",
                    roles: b
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                } ]
            };
            return {
                categories: [ {
                    source: c.columns[0],
                    values: [ "a", "b" ],
                    identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                } ],
                values: powerbi.data.DataViewTransform.createValueColumns([ {
                    source: c.columns[1],
                    values: [ 100, 200 ]
                } ])
            };
        }
        function d() {
            return {
                objectName: "general",
                propertyName: "formatString"
            };
        }
        it("categoryIsAlsoSeriesRole default", function() {
            var a = c({});
            expect(powerbi.visuals.converterHelper.categoryIsAlsoSeriesRole(a, "Series", "Category")).toBeFalsy();
            var a = c({
                Category: !0
            });
            expect(powerbi.visuals.converterHelper.categoryIsAlsoSeriesRole(a, "Series", "Category")).toBeFalsy();
            var a = c({
                "E === mc^2": !0
            });
            expect(powerbi.visuals.converterHelper.categoryIsAlsoSeriesRole(a, "Series", "Category")).toBeFalsy();
        }), it("categoryIsAlsoSeriesRole series and category", function() {
            var a = c({
                Series: !0,
                Category: !0
            });
            expect(powerbi.visuals.converterHelper.categoryIsAlsoSeriesRole(a, "Series", "Category")).toBe(!0);
            var a = c({
                Series: !0,
                "F === ma": !0,
                Category: !0
            });
            expect(powerbi.visuals.converterHelper.categoryIsAlsoSeriesRole(a, "Series", "Category")).toBe(!0);
        }), it("getPivotedCategories default", function() {
            var a = c({}), b = powerbi.visuals.converterHelper.getPivotedCategories(a, d());
            expect(b.categories).toEqual([ "a", "b" ]), expect(b.categoryIdentities).toEqual([ a.categories[0].identity[0], a.categories[0].identity[1] ]);
        }), it("getPivotedCategories empty categories", function() {
            var a = c({});
            a.categories = [];
            var e = powerbi.visuals.converterHelper.getPivotedCategories(a, d());
            b(e);
        }), it("getPivotedCategories empty category values", function() {
            var a = c({});
            a.categories[0].values = [];
            var b = powerbi.visuals.converterHelper.getPivotedCategories(a, d());
            expect(b.categories).toEqual([]), expect(b.categoryIdentities).toBeUndefined();
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b, e) {
        function g(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: !0,
                    labelPrecision: 0,
                    color: {
                        solid: {
                            color: "#FF0000"
                        }
                    }
                }
            }, b;
        }
        var h, i, j = [ {
            displayName: "col1",
            type: d.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: d.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: d.describeDataType(1)
        } ], k = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), i = e ? a.helpers.testDom("100", "100") : a.helpers.testDom("500", "500"), 
            h = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), h.init({
                element: i,
                host: k,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: i.height(),
                    width: i.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Data Label Visibility Validation", function(d) {
            var i = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], k = {
                metadata: g(j),
                categorical: {
                    categories: [ {
                        source: j[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: i
                    } ],
                    values: c.createValueColumns([ {
                        source: j[1],
                        values: [ 20, 20, 100 ],
                        subtotal: 140
                    } ])
                }
            };
            h.onDataChanged({
                dataViews: [ k ]
            });
            var l = $(".data-labels");
            setTimeout(function() {
                if (e) switch (b) {
                  case "columnChart":
                  case "clusteredColumnChart":
                  case "barChart":
                  case "clusteredBarChart":
                    expect(l.length).toBe(3);
                    break;

                  case "hundredPercentStackedColumnChart":
                    expect(l.length).toBe(0);
                    break;

                  case "hundredPercentStackedBarChart":
                    expect(l.length).toBe(3);
                } else switch (b) {
                  case "columnChart":
                  case "barChart":
                  case "clusteredColumnChart":
                  case "clusteredBarChart":
                    expect(l.length).toBe(3);
                    break;

                  case "hundredPercentStackedColumnChart":
                  case "hundredPercentStackedBarChart":
                    expect(l.length).toBe(3);
                }
                d();
            }, f);
        });
    }
    var c = powerbi.data.DataViewTransform, d = powerbi.data.dsr.DataShapeUtility, e = (powerbi.data.SemanticType, 
    powerbi.visuals.dataLabelUtils), f = 100;
    describe("dataLabelUtils Line Chart Collision Detection", function() {
        var b, g, h = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "col3",
                isMeasure: !1,
                type: d.describeDataType(4),
                format: "d"
            } ],
            objects: {
                labels: {
                    show: !0
                }
            }
        }, i = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), g = a.helpers.testDom("500", "150"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: g,
                host: i,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Show labels validation", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: h,
                    categorical: {
                        categories: [ {
                            source: h.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: c.createValueColumns([ {
                            source: h.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 2465e3
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(3), 
                expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toContain("495"), 
                a();
            }, f);
        }), it("Hide labels validation", function(a) {
            var d = jQuery.extend(!0, {}, h);
            d.objects.labels.labelPrecision = null, b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: h.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: c.createValueColumns([ {
                            source: h.columns[1],
                            values: [ 5e5, 55e4, 55e4, 55e4, 6e5 ],
                            subtotal: 275e4
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(2), 
                a();
            }, f);
        }), it("undefined labelSettings validation", function() {
            var a, b = e.enumerateDataLabels(a, !1);
            expect(b).toEqual([]);
        });
    }), describe("dataLabelUtils Scatter Chart Collision Detection", function() {
        var b, e, g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "col3",
                isMeasure: !1,
                type: d.describeDataType(4),
                format: "d"
            } ],
            objects: {
                categoryLabels: {
                    show: !0
                }
            }
        }, h = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), e = a.helpers.testDom("250", "200"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            b.init({
                element: e,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Show labels validation", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "First", "Second", "Third", "Fourth" ]
                        } ],
                        values: c.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 110, 120, 130, 140 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(4), 
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().text()).toBe("First"), 
                a();
            }, f);
        }), it("Hide labels validation", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "First", "Second", "Third", "Fourth", "Fifth" ]
                        } ],
                        values: c.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(3), 
                a();
            }, f);
        });
    }), describe("dataLabelUtils Map Collision Detection", function() {
        var b, c = {
            show: !0,
            displayUnits: 2,
            position: 0,
            precision: 2,
            labelColor: "#000000",
            overrideDefaultColor: !1,
            formatterOptions: {}
        }, d = {
            height: 150,
            width: 300
        };
        beforeEach(function() {
            var c = powerbi.common.createLocalizationService();
            a.mocks.setLocale(c), powerbi.common.localize = c, b = powerbi.createGeoTaggingAnalyzerService(function(a) {
                return c.get(a);
            });
        }), afterEach(function() {
            $(".data-labels").remove();
        }), it("Show bubble labels validation", function() {
            var a = [ {
                x: 0,
                y: 55,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 1"
            }, {
                x: 50,
                y: 55,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 2"
            } ], b = e.getMapLabelLayout(c), f = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapBubbles1", !0), g = e.drawDefaultLabelsForDataPointChart(a, f, b, d);
            expect(g).toBeDefined(), expect($(".mapBubbles1 text").length).toBe(2);
        }), it("Hide bubble labels validation", function() {
            var a = [ {
                x: 45,
                y: 60,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 1"
            }, {
                x: 50,
                y: 60,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 2"
            } ], b = e.getMapLabelLayout(c), f = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapBubbles2", !0), g = e.drawDefaultLabelsForDataPointChart(a, f, b, d);
            expect(g).toBeDefined(), expect($(".mapBubbles2 text").length).toBe(1);
        }), it("Show slice labels validation", function() {
            var a = [ {
                x: 0,
                y: 55,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 1",
                value: 20
            }, {
                x: 50,
                y: 55,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 2",
                value: 20
            } ], b = e.getMapLabelLayout(c), f = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapSlice1", !0), g = e.drawDefaultLabelsForDataPointChart(a, f, b, d);
            expect(g).toBeDefined(), expect($(".mapSlice1 text").length).toBe(2);
        }), it("Hide slice labels validation", function() {
            var a = [ {
                x: 45,
                y: 60,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 1",
                value: 20
            }, {
                x: 50,
                y: 60,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Label 2",
                value: 20
            } ], b = e.getMapLabelLayout(c), f = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapSlice2", !0), g = e.drawDefaultLabelsForDataPointChart(a, f, b, d);
            expect(g).toBeDefined(), expect($(".mapSlice2 text").length).toBe(1);
        });
    }), describe("Stacked Bar Chart show labels validation", function() {
        return b("barChart", !1);
    }), describe("Clustered Bar Chart show labels validation", function() {
        return b("clusteredBarChart", !1);
    }), describe("Hundred Percent Stacked Bar Chart show labels validation", function() {
        return b("hundredPercentStackedBarChart", !1);
    }), describe("Stacked Column Chart show labels validation", function() {
        return b("columnChart", !1);
    }), describe("Clustered Column Chart show labels validation", function() {
        return b("clusteredColumnChart", !1);
    }), describe("Hundred Percent Stacked Column Chart show labels validation", function() {
        return b("hundredPercentStackedColumnChart", !1);
    }), describe("Stacked Bar Chart hide labels validation", function() {
        return b("barChart", !0);
    }), describe("Clustered Bar Chart hide labels validation", function() {
        return b("clusteredBarChart", !0);
    }), describe("Hundred Percent Stacked Bar Chart hide labels validation", function() {
        return b("hundredPercentStackedBarChart", !0);
    }), describe("Stacked Column Chart hide labels validation", function() {
        return b("columnChart", !0);
    }), describe("Clustered Column Chart hide labels validation", function() {
        return b("clusteredColumnChart", !0);
    }), describe("Hundred Percent Stacked Column Chart hide labels validation", function() {
        return b("hundredPercentStackedColumnChart", !0);
    }), describe("dataLabelUtils Waterfall Chart Collision Detection", function() {
        var b, c, d = powerbi.data.dsr.DataShapeUtility, e = powerbi.data.SemanticType, g = powerbi.data.DataViewTransform, h = powerbi.common.createLocalizationService();
        powerbi.common.localize = h;
        var i = [ 100, -200, 250 ], j = [ 2010, 2011, 2012 ], k = {
            displayName: "year",
            type: d.describeDataType(2048)
        }, l = {
            displayName: "sales",
            isMeasure: !0,
            type: d.describeDataType(e.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            }
        }, m = {
            categories: [ {
                source: k,
                values: j
            } ],
            values: g.createValueColumns([ {
                source: l,
                values: i
            } ])
        }, n = {
            columns: [ k, l ]
        }, o = {
            categorical: m,
            metadata: n
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), b = powerbi.visuals.visualPluginFactory.create().getPlugin("waterfallChart").create();
        }), it("Show labels validation", function(d) {
            c = a.helpers.testDom("500", "500"), b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }), o.metadata.objects = {
                labels: {
                    show: !0
                }
            };
            var e = {
                dataViews: [ o ]
            };
            b.onDataChanged(e), setTimeout(function() {
                expect($(".dataLabelsSVG text").length).toBe(2), d();
            }, f);
        }), it("Hide labels validation", function(d) {
            c = a.helpers.testDom("120", "100"), b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }), o.metadata.objects = {
                labels: {
                    show: !0
                }
            };
            var e = {
                dataViews: [ o ]
            };
            b.onDataChanged(e), setTimeout(function() {
                expect($(".dataLabelsSVG text").length).toBe(2), d();
            }, f);
        });
    }), describe("dataLabelUtils tests", function() {
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("display units formatting values : Auto", function() {
            var a = 2e4, b = e.getDefaultLabelSettings();
            b.displayUnits = 0, b.precision = 0;
            var c = powerbi.visuals.valueFormatter.create(e.getLabelFormatterOptions(b)), d = c.format(a);
            expect(d).toBe("20000");
        }), it("display units formatting values : K", function() {
            var a = 2e4, b = e.getDefaultLabelSettings();
            b.displayUnits = 1e4, b.precision = 0;
            var c = powerbi.visuals.valueFormatter.create(e.getLabelFormatterOptions(b)), d = c.format(a);
            expect(d).toBe("20K");
        }), it("display units formatting values : M", function() {
            var a = 2e5, b = e.getDefaultLabelSettings();
            b.displayUnits = 1e6, b.precision = 1;
            var c = powerbi.visuals.valueFormatter.create(e.getLabelFormatterOptions(b)), d = c.format(a);
            expect(d).toBe("0.2M");
        }), it("display units formatting values : B", function() {
            var a = 2e11, b = e.getDefaultLabelSettings();
            b.displayUnits = 1e9, b.precision = 0;
            var c = powerbi.visuals.valueFormatter.create(e.getLabelFormatterOptions(b)), d = c.format(a);
            expect(d).toBe("200bn");
        }), it("display units formatting values : T", function() {
            var a = 2e11, b = e.getDefaultLabelSettings();
            b.displayUnits = 1e12, b.precision = 1;
            var c = powerbi.visuals.valueFormatter.create(e.getLabelFormatterOptions(b)), d = c.format(a);
            expect(d).toBe("0.2T");
        });
    }), describe("dataLabelUtils Test enumerate ctegory labels", function() {
        it("test default values", function() {
            var a = e.getDefaultPointLabelSettings(), b = e.enumerateCategoryLabels(a, !0), c = e.enumerateCategoryLabels(a, !1);
            expect(b[0].properties.show).toBe(!1), expect(c[0].properties.show).toBe(!1), expect(b[0].properties.color).toBe(a.labelColor), 
            expect(c[0].properties.color).toBeUndefined();
        }), it("test custom values", function() {
            var a = e.getDefaultPointLabelSettings();
            a.show = !0, a.labelColor = "#FF0000";
            var b = e.enumerateCategoryLabels(a, !0);
            expect(b[0].properties.show).toBe(!0), expect(b[0].properties.color).toBe("#FF0000");
        }), it("test category labels objetcs for donut chart", function() {
            var a = e.getDefaultDonutLabelSettings(), b = e.enumerateCategoryLabels(a, !1, !0);
            expect(b[0].properties.show).toBe(a.showCategory);
        }), it("test null values", function() {
            var a = e.getDefaultPointLabelSettings(), b = e.getDefaultDonutLabelSettings(), c = e.enumerateCategoryLabels(null, !0), d = e.enumerateCategoryLabels(null, !1, !0);
            expect(c[0].properties.show).toBe(a.show), expect(c[0].properties.color).toBe(a.labelColor), 
            expect(d[0].properties.show).toBe(b.showCategory);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.DataRoleHelper, c = powerbi.data.DataViewTransform;
    describe("dataRoleHelper tests", function() {
        it("getMeasureIndexOfRole with roles validation", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: c.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    }, {
                        source: a.columns[2],
                        values: [ 1, 2, 3 ],
                        subtotal: 6
                    }, {
                        source: a.columns[3],
                        values: [ 4, 5, 6 ],
                        subtotal: 15
                    } ])
                }
            }, e = d.categorical.values.grouped(), f = b.getMeasureIndexOfRole(e, "InvalidRoleName");
            expect(f).toBe(-1), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "Size"), 
            expect(f).toBe(0), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "X"), 
            expect(f).toBe(1), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "Y"), 
            expect(f).toBe(2);
        }), it("getMeasureIndexOfRole without roles validation", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: c.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    }, {
                        source: a.columns[2],
                        values: [ 1, 2, 3 ],
                        subtotal: 6
                    }, {
                        source: a.columns[3],
                        values: [ 4, 5, 6 ],
                        subtotal: 15
                    } ])
                }
            }, e = d.categorical.values.grouped(), f = b.getMeasureIndexOfRole(e, "InvalidRoleName");
            expect(f).toBe(-1), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "Size"), 
            expect(f).toBe(-1), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "X"), 
            expect(f).toBe(-1), f = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(e, "Y"), 
            expect(f).toBe(-1);
        }), it("getMeasureIndexOfRole without roles validation with default", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: c.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    }, {
                        source: a.columns[2],
                        values: [ 1, 2, 3 ],
                        subtotal: 6
                    }, {
                        source: a.columns[3],
                        values: [ 4, 5, 6 ],
                        subtotal: 15
                    } ])
                }
            }, d = b.categorical.values.grouped(), e = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(d, "Size", 0);
            expect(e).toBe(0);
        }), it("getMeasureIndexOfRole without roles validation with default too few measures", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: c.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    } ])
                }
            }, d = b.categorical.values.grouped(), e = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(d, "2nd measure", 1);
            expect(e).toBe(-1);
        }), it("hasRoleInDataView", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Series: !0
                    }
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                } ]
            }, c = {
                metadata: a
            };
            expect(b.hasRoleInDataView(c, "Series")).toBe(!0), expect(b.hasRoleInDataView(c, "Category")).toBe(!1);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.data.dsr.DataShapeUtility, c = (powerbi.data.SemanticType, powerbi.data.DataViewTransform);
    describe("InvalidDataValuesCheckerTests", function() {
        function d(a) {
            var b = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: e,
                        identity: f
                    } ],
                    values: c.createValueColumns([ {
                        source: g.columns[1],
                        values: a
                    } ])
                }
            };
            return b;
        }
        var e = [ "a", "b", "c", "d", "e" ], f = e.map(function(b) {
            return a.mocks.dataViewScopeIdentity(b);
        }), g = {
            columns: [ {
                displayName: "stringColumn",
                type: b.describeDataType(2048)
            }, {
                displayName: "numberColumn",
                isMeasure: !0,
                type: b.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "dateTimeColumn",
                isMeasure: !0,
                type: b.describeDataType(4)
            } ]
        };
        it("empty values does not display a warning all supported.", function() {
            var a = d([]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(0);
        }), it("empty values does not display a warning none supported.", function() {
            var a = d([]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(0);
        }), it("single value does not display a warning all supported.", function() {
            var a = d([ 300 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(0);
        }), it("single value does not display a warning none supported.", function() {
            var a = d([ 300 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(0);
        }), it("NaN value does not display a warning when supported.", function() {
            var a = d([ NaN ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(0);
        }), it("NaN value does not display a warning when others not supported.", function() {
            var a = d([ NaN ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !1, !1);
            expect(b.length).toBe(0);
        }), it("NaN value displays a warning when not supported.", function() {
            var a = d([ NaN ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(1), expect(b[0].code).toBe("NaNNotSupported");
        }), it("NaN value displays a warning when not supported but others are supported.", function() {
            var a = d([ NaN ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !0, !0);
            expect(b.length).toBe(1), expect(b[0].code).toBe("NaNNotSupported");
        }), it("Negative infinity value does not display a warning when supported.", function() {
            var a = d([ Number.NEGATIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(0);
        }), it("Negative infinity value does not display a warning when others not supported.", function() {
            var a = d([ Number.NEGATIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !0, !1);
            expect(b.length).toBe(0);
        }), it("Negative infinity value displays a warning when not supported.", function() {
            var a = d([ Number.NEGATIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(1);
            var c = 0;
            expect(b[c++].code).toBe("InfinityValuesNotSupported");
        }), it("Negative infinity value displays a warning when not supported but others are supported.", function() {
            var a = d([ Number.NEGATIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !1, !0);
            expect(b.length).toBe(1), expect(b[0].code).toBe("InfinityValuesNotSupported");
        }), it("Positive infinity value does not display a warning when supported.", function() {
            var a = d([ Number.POSITIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(0);
        }), it("Positive infinity value does not display a warning when others not supported.", function() {
            var a = d([ Number.POSITIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !0);
            expect(b.length).toBe(0);
        }), it("Postive infinity value displays a warning when not supported.", function() {
            var a = d([ Number.POSITIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(1), expect(b[0].code).toBe("InfinityValuesNotSupported");
        }), it("Positive infinity value displays a warning when not supported but others are supported.", function() {
            var a = d([ Number.POSITIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !1);
            expect(b.length).toBe(1), expect(b[0].code).toBe("InfinityValuesNotSupported");
        }), it("Out of range value displays a warning when others are supported.", function() {
            var a = d([ 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(1), expect(b[0].code).toBe("ValuesOutOfRange");
        }), it("Negative out of range value displays a warning when others are supported.", function() {
            var a = d([ -2.7e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !0, !0, !0);
            expect(b.length).toBe(1), expect(b[0].code).toBe("ValuesOutOfRange");
        }), it("Out of range value displays a warning when others are not supported.", function() {
            var a = d([ 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(1), expect(b[0].code).toBe("ValuesOutOfRange");
        }), it("Negative out of range value displays a warning when others are not supported.", function() {
            var a = d([ 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(1), expect(b[0].code).toBe("ValuesOutOfRange");
        }), it("NaN and infinity sends warning for both when all not supported", function() {
            var a = d([ NaN, Number.POSITIVE_INFINITY ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(2);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("InfinityValuesNotSupported");
        }), it("NaN and infinity and out of range sends warning for all when all not supported", function() {
            var a = d([ NaN, Number.POSITIVE_INFINITY, 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(3);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("InfinityValuesNotSupported"), 
            expect(b[c++].code).toBe("ValuesOutOfRange");
        }), it("NaN and infinity and out of range sends warning for all when all not supported has no duplications", function() {
            var a = d([ NaN, Number.POSITIVE_INFINITY, NaN, 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(3);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("InfinityValuesNotSupported"), 
            expect(b[c++].code).toBe("ValuesOutOfRange");
        }), it("NaN and infinity and out of range sends warning for all when Infinity supported has no infinity warning", function() {
            var a = d([ NaN, Number.POSITIVE_INFINITY, NaN, 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !0, !0);
            expect(b.length).toBe(2);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("ValuesOutOfRange");
        }), it("NaN and infinity and out of range sends warning for all with good values at the beginning", function() {
            var a = d([ 100, 200, 300, 400, NaN, Number.POSITIVE_INFINITY, NaN, 1e301 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(3);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("InfinityValuesNotSupported"), 
            expect(b[c++].code).toBe("ValuesOutOfRange");
        }), it("NaN and infinity and out of range sends warning for all with good values throughout", function() {
            var a = d([ 100, 200, NaN, 300, Number.POSITIVE_INFINITY, NaN, 400, 1e301, 500 ]), b = powerbi.visuals.getInvalidValueWarnings([ a ], !1, !1, !1);
            expect(b.length).toBe(3);
            var c = 0;
            expect(b[c++].code).toBe("NaNNotSupported"), expect(b[c++].code).toBe("InfinityValuesNotSupported"), 
            expect(b[c++].code).toBe("ValuesOutOfRange");
        }), it("Multiple dataViews both good does not show a warning", function() {
            var a = d([ 100, 200, 500 ]), b = d([ 200, 300, 400 ]), c = powerbi.visuals.getInvalidValueWarnings([ a, b ], !1, !1, !1);
            expect(c.length).toBe(0);
        }), it("Multiple dataviews first has invalid shows warnings", function() {
            var a = d([ 100, 200, NaN ]), b = d([ 100, 200, 300 ]), c = powerbi.visuals.getInvalidValueWarnings([ a, b ], !1, !1, !1);
            expect(c.length).toBe(1);
            var e = 0;
            expect(c[e++].code).toBe("NaNNotSupported");
        }), it("Multiple datasets last has invalid values shows warnings", function() {
            var a = d([ 100, 200, 300, 400 ]), b = d([ 100, 200, NaN, 300, Number.POSITIVE_INFINITY, NaN, 400, 1e301, 500 ]), c = powerbi.visuals.getInvalidValueWarnings([ a, b ], !1, !1, !1);
            expect(c.length).toBe(3);
            var e = 0;
            expect(c[e++].code).toBe("NaNNotSupported"), expect(c[e++].code).toBe("InfinityValuesNotSupported"), 
            expect(c[e++].code).toBe("ValuesOutOfRange");
        }), it("Multiple dataViews both have invalid values shows correct warning", function() {
            var a = d([ 100, 200, Number.NaN, 300, Number.POSITIVE_INFINITY, NaN, 400, 1e301, 500 ]), b = d([ Number.NEGATIVE_INFINITY, Number.NaN, 300, 1e301 ]), c = powerbi.visuals.getInvalidValueWarnings([ a, b ], !1, !1, !1);
            expect(c.length).toBe(3);
            var e = 0;
            expect(c[e++].code).toBe("NaNNotSupported"), expect(c[e++].code).toBe("InfinityValuesNotSupported"), 
            expect(c[e++].code).toBe("ValuesOutOfRange");
        }), it("Multiple dataViews both have invalid values not overlapping shows correct warning", function() {
            var a = d([ 100, 200, 300, Number.POSITIVE_INFINITY, 400, 1e301, 500 ]), b = d([ Number.NEGATIVE_INFINITY, Number.NaN, 300 ]), c = powerbi.visuals.getInvalidValueWarnings([ a, b ], !1, !1, !1);
            expect(c.length).toBe(3);
            var e = 0;
            expect(c[e++].code).toBe("NaNNotSupported"), expect(c[e++].code).toBe("InfinityValuesNotSupported"), 
            expect(c[e++].code).toBe("ValuesOutOfRange");
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.ListViewFactory, c = 10;
    describe("List view tests", function() {
        function d(a) {
            for (var b = [], c = 0; c < a.length; c++) b.push({
                id: c,
                children: [ {
                    name: a[c].first
                }, {
                    name: a[c].second
                } ]
            });
            return b;
        }
        function e() {
            var a = function(a) {
                a.append("div").style("height", "30px").classed("item", !0).selectAll("span").data(function(a) {
                    return a.children;
                }).enter().append("span");
            }, b = function(a) {
                a.selectAll(".item").selectAll("span").text(function(a) {
                    return "-->" + a.name;
                });
            };
            return {
                enter: a,
                exit: j,
                update: b,
                loadMoreData: function() {},
                baseContainer: d3.select(i.get(0)),
                rowHeight: 30,
                viewport: {
                    height: 200,
                    width: 200
                }
            };
        }
        function f() {
            var a = function(a) {
                a.append("g").style("height", "30px").classed("item", !0).selectAll("g").data(function(a) {
                    return a.children;
                }).enter().append("span").classed("column", !0);
            }, b = function(a) {
                a.selectAll(".item").selectAll(".column").text(function(a) {
                    return "-->" + a.name;
                });
            };
            return {
                enter: a,
                exit: j,
                update: b,
                loadMoreData: function() {},
                baseContainer: d3.select(i.get(0)),
                rowHeight: 30,
                viewport: {
                    height: 200,
                    width: 200
                }
            };
        }
        function g(a) {
            var c = d([ {
                first: "Mickey",
                second: "Mouse"
            }, {
                first: "Mini",
                second: "Mouse"
            }, {
                first: "Daffy",
                second: "Duck"
            }, {
                first: "Captain",
                second: "Planet"
            }, {
                first: "Russell",
                second: "Wilson"
            }, {
                first: "Jack",
                second: "Sparrow"
            }, {
                first: "James",
                second: "Bond"
            }, {
                first: "Sea",
                second: "Hawks"
            }, {
                first: "Sachin",
                second: "Patney"
            } ]), e = b.createHTMLListView(a);
            e.data(c, function(a) {
                return a.id;
            }).render(!0);
        }
        function h(a) {
            var c = d([ {
                first: "Mickey",
                second: "Mouse"
            }, {
                first: "Mini",
                second: "Mouse"
            }, {
                first: "Daffy",
                second: "Duck"
            }, {
                first: "Captain",
                second: "Planet"
            }, {
                first: "Russell",
                second: "Wilson"
            }, {
                first: "Jack",
                second: "Sparrow"
            }, {
                first: "James",
                second: "Bond"
            }, {
                first: "Sea",
                second: "Hawks"
            }, {
                first: "Sachin",
                second: "Patney"
            } ]), e = b.createSVGListView(a);
            e.data(c, function(a) {
                return a.id;
            }).render(!0);
        }
        var i, j = function(a) {
            a.remove();
        };
        beforeEach(function() {
            i = a.helpers.testDom("200", "200");
        }), it("Create HTML List View Correctly", function(a) {
            g(e()), setTimeout(function() {
                var b = i.find(".item").length;
                expect(b).toBeGreaterThan(0), expect(b).toBeLessThan(9), a();
            }, c);
        }), it("Create SVG List View Correctly", function(a) {
            h(f()), setTimeout(function() {
                var b = i.find(".item").length;
                expect(b).toBeGreaterThan(0), expect(b).toBeLessThan(9), a();
            }, c);
        }), it("Scroll to last to check if items come in view HTML", function(a) {
            var b = e(), d = spyOn(b, "loadMoreData");
            g(b);
            var f = i.find(".item").last().text();
            expect(f).not.toEqual("-->Sachin-->Patney"), i.scrollTop(1e3), setTimeout(function() {
                var b = i.find(".item").last().text();
                expect(b).toEqual("-->Sachin-->Patney"), expect(d).toHaveBeenCalled(), a();
            }, c);
        }), it("Scroll to last to check if items come in view SVG", function(a) {
            var b = f(), d = spyOn(b, "loadMoreData");
            h(b);
            var e = i.find(".item").last().text();
            expect(e).not.toEqual("-->Sachin-->Patney"), i.scrollTop(1e3), setTimeout(function() {
                var b = i.find(".item").last().text();
                expect(b).toEqual("-->Sachin-->Patney"), expect(d).toHaveBeenCalled(), a();
            }, c);
        }), it("Reset scrollbar position when ResetScrollbar flag is set", function(a) {
            var f = e(), g = d([ {
                first: "Mickey",
                second: "Mouse"
            }, {
                first: "Mini",
                second: "Mouse"
            }, {
                first: "Daffy",
                second: "Duck"
            }, {
                first: "Captain",
                second: "Planet"
            }, {
                first: "Russell",
                second: "Wilson"
            }, {
                first: "Jack",
                second: "Sparrow"
            }, {
                first: "James",
                second: "Bond"
            }, {
                first: "Sea",
                second: "Hawks"
            } ]), h = b.createHTMLListView(f);
            h.data(g, function(a) {
                return a.id;
            }).render(!0), i.scrollTop(1e3), setTimeout(function() {
                expect(i.find(".scrollRegion").first().parent().scrollTop()).toBe(40), h.data(g, function(a) {
                    return a.id;
                }).render(!0, !1), expect(i.find(".scrollRegion").first().parent().scrollTop()).toBe(40), 
                h.data(g, function(a) {
                    return a.id;
                }).render(!0, !0), expect(i.find(".scrollRegion").first().parent().scrollTop()).toBe(0), 
                a();
            }, c);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.data.DataViewTransform, c = powerbi.data.dsr.DataShapeUtility;
    powerbi.data.SemanticType;
    describe("VisualFactory", function() {
        function d(b) {
            var c = a.mocks.createVisualHostServices(), d = a.helpers.testDom("500", "500");
            b.init({
                element: d,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                settings: void 0,
                interactivity: void 0,
                animation: void 0
            });
        }
        function e(c, d) {
            f(c, d, [ {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "abc", "def" ],
                        identity: [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ],
                        identityFields: [ h ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        min: 123,
                        max: 234,
                        subtotal: 357,
                        values: [ 123, 234 ]
                    } ])
                }
            } ]), f(c, d, []), f(c, d, [ {
                metadata: g,
                categorical: void 0
            } ]), f(c, d, [ {
                metadata: void 0,
                categorical: {
                    categories: [],
                    values: void 0
                }
            } ]), f(c, d, [ {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "abc", "def" ],
                        identity: [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ],
                        identityFields: [ h ]
                    } ],
                    values: void 0
                }
            } ]), f(c, d, [ {
                metadata: g,
                categorical: {
                    categories: void 0,
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        min: 123,
                        max: 123,
                        subtotal: 123,
                        values: [ 123 ]
                    } ])
                }
            } ]), f(c, d, [ {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "abc", "def" ],
                        identity: [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ],
                        identityFields: [ h ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: []
                    } ])
                }
            } ]), f(c, d, [ {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [],
                        identityFields: [ h ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: []
                    } ])
                }
            } ]);
        }
        function f(a, b, c) {
            if (a.onDataChanged({
                dataViews: c
            }), a.enumerateObjectInstances && b) for (var d in b) a.enumerateObjectInstances({
                objectName: d
            });
        }
        beforeEach(function() {
            a.helpers.suppressDebugAssertFailure(), powerbi.common.localize = powerbi.common.createLocalizationService(), 
            a.mocks.setLocale(powerbi.common.localize);
        });
        var g = {
            columns: [ {
                displayName: "col1",
                type: c.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: c.describeDataType(1)
            } ]
        }, h = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "col1"
        });
        it("VisualFactory.getVisuals - categorical - various dataViews", function() {
            for (var a = powerbi.visuals.visualPluginFactory.create().getVisuals(), b = 0; b < a.length; b++) {
                var c = a[b];
                if (c.capabilities && c.capabilities.dataViewMappings && c.capabilities.dataViewMappings.length > 0 && c.capabilities.dataViewMappings[0].categorical) {
                    var f = c.create();
                    try {
                        d(f), e(f, c.capabilities.objects);
                    } catch (g) {
                        expect(c.name + " : " + g.message).toBe("passed");
                    }
                }
            }
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.SelectionId, c = powerbi.data.Selector;
    describe("SelectionId tests", function() {
        var d = a.mocks.dataViewScopeIdentity("A"), e = a.mocks.dataViewScopeIdentity("B"), f = a.mocks.dataViewScopeIdentity("a"), g = a.mocks.dataViewScopeIdentity("b"), h = "measure1", i = "measure2", j = b.createWithId(d), k = b.createWithId(e), l = b.createWithId(f), m = b.createWithId(g), n = b.createWithMeasure(h), o = b.createWithMeasure(i), p = b.createWithIds(d, f), q = b.createWithIds(d, g), r = b.createWithIds(e, f), s = b.createWithIdAndMeasure(d, h), t = b.createWithIdAndMeasure(d, i), u = b.createWithIdAndMeasure(e, h);
        it("SelectionId equals single identifier", function() {
            expect(j.equals(b.createWithId(d))).toBe(!0), expect(j.equals(k)).toBe(!1), expect(l.equals(b.createWithId(f))).toBe(!0), 
            expect(l.equals(m)).toBe(!1), expect(n.equals(b.createWithMeasure(h))).toBe(!0), 
            expect(n.equals(o)).toBe(!1);
        }), it("SelectionId equals two identifiers", function() {
            expect(p.equals(b.createWithIds(d, f))).toBe(!0), expect(p.equals(q)).toBe(!1), 
            expect(p.equals(r)).toBe(!1), expect(p.equals(s)).toBe(!1), expect(s.equals(b.createWithIdAndMeasure(d, h))).toBe(!0), 
            expect(s.equals(t)).toBe(!1), expect(s.equals(u)).toBe(!1), expect(s.equals(p)).toBe(!1);
        }), it("SelectionId equals different identifiers", function() {
            expect(j.equals(l)).toBe(!1), expect(j.equals(p)).toBe(!1), expect(j.equals(s)).toBe(!1), 
            expect(m.equals(n)).toBe(!1), expect(m.equals(q)).toBe(!1), expect(n.equals(j)).toBe(!1), 
            expect(n.equals(s)).toBe(!1);
        }), it("SelectionId includes with category", function() {
            expect(j.includes(j)).toBe(!0), expect(j.includes(q)).toBe(!0), expect(j.includes(s)).toBe(!0), 
            expect(j.includes(k)).toBe(!1), expect(j.includes(l)).toBe(!1), expect(j.includes(n)).toBe(!1);
        }), it("SelectionId includes with series", function() {
            expect(l.includes(l)).toBe(!0), expect(l.includes(p)).toBe(!0), expect(l.includes(j)).toBe(!1), 
            expect(l.includes(m)).toBe(!1), expect(l.includes(n)).toBe(!1);
        }), it("SelectionId includes with measure", function() {
            expect(n.includes(n)).toBe(!0), expect(n.includes(s)).toBe(!0), expect(n.includes(j)).toBe(!1), 
            expect(n.includes(l)).toBe(!1), expect(n.includes(o)).toBe(!1);
        }), it("SelectionId includes with two identifiers", function() {
            expect(p.includes(p)).toBe(!0), expect(p.includes(s)).toBe(!1), expect(p.includes(j)).toBe(!1), 
            expect(s.includes(s)).toBe(!0), expect(s.includes(j)).toBe(!0), expect(p.includes(r)).toBe(!1), 
            expect(s.includes(u)).toBe(!1);
        }), it("SelectionId createNull", function() {
            var a = b.createNull();
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: null,
                highlight: !1
            }));
        }), it("SelectionId createWithId", function() {
            var a = b.createWithId(d);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d ]
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithMeasure", function() {
            var a = b.createWithMeasure(h);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    metadata: h
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithIdAndMeasure", function() {
            var a = b.createWithIdAndMeasure(d, h);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d ],
                    metadata: h
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithIds", function() {
            var a = b.createWithIds(d, f);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d, f ]
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithIds: with duplicates", function() {
            var a = b.createWithIds(d, d);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d ]
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithIdsAndMeasure", function() {
            var a = b.createWithIdsAndMeasure(d, f, h);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d, f ],
                    metadata: h
                }),
                highlight: !1
            })), a = b.createWithIdsAndMeasure(void 0, f, h), expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ f ],
                    metadata: h
                }),
                highlight: !1
            })), a = b.createWithIdsAndMeasure(d, void 0, h), expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d ],
                    metadata: h
                }),
                highlight: !1
            })), a = b.createWithIdsAndMeasure(d, f, void 0), expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d, f ]
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithIdsAndMeasure: with duplicates", function() {
            var a = b.createWithIdsAndMeasure(d, d, h);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d ],
                    metadata: h
                }),
                highlight: !1
            }));
        }), it("SelectionId createWithHighlight", function() {
            var a = b.createWithIdsAndMeasure(d, f, h);
            expect(a.getKey()).toEqual(JSON.stringify({
                selector: c.getKey({
                    data: [ d, f ],
                    metadata: h
                }),
                highlight: !1
            }));
            var e = b.createWithHighlight(a);
            expect(e.getSelector()).toBe(a.getSelector()), expect(e.getKey()).not.toBe(a.getKey());
        }), it("SelectionId creates using undefined", function() {
            var a = b.createNull().getKey(), c = b.createWithIdAndMeasure(void 0, void 0);
            expect(c.getKey()).toEqual(a);
            var d = b.createWithIdAndMeasure(void 0, void 0);
            expect(d.getKey()).toEqual(a);
            var e = b.createWithIdsAndMeasure(void 0, void 0, void 0);
            expect(e.getKey()).toEqual(a);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.shapes, c = powerbi.visuals.shapes.Point, d = powerbi.visuals.shapes.Size, e = powerbi.visuals.shapes.Rect, f = powerbi.visuals.shapes.Thickness, g = powerbi.visuals.shapes.Vector;
    describe("Point tests", function() {
        var a;
        it("offset with positive value", function() {
            var a = {
                x: 10,
                y: 10
            }, b = c.offset(a, 20, 25);
            expect(b.x).toBe(30), expect(b.y).toBe(35);
        }), it("offset with negative value", function() {
            var a = {
                x: 100,
                y: 100
            }, b = c.offset(a, -20, -25);
            expect(b.x).toBe(80), expect(b.y).toBe(75);
        }), it("Check equals - return true", function() {
            var a = {
                x: 100,
                y: 100
            }, b = {
                x: 100,
                y: 100
            }, d = c.equals(a, b);
            expect(d).toBe(!0);
        }), it("Check equals - return false", function() {
            var a = {
                x: 100,
                y: 100
            }, b = {
                x: 50,
                y: 100
            }, d = c.equals(a, b);
            expect(d).toBe(!1);
        }), it("Check clone", function() {
            var a = {
                x: 100,
                y: 100
            }, b = c.clone(a);
            expect(b.x).toBe(a.x), expect(b.y).toBe(a.y);
        }), it("Point - To String", function() {
            var a = {
                x: 100,
                y: 100
            }, b = c.toString(a);
            expect(b).toBe("{x:100, y:100}");
        }), it("Check Serialize", function() {
            var a = {
                x: 200,
                y: 200
            }, b = c.serialize(a);
            expect(b).toBe("200,200");
        }), it("Check Distance ", function() {
            var a = {
                x: 200,
                y: 200
            }, b = {
                x: 250,
                y: 300
            }, d = c.getDistance(a, b), e = Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));
            expect(d).toBe(e);
        }), it("Check Distance (null values)", function() {
            a = null;
            var b = {
                x: 150,
                y: 200
            }, d = c.getDistance(a, b);
            expect(d).toBe(null);
        }), it("Check zero Distance ", function() {
            var a = {
                x: 200,
                y: 200
            }, b = {
                x: 200,
                y: 200
            }, d = c.getDistance(a, b);
            expect(d).toBe(0);
        }), it("Equals (static) - return true ", function() {
            var a = {
                x: 200,
                y: 200
            }, b = {
                x: 200,
                y: 200
            }, d = c.equals(a, b);
            expect(d).toBe(!0);
        }), it("Equals (static) - point A is null ", function() {
            var a = {
                x: 200,
                y: 200
            }, b = c.equals(null, a);
            expect(b).toBe(!1);
        }), it("Equals (static) - point B is null ", function() {
            var a = {
                x: 200,
                y: 200
            }, b = c.equals(a, null);
            expect(b).toBe(!1);
        }), it("Equals (static) - points are null ", function() {
            var a = c.equals(null, null);
            expect(a).toBe(!1);
        }), it("Equals with Precision - return true ", function() {
            var a = {
                x: 200.23,
                y: 200.32
            }, c = {
                x: 200.23,
                y: 200.32
            }, d = b.Point.equalWithPrecision(a, c);
            expect(d).toBe(!0);
        }), it("Parse Point (from string no default value)", function() {
            var a = "200,215", b = c.parsePoint(a);
            expect(b.x).toBe(200), expect(b.y).toBe(215);
        }), it("Parse Point (from string,2 points)", function() {
            var a = "190,220", b = c.parsePoint(a);
            expect(b.x).toBe(190), expect(b.y).toBe(220);
        }), it("Parse Point (from string,2 points (default value ignored)", function() {
            var a = "190,220", b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(190), expect(d.y).toBe(220);
        }), it("Parse Point (from empty string)", function() {
            var a = "", b = c.parsePoint(a);
            expect(b).toBe(null);
        }), it("Parse Point - from empty string (default value taken)", function() {
            var a = "", b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(b.x), expect(d.y).toBe(b.y);
        }), it("Parse Point (from int array)", function() {
            var a = [ 190, 220 ], b = c.parsePoint(a);
            expect(b.x).toBe(190), expect(b.y).toBe(220);
        }), it("Parse Point - from int array (default value ignored)", function() {
            var a = [ 190, 220 ], b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(190), expect(d.y).toBe(220);
        }), it("Parse Point (int with more than 2 elements)", function() {
            var a = [ 190, 220, 200, 210 ], b = c.parsePoint(a);
            expect(b).toBe(null);
        }), it("Parse Point (int with more than 2 elements (default value taken)", function() {
            var b = [ 190, 220, 200, 210 ], d = {
                x: 110,
                y: 100
            };
            a = c.parsePoint(b, d), expect(a.x).toBe(110), expect(a.y).toBe(100);
        }), it("Parse Point (int with one element)", function() {
            var a = [ 190 ], b = c.parsePoint(a);
            expect(b).toBe(null);
        }), it("Parse Point - int with one element (default value taken)", function() {
            var a = [ 190 ], b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(b.x), expect(d.y).toBe(b.y);
        }), it("Parse Point (int with empty array)", function() {
            var a = [], b = c.parsePoint(a);
            expect(b).toBe(null);
        }), it("Parse Point (int with empty array (default value taken)", function() {
            var a = [], b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(110), expect(d.y).toBe(100);
        }), it("Parse Point  - not string and not array)", function() {
            var a = !0, b = c.parsePoint(a);
            expect(b).toBe(null);
        }), it("Parse Point - not string and not array (default value taken)", function() {
            var a = !0, b = {
                x: 110,
                y: 100
            }, d = c.parsePoint(a, b);
            expect(d.x).toBe(110), expect(d.y).toBe(100);
        }), it("Parse Point - getting null", function() {
            var a = c.parsePoint(null);
            expect(a).toBe(null);
        }), it("Parse Point - getting null (default value taken)", function() {
            var a = {
                x: 110,
                y: 100
            }, b = c.parsePoint(null, a);
            expect(b.x).toBe(110), expect(b.y).toBe(100);
        });
    }), describe("Size Tests", function() {
        it("Is Empty - true", function() {
            var a = {
                width: 0,
                height: 0
            }, b = d.isEmpty(a);
            expect(b).toBe(!0);
        }), it("Is Empty - false", function() {
            var a = {
                width: 50,
                height: 50
            }, b = d.isEmpty(a);
            expect(b).toBe(!1);
        }), it("Check equals - return true", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                width: 120,
                height: 100
            }, c = d.equals(a, b);
            expect(c).toBe(!0);
        }), it("Check equals - return false", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                width: 120,
                height: 150
            }, c = d.equals(a, b);
            expect(c).toBe(!1);
        }), it("Check equals - null", function() {
            var a = {
                width: 120,
                height: 100
            }, b = d.equals(a, null);
            expect(b).toBe(!1);
        }), it("clone", function() {
            var a = {
                width: 120,
                height: 100
            }, b = d.clone(a);
            expect(b.width).toBe(a.width), expect(b.height).toBe(a.height);
        }), it("clone - null", function() {
            var a = null, b = d.clone(a);
            expect(b).toBe(null);
        }), it("inflate - Positive values", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                left: 5,
                top: 10,
                right: 5,
                bottom: 10
            }, c = d.inflate(a, b);
            expect(c.width).toBe(130), expect(c.height).toBe(120);
        }), it("inflate - Zero values", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            }, c = d.inflate(a, b);
            expect(c.width).toBe(a.width), expect(c.height).toBe(a.height);
        }), it("deflate - Positive values", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                left: 5,
                top: 10,
                right: 5,
                bottom: 10
            }, c = d.deflate(a, b);
            expect(c.width).toBe(110), expect(c.height).toBe(80);
        }), it("deflate - Zero values", function() {
            var a = {
                width: 120,
                height: 100
            }, b = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            }, c = d.deflate(a, b);
            expect(c.width).toBe(a.width), expect(c.height).toBe(a.height);
        }), it("Combine 2 sizes", function() {
            var a = {
                width: 70,
                height: 110
            }, b = {
                width: 30,
                height: 120
            };
            d.combine(a, b);
            var c = {
                width: 70,
                height: 120
            };
            expect(c.width).toBe(70), expect(c.height).toBe(120);
        }), it("Combine 2 sizes (A contains B)", function() {
            var a = {
                width: 150,
                height: 120
            }, b = {
                width: 80,
                height: 110
            }, c = d.combine(a, b);
            expect(c.width).toBe(a.width), expect(c.height).toBe(a.height);
        }), it("Combine 2 sizes (B contains A)", function() {
            var a = {
                width: 150,
                height: 120
            }, b = {
                width: 180,
                height: 170
            }, c = d.combine(a, b);
            expect(c.width).toBe(b.width), expect(c.height).toBe(b.height);
        }), it("Combine 2 sizes (one empty)", function() {
            var a = {
                width: 110,
                height: 120
            }, b = {
                width: 0,
                height: 0
            }, c = d.combine(a, b);
            expect(c.width).toBe(a.width), expect(c.height).toBe(a.height);
        }), it("To Rect", function() {
            var a = {
                width: 120,
                height: 100
            }, b = d.toRect(a);
            expect(b.left).toBe(0), expect(b.top).toBe(0), expect(b.width).toBe(120), expect(b.height).toBe(100);
        }), it("To string", function() {
            var a = {
                width: 150,
                height: 30
            }, b = d.toString(a);
            expect(b).toBe("{width:150, height:30}");
        }), it("Equals (static) - return true ", function() {
            var a = {
                width: 200,
                height: 200
            }, b = {
                width: 200,
                height: 200
            }, c = d.equals(a, b);
            expect(c).toBe(!0);
        }), it("Equals (static) - size A is null ", function() {
            var a = {
                width: 200,
                height: 200
            }, b = d.equals(null, a);
            expect(b).toBe(!1);
        }), it("Equals (static) - size B is null ", function() {
            var a = {
                width: 200,
                height: 200
            }, b = d.equals(a, null);
            expect(b).toBe(!1);
        }), it("Equals (static) - sizes are null ", function() {
            var a = d.equals(null, null);
            expect(a).toBe(!1);
        }), it("Equals with Precision - return true ", function() {
            var a = {
                width: 200.23,
                height: 200.32
            }, c = {
                width: 200.23,
                height: 200.32
            }, d = b.Size.equalWithPrecision(a, c);
            expect(d).toBe(!0);
        }), it("Parse Size (from string no default value)", function() {
            var a = "200,215", b = d.parseSize(a);
            expect(b.width).toBe(200), expect(b.height).toBe(215);
        }), it("Parse Size (from string,2 points)", function() {
            var a = "190,220", b = d.parseSize(a);
            expect(b.width).toBe(190), expect(b.height).toBe(220);
        }), it("Parse Size - from string,2 points (default value ignored)", function() {
            var a = "190,220", b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(190), expect(c.height).toBe(220);
        }), it("Parse Size (from empty string)", function() {
            var a = "", b = d.parseSize(a);
            expect(b).toBe(null);
        }), it("Parse Size - from empty string (default value taken)", function() {
            var a = "", b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(110), expect(c.height).toBe(100);
        }), it("Parse Size (from int array)", function() {
            var a = [ 190, 220 ], b = d.parseSize(a);
            expect(b.width).toBe(190), expect(b.height).toBe(220);
        }), it("Parse Size - from int array (default value ignored)", function() {
            var a = [ 190, 220 ], b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(190), expect(c.height).toBe(220);
        }), it("Parse Size (int with more than 2 elements)", function() {
            var a = [ 190, 220, 200, 210 ], b = d.parseSize(a);
            expect(b).toBe(null);
        }), it("Parse Size (int with more than 2 elements (default value taken)", function() {
            var a = [ 190, 220, 200, 210 ], b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(b.width), expect(c.height).toBe(b.height);
        }), it("Parse Size (int with one element)", function() {
            var a = [ 190 ], b = d.parseSize(a);
            expect(b).toBe(null);
        }), it("Parse Size (int with one element (default value taken)", function() {
            var a = [ 190 ], b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(b.width), expect(c.height).toBe(b.height);
        }), it("Parse Size (int with empty array)", function() {
            var a = [], b = d.parseSize(a);
            expect(b).toBe(null);
        }), it("Parse Size (int with empty array (default value taken)", function() {
            var a = [], b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(110), expect(c.height).toBe(100);
        }), it("Parse Size (not string and not array)", function() {
            var a = !0, b = d.parseSize(a);
            expect(b).toBe(null);
        }), it("Parse Size (not string and not array (default value taken)", function() {
            var a = !0, b = {
                width: 110,
                height: 100
            }, c = d.parseSize(a, b);
            expect(c.width).toBe(110), expect(c.height).toBe(100);
        }), it("Parse Size - getting null", function() {
            var a = d.parseSize(null);
            expect(a).toBe(null);
        }), it("Parse Size - getting null (default value taken)", function() {
            var a = {
                width: 110,
                height: 100
            }, b = d.parseSize(null, a);
            expect(b.width).toBe(110), expect(b.height).toBe(100);
        });
    }), describe("Rect tests", function() {
        function a(a, b) {
            return b.left === a.left && b.top === a.top && b.width === a.width && b.height === a.height;
        }
        var c, d, f, g, h = {
            left: 110,
            top: 100,
            width: 150,
            height: 117
        };
        it("Is Empty - true", function() {
            c = {
                left: 0,
                top: 0,
                width: 0,
                height: 0
            };
            var a = e.isEmpty(c);
            expect(a).toBe(!0);
        }), it("Is Empty - false", function() {
            c = {
                left: 0,
                top: 0,
                width: 50,
                height: 20
            };
            var a = e.isEmpty(c);
            expect(a).toBe(!1);
        }), it("Is Empty - null", function() {
            c = null, f = e.isEmpty(c), expect(f).toBe(!0);
        }), it("Is Intersecting - true", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 300
            }, d = {
                left: 170,
                top: 30,
                width: 300,
                height: 400
            }, g = e.isIntersecting(c, d), expect(g).toBe(!0);
        }), it("Is Intersecting - false", function() {
            c = {
                left: 0,
                top: 0,
                width: 10,
                height: 10
            }, d = {
                left: 100,
                top: 200,
                width: 500,
                height: 400
            }, g = e.isIntersecting(c, d), expect(g).toBe(!1);
        }), it("Is Intersecting - first rect is null", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            }, d = null, g = e.isIntersecting(c, d), expect(g).toBe(!1);
        }), it("Is Intersecting - second rect is null", function() {
            c = null, d = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            }, g = e.isIntersecting(c, d), expect(g).toBe(!1);
        }), it("Get offset", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            }, d = e.getOffset(c), expect(d.x).toBe(0), expect(d.y).toBe(0);
        }), it("Get size", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            }, d = e.getSize(c), expect(d.width).toBe(200), expect(d.height).toBe(200);
        }), it("Set size", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            };
            var a = {
                width: 150,
                height: 170
            };
            e.setSize(c, a), expect(c.width).toBe(150), expect(c.height).toBe(170);
        }), it("Get Right (Property)", function() {
            c = {
                left: 120,
                top: 50,
                width: 200,
                height: 200
            };
            var a = e.right(c);
            expect(a).toBe(320);
        }), it("Get Bottom (Property)", function() {
            c = {
                left: 70,
                top: 130,
                width: 200,
                height: 200
            };
            var a = e.bottom(c);
            expect(a).toBe(330);
        }), it("Get TopLeft (Property)", function() {
            c = {
                left: 0,
                top: 0,
                width: 200,
                height: 200
            };
            var a = e.topLeft(c);
            expect(a.x).toBe(0), expect(a.y).toBe(0);
        }), it("Get TopRight (Property)", function() {
            c = {
                left: 80,
                top: 170,
                width: 150,
                height: 220
            };
            var a = e.topRight(c);
            expect(a.x).toBe(230), expect(a.y).toBe(170);
        }), it("Get BottomLeft (Property)", function() {
            c = {
                left: 0,
                top: 10,
                width: 30,
                height: 220
            };
            var a = e.bottomLeft(c);
            expect(a.x).toBe(c.left), expect(a.y).toEqual(c.top + c.height);
        }), it("Get BottomRight (Property)", function() {
            c = {
                left: 50,
                top: 90,
                width: 200,
                height: 270
            };
            var a = e.bottomRight(c);
            expect(a.x).toBe(250), expect(a.y).toBe(360);
        }), it("Check equals - return true", function() {
            c = {
                left: 50,
                top: 90,
                width: 200,
                height: 270
            }, d = {
                left: 50,
                top: 90,
                width: 200,
                height: 270
            };
            var a = e.equals(c, d);
            expect(a).toBe(!0);
        }), it("Check equals - return false", function() {
            c = {
                left: 50,
                top: 90,
                width: 200,
                height: 270
            }, d = {
                left: 50,
                top: 90,
                width: 250,
                height: 270
            };
            var a = e.equals(c, d);
            expect(a).toBe(!1);
        }), it("Check equals - null", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            };
            var a = e.equals(c, null);
            expect(a).toBe(!1);
        }), it("Clone", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            }, d = e.clone(c), expect(a(c, d)).toBe(!0);
        }), it("Rect ToString", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            };
            var a = "{left:70, top:90, width:130, height:270}";
            expect(e.toString(c)).toBe(a);
        }), it("Rect offset - Positive Values", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            };
            var a = e.offset(c, 30, 30);
            expect(a.left).toBe(c.left + 30), expect(a.top).toBe(c.top + 30), expect(a.width).toBe(c.width), 
            expect(a.height).toBe(c.height);
        }), it("Rect offset - Zero Values", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            };
            var a = e.offset(c, 0, 0);
            expect(a.left).toBe(c.left);
        }), it("Rect offset - Negative Values", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            }, d = e.offset(c, -30, -60), expect(d.left).toBe(c.left - 30), expect(d.top).toBe(c.top - 60), 
            expect(d.width).toBe(c.width), expect(d.height).toBe(c.height);
        }), it("Rect offset - Negative Offset Bigger than Top Left", function() {
            c = {
                left: 70,
                top: 90,
                width: 130,
                height: 270
            }, d = e.offset(c, -100, -130), expect(d.left).toBe(0), expect(d.top).toBe(0), expect(d.width).toBe(c.width), 
            expect(d.height).toBe(c.height);
        }), it("Rect inflate", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                left: 30,
                top: 20,
                right: 50,
                bottom: 40
            };
            d = e.inflate(c, a), expect(d.left).toBe(40), expect(d.top).toBe(90), expect(d.width).toBe(210), 
            expect(d.height).toBe(330);
        }), it("Rect inflate - Zero Values", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            };
            d = e.inflate(c, a), expect(d.left).toBe(70), expect(d.top).toBe(110), expect(d.width).toBe(130), 
            expect(d.height).toBe(270);
        }), it("Rect deflate", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                left: 30,
                top: 20,
                right: 50,
                bottom: 40
            };
            d = e.deflate(c, a), expect(d.left).toBe(100), expect(d.top).toBe(130), expect(d.width).toBe(50), 
            expect(d.height).toBe(210);
        }), it("Rect deflate - Zero Values", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            };
            d = e.deflate(c, a), expect(d.left).toBe(70), expect(d.top).toBe(110), expect(d.width).toBe(130), 
            expect(d.height).toBe(270);
        }), it("Rect inflateBy", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, c = e.inflateBy(c, 20), expect(c.left).toBe(50), expect(c.top).toBe(90), expect(c.width).toBe(170), 
            expect(c.height).toBe(310);
        }), it("Rect inflateBy - Zero Values", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, c = e.inflateBy(c, 0), expect(c.left).toBe(70), expect(c.top).toBe(110), expect(c.width).toBe(130), 
            expect(c.height).toBe(270);
        }), it("Rect deflateBy", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, c = e.deflateBy(c, 30), expect(c.left).toBe(100), expect(c.top).toBe(140), expect(c.width).toBe(70), 
            expect(c.height).toBe(210);
        }), it("Rect deflateBy - Zero Values", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, c = e.deflateBy(c, 0), expect(c.left).toBe(70), expect(c.top).toBe(110), expect(c.width).toBe(130), 
            expect(c.height).toBe(270);
        }), it("Contains Point - Return true", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                x: 100,
                y: 140
            }, d = b.Rect.containsPoint(c, a);
            expect(d).toBe(!0);
        }), it("Contains Point - Return false", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = {
                x: 220,
                y: 170
            }, d = b.Rect.containsPoint(c, a);
            expect(d).toBe(!1);
        }), it("Contains Point - null", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = b.Rect.containsPoint(c, null);
            expect(a).toBe(!1);
        }), it("Is Intersecting - Return true", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = {
                left: 70,
                top: 150,
                width: 130,
                height: 320
            };
            var a = b.Rect.isIntersecting(c, d);
            expect(a).toBe(!0);
        }), it("Is Intersecting - Return false", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = {
                left: 30,
                top: 20,
                width: 20,
                height: 20
            };
            var a = b.Rect.isIntersecting(c, d);
            expect(a).toBe(!1);
        }), it("Is Intersecting - first null", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = null;
            var a = b.Rect.isIntersecting(c, d);
            expect(a).toBe(!1);
        }), it("Is Intersecting - second null", function() {
            c = null, d = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            };
            var a = b.Rect.isIntersecting(c, d);
            expect(a).toBe(!1);
        }), it("Intersect - Rect A Contains B", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = {
                left: 90,
                top: 140,
                width: 20,
                height: 20
            }, expect(g).toBe(!1);
        }), it("Intersect - Rect B Contains A", function() {
            c = {
                left: 110,
                top: 150,
                width: 30,
                height: 25
            }, d = {
                left: 90,
                top: 140,
                width: 100,
                height: 120
            }, expect(g).toBe(!1);
        }), it("Intersect - Rect A Intersect B", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = {
                left: 90,
                top: 130,
                width: 80,
                height: 70
            }, expect(g).toBe(!1);
        }), it("Intersect - Rect A don't Intersect B", function() {
            c = {
                left: 0,
                top: 0,
                width: 20,
                height: 30
            }, d = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, expect(g).toBe(!1);
        }), it("Intersect - Rect A is null", function() {
            c = null, d = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, expect(g).toBe(!1);
        }), it("Intersect - Rect B is null", function() {
            c = {
                left: 70,
                top: 110,
                width: 130,
                height: 270
            }, d = null, expect(g).toBe(!1);
        }), it("Combine 2 rects", function() {
            c = {
                left: 50,
                top: 50,
                width: 50,
                height: 50
            }, d = {
                left: 60,
                top: 60,
                width: 60,
                height: 60
            };
            var b = e.combine(c, d), f = {
                left: 50,
                top: 50,
                width: 70,
                height: 70
            };
            expect(a(f, b)).toBe(!0);
        }), it("Combine 2 rects (A contains B)", function() {
            c = {
                left: 150,
                top: 150,
                width: 20,
                height: 20
            }, d = {
                left: 160,
                top: 160,
                width: 10,
                height: 10
            };
            var b = e.combine(c, d);
            expect(a(c, b)).toBe(!0);
        }), it("Combine 2 rects (B contains A)", function() {
            c = {
                left: 150,
                top: 150,
                width: 20,
                height: 20
            }, d = {
                left: 130,
                top: 130,
                width: 50,
                height: 50
            };
            var b = e.combine(c, d);
            expect(a(b, d)).toBe(!0);
        }), it("Combine 2 rects (one empty)", function() {
            c = {
                left: 150,
                top: 150,
                width: 20,
                height: 20
            }, d = {
                left: 0,
                top: 0,
                width: 0,
                height: 0
            };
            var b = c;
            e.combine(c, d), expect(a(c, b)).toBe(!0);
        }), it("Parse Rect (from string no default value)", function() {
            var a = "200,215,200,180";
            c = e.parseRect(a), expect(c.left).toBe(200), expect(c.top).toBe(215), expect(c.width).toBe(200), 
            expect(c.height).toBe(180);
        }), it("Parse Rect - from string,(default value ignored)", function() {
            var a = "190,220,150,170";
            c = e.parseRect(a, h), expect(c.left).toBe(190), expect(c.top).toBe(220), expect(c.width).toBe(150), 
            expect(c.height).toBe(170);
        }), it("Parse Rect (from empty string)", function() {
            var a = "";
            c = e.parseRect(a), expect(c).toBe(null);
        }), it("Parse Rect - from empty string (default value taken)", function() {
            var a = "";
            c = e.parseRect(a, h), expect(c.left).toBe(h.left), expect(c.top).toBe(h.top), expect(c.width).toBe(h.width), 
            expect(c.height).toBe(h.height);
        }), it("Parse Rect (from int array)", function() {
            var a = [ 190, 220, 100, 150 ];
            c = e.parseRect(a), expect(c.left).toBe(190), expect(c.top).toBe(220), expect(c.width).toBe(100), 
            expect(c.height).toBe(150);
        }), it("Parse Rect - from int array (default value ignored)", function() {
            var a = [ 190, 220, 130, 115 ];
            c = e.parseRect(a, h), expect(c.left).toBe(190), expect(c.top).toBe(220), expect(c.width).toBe(130), 
            expect(c.height).toBe(115);
        }), it("Parse Rect (int with more than 4 elements)", function() {
            var a = [ 190, 220, 200, 210, 118 ];
            c = e.parseRect(a), expect(c).toBe(null);
        }), it("Parse Rect (int with more than 4 elements (default value ignored)", function() {
            var a = [ 190, 220, 200, 210 ], b = {
                left: 110,
                top: 100,
                width: 115,
                height: 170
            };
            c = e.parseRect(a, b), expect(c.left).toBe(190), expect(c.top).toBe(220), expect(c.width).toBe(200), 
            expect(c.height).toBe(210);
        }), it("Parse Rect (int with one element)", function() {
            var a = [ 190 ];
            c = e.parseRect(a), expect(c).toBe(null);
        }), it("Parse Rect (int with one element (default value taken)", function() {
            var a = [ 190 ];
            c = e.parseRect(a, h), expect(c.left).toBe(h.left), expect(c.top).toBe(h.top), expect(c.width).toBe(h.width), 
            expect(c.height).toBe(h.height);
        }), it("Parse Rect (int with empty array)", function() {
            var a = [];
            c = e.parseRect(a), expect(c).toBe(null);
        }), it("Parse Rect (int with empty array (default value taken)", function() {
            var a = [], b = {
                left: 110,
                top: 100,
                width: 115,
                height: 170
            };
            c = e.parseRect(a, b), expect(c.left).toBe(b.left), expect(c.top).toBe(b.top), expect(c.width).toBe(b.width), 
            expect(c.height).toBe(b.height);
        }), it("Parse Rect (not string and not array)", function() {
            var a = !0;
            c = e.parseRect(a), expect(c).toBe(null);
        }), it("Parse Rect (not string and not array (default value taken)", function() {
            var a = !0, b = {
                left: 110,
                top: 100,
                width: 115,
                height: 170
            };
            c = e.parseRect(a, b), expect(c.left).toBe(b.left), expect(c.top).toBe(b.top), expect(c.width).toBe(b.width), 
            expect(c.height).toBe(b.height);
        }), it("Parse Rect - getting null", function() {
            c = e.parseRect(null), expect(c).toBe(null);
        }), it("Parse Rect - getting null (default value taken)", function() {
            var a = {
                left: 110,
                top: 100,
                width: 115,
                height: 170
            };
            c = e.parseRect(null, a), expect(c.left).toBe(a.left), expect(c.top).toBe(a.top), 
            expect(c.width).toBe(a.width), expect(c.height).toBe(a.height);
        });
    }), describe("Thickness tests", function() {
        var a, c, d = {
            left: 105,
            top: 100,
            right: 122,
            bottom: 122
        };
        it("Inflate", function() {
            a = {
                left: 120,
                top: 100,
                right: 150,
                bottom: 170
            }, c = {
                left: 20,
                top: 20,
                right: 20,
                bottom: 20
            };
            var b = f.inflate(a, c);
            expect(b.left).toBe(140), expect(b.top).toBe(120), expect(b.right).toBe(170), expect(b.bottom).toBe(190);
        }), it("Get Width", function() {
            a = {
                left: 115,
                top: 134,
                right: 212,
                bottom: 270
            };
            var b = f.getWidth(a);
            expect(b).toBe(327);
        }), it("Get Width - Zero Thickness", function() {
            a = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            };
            var b = f.getWidth(a);
            expect(b).toBe(0);
        }), it("Get Height", function() {
            a = {
                left: 80,
                top: 215,
                right: 212,
                bottom: 15
            };
            var b = f.getHeight(a);
            expect(b).toBe(230);
        }), it("Get Height", function() {
            a = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            };
            var b = f.getHeight(a);
            expect(b).toBe(0);
        }), it("Clone", function() {
            a = {
                left: 158,
                top: 150,
                right: 215,
                bottom: 412
            }, c = f.clone(a), expect(c.left).toBe(a.left), expect(c.top).toBe(a.top), expect(c.right).toBe(a.right), 
            expect(c.bottom).toBe(a.bottom);
        }), it("Clone - null value", function() {
            a = null, c = f.clone(a), expect(c).toBe(null);
        }), it("Equals - return true", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, c = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            };
            var b = f.equals(a, c);
            expect(b).toBe(!0);
        }), it("Equals - return false", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, c = {
                left: 87,
                top: 100,
                right: 180,
                bottom: 95
            };
            var b = f.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals - first value is null", function() {
            a = null, c = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            };
            var b = f.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals - second value is null", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, c = null;
            var b = f.equals(a, c);
            expect(b).toBe(!1);
        }), it("Flip Horizontal", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, f.flipHorizontal(a), expect(a.left).toBe(180), expect(a.right).toBe(87), expect(a.top).toBe(156), 
            expect(a.bottom).toBe(95);
        }), it("Flip Vertical", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, f.flipVertical(a), expect(a.left).toBe(87), expect(a.right).toBe(180), expect(a.top).toBe(95), 
            expect(a.bottom).toBe(156);
        }), it("To string", function() {
            a = {
                left: 158,
                top: 150,
                right: 215,
                bottom: 412
            };
            var b = f.toString(a);
            expect(b).toBe("{top:150, left:158, right:215, bottom:412}");
        }), it("To Css String", function() {
            a = {
                left: 95,
                top: 140,
                right: 217,
                bottom: 107
            };
            var b = f.toCssString(a);
            expect(b).toBe("140px 217px 107px 95px");
        }), it("Is Empty true", function() {
            a = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0
            };
            var b = f.isEmpty(a);
            expect(b).toBe(!0);
        }), it("Is Empty false", function() {
            a = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            };
            var b = f.isEmpty(a);
            expect(b).toBe(!1);
        }), it("Equals (static) - return true ", function() {
            a = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            }, c = {
                left: 87,
                top: 156,
                right: 180,
                bottom: 95
            };
            var b = f.equals(a, c);
            expect(b).toBe(!0);
        }), it("Equals (static) - return false ", function() {
            a = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            }, c = {
                left: 125,
                top: 130,
                right: 110,
                bottom: 47
            };
            var b = f.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals (static) - Thickness A is null ", function() {
            var a = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            }, b = f.equals(null, a);
            expect(b).toBe(!1);
        }), it("Equals (static) - Thickness B is null ", function() {
            var a = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            }, b = f.equals(a, null);
            expect(b).toBe(!1);
        }), it("Equals (static) - Thicknesses are null ", function() {
            var a = f.equals(null, null);
            expect(a).toBe(!1);
        }), it("Equals with Precision (static) - return true ", function() {
            a = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            }, c = {
                left: 125,
                top: 130,
                right: 114,
                bottom: 47
            };
            var d = b.Thickness.equalWithPrecision(a, c);
            expect(d).toBe(!0);
        }), it("Parse Thickness (from string no default value)", function() {
            var b = "200,215,200,180";
            a = f.parseThickness(b), expect(a.left).toBe(200), expect(a.top).toBe(215), expect(a.right).toBe(200), 
            expect(a.bottom).toBe(180);
        }), it("Parse Thickness - from string,(default value ignored)", function() {
            var b = "190,220,150,170";
            a = f.parseThickness(b, d), expect(a.left).toBe(190), expect(a.top).toBe(220), expect(a.right).toBe(150), 
            expect(a.bottom).toBe(170);
        }), it("Parse Thickness (from empty string)", function() {
            var b = "";
            a = f.parseThickness(b), expect(a).toBe(null);
        }), it("Parse Thickness - from empty string (default value taken)", function() {
            var b = "";
            a = f.parseThickness(b, d), expect(a.left).toBe(d.left), expect(a.top).toBe(d.top), 
            expect(a.right).toBe(d.right), expect(a.bottom).toBe(d.bottom);
        }), it("Parse Thickness (from int array)", function() {
            var b = [ 190, 220, 100, 150 ];
            a = f.parseThickness(b), expect(a.left).toBe(190), expect(a.top).toBe(220), expect(a.right).toBe(100), 
            expect(a.bottom).toBe(150);
        }), it("Parse Thickness - from int array (default value ignored)", function() {
            var b = [ 190, 220, 130, 115 ];
            a = f.parseThickness(b, d), expect(a.left).toBe(190), expect(a.top).toBe(220), expect(a.right).toBe(130), 
            expect(a.bottom).toBe(115);
        }), it("Parse Thickness (int with more than 4 elements)", function() {
            var b = [ 190, 220, 200, 210, 118 ];
            a = f.parseThickness(b), expect(a).toBe(null);
        }), it("Parse Thickness (int with more than 4 elements (default value ignored)", function() {
            var b = [ 190, 220, 200, 210 ];
            a = f.parseThickness(b, d), expect(a.left).toBe(190), expect(a.top).toBe(220), expect(a.right).toBe(200), 
            expect(a.bottom).toBe(210);
        }), it("Parse Thickness (int with one element)", function() {
            var b = [ 190 ];
            a = f.parseThickness(b), expect(a).toBe(null);
        }), it("Parse Thickness (int with one element (default value taken)", function() {
            var b = [ 190 ];
            a = f.parseThickness(b, d), expect(a.left).toBe(d.left), expect(a.top).toBe(d.top), 
            expect(a.right).toBe(d.right), expect(a.bottom).toBe(d.bottom);
        }), it("Parse Thickness (int with empty array)", function() {
            var b = [];
            a = f.parseThickness(b), expect(a).toBe(null);
        }), it("Parse Thickness (int with empty array (default value taken)", function() {
            var b = [];
            a = f.parseThickness(b, d), expect(a.left).toBe(d.left), expect(a.top).toBe(d.top), 
            expect(a.right).toBe(d.right), expect(a.bottom).toBe(d.bottom);
        }), it("Parse Thickness (not string and not array)", function() {
            var b = !0;
            a = f.parseThickness(b), expect(a).toBe(null);
        }), it("Parse Thickness (not string and not array (default value taken)", function() {
            var b = !0;
            a = f.parseThickness(b, d), expect(a.left).toBe(d.left), expect(a.top).toBe(d.top), 
            expect(a.right).toBe(d.right), expect(a.bottom).toBe(d.bottom);
        }), it("Parse Thickness - getting null", function() {
            a = f.parseThickness(null), expect(a).toBe(null);
        }), it("Parse Thickness - getting null (default value taken)", function() {
            a = f.parseThickness(null, d), expect(a.left).toBe(d.left), expect(a.top).toBe(d.top), 
            expect(a.right).toBe(d.right), expect(a.bottom).toBe(d.bottom);
        });
    }), describe("Vector tests", function() {
        var a, c;
        it("Is Empty true", function() {
            a = {
                x: 0,
                y: 0
            };
            var b = g.isEmpty(a);
            expect(b).toBe(!0);
        }), it("Is Empty false", function() {
            a = {
                x: 125,
                y: 130
            };
            var b = g.isEmpty(a);
            expect(b).toBe(!1);
        }), it("Equals - return true", function() {
            a = {
                x: 180,
                y: 95
            }, c = {
                x: 180,
                y: 95
            };
            var b = g.equals(a, c);
            expect(b).toBe(!0);
        }), it("Equals - return false", function() {
            a = {
                x: 180,
                y: 95
            }, c = {
                x: 100,
                y: 180
            };
            var b = g.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals - first value is null", function() {
            a = null, c = {
                x: 150,
                y: 117
            };
            var b = g.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals - second value is null", function() {
            a = {
                x: 156,
                y: 95
            }, c = null;
            var b = g.equals(a, c);
            expect(b).toBe(!1);
        }), it("Clone", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.clone(a), expect(c.left).toBe(a.left), expect(c.top).toBe(a.top);
        }), it("Clone - null value", function() {
            a = null, c = g.clone(a), expect(c).toBe(null);
        }), it("To string", function() {
            a = {
                x: 215,
                y: 412
            };
            var b = g.toString(a);
            expect(b).toBe("{x:215, y:412}");
        }), it("Get Length", function() {
            a = {
                x: 215,
                y: 412
            };
            var b = g.getLength(a), c = Math.sqrt(215969);
            expect(b).toBe(c);
        }), it("Get Length - Zero", function() {
            a = {
                x: 0,
                y: 0
            };
            var b = g.getLength(a);
            expect(b).toBe(0);
        }), it("Get Length Sqr", function() {
            a = {
                x: 215,
                y: 412
            };
            var b = g.getLengthSqr(a), c = 215969;
            expect(b).toBe(c);
        }), it("Get Length Sqr - Zero", function() {
            a = {
                x: 0,
                y: 0
            };
            var b = g.getLengthSqr(a);
            expect(b).toBe(0);
        }), it("Scale - Greater than 1", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.scale(a, 15), expect(c.x).toBe(15 * a.x), expect(c.y).toBe(15 * a.y);
        }), it("Scale -  1", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.scale(a, 1), expect(c.x).toBe(a.x), expect(c.y).toBe(a.y);
        }), it("Scale -  between 0 and 1", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.scale(a, .4), expect(c.x).toBe(.4 * a.x), expect(c.y).toBe(.4 * a.y);
        }), it("Scale -  0", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.scale(a, 0), expect(c.x).toBe(0), expect(c.y).toBe(0);
        }), it("Scale -  Negative", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.scale(a, -4), expect(c.x).toBe(-4 * a.x), expect(c.y).toBe(-4 * a.y);
        }), it("Normalize", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.normalize(a);
            var b = g.getLength(a), d = {
                x: a.x / b,
                y: a.y / b
            };
            expect(d.x).toBe(c.x), expect(d.y).toBe(c.y);
        }), it("Normalize - empty vector", function() {
            a = {
                x: 0,
                y: 0
            }, c = g.normalize(a), expect(c.x).toBe(0), expect(c.y).toBe(0);
        }), it("Rotate Vector 90 degrees CW", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.rotate90DegCW(a), expect(c.x).toBe(a.y), expect(c.y).toBe(-a.x);
        }), it("Rotate Vector 90 degrees CCW", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.rotate90DegCCW(a), expect(c.x).toBe(-a.y), expect(c.y).toBe(a.x);
        }), it("Rotate - between 0 to 360 degrees", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.rotate(a, 47);
            var b = {
                x: a.x * Math.cos(47) - a.y * Math.sin(47),
                y: a.x * Math.sin(47) + a.y * Math.cos(47)
            };
            expect(c.x).toBe(b.x), expect(c.y).toBe(b.y);
        }), it("Rotate - 0 degrees", function() {
            a = {
                x: 215,
                y: 412
            }, c = g.rotate(a, 0), expect(c.x).toBe(a.x), expect(c.y).toBe(a.y);
        }), it("Equals (static) - return true ", function() {
            a = {
                x: 130,
                y: 47
            }, c = {
                x: 130,
                y: 47
            };
            var b = g.equals(a, c);
            expect(b).toBe(!0);
        }), it("Equals (static) - return false ", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: 110,
                y: 47
            };
            var b = g.equals(a, c);
            expect(b).toBe(!1);
        }), it("Equals (static) - Vector A is null ", function() {
            c = {
                x: 121,
                y: 88
            };
            var a = g.equals(null, c);
            expect(a).toBe(!1);
        }), it("Equals (static) - Vector B is null ", function() {
            a = {
                x: 114,
                y: 47
            };
            var b = g.equals(a, null);
            expect(b).toBe(!1);
        }), it("Equals (static) - Vectors are null ", function() {
            var a = g.equals(null, null);
            expect(a).toBe(!1);
        }), it("Equals with Precision (static) - return true ", function() {
            a = {
                x: 130,
                y: 114.4
            }, c = {
                x: 130,
                y: 114.4
            };
            var d = b.Thickness.equalWithPrecision(a, c);
            expect(d).toBe(!0);
        }), it("Equals with Precision (static) - return false ", function() {
            a = {
                x: 130.2,
                y: 114
            }, c = {
                x: 130,
                y: 114
            };
            var d = b.Thickness.equalWithPrecision(a, c);
            expect(d).toBe(!0);
        }), it("Add 2 Vectors", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: 117,
                y: 134
            };
            var b = g.add(a, c);
            expect(b.x).toBe(a.x + c.x), expect(b.y).toBe(a.y + c.y);
        }), it("Add Vector to Empty Vector", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: 0,
                y: 0
            };
            var b = g.add(a, c);
            expect(b.x).toBe(a.x), expect(b.y).toBe(a.y);
        }), it("Add Vector to its Inverse vector", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: -114,
                y: -47
            };
            var b = g.add(a, c);
            expect(b.x).toBe(0), expect(b.y).toBe(0);
        }), it("Subtract 2 Vectors", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: 117,
                y: 134
            };
            var b = g.subtract(a, c);
            expect(b.x).toBe(a.x - c.x), expect(b.y).toBe(a.y - c.y);
        }), it("Subtract Vector to Empty Vector", function() {
            a = {
                x: 114,
                y: 47
            }, c = {
                x: 0,
                y: 0
            };
            var b = g.subtract(a, c);
            expect(b.x).toBe(a.x), expect(b.y).toBe(a.y);
        }), it("Subtract Vector from the same vector", function() {
            a = {
                x: 116,
                y: 49
            }, c = {
                x: 116,
                y: 49
            };
            var b = g.subtract(a, c);
            expect(b.x).toBe(0), expect(b.y).toBe(0);
        }), it("dotProduct", function() {
            a = {
                x: 116,
                y: 49
            }, a = {
                x: 140,
                y: 154
            };
            var d = b.Vector.dotProduct(a, c), e = a.x * c.x + a.y * c.y;
            expect(d).toBe(e);
        }), it("Delta Vector", function() {
            var a = {
                x: 145,
                y: 217
            }, c = {
                x: 140,
                y: 154
            }, d = b.Vector.getDeltaVector(a, c);
            expect(d.x).toBe(c.x - a.x), expect(d.y).toBe(c.y - a.y);
        });
    });
}(powerbitests || (powerbitests = {}));

var SVGUtil = powerbi.visuals.SVGUtil;

describe("SvgUtil tests", function() {
    it("validate the pie chart transform parsing logic for Chrome", function() {
        var a = "translate(110.21,46.5)", b = SVGUtil.parseTranslateTransform(a);
        expect(b.x).toBe("110.21"), expect(b.y).toBe("46.5");
    }), it("validate the pie chart transform parsing logic for IE", function() {
        var a = "translate(110.6 34.56)", b = SVGUtil.parseTranslateTransform(a);
        expect(b.x).toBe("110.6"), expect(b.y).toBe("34.56");
    }), it("validate transform parsing logic with no y value", function() {
        var a = "translate(110.6)", b = SVGUtil.parseTranslateTransform(a);
        expect(b.x).toBe("110.6"), expect(b.y).toBe("0");
    }), it("validate convertToPixelString", function() {
        var a = SVGUtil.convertToPixelString(34);
        expect(a).toBe("34px");
    });
});

var powerbitests;

!function(a) {
    var b = powerbi.visuals.UrlHelper;
    describe("UrlHelper isValidUrl", function() {
        var a = {
            displayName: "webUrl",
            type: new powerbi.ValueType(powerbi.ExtendedType.WebUrl, "WebUrl")
        }, c = {
            displayName: "text",
            type: new powerbi.ValueType(1, "Text")
        };
        it("isValidUrl null", function() {
            expect(b.isValidUrl(null, null)).toBe(!1);
        }), it("isValidUrl http", function() {
            expect(b.isValidUrl(a, "http://www.microsoft.com")).toBe(!0);
        }), it("isValidUrl https", function() {
            expect(b.isValidUrl(a, "https://www.microsoft.com")).toBe(!0);
        }), it("isValidUrl HTTPS", function() {
            expect(b.isValidUrl(a, "HTTPS://WWW.MICROSOFT.COM")).toBe(!0);
        }), it("isValidUrl dataUri", function() {
            expect(b.isValidUrl(a, "data://www.microsoft.com")).toBe(!1);
        }), it("isValidUrl not weburl", function() {
            expect(b.isValidUrl(c, "http://www.microsoft.com")).toBe(!1);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b() {
        var a = {
            maximumMovingDistance: 12,
            minimumMovingDistance: 2,
            anchorMargin: 3,
            anchorRectOrientation: 0,
            contentPosition: 2,
            outsidePlacement: 1,
            validContentPositions: c.All,
            opacity: 1,
            size: {
                width: 45,
                height: 20
            }
        }, b = {
            maximumMovingDistance: 12,
            minimumMovingDistance: 2,
            anchorMargin: 3,
            anchorRectOrientation: 0,
            contentPosition: 2,
            outsidePlacement: 1,
            validContentPositions: c.All,
            opacity: 1,
            size: {
                width: 45,
                height: 20
            }
        }, d = [];
        return d.push(a, b), d;
    }
    var c = powerbi.ContentPositions, d = powerbi.DataLabelManager;
    powerbi.RectOrientation, powerbi.OutsidePlacement;
    describe("Default Settings", function() {
        it("Check default values are true", function() {
            var a = new d(), b = a.defaultSettings;
            expect(b.anchorMargin).toBe(0), expect(b.anchorRectOrientation).toBe(0), expect(b.contentPosition).toBe(128), 
            expect(b.maximumMovingDistance).toBe(12), expect(b.minimumMovingDistance).toBe(3), 
            expect(b.opacity).toBe(1), expect(b.outsidePlacement).toBe(1), expect(b.validContentPositions).toBe(128);
        });
    }), describe("Get Label info - One value provided", function() {
        it("Get Label info", function() {
            var a = new d(), b = a.defaultSettings, c = {
                minimumMovingDistance: 10
            };
            c = a.getLabelInfo(c), expect(b.minimumMovingDistance).toEqual(3), expect(c.minimumMovingDistance).toEqual(10);
        }), it("Get Label info - all values Provided", function() {
            var a = new d(), c = a.defaultSettings, e = b();
            a.getLabelInfo(e), expect(c.anchorMargin).toEqual(0), expect(e[0].maximumMovingDistance).toEqual(12);
        }), it("Get Label info - Default value should be taken", function() {
            var a = new d(), b = {
                maximumMovingDistance: 12,
                minimumMovingDistance: 2,
                anchorRectOrientation: 0,
                contentPosition: 2,
                outsidePlacement: 1,
                validContentPositions: c.All,
                opacity: 1
            }, e = a.defaultSettings;
            a.getLabelInfo(b), expect(e.anchorMargin).toEqual(0), expect(b.anchorMargin).toEqual(0);
        });
    }), describe("Is Valid Rect", function() {
        var a;
        it("Is Valid Rect - Return true", function() {
            a = {
                left: 150,
                top: 130,
                width: 120,
                height: 110
            };
            var b = d.isValid(a);
            expect(b).toBe(!0);
        }), it("Is Valid Rect - Negative values", function() {
            a = {
                left: -150,
                top: -130,
                width: -120,
                height: -110
            };
            var b = d.isValid(a);
            expect(b).toBe(!1);
        }), it("Is Valid Rect - Empty Rect", function() {
            a = {
                left: 0,
                top: 0,
                width: 0,
                height: 0
            };
            var b = d.isValid(a);
            expect(b).toBe(!1);
        }), it("Is Valid Rect - null Rect", function() {
            a = null;
            var b = d.isValid(a);
            expect(b).toBe(!1);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    describe("ValueFormatter", function() {
        var b = powerbi.visuals.valueFormatter, c = {
            displayName: "col",
            objects: {
                fmtObj: {
                    fmtProp: "R"
                }
            }
        }, d = {
            objectName: "fmtObj",
            propertyName: "fmtProp"
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("format null", function() {
            expect(b.format(null)).toBe("(Blank)"), expect(b.formatRaw(null)).toBe("");
        }), it("format non-null value", function() {
            var a = b.format(2010), c = b.formatRaw(2010);
            expect(a).not.toBeNull(), expect(c).not.toBeNull(), expect(a).toBe(c);
        }), it("format 100 pct", function() {
            expect(b.format(1, "0.00 %;-0.00 %;0.00 %", !0)).toBe("100%");
        }), it("format 100 pct - no beautify", function() {
            expect(b.format(1, "0.00 %;-0.00 %;0.00 %")).toBe("100.00 %");
        }), it("format 100 pct - variation", function() {
            expect(b.format(1, "0.0 %;-0.0 %;0.0 %", !0)).toBe("100%");
        }), it("format 52 pct - 4 decimals beautified", function() {
            expect(b.format(.52, "0.0000 %;-0.0000 %;0.0000 %", !0)).toBe("52.0000 %");
        }), it("format whole pct", function() {
            expect(b.format(.5, "0 %;-0 %;0 %", !0)).toBe("50 %");
        }), it("getFormatString: column with custom object", function() {
            expect(b.getFormatString(c, d)).toBe("R");
        }), it("getFormatString: column with custom object (unspecified)", function() {
            expect(b.getFormatString({
                displayName: "col"
            }, d)).toBeUndefined();
        }), it("format Boolean", function() {
            expect(b.format(!0)).toBe("True"), expect(b.format(!1)).toBe("False");
        }), it("format Invalids", function() {
            expect(b.format(Number.NaN)).toBe("NaN"), expect(b.format(Number.NEGATIVE_INFINITY)).toBe("-Infinity"), 
            expect(b.format(Number.POSITIVE_INFINITY)).toBe("+Infinity");
            var a = null;
            expect(b.format(a)).toBe("(Blank)");
        }), it("create basic format with invalid values", function() {
            var a = b.create({
                format: "0",
                value: 0
            });
            expect(a.format(Number.NaN)).toBe("NaN"), expect(a.format(Number.NEGATIVE_INFINITY)).toBe("-Infinity"), 
            expect(a.format(Number.POSITIVE_INFINITY)).toBe("+Infinity");
            var c = null;
            expect(a.format(c)).toBe("(Blank)");
        }), it("create non-null/null init", function() {
            var a = b.create({
                format: "0",
                value: 1e6,
                value2: null
            });
            expect(a.format(-24e5)).toBe("-2.4M");
        }), it("create null/non-null init", function() {
            var a = b.create({
                format: "0",
                value: null,
                value2: 1e6
            });
            expect(a.format(-24e5)).toBe("-2.4M");
        }), it("create abs value init", function() {
            var a = b.create({
                format: "0",
                value: -3e6,
                value2: 2
            });
            expect(a.format(-3e6)).toBe("-3M");
        }), it("create Year", function() {
            var a = b.create({
                format: "0",
                value: 2014
            });
            expect(a.format(2010)).toBe("2010"), expect(a.format(null)).toBe("(Blank)");
        }), it("create No Scale", function() {
            var a, c = b.create({
                column: a,
                value: 0
            });
            expect(c.format(0)).toBe("0"), expect(c.format(.5678934)).toBe("0.5679"), expect(c.format(-.5678934)).toBe("-0.5679"), 
            expect(c.format(1234e4)).toBe("12340000"), expect(c.format(1.12000000000007)).toBe("1.12");
        }), it("create Million", function() {
            var a, c = b.create({
                column: a,
                value: 1e6
            });
            expect(c.format(456e5)).toBe("45.6M"), expect(c.format(45678912.3)).toBe("45.68M"), 
            expect(c.format(-3130000.567)).toBe("-3.13M"), expect(c.format(1e4)).toBe("0.01M"), 
            expect(c.format(1e5)).toBe("0.1M"), expect(c.format(null)).toBe("(Blank)");
        }), it("create Billion", function() {
            var a, c = b.create({
                column: a,
                value: 1e9
            });
            expect(c.format(456e8)).toBe("45.6bn"), expect(c.format(45678912300)).toBe("45.68bn"), 
            expect(c.format(-3130000000.567)).toBe("-3.13bn"), expect(c.format(1e8)).toBe("0.1bn"), 
            expect(c.format(1e9)).toBe("1bn"), expect(c.format(null)).toBe("(Blank)");
        }), it("create Trillion", function() {
            var a, c = b.create({
                column: a,
                value: 1e12
            });
            expect(c.format(456e11)).toBe("45.6T"), expect(c.format(456789123e5)).toBe("45.68T"), 
            expect(c.format(-3130000000000.567)).toBe("-3.13T"), expect(c.format(1e11)).toBe("0.1T"), 
            expect(c.format(1e12)).toBe("1T"), expect(c.format(1e15)).toBe("1000T"), expect(c.format(null)).toBe("(Blank)");
        }), it("create Exponent format", function() {
            var a = b.create({
                format: "E",
                value: 1e15
            });
            expect(a.format(7.19200000000002e26)).toBe("7.192000E+026");
        }), it("create Exponent format", function() {
            var a, c = b.create({
                column: a,
                value: 1e15
            });
            expect(c.format(7.19200000000002e26)).toBe("7.192E+26");
        }), it("create Percentage", function() {
            var a = "0.00 %;-0.00 %;0.00 %", c = b.create({
                format: a,
                value: 1,
                allowFormatBeautification: !0
            });
            expect(c.format(0)).toBe("0%"), expect(c.format(1)).toBe("100%"), expect(c.format(-1)).toBe("-100%"), 
            expect(c.format(.54)).toBe("54%"), expect(c.format(.543)).toBe("54.3%"), expect(c.format(.5432)).toBe("54.32%"), 
            expect(c.format(.54321)).toBe("54.32%"), expect(c.format(6.54321)).toBe("654.32%"), 
            expect(c.format(76.54321)).toBe("7,654.32%");
        }), it("create Escaped Character format", function() {
            var a = b.create({
                format: "\\$#,0.00;(\\$#,0.00);\\$#,0.00",
                value: 1e6
            });
            expect(a.format(107384391.61)).toBe("$107.38M"), expect(a.format(-107384391.61)).toBe("($107.38M)");
        }), it("create Format no custom negative", function() {
            var a = b.create({
                format: "$#,0.00",
                value: 1e6
            });
            expect(a.format(-107384391.61)).toBe("-$107.38M");
        }), it("create HundredThousand", function() {
            var a, c = b.create({
                format: a,
                value: 3e5
            });
            expect(c.format(3e5)).toBe("0.3M");
        }), it("create Million", function() {
            var a, c = b.create({
                format: a,
                value: 9e8
            });
            expect(c.format(9e8)).toBe("0.9bn");
        }), it("create Billion", function() {
            var a, c = b.create({
                format: a,
                value: 9e11
            });
            expect(c.format(9e11)).toBe("0.9T");
        }), it("create Trillion", function() {
            var a, c = b.create({
                format: a,
                value: 9e14,
                displayUnitSystemType: 0
            });
            expect(c.format(9e14)).toBe("9E+14");
        }), it("create HundredThousand Whole Units", function() {
            var a, c = b.create({
                format: a,
                value: 3e5,
                displayUnitSystemType: 2
            });
            expect(c.format(3e5)).toBe("300K");
        }), it("create Million Whole Units", function() {
            var a, c = b.create({
                format: a,
                value: 9e8,
                displayUnitSystemType: 2
            });
            expect(c.format(9e8)).toBe("900M");
        }), it("create Billion Whole Units", function() {
            var a, c = b.create({
                format: a,
                value: 9e11,
                displayUnitSystemType: 2
            });
            expect(c.format(9e11)).toBe("900bn");
        }), it("create Trillion Whole Units", function() {
            var a, c = b.create({
                format: a,
                value: 9e14,
                displayUnitSystemType: 2
            });
            expect(c.format(9e14)).toBe("900T");
        }), it("create HundredThousand Verbose (No Units)", function() {
            var a, c = b.create({
                format: a,
                value: 3e5,
                displayUnitSystemType: 1
            });
            expect(c.format(3e5)).toBe("300000");
        }), it("create Million Verbose (No Units)", function() {
            var a, c = b.create({
                format: a,
                value: 9e8,
                displayUnitSystemType: 1
            });
            expect(c.format(9e8)).toBe("900000000");
        }), it("create Billion Verbose (No Units)", function() {
            var a, c = b.create({
                format: a,
                value: 9e11,
                displayUnitSystemType: 1
            });
            expect(c.format(9e11)).toBe("900000000000");
        }), it("create Trillion Verbose (No Units)", function() {
            var a, c = b.create({
                format: a,
                value: 9e14,
                displayUnitSystemType: 1
            });
            expect(c.format(9e14)).toBe("900000000000000");
        }), it("create single value formatting verbose", function() {
            var a = "#,0.00", c = b.create({
                format: a,
                value: 26.254,
                displayUnitSystemType: 1,
                formatSingleValues: !0
            });
            expect(c.format(26.254)).toBe("26.25");
        }), it("create single value formatting verbose large", function() {
            var a = "#,0.00", c = b.create({
                format: a,
                value: 300000.254,
                displayUnitSystemType: 1,
                formatSingleValues: !0
            });
            expect(c.format(300000.254)).toBe("300,000.25");
        }), it("precision without display units", function() {
            var a = b.create({
                value: 0,
                precision: 3
            });
            expect(a.format(12.1012)).toBe("12.101");
        }), it("precision with display units", function() {
            var a = "#,0.00", c = b.create({
                format: a,
                value: 1e4,
                precision: 2
            });
            expect(c.format(12177)).toBe("12.18K");
        }), it("precision 1 with display units", function() {
            var a = "#,0.00", c = b.create({
                format: a,
                value: 1e4,
                precision: 1
            });
            expect(c.format(12177)).toBe("12.2K");
        }), it("precision with display units and no format string", function() {
            var a = b.create({
                value: 1e4,
                precision: 2
            });
            expect(a.format(12177)).toBe("12.18K");
        }), it("create Boolean", function() {
            var a, c = b.create({
                format: a,
                value: !1,
                value2: !0,
                tickCount: 6
            });
            expect(c.format(!0)).toBe("True"), expect(c.format(!1)).toBe("False"), expect(c.format(null)).toBe("(Blank)");
        }), it("create Boolean with numeric index values", function() {
            var a, c = b.create({
                format: a,
                value: 0,
                value2: 1,
                tickCount: 6
            });
            expect(c.format(!0)).toBe("True"), expect(c.format(!1)).toBe("False"), expect(c.format(null)).toBe("(Blank)");
        }), it("create Date", function() {
            var a = "O", c = new Date(2014, 10, 4, 12, 34, 56, 789), d = new Date(2014, 10, 9, 12, 34, 56, 789), e = b.create({
                format: a,
                value: c,
                value2: d,
                tickCount: 6
            });
            expect(e.format(c)).toBe("Nov 04"), expect(e.format(d)).toBe("Nov 09"), expect(e.format(null)).toBe("(Blank)");
        }), describe("formatListAnd", function() {
            it("formatListAnd no values", function() {
                var a = b.formatListAnd([]);
                expect(a).toBeNull();
            }), it("formatListAnd 1 value", function() {
                var a = b.formatListAnd([ "1" ]);
                expect(a).toBe("1");
            }), it("formatListAnd 2 values", function() {
                var a = b.formatListAnd([ "1", "2" ]);
                expect(a).toBe("1 and 2");
            }), it("formatListAnd 3 values", function() {
                var a = b.formatListAnd([ "1", "2", "3" ]);
                expect(a).toBe("1, 2 and 3");
            }), it("formatListAnd wrong parameters values", function() {
                var a = b.formatListAnd(null);
                expect(a).toBeNull();
                var a = b.formatListAnd(void 0);
                expect(a).toBeNull();
            });
        }), describe("formatListOr", function() {
            it("formatListOr no values", function() {
                var a = b.formatListOr([]);
                expect(a).toBeNull();
            }), it("formatListOr 1 value", function() {
                var a = b.formatListOr([ "1" ]);
                expect(a).toBe("1");
            }), it("formatListOr 2 values", function() {
                var a = b.formatListOr([ "1", "2" ]);
                expect(a).toBe("1 or 2");
            }), it("formatListOr 3 values", function() {
                var a = b.formatListOr([ "1", "2", "3" ]);
                expect(a).toBe("1, 2 or 3");
            }), it("formatListOr wrong parameters values", function() {
                var a = b.formatListOr(null);
                expect(a).toBeNull();
                var a = b.formatListOr(void 0);
                expect(a).toBeNull();
            });
        }), it("getDisplayUnits", function() {
            var a = b.getDisplayUnits(0);
            expect(a).toBeDefined(), expect(a.length).toBeGreaterThan(0);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.AnimatedNumber;
    describe("AnimatedNumber", function() {
        it("AnimatedNumber registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("animatedNumber").capabilities).toBe(b.capabilities);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(b.capabilities.objects)).toEqual(b.formatStringProp);
        });
    }), describe("AnimatedNumber DOM tests", function() {
        var c, d;
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("200", "300"), 
            c = new b();
        }), it("AnimatedText onDataChanged sets text (no settings)", function() {
            var b = {
                columns: [ {
                    displayName: "col1",
                    isMeasure: !0
                } ]
            }, e = {
                metadata: b,
                single: {
                    value: 123.456
                }
            }, f = {
                element: d,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            };
            c.init(f), c.onDataChanged({
                dataViews: [ e ]
            }), expect($(".animatedNumber")).toBeInDOM(), expect($(".mainText")).toBeInDOM();
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.AnimatedText;
    describe("AnimatedText", function() {
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("AnimatedText_getSeedFontHeight does not exceed style maximum", function() {
            var a = new b("animatedText");
            a.style = powerbi.visuals.visualStyles.create(), expect(a.getSeedFontHeight(100, 90)).toBeLessThan(100);
        }), it("AnimatedText_getSeedFontHeight returns a smaller number than the height", function() {
            var a = new b("animatedText");
            a.style = powerbi.visuals.visualStyles.create(), expect(a.getSeedFontHeight(100, 90)).toBeLessThan(100);
        }), it('AnimatedText_getTextAnchor when the aligment is "left"', function() {
            var a = new b("animatedText");
            a.visualConfiguration = {
                align: "left"
            }, expect(a.getTextAnchor()).toBe("start");
        }), it('AnimatedText_getTextAnchor when the aligment is "right"', function() {
            var a = new b("animatedText");
            a.visualConfiguration = {
                align: "right"
            }, expect(a.getTextAnchor()).toBe("end");
        }), it("AnimatedText_getTextAnchor when the aligment is undefined", function() {
            var a = new b("animatedText");
            a.visualConfiguration = void 0, expect(a.getTextAnchor()).toBe("middle"), a.visualConfiguration = {
                align: "center"
            }, expect(a.getTextAnchor()).toBe("middle");
        }), it('AnimatedText_getTranslateX alignment is "left"', function() {
            var a = new b("animatedText");
            a.visualConfiguration = {
                align: "left"
            }, expect(a.getTranslateX(0)).toBe(0), expect(a.getTranslateX(100)).toBe(0);
        }), it('AnimatedText_getTranslateX alignment is "right"', function() {
            var a = new b("animatedText");
            a.visualConfiguration = {
                align: "right"
            }, expect(a.getTranslateX(0)).toBe(0), expect(a.getTranslateX(100)).toBe(100);
        }), it("AnimatedText_getTranslateX when alignment is undefined, returns the center", function() {
            var a = new b("animatedText");
            a.visualConfiguration = void 0, expect(a.getTranslateX(0)).toBe(0), expect(a.getTranslateX(100)).toBe(50);
        });
    }), describe("AnimatedText DOM tests", function() {
        var c, d, e = 500;
        beforeEach(function(e) {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("200", "300"), 
            c = new b("animatedText"), c.currentViewport = {
                height: d.height(),
                width: d.width()
            }, c.hostServices = a.mocks.createVisualHostServices(), c.svg = d3.select(d.get(0)).append("svg"), 
            c.graphicsContext = c.svg.append("g"), c.style = powerbi.visuals.visualStyles.create(), 
            e();
        }), it("AnimatedText_getAdjustedFontHeight when seed font width is bigger than the width", function() {
            expect(c.getAdjustedFontHeight(4, "text", 10)).toBeLessThan(10);
        }), it("AnimatedText_getAdjustedFontHeight when seed font width is smaller or equal to the width", function() {
            expect(c.getAdjustedFontHeight(30, "text", 3)).toBe(3);
        }), it("AnimatedText doValueTransition sets text", function(a) {
            c.doValueTransition(3, 4, null, null, 0, !1), expect($(".animatedText")).toBeInDOM(), 
            expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect($(".mainText").text()).toEqual("4"), a();
            }, e);
        }), it("AnimatedText doValueTransition formats number > 10000", function(a) {
            c.doValueTransition(3, 4534353, null, null, 0, !1), expect($(".animatedText")).toBeInDOM(), 
            expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect($(".mainText").text()).toEqual("4.53M"), a();
            }, e);
        }), it("AnimatedText doValueTransition sets translateY correctly", function(a) {
            c.doValueTransition(3, 4, null, null, 0, !1), expect($(".animatedText")).toBeInDOM(), 
            expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect(c.graphicsContext.attr("transform")).toMatch(/translate\(\d+(,| )130\)/), 
                a();
            }, e);
        }), it("AnimatedText doValueTransition to 0", function(a) {
            c.doValueTransition(null, 0, null, null, 0, !1), expect($(".animatedText")).toBeInDOM(), 
            expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect($(".mainText").text()).toEqual("0"), a();
            }, e);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.Card, c = powerbi.data.DataViewTransform, d = powerbi.ValueType;
    describe("Card", function() {
        it("Card_registered_capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("card").capabilities).toBe(b.capabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(b.capabilities.dataViewMappings).toBeDefined(), expect(b.capabilities.dataViewMappings.length).toBe(1);
        }), it("Capabilities should have condition", function() {
            expect(b.capabilities.dataViewMappings[0].conditions[0][b.capabilities.dataRoles[0].name].max).toBe(1);
        }), it("Capabilities should include dataRoles", function() {
            expect(b.capabilities.dataRoles).toBeDefined(), expect(b.capabilities.dataRoles.length).toBe(1);
        }), it("Capabilities should suppressDefaultTitle", function() {
            expect(b.capabilities.suppressDefaultTitle).toBe(!0);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(b.capabilities.objects)).toEqual(b.formatStringProp);
        });
    }), it("cardChart preferred capabilities requires at most 1 row", function() {
        var b = {
            columns: [ {
                displayName: "col1"
            }, {
                displayName: "col2",
                isMeasure: !0
            } ]
        }, d = {
            metadata: b,
            categorical: {
                categories: [ {
                    source: b.columns[0],
                    values: [ "John Domo", "Delta Force" ],
                    identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                } ],
                values: c.createValueColumns([ {
                    source: b.columns[1],
                    values: [ 100, 200 ],
                    subtotal: 300
                } ])
            }
        }, e = powerbi.visuals.visualPluginFactory.create().getPlugin("card");
        expect(powerbi.DataViewAnalysis.supports(d, e.capabilities.dataViewMappings[0], !0)).toBe(!1);
    }), it("cardChart preferred capabilities requires 1 row", function() {
        var a = {
            columns: [ {
                displayName: "numeric",
                type: d.fromDescriptor({
                    numeric: !0
                })
            } ]
        }, b = {
            metadata: a,
            single: {
                value: 123.456
            }
        }, c = powerbi.visuals.visualPluginFactory.create().getPlugin("card");
        expect(powerbi.DataViewAnalysis.supports(b, c.capabilities.dataViewMappings[0], !0)).toBe(!0);
    }), describe("Card DOM tests", function() {
        function c(b) {
            e = a.helpers.testDom("200", "300"), d = powerbi.visuals.visualPluginFactory.create().getPlugin("card").create();
            var c;
            b && (c = {
                DisplayUnitSystemType: b
            }), d.init({
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                settings: c
            });
        }
        var d, e, f = 30, g = {
            columns: [ {
                displayName: "col1",
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "#0"
                    }
                }
            } ],
            groups: [],
            measures: [ 0 ]
        }, h = b.DefaultStyle.card;
        beforeEach(function() {
            c();
        }), it("Card_getAdjustedFontHeight with seed font size fitting in available width but equal/larger than MaxFontSize", function() {
            d.currentViewport = {
                height: 500,
                width: 500
            }, expect(d.getAdjustedFontHeight(d.currentViewport.width, "t", h.maxFontSize)).toBe(h.maxFontSize), 
            expect(d.getAdjustedFontHeight(d.currentViewport.width, "t", h.maxFontSize + 5)).toBe(h.maxFontSize);
        }), it("Card_getAdjustedFontHeight with seed font size not fitting in available width and smaller than MaxFontSize", function() {
            d.currentViewport = {
                height: 30,
                width: 30
            }, expect(d.getAdjustedFontHeight(d.currentViewport.width, "t", h.maxFontSize)).toBeLessThan(h.maxFontSize);
        }), it("Card_onDataChanged (single value)", function() {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: "7191394482447.7"
                    }
                } ]
            }), d.onResizing({
                height: e.height(),
                width: e.width()
            }, 0), expect($(".card")).toBeInDOM(), expect($(".mainText")).toBeInDOM();
            var a = $(".card").find("title").text();
            expect(a).toBe("7191394482447.7");
        }), it("Card_onDataChanged (0)", function() {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 0
                    }
                } ]
            }), expect($(".card")).toBeInDOM(), expect($(".mainText")).toBeInDOM();
            var a = $(".card").find("title").text();
            expect(a).toBe("0");
        }), it("Ensure clear on null dataview", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 0
                    }
                } ]
            }), setTimeout(function() {
                expect($(".mainText").first().text()).toBe("0"), d.onDataChanged({
                    dataViews: [ null ]
                }), setTimeout(function() {
                    expect($(".mainText").first().text()).toBe(""), a();
                }, f);
            }, f);
        }), it("Card_onDataChanged formats number < 10000", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 85.23498239847123
                    }
                } ]
            }), expect($(".card")).toBeInDOM(), expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect($(".mainText").text()).toEqual("85"), a();
            }, f);
        }), it("Card_onDataChanged verbose display units (explore mode)", function(a) {
            c(1);
            var b = spyOn(powerbi.visuals.valueFormatter, "create");
            b.and.callThrough(), d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 9e5
                    }
                } ]
            }), expect($(".card")).toBeInDOM(), expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect(b.calls.count()).toBe(1);
                var c = b.calls.argsFor(0);
                expect(c).toBeDefined(), expect(c[0].displayUnitSystemType).toBe(1), a();
            }, f);
        }), it("Card_onDataChanged whole display units (dashboard tile mode, default)", function(a) {
            var b = spyOn(powerbi.visuals.valueFormatter, "create");
            b.and.callThrough(), d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 9e5
                    }
                } ]
            }), expect($(".card")).toBeInDOM(), expect($(".mainText")).toBeInDOM(), setTimeout(function() {
                expect(b.calls.count()).toBe(1);
                var c = b.calls.argsFor(0);
                expect(c).toBeDefined(), expect(c[0].displayUnitSystemType).toBe(2), a();
            }, f);
        }), it("Card with DateTime value on dashboard", function(b) {
            var c = new Date(2015, 5, 20), g = {
                columns: [ {
                    displayName: "date",
                    type: powerbi.ValueType.fromDescriptor({
                        dateTime: !0
                    }),
                    isMeasure: !0
                } ]
            };
            d.init({
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                }
            }), d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: c
                    }
                } ]
            }), setTimeout(function() {
                expect($(".mainText").first().text()).toBe("6/20/2015"), b();
            }, f);
        });
    }), describe("Card tests on Minerva", function() {
        function c(b) {
            e = a.helpers.testDom("200", "300"), d = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("card").create();
            var c;
            b && (c = {
                DisplayUnitSystemType: b
            }), d.init({
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                settings: c
            });
        }
        var d, e, f = 30, g = {
            columns: [ {
                displayName: "col1",
                isMeasure: !0,
                format: "#0"
            } ],
            groups: [],
            measures: [ 0 ]
        }, h = b.DefaultStyle.label, i = b.DefaultStyle.value;
        beforeEach(function() {
            c();
        }), it("Card on Canvas DOM validation", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 90
                    }
                } ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".label")).toBeInDOM(), expect($(".value")).toBeInDOM(), 
                expect($(".label").length).toBe(1), expect($(".value").length).toBe(1), expect($(".label").first().text()).toBe("col1"), 
                expect($(".value").first().text()).toBe("90"), a();
            }, f);
        }), it("Card on Canvas Style validation", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 9e5
                    }
                } ]
            }), setTimeout(function() {
                expect($(".label")).toBeInDOM(), expect($(".value")).toBeInDOM(), expect(parseInt($(".label")[0].style.fontSize, 10)).toBe(h.fontSize), 
                expect(parseInt($(".value")[0].style.fontSize, 10)).toBe(i.fontSize), expect($(".label")[0].style.fill).toBe(h.color), 
                expect($(".value")[0].style.fill).toBe(i.color), expect($(".value")[0].style.fontFamily).toBe(i.fontFamily), 
                a();
            }, f);
        }), it("Card with DateTime value on canvas", function(a) {
            var b = new Date(2015, 5, 20), c = {
                columns: [ {
                    displayName: "date",
                    type: powerbi.ValueType.fromDescriptor({
                        dateTime: !0
                    }),
                    isMeasure: !0
                } ]
            };
            d.onDataChanged({
                dataViews: [ {
                    metadata: c,
                    single: {
                        value: b
                    }
                } ]
            }), setTimeout(function() {
                expect($(".label").first().text()).toBe("date"), expect($(".value").first().text()).toBe("6/20/2015"), 
                a();
            }, f);
        }), it("Card with zero currency value", function(a) {
            var b = {
                columns: [ {
                    displayName: "price",
                    type: powerbi.ValueType.fromDescriptor({
                        numeric: !0
                    }),
                    isMeasure: !0,
                    objects: {
                        general: {
                            formatString: "$0"
                        }
                    }
                } ]
            };
            d.onDataChanged({
                dataViews: [ {
                    metadata: b,
                    single: {
                        value: 0
                    }
                } ]
            }), setTimeout(function() {
                expect($(".label").first().text()).toBe("price"), expect($(".value").first().text()).toBe("$0"), 
                a();
            }, f);
        }), it("Ensure clear value on null dataview", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    single: {
                        value: 900
                    }
                } ]
            }), setTimeout(function() {
                expect($(".value").first().text()).toBe("900"), expect($(".label").first().text()).toBe("col1"), 
                d.onDataChanged({
                    dataViews: [ null ]
                }), setTimeout(function() {
                    expect($(".value").first().text()).toBe(""), expect($(".label").first().text()).toBe("col1"), 
                    a();
                }, f);
            }, f);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b, c) {
        function d(a) {
            var b = c ? {
                axisType: "Scalar"
            } : {
                axisType: "Categorical"
            }, d = {
                columns: a,
                objects: {
                    categoryAxis: b
                }
            };
            return d;
        }
        var e, f, g = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], h = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], i = [ {
            displayName: "col1",
            type: u.describeDataType(4)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], j = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), f = a.helpers.testDom("500", "500"), 
            e = powerbi.visuals.visualPluginFactory.create().getPlugin("clusteredColumnChart").create(), 
            e.init({
                element: f,
                host: j,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("clustered column chart dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".data-labels").length).toBe(0), 
                b();
            }, I);
        }), it("clustered column chart dom validation - datetime", function(b) {
            var f = [ a.mocks.dataViewScopeIdentity("1999/3/1"), a.mocks.dataViewScopeIdentity("1999/6/20"), a.mocks.dataViewScopeIdentity("2003/6/1") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(i),
                    categorical: {
                        categories: [ {
                            source: i[0],
                            values: [ new Date(1999, 3, 1), new Date(1999, 6, 20), new Date(2003, 6, 1) ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: i[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234, 32 ]
                        }, {
                            source: i[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88, 44 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(6), c ? (expect(+$(".column")[1].attributes.getNamedItem("x").value).toBeCloseTo(31, 0), 
                expect(+$(".column")[1].attributes.getNamedItem("width").value).toBeCloseTo(12, 0)) : (expect(+$(".column")[1].attributes.getNamedItem("x").value).toBeCloseTo(179, 0), 
                expect(+$(".column")[1].attributes.getNamedItem("width").value).toBeCloseTo(48, 0)), 
                b();
            }, I);
        }), it("clustered column chart dom validation - null datetime", function(b) {
            var f = [ a.mocks.dataViewScopeIdentity("1999/3/1"), a.mocks.dataViewScopeIdentity(null), a.mocks.dataViewScopeIdentity("2003/6/1") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(i),
                    categorical: {
                        categories: [ {
                            source: i[0],
                            values: [ new Date(1999, 3, 1), null, new Date(2003, 6, 1) ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: i[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234, 32 ]
                        }, {
                            source: i[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88, 44 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), c ? (expect($(".column").length).toBe(4), 
                expect(+$(".column")[1].attributes.getNamedItem("x").value).toBeCloseTo(363, 0), 
                expect(+$(".column")[1].attributes.getNamedItem("width").value).toBeCloseTo(48, 0)) : (expect($(".column").length).toBe(6), 
                expect(+$(".column")[1].attributes.getNamedItem("x").value).toBeCloseTo(179, 0), 
                expect(+$(".column")[1].attributes.getNamedItem("width").value).toBeCloseTo(48, 0)), 
                b();
            }, I);
        }), it("clustered column chart partial highlight dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeGreaterThan(+$(".column")[0].attributes.getNamedItem("y").value), 
                b();
            }, I);
        }), it("clustered column chart negative partial highlight dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ -123, -234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ -12, -88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toEqual(+$(".column")[0].attributes.getNamedItem("y").value), 
                b();
            }, I);
        }), it("clustered column chart partial highlights with overflow dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 157, 260 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 18, 102 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeGreaterThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("y").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("width").value), 
                b();
            }, I);
        }), it("clustered column chart partial highlights with positive/negative mix dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeGreaterThan(+$(".column")[0].attributes.getNamedItem("y").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("width").value), 
                b();
            }, I);
        }), it("clustered column chart missing measure in first series to not be dropped in dom", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ null, 123 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 23 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("def"), 
                b();
            }, I);
        }), it("clustered column chart missing measure dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: h[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, null ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(3), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("def"), 
                b();
            }, I);
        }), it("clustered column chart with near zero measures dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: h[0],
                            values: [ "abc", "def" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: h[1],
                            values: [ 1e-4, 234 ]
                        }, {
                            source: h[2],
                            values: [ 12, -1e-4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4);
                var a = $(".column")[0].attributes.getNamedItem("y").value, c = $(".column")[3].attributes.getNamedItem("y").value;
                expect(a).not.toEqual(c), b();
            }, I);
        }), it("empty clustered column chart dom validation", function(a) {
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("10"), 
                a();
            }, I);
        }), it("clustered column chart with small interval dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("2.50"), 
                b();
            }, I);
        }), it("clustered column chart should be cleared when empty dataview is applied", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            e.onDataChanged({
                dataViews: [ {
                    metadata: d(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".column").length).toBeGreaterThan(0), e.onDataChanged({
                    dataViews: [ {
                        metadata: d(g),
                        categorical: {
                            categories: [ {
                                source: g[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".column").length).toBe(0), b();
                }, I);
            }, I);
        }), b || it("legend formatting", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ], f = {
                metadata: d(h),
                categorical: {
                    categories: [ {
                        source: h[0],
                        values: [ "abc", "def" ],
                        identity: c
                    } ],
                    values: s.createValueColumns([ {
                        source: h[1],
                        min: 123,
                        max: 234,
                        subtotal: 357,
                        values: [ 123, 234 ]
                    }, {
                        source: h[2],
                        min: 12,
                        max: 88,
                        subtotal: 100,
                        values: [ 12, 88 ]
                    } ])
                }
            };
            f.metadata.objects = {
                legend: {
                    show: !0,
                    position: "Top"
                }
            }, e.onDataChanged({
                dataViews: [ f ]
            }), setTimeout(function() {
                expect($(".legend").attr("orientation")).toBe(0..toString()), f.metadata.objects = {
                    legend: {
                        show: !0,
                        position: "Right"
                    }
                }, e.onDataChanged({
                    dataViews: [ f ]
                }), setTimeout(function() {
                    expect($(".legend").attr("orientation")).toBe(2..toString());
                    var a = "Test Title";
                    f.metadata.objects = {
                        legend: {
                            show: !0,
                            position: "Right",
                            showTitle: !0,
                            titleText: a
                        }
                    }, e.onDataChanged({
                        dataViews: [ f ]
                    }), setTimeout(function() {
                        expect($(".legend").attr("orientation")).toBe(2..toString()), expect($(".legendTitle").text()).toBe(a), 
                        f.metadata.objects = {
                            legend: {
                                show: !1,
                                position: "Right"
                            }
                        }, e.onDataChanged({
                            dataViews: [ f ]
                        }), setTimeout(function() {
                            expect($(".legend").attr("orientation")).toBe(4..toString()), b();
                        }, I);
                    }, I);
                }, I);
            }, I);
        });
    }
    function c(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(v.Integer)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("300", "300"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create(), 
            c.init({
                element: d,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("single measure column chart dom validation", function(d) {
            var f = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "abc", "def" ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(2), expect($(".data-labels").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("200K"), 
                b ? expect($(".interactive-legend").length).toBe(1) : expect($(".legend").attr("orientation")).toBe(4..toString()), 
                d();
            }, I);
        }), it("single measure column chart with too many values for view dom validation", function(d) {
            var f = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e"), a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("g"), a.mocks.dataViewScopeIdentity("h"), a.mocks.dataViewScopeIdentity("i"), a.mocks.dataViewScopeIdentity("j"), a.mocks.dataViewScopeIdentity("k"), a.mocks.dataViewScopeIdentity("l"), a.mocks.dataViewScopeIdentity("m"), a.mocks.dataViewScopeIdentity("n"), a.mocks.dataViewScopeIdentity("o"), a.mocks.dataViewScopeIdentity("p"), a.mocks.dataViewScopeIdentity("q"), a.mocks.dataViewScopeIdentity("r"), a.mocks.dataViewScopeIdentity("s"), a.mocks.dataViewScopeIdentity("y") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t" ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 10,
                            max: 30,
                            subtotal: 420,
                            values: [ 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(13), expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("25"), 
                b ? expect($(".interactive-legend").length).toBe(1) : expect($(".legend").attr("orientation")).toBe(4..toString()), 
                c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: [ "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t" ],
                                identity: f
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".column").length).toBe(0), d();
                }, I);
            }, I);
        }), it("stacked column chart dom validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4);
                var a = b ? ".interactive-legend" : ".legend";
                expect($(a).length).toBe(1), expect($(a + (b ? " .item" : "Item")).length).toBe(2), 
                d();
            }, I);
        }), it("stacked column chart with partial highlight dom validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeGreaterThan(+$(".column")[0].attributes.getNamedItem("y").value);
                var a = b ? ".interactive-legend" : ".legend";
                expect($(a).length).toBe(1), expect($(a + (b ? " .item" : "Item")).length).toBe(2), 
                d();
            }, I);
        }), it("with partial highlight - data labels validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ], g = powerbi.Prototype.inherit(f);
            g.objects = {
                labels: {
                    show: !0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: g.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: g.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM();
                var a = $(".data-labels");
                b ? expect($(".data-labels").length).toBe(5) : expect($(".data-labels").length).toBe(6), 
                expect($(a[1]).css("fill-opacity")).toEqual("1"), expect($(a[0]).css("fill-opacity")).toEqual("0"), 
                expect($(a[3]).css("fill-opacity")).toEqual("0"), expect($(a[2]).css("fill-opacity")).toEqual("0"), 
                expect($(a[4]).css("fill-opacity")).toEqual("0"), d();
            }, I);
        }), it("stacked column chart with negative partial highlight dom validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: -234,
                            max: -123,
                            subtotal: -357,
                            values: [ -123, -234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: -88,
                            max: -12,
                            subtotal: -100,
                            values: [ -12, -88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBe(+$(".column")[0].attributes.getNamedItem("y").value);
                var a = b ? ".interactive-legend" : ".legend";
                expect($(a).length).toBe(1), expect($(a + (b ? " .item" : "Item")).length).toBe(2), 
                d();
            }, I);
        }), it("stacked column chart with partial highlight with overflow dom validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 154, 274 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 26, 166 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".highlight").length).toBe(0);
                var a = b ? ".interactive-legend" : ".legend";
                expect($(a).length).toBe(1), expect($(a + (b ? " .item" : "Item")).length).toBe(2), 
                d();
            }, I);
        }), it("stacked column chart with partial highlight with postitive/negative mix dom validation", function(d) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".highlight").length).toBe(0);
                var a = b ? ".interactive-legend" : ".legend";
                expect($(a).length).toBe(1), expect($(a + (b ? " .item" : "Item")).length).toBe(2), 
                d();
            }, I);
        }), it("stacked column chart missing measure dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, null ]
                        } ])
                    }
                } ]
            }), c.onResizing({
                height: 500,
                width: 500
            }, 0), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(3), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("def"), 
                b();
            }, I);
        }), it("stacked column chart with near zero measures dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 1e-4, 234 ]
                        }, {
                            source: f.columns[2],
                            values: [ 12, -1e-4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4);
                var a = $(".column")[0].attributes.getNamedItem("y").value, c = $(".column")[3].attributes.getNamedItem("y").value;
                expect(a).not.toEqual(c), b();
            }, I);
        }), it("stacked column chart optimal ticks dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 1, 3 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(2), expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBe(4), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("3"), 
                b();
            }, I);
        }), it("empty stacked column chart dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("10"), 
                a();
            }, I);
        }), it("stacked column chart with small interval dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("2.50"), 
                b();
            }, I);
        }), it("stacked column chart should be cleared when empty dataview is applied", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".column").length).toBeGreaterThan(0), c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".column").length).toBe(0), b();
                }, I);
            }, I);
        });
    }
    function d(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("300", "300"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("hundredPercentStackedColumnChart").create(), 
            c.init({
                element: d,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("single measure hundred percent column chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(2), expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("100%"), 
                b();
            }, I);
        }), it("single measure partial highlight hundred percent column chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ],
                            highlights: [ 5e4, 1e4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".highlight").length).toBe(2), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".column")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeGreaterThan(+$(".column")[0].attributes.getNamedItem("y").value), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("100%"), 
                expect($(".data-labels").length).toBe(0), b();
            }, I);
        }), it("single measure partial highlight hundred percent column chart - data labels validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ], e = powerbi.Prototype.inherit(f);
            e.objects = {
                labels: {
                    show: !0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ],
                            highlights: [ 5e4, 1e4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM();
                var a = $(".data-labels");
                expect(a.length).toBe(3), expect($(a[1]).css("fill-opacity")).toEqual("1"), expect($(a[0]).css("fill-opacity")).toEqual("0"), 
                expect($(a[2]).css("fill-opacity")).toEqual("0"), b();
            }, I);
        }), it("multi measure hundred percent column chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        }, {
                            source: f.columns[2],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".column").length).toBe(4), expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("100%"), 
                b();
            }, I);
        }), it("empty hundred percent column chart dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                a();
            }, I);
        }), it("hundred percent column chart should be cleared when empty dataview is applied", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".column").length).toBeGreaterThan(0), c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".column").length).toBe(0), b();
                }, I);
            }, I);
        });
    }
    function e(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(v.Integer)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("500", "500"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("barChart").create(), 
            c.init({
                element: d,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("single measure bar chart long labels dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("this is the label that never ends, it just goes on and on my friends. Some axis started rendering it not knowing what it was, and now it keeps on rendering forever just because this the label that never ends..."), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "this is the label that never ends, it just goes on and on my friends. Some axis started rendering it not knowing what it was, and now it keeps on rendering forever just because this the label that never ends...", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(2), expect($(".data-labels").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext").attr("transform")).toBe("translate(100,8)");
                var a = $(".columnChart .axisGraphicsContext .y.axis .tick").find("text").first().text();
                expect(a.length).toBeLessThan(30), expect(a.substr(a.length - 3)).toBe("..."), b();
            }, I);
        }), it("single measure bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(2), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("200K"), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("def"), 
                b();
            }, I);
        }), it("stacked bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4), b();
            }, I);
        }), it("stacked bar chart partial highlight dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBe(+$(".bar")[0].attributes.getNamedItem("x").value), 
                b();
            }, I);
        }), it("stacked bar chart negative partial highlight dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: -234,
                            max: -123,
                            subtotal: -357,
                            values: [ -123, -234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: -88,
                            max: -12,
                            subtotal: -100,
                            values: [ -12, -88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBeGreaterThan(+$(".bar")[0].attributes.getNamedItem("x").value), 
                b();
            }, I);
        }), it("stacked bar chart partial highlight with overflow dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 154, 264 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 16, 166 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4), expect($(".highlight").length).toBe(0), 
                b();
            }, I);
        }), it("stacked bar chart partial highlight with positive/negative mix dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4), expect($(".highlight").length).toBe(0), 
                b();
            }, I);
        }), it("incremental render bar chart one to multiple series bar chart dom validation", function(d) {
            var g = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "abc", "def" ],
                            identity: g
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(2), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("200K"), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("def"), 
                b || expect($(".legendItem")).not.toBeInDOM(), c.onDataChanged({
                    dataViews: [ {
                        metadata: f,
                        categorical: {
                            categories: [ {
                                source: f.columns[0],
                                values: [ "abc", "def" ],
                                identity: g
                            } ],
                            values: s.createValueColumns([ {
                                source: f.columns[1],
                                min: 123,
                                max: 234,
                                subtotal: 357,
                                values: [ 123, 234 ]
                            }, {
                                source: f.columns[2],
                                min: 12,
                                max: 88,
                                subtotal: 100,
                                values: [ 12, 88 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4);
                    var a = b ? ".interactive-legend" : ".legend";
                    expect($(a)).toBeInDOM(), expect($(a).children.length).toBe(2), d();
                }, I);
            }, I);
        }), it("stacked bar chart missing measure dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, null ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(3), b();
            }, I);
        }), it("stacked bar chart with near zero measures dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 1e-4, 234 ]
                        }, {
                            source: f.columns[2],
                            values: [ 12, -1e-4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4);
                var a = $(".bar")[0].attributes.getNamedItem("x").value, c = $(".bar")[3].attributes.getNamedItem("x").value;
                expect(a).not.toEqual(c), b();
            }, I);
        }), it("stacked bar chart optimal ticks dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 1, 3 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(2), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBe(4), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("3"), 
                b();
            }, I);
        }), it("empty stacked bar chart dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("10"), 
                a();
            }, I);
        }), it("stacked bar chart with small interval dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("2.50"), 
                b();
            }, I);
        }), it("stacked bar chart should be cleared when empty dataview is applied", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".bar").length).toBeGreaterThan(0), c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".bar").length).toBe(0), b();
                }, I);
            }, I);
        });
    }
    function f(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("500", "500"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("hundredPercentStackedBarChart").create(), 
            c.init({
                element: d,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("single measure hundred percent bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(2), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("100%"), 
                b();
            }, I);
        }), it("single measure partial highlight hundred percent bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ],
                            highlights: [ 5e4, 1e4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4), expect($(".highlight").length).toBe(2), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBe(+$(".bar")[0].attributes.getNamedItem("x").value), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("100%"), 
                b();
            }, I);
        }), it("multi measure hundred percent bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        }, {
                            source: f.columns[2],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4), expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("100%"), 
                b();
            }, I);
        }), it("empty hundred percent bar chart dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                a();
            }, I);
        }), it("hundred percent bar chart should be cleared when empty dataview is applied", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".bar").length).toBeGreaterThan(0), c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".bar").length).toBe(0), b();
                }, I);
            }, I);
        });
    }
    function g(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("300", "300"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("clusteredBarChart").create(), 
            c.init({
                element: d,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: b
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("clustered bar chart dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ]
                        }, {
                            source: f.columns[3],
                            min: 27,
                            max: 113,
                            subtotal: 140,
                            values: [ 27, 113 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(6);
                var a = $(".bar");
                expect(a.length).toBe(6), expect($(".data-labels").length).toBe(0), expect(+a.eq(0).attr("y")).toBeLessThan(+a.eq(1).attr("y")), 
                expect(+a.eq(0).attr("y")).toBeLessThan(+a.eq(2).attr("y")), expect(+a.eq(0).attr("y")).toBeLessThan(+a.eq(4).attr("y")), 
                expect(+a.eq(2).attr("y")).toBeLessThan(+a.eq(4).attr("y")), b();
            }, I);
        }), it("clustered bar chart partial highlight dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBe(+$(".bar")[0].attributes.getNamedItem("x").value), 
                expect($(".data-labels").length).toBe(0), b();
            }, I);
        }), it("clustered bar chart partial highlight - data labels validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ], e = powerbi.Prototype.inherit(f);
            e.objects = {
                labels: {
                    show: !0,
                    labelPrecision: 0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: e.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM();
                var a = $(".data-labels");
                expect(a.length).toBe(8), expect($(a[1]).css("fill-opacity")).toEqual("1"), expect($(a[5]).css("fill-opacity")).toEqual("1"), 
                expect($(a[3]).css("fill-opacity")).toEqual("1"), expect($(a[0]).css("fill-opacity")).toEqual("0"), 
                expect($(a[2]).css("fill-opacity")).toEqual("0"), expect($(a[4]).css("fill-opacity")).toEqual("0"), 
                expect($(a[6]).css("fill-opacity")).toEqual("0"), expect($(a[6]).css("fill-opacity")).toEqual("0"), 
                b();
            }, I);
        }), it("clustered bar chart negative partial highlight dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: -234,
                            max: -54,
                            subtotal: -357,
                            values: [ -123, -234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: -88,
                            max: -12,
                            subtotal: -100,
                            values: [ -12, -88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBeGreaterThan(+$(".bar")[0].attributes.getNamedItem("x").value), 
                b();
            }, I);
        }), it("clustered bar chart partial highlight with overflow dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 150, 264 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 18, 104 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeGreaterThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBe(+$(".bar")[0].attributes.getNamedItem("x").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("height").value), 
                b();
            }, I);
        }), it("clustered bar chart partial highlight with postiive/negative mix dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ -54, -204 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ -6, -66 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(8), expect($(".highlight").length).toBe(4), 
                expect(+$(".highlight")[0].attributes.getNamedItem("width").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("width").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("x").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("x").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".bar")[0].attributes.getNamedItem("height").value), 
                b();
            }, I);
        }), it("clustered bar chart missing measure dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: f.columns[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, null ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(3), expect($(".columnChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("def"), 
                b();
            }, I);
        }), it("clustered bar chart with near zero measures dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "abc", "def" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 1e-4, 234 ]
                        }, {
                            source: f.columns[2],
                            values: [ 12, -1e-4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".bar").length).toBe(4);
                var a = $(".bar")[0].attributes.getNamedItem("x").value, c = $(".bar")[3].attributes.getNamedItem("x").value;
                expect(a).not.toEqual(c), b();
            }, I);
        }), it("empty clustered bar chart dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBe(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("10"), 
                a();
            }, I);
        }), it("clustered bar chart with small interval dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($(".columnChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".columnChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("2.50"), 
                b();
            }, I);
        }), it("clustered bar chart should be cleared when empty dataview is applied", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".bar").length).toBeGreaterThan(0), c.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: []
                            } ],
                            values: s.createValueColumns([])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".bar").length).toBe(0), b();
                }, I);
            }, I);
        });
    }
    function h(b, c, d, e) {
        var f, g, h = a.mocks.createVisualHostServices(), i = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(v.Integer)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), g = a.helpers.testDom("500", "500"), 
            f = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), f.init({
                element: g,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                interactivity: {
                    isInteractiveLegend: !0
                },
                animation: {
                    transitionImmediate: !0
                }
            }), f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: s.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
        }), it("Drag and click interaction validation", function() {
            var a = f.layers[0];
            spyOn(a, "selectColumn").and.callThrough(), $(".columnChartMainGraphicsContext").d3Click(d, e), 
            expect(a.selectColumn).toHaveBeenCalled();
            var b = a.columnChart.getClosestColumnIndex(d, e), c = 2;
            expect(b).toBe(c);
        }), it("Columns Opacity validation", function(a) {
            var b = f.layers[0], d = 2;
            b.selectColumn(d), E.flushAllD3TransitionsIfNeeded({
                transitionImmediate: !0
            }), setTimeout(function() {
                var b = d3.selectAll(".bar" + c);
                expect(b).not.toBeEmpty(), b.each(function(a, c) {
                    a.categoryIndex === d ? expect(parseFloat($(b[0]).eq(c).css("fill-opacity"))).toBeCloseTo(y.DefaultOpacity, 0) : expect(parseFloat($(b[0]).eq(c).css("fill-opacity"))).toBeCloseTo(y.DimmedOpacity, 1);
                }), a();
            }, I);
        }), it("Update legend is not called twice on same column", function() {
            var a = f.layers[0], b = a.cartesianVisualHost;
            spyOn(b, "updateLegend").and.callThrough(), a.selectColumn(0), expect(b.updateLegend).not.toHaveBeenCalled();
        }), it("Legend validation validation", function() {
            var a = f.layers[0];
            a.selectColumn(2);
            var b = $(".interactive-legend"), c = b.find(".title"), d = b.find(".item"), e = $(".interactive-hover-line");
            expect(b.length).toBe(1), expect(c.text().trim()).toBe("c"), expect(d.find(".itemName").text()).toBe("col2"), 
            expect(d.find(".itemMeasure").text().trim()).toBe("490000"), expect(e.length).toBe(1);
        });
    }
    function i(b) {
        function c(a) {
            var b = {
                columns: a
            };
            return b;
        }
        var d, e, f = a.mocks.createVisualHostServices(), g = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ];
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), e = a.helpers.testDom("500", "500"), 
            d = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1,
                scrollableVisuals: !1
            }).getPlugin(b).create(), d.init({
                element: e,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("highlight Animation", function(b) {
            var e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ], f = {
                dataViews: [ {
                    metadata: c(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ]
                        }, {
                            source: g[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ]
                        } ])
                    }
                } ]
            }, h = {
                dataViews: [ {
                    metadata: c(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 54, 204 ]
                        }, {
                            source: g[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 6, 66 ]
                        } ])
                    }
                } ]
            }, i = {
                dataViews: [ {
                    metadata: c(g),
                    categorical: {
                        categories: [ {
                            source: g[0],
                            values: [ "abc", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: g[1],
                            min: 123,
                            max: 234,
                            subtotal: 357,
                            values: [ 123, 234 ],
                            highlights: [ 120, 10 ]
                        }, {
                            source: g[2],
                            min: 12,
                            max: 88,
                            subtotal: 100,
                            values: [ 12, 88 ],
                            highlights: [ 8, 20 ]
                        } ])
                    }
                } ]
            }, j = d.animator;
            spyOn(j, "animate").and.callThrough(), d.onDataChanged(f), d.onDataChanged(h), d.onDataChanged(i), 
            d.onDataChanged(f), expect(j).toBeTruthy(), expect(j.animate).toHaveBeenCalled(), 
            b();
        });
    }
    function j(b, c) {
        var d, e = a.mocks.createVisualHostServices(), f = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        };
        d = powerbi.visuals.visualPluginFactory.createMinerva({
            heatMap: !1,
            scrollableVisuals: !0
        }).getPlugin(b).create(), d.init({
            element: c,
            host: e,
            style: powerbi.visuals.visualStyles.create(),
            viewport: {
                height: c.height(),
                width: c.width()
            },
            animation: {
                transitionImmediate: !0
            }
        });
        var g = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e"), a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("g"), a.mocks.dataViewScopeIdentity("h"), a.mocks.dataViewScopeIdentity("i"), a.mocks.dataViewScopeIdentity("j"), a.mocks.dataViewScopeIdentity("k"), a.mocks.dataViewScopeIdentity("l"), a.mocks.dataViewScopeIdentity("m"), a.mocks.dataViewScopeIdentity("n"), a.mocks.dataViewScopeIdentity("o"), a.mocks.dataViewScopeIdentity("p"), a.mocks.dataViewScopeIdentity("q"), a.mocks.dataViewScopeIdentity("r"), a.mocks.dataViewScopeIdentity("s"), a.mocks.dataViewScopeIdentity("t") ];
        return d.onDataChanged({
            dataViews: [ {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t" ],
                        identity: g
                    } ],
                    values: s.createValueColumns([ {
                        source: f.columns[1],
                        min: 10,
                        max: 29,
                        subtotal: 390,
                        values: [ 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29 ]
                    } ])
                }
            } ]
        }), d;
    }
    function k(b, c) {
        var d, e;
        beforeEach(function() {
            d = a.helpers.testDom("100", "100"), e = j(b, d);
        }), it("DOM Validation", function(a) {
            setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($("rect" + c).length).toBe(4), expect($("rect.extent").length).toBe(1), 
                expect($("rect" + c)[3].attributes.getNamedItem("y").value).toBeLessThan(d.height());
                var b = E.parseTranslateTransform($(".columnChart .axisGraphicsContext .y.axis .tick").last().attr("transform"));
                expect(b.y).toBeLessThan(d.height()), expect(b.x).toBe("0"), expect($(".brush").attr("transform")).toBe("translate(90,8)"), 
                expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("height").value, 0)).toBeGreaterThan(8), 
                expect($(".brush .extent")[0].attributes.getNamedItem("y").value).toBe("0"), a();
            }, I);
        }), it("Scrollbar OnMousedown Validation", function(a) {
            var b = E.parseTranslateTransform($(".svgScrollable .axisGraphicsContext").first().attr("transform")), c = e, d = e.brush, f = [ 40, 55 ];
            d.extent(f), c.setMinBrush(100, 10, 4), setTimeout(function() {
                var c = E.parseTranslateTransform($(".svgScrollable .axisGraphicsContext").first().attr("transform"));
                expect(b.y).toEqual(c.y), expect(c.y).toBe("8"), a();
            }, I);
        });
    }
    function l(b, c) {
        var d, e;
        beforeEach(function() {
            d = a.helpers.testDom("100", "100"), e = j(b, d);
        }), it("DOM Validation", function(a) {
            setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), expect($("rect" + c).length).toBe(4), expect($("rect.extent").length).toBe(1), 
                expect($("rect" + c)[3].attributes.getNamedItem("x").value).toBeLessThan(d.width());
                var b = E.parseTranslateTransform($(".columnChart .axisGraphicsContext .x.axis .tick").last().attr("transform"));
                expect(b.y).toBe("0"), expect(b.x).toBeLessThan(d.width()), expect($(".brush").attr("transform")).toBe("translate(22,90)"), 
                expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("width").value, 0)).toBe(13), 
                expect($(".brush .extent")[0].attributes.getNamedItem("x").value).toBe("0"), a();
            }, I);
        }), it("Scrollbar On Mousedown Validation", function(a) {
            var b = E.parseTranslateTransform($(".svgScrollable .axisGraphicsContext").first().attr("transform")), c = e, d = e.brush, f = [ 25, 35 ];
            d.extent(f), c.setMinBrush(100, 10, 4), setTimeout(function() {
                var c = E.parseTranslateTransform($(".svgScrollable .axisGraphicsContext").first().attr("transform"));
                expect(b.x).toEqual(c.x), expect(c.x).toBe("0"), a();
            }, I);
        });
    }
    function m(a) {
        return {
            categoryValue: a.categoryValue,
            value: a.value
        };
    }
    function n(b) {
        function c(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: !0,
                    color: {
                        solid: {
                            color: "#FF0000"
                        }
                    }
                }
            }, b;
        }
        function d(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: !0
                }
            }, b;
        }
        var e, f, g = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], h = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, i = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        }), j = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), f = a.helpers.testDom("500", "500"), 
            e = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), e.init({
                element: f,
                host: j,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Data Label Position Validation", function(d) {
            var f = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], h = {
                metadata: c(g),
                categorical: {
                    categories: [ {
                        source: g[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: f
                    } ],
                    values: s.createValueColumns([ {
                        source: g[1],
                        values: [ 1e3, 2e3, 20 ],
                        subtotal: 3020
                    } ])
                }
            };
            e.onDataChanged({
                dataViews: [ h ]
            }), setTimeout(function() {
                var a = $(".data-labels");
                switch (b) {
                  case "barChart":
                  case "clusteredBarChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("y")).not.toEqual($(a[1]).attr("y")), 
                    expect($(a[0]).attr("x")).not.toEqual($(a[1]).attr("x"));
                    var c = $(".bar"), e = +$(c[0]).attr("x"), f = +$(c[1]).attr("x"), g = +$(c[2]).attr("x"), h = +$(c[0]).attr("width"), i = +$(c[1]).attr("width"), j = +$(c[2]).attr("width");
                    expect($(a[0]).attr("x")).toBeGreaterThan(e + h), expect($(a[2]).attr("x")).toBeGreaterThan(g + j), 
                    expect($(a[1]).attr("x")).toBeLessThan(f + i), expect($(a[1]).attr("x")).toBeGreaterThan(f);
                    break;

                  case "columnChart":
                  case "clusteredColumnChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("x")).not.toEqual($(a[1]).attr("x")), 
                    expect($(a[1]).attr("x")).not.toEqual($(a[2]).attr("x"));
                    var k = $(".column"), l = +$(k[0]).attr("y"), m = +$(k[1]).attr("y"), n = +$(k[2]).attr("y");
                    expect($(a[0]).attr("y")).toBeLessThan(l), expect($(a[2]).attr("y")).toBeLessThan(n), 
                    expect($(a[1]).attr("y")).toBeGreaterThan(m);
                    break;

                  case "hundredPercentStackedColumnChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("x")).not.toEqual($(a[1]).attr("x")), 
                    expect($(a[1]).attr("x")).not.toEqual($(a[2]).attr("x")), expect($(a[0]).attr("y")).toEqual($(a[1]).attr("y")), 
                    expect($(a[1]).attr("y")).toEqual($(a[2]).attr("y"));
                    break;

                  case "hundredPercentStackedBarChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("x")).toEqual($(a[1]).attr("x")), 
                    expect($(a[0]).attr("x")).toEqual($(a[1]).attr("x"));
                }
                d();
            }, I);
        }), it("Data Label Position Validation negative value", function(d) {
            var f = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], h = {
                metadata: c(g),
                categorical: {
                    categories: [ {
                        source: g[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: f
                    } ],
                    values: s.createValueColumns([ {
                        source: g[1],
                        values: [ -1e3, 2e3, -20 ],
                        subtotal: 3020
                    } ])
                }
            };
            e.onDataChanged({
                dataViews: [ h ]
            }), setTimeout(function() {
                var a = $(".data-labels"), c = $(".bar");
                switch (b) {
                  case "barChart":
                  case "clusteredBarChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("y")).not.toEqual($(a[1]).attr("y")), 
                    expect($(a[0]).attr("x")).toEqual($(a[2]).attr("x"));
                    var e = +$(c[0]).attr("x"), f = +$(c[1]).attr("x"), g = +$(c[2]).attr("x"), h = +$(c[0]).attr("width"), i = +$(c[1]).attr("width"), j = +$(c[2]).attr("width");
                    expect($(a[0]).attr("x")).toBeGreaterThan(e + h), expect($(a[2]).attr("x")).toBeGreaterThan(g + j), 
                    expect($(a[1]).attr("x")).toBeLessThan(f + i), expect($(a[1]).attr("x")).toBeGreaterThan(f);
                    break;

                  case "hundredPercentStackedBarChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("y")).not.toEqual($(a[1]).attr("y")), 
                    expect($(a[0]).attr("x")).toEqual($(a[2]).attr("x"));
                    break;

                  case "hundredPercentStackedColumnChart":
                    expect(a.length).toBe(3), expect($(a[0]).attr("x")).not.toEqual($(a[1]).attr("x")), 
                    expect($(a[1]).attr("x")).not.toEqual($(a[2]).attr("x")), expect($(a[0]).attr("y")).not.toEqual($(a[1]).attr("y")), 
                    expect($(a[1]).attr("y")).not.toEqual($(a[2]).attr("y")), expect($(a[0]).attr("y")).toEqual($(a[2]).attr("y"));
                }
                d();
            }, I);
        }), it("Data Label Position Validation - multi series", function(c) {
            var f = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                } ]
            }, g = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], j = {
                dataViews: [ {
                    metadata: d(h),
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "John Domo", "Delta Force", "Mr Bing" ],
                            identity: g,
                            identityFields: [ i ]
                        } ],
                        values: s.createValueColumns([ {
                            source: f.columns[1],
                            values: [ -200, 100, 150 ],
                            subtotal: 450
                        }, {
                            source: f.columns[2],
                            values: [ -300, 300, 30 ],
                            subtotal: 630
                        } ])
                    }
                } ]
            };
            e.onDataChanged(j), setTimeout(function() {
                var a, d, e, f, g, h, i, j, k, l, m, n, o, p = $(".data-labels");
                switch ("barChart" === b || "hundredPercentStackedBarChart" === b || "clusteredBarChart" === b ? (a = $(".bar"), 
                d = +$(a[0]).attr("x"), e = +$(a[1]).attr("x"), f = +$(a[2]).attr("x"), g = +$(a[3]).attr("x"), 
                h = +$(a[5]).attr("x"), j = +$(a[0]).attr("width"), k = +$(a[1]).attr("width"), 
                l = +$(a[2]).attr("width"), m = +$(a[3]).attr("width"), n = +$(a[5]).attr("width")) : (a = $(".column"), 
                d = +$(a[0]).attr("y"), e = +$(a[1]).attr("y"), f = +$(a[2]).attr("y"), g = +$(a[3]).attr("y"), 
                h = +$(a[4]).attr("y"), i = +$(a[5]).attr("y"), j = +$(a[0]).attr("height"), k = +$(a[1]).attr("height"), 
                l = +$(a[2]).attr("height"), m = +$(a[3]).attr("height"), n = +$(a[4]).attr("height"), 
                o = +$(a[5]).attr("height")), b) {
                  case "barChart":
                    expect(p.length).toBe(6), expect(e).toBeLessThan($(p[1]).attr("x")), expect(e + k).toBeGreaterThan($(p[1]).attr("x")), 
                    expect(f).toBeLessThan($(p[2]).attr("x")), expect(f + l).toBeGreaterThan($(p[2]).attr("x")), 
                    expect(g).toBeLessThan($(p[3]).attr("x")), expect(g + m).toBeGreaterThan($(p[3]).attr("x")), 
                    expect(d + j).toBeLessThan($(p[0]).attr("x")), expect(h + n).toBeLessThan($(p[4]).attr("x"));
                    break;

                  case "clusteredBarChart":
                    expect(p.length).toBe(6), expect(d + j).toBeLessThan($(p[0]).attr("x")), expect(e + k).toBeLessThan($(p[1]).attr("x")), 
                    expect(f + l).toBeLessThan($(p[2]).attr("x")), expect(g + m).toBeLessThan($(p[3]).attr("x")), 
                    expect(h + n).toBeLessThan($(p[4]).attr("x"));
                    break;

                  case "hundredPercentStackedBarChart":
                    expect(p.length).toBe(5), h = +$(a[4]).attr("x"), n = +$(a[4]).attr("width"), expect(d).toBeLessThan($(p[0]).attr("x")), 
                    expect(d + j).toBeGreaterThan($(p[0]).attr("x")), expect(e).toBeLessThan($(p[1]).attr("x")), 
                    expect(e + k).toBeGreaterThan($(p[1]).attr("x")), expect(f).toBeLessThan($(p[2]).attr("x")), 
                    expect(f + l).toBeGreaterThan($(p[2]).attr("x")), expect(g).toBeLessThan($(p[3]).attr("x")), 
                    expect(g + m).toBeGreaterThan($(p[3]).attr("x")), expect(h).toBeLessThan($(p[4]).attr("x")), 
                    expect(h + n).toBeGreaterThan($(p[4]).attr("x"));
                    break;

                  case "columnChart":
                    expect(p.length).toBe(6), expect(e).toBeLessThan($(p[1]).attr("y")), expect(e + k).toBeGreaterThan($(p[1]).attr("y")), 
                    expect(f).toBeLessThan($(p[2]).attr("y")), expect(f + l).toBeGreaterThan($(p[2]).attr("y")), 
                    expect(g).toBeLessThan($(p[3]).attr("y")), expect(g + m).toBeGreaterThan($(p[3]).attr("y")), 
                    expect(d).toBeGreaterThan($(p[0]).attr("y")), expect(i).toBeGreaterThan($(p[5]).attr("y"));
                    break;

                  case "clusteredColumnChart":
                    expect(p.length).toBe(6), expect(d).toBeGreaterThan($(p[0]).attr("y")), expect(e).toBeGreaterThan($(p[1]).attr("y")), 
                    expect(f).toBeGreaterThan($(p[2]).attr("y")), expect(g).toBeGreaterThan($(p[3]).attr("y")), 
                    expect(i).toBeGreaterThan($(p[5]).attr("y"));
                    break;

                  case "hundredPercentStackedColumnChart":
                    expect(p.length).toBe(6), expect(d).toBeLessThan($(p[0]).attr("y")), expect(d + k).toBeGreaterThan($(p[0]).attr("y")), 
                    expect(e).toBeLessThan($(p[1]).attr("y")), expect(e + k).toBeGreaterThan($(p[1]).attr("y")), 
                    expect(f).toBeLessThan($(p[2]).attr("y")), expect(f + l).toBeGreaterThan($(p[2]).attr("y")), 
                    expect(g).toBeLessThan($(p[3]).attr("y")), expect(g + m).toBeGreaterThan($(p[3]).attr("y")), 
                    expect(h).toBeLessThan($(p[4]).attr("y")), expect(h + n).toBeGreaterThan($(p[4]).attr("y")), 
                    expect(i).toBeLessThan($(p[5]).attr("y")), expect(i + o).toBeGreaterThan($(p[5]).attr("y"));
                }
                c();
            }, I);
        });
    }
    function o(b, c) {
        function d(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: c,
                    color: {
                        solid: {
                            color: "#FF0000"
                        }
                    }
                }
            }, b;
        }
        var e, f, g = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], h = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), f = a.helpers.testDom("500", "500"), 
            e = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Data Label Visibility Validation", function(b) {
            var f = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force") ], h = {
                metadata: d(g),
                categorical: {
                    categories: [ {
                        source: g[0],
                        values: [ "John Domo", "Delta Force" ],
                        identity: f
                    } ],
                    values: s.createValueColumns([ {
                        source: g[1],
                        values: [ 20, 100 ],
                        subtotal: 120
                    } ])
                }
            };
            e.onDataChanged({
                dataViews: [ h ]
            });
            var i = $(".data-labels");
            setTimeout(function() {
                c ? expect($(i[0]).css("fill-opacity")).toEqual("1") : expect($(i[0]).length).toBe(0), 
                b();
            }, I);
        });
    }
    function p(b, c) {
        function d(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: !0,
                    color: {
                        solid: {
                            color: c
                        }
                    }
                }
            }, b;
        }
        function e(a) {
            var b = {
                columns: a
            };
            return b.objects = {
                labels: {
                    show: !0
                }
            }, b;
        }
        var f, g, h = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], i = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], j = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), g = a.helpers.testDom("500", "500"), 
            f = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), f.init({
                element: g,
                host: j,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Data Label Color Validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force") ], e = {
                metadata: d(h),
                categorical: {
                    categories: [ {
                        source: h[0],
                        values: [ "John Domo", "Delta Force" ],
                        identity: c
                    } ],
                    values: s.createValueColumns([ {
                        source: h[1],
                        values: [ 20, 1e3 ],
                        subtotal: 1020
                    } ])
                }
            };
            f.onDataChanged({
                dataViews: [ e ]
            });
            var g = $(".data-labels");
            setTimeout(function() {
                expect(G.convertFromRGBorHexToHex($(g[0]).css("fill"))).toEqual(G.convertFromRGBorHexToHex("#ff0000")), 
                b();
            }, I);
        }), it("Label color should be different from rect color when position inside", function(c) {
            var d = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force") ], g = {
                metadata: e(h),
                categorical: {
                    categories: [ {
                        source: h[0],
                        values: [ "John Domo", "Delta Force" ],
                        identity: d
                    } ],
                    values: s.createValueColumns([ {
                        source: h[1],
                        values: [ 20, 1e3 ],
                        subtotal: 1020
                    } ])
                }
            };
            f.onDataChanged({
                dataViews: [ g ]
            });
            var i = $(".data-labels"), j = $(".columnChartMainGraphicsContext rect");
            setTimeout(function() {
                switch (b) {
                  case "barChart":
                  case "clusteredBarChart":
                  case "columnChart":
                  case "clusteredColumnChart":
                    expect($(j[0]).css("fill")).toEqual($(i[0]).css("fill")), expect($(i[1]).css("fill")).toEqual("#ffffff");
                    break;

                  case "hundredPercentStackedBarChart":
                  case "hundredPercentStackedColumnChart":
                    for (var a = 0; a < i.length; a++) expect($(j[a]).css("fill")).not.toEqual($(i[a]).css("fill"));
                }
                c();
            }, I);
        }), it("Data Label Color Validation - multi series", function(c) {
            var d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                } ]
            }, g = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], h = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "p"
            }), j = {
                dataViews: [ {
                    metadata: e(i),
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "John Domo", "Delta Force", "Mr Bing" ],
                            identity: g,
                            identityFields: [ h ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ -200, 150, 150 ],
                            subtotal: 500
                        }, {
                            source: d.columns[2],
                            values: [ -300, 300, 30 ],
                            subtotal: 630
                        } ])
                    }
                } ]
            };
            f.onDataChanged(j), setTimeout(function() {
                var a, d = $(".data-labels"), e = "#ffffff";
                switch (a = "barChart" === b || "hundredPercentStackedBarChart" === b || "clusteredBarChart" === b ? $(".bar") : $(".column"), 
                b) {
                  case "barChart":
                    expect(d.length).toBe(6), expect($(d[1]).css("fill")).toBe(e), expect($(d[2]).css("fill")).toBe(e), 
                    expect($(d[3]).css("fill")).toBe(e), expect($(a[0]).css("fill")).toBe($(d[0]).css("fill")), 
                    expect($(a[4]).css("fill")).toBe($(d[4]).css("fill")), expect($(a[5]).css("fill")).toBe($(d[5]).css("fill"));
                    break;

                  case "clusteredBarChart":
                    expect(d.length).toBe(6), expect($(a[0]).css("fill")).toBe($(d[0]).css("fill")), 
                    expect($(a[1]).css("fill")).toBe($(d[1]).css("fill")), expect($(a[2]).css("fill")).toBe($(d[2]).css("fill")), 
                    expect($(a[3]).css("fill")).toBe($(d[3]).css("fill")), expect($(a[5]).css("fill")).toBe($(d[5]).css("fill")), 
                    expect($(d[4]).css("fill")).toBe(e);
                    break;

                  case "hundredPercentStackedBarChart":
                    expect(d.length).toBe(5), expect($(d[0]).css("fill")).toBe(e), expect($(d[1]).css("fill")).toBe(e), 
                    expect($(d[2]).css("fill")).toBe(e), expect($(d[3]).css("fill")).toBe(e), expect($(d[4]).css("fill")).toBe(e);
                    break;

                  case "columnChart":
                    expect(d.length).toBe(6), expect($(d[1]).css("fill")).toBe(e), expect($(d[2]).css("fill")).toBe(e), 
                    expect($(d[3]).css("fill")).toBe(e), expect($(a[0]).css("fill")).toBe($(d[0]).css("fill")), 
                    expect($(a[5]).css("fill")).toBe($(d[5]).css("fill"));
                    break;

                  case "clusteredColumnChart":
                    expect(d.length).toBe(6), expect($(a[0]).css("fill")).toBe($(d[0]).css("fill")), 
                    expect($(a[1]).css("fill")).toBe($(d[1]).css("fill")), expect($(a[2]).css("fill")).toBe($(d[2]).css("fill")), 
                    expect($(a[3]).css("fill")).toBe($(d[3]).css("fill")), expect($(a[5]).css("fill")).toBe($(d[5]).css("fill")), 
                    expect($(d[4]).css("fill")).toBe(e);
                    break;

                  case "hundredPercentStackedColumnChart":
                    expect(d.length).toBe(6), expect($(d[0]).css("fill")).toBe(e), expect($(d[1]).css("fill")).toBe(e), 
                    expect($(d[2]).css("fill")).toBe(e), expect($(d[3]).css("fill")).toBe(e), expect($(d[4]).css("fill")).toBe(e), 
                    expect($(d[5]).css("fill")).toBe(e);
                }
                c();
            }, I);
        });
    }
    function q(b) {
        function c(a, b, c) {
            void 0 === b && (b = 0), void 0 === c && (c = 0);
            var d = {
                columns: a
            };
            return d.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: b,
                    labelPrecision: c
                }
            }, d;
        }
        var d, e, f = [ {
            displayName: "col1",
            type: u.describeDataType(2048)
        }, {
            displayName: "col2",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, {
            displayName: "col3",
            isMeasure: !0,
            type: u.describeDataType(1)
        } ], g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), e = a.helpers.testDom("1000", "1000"), 
            d = powerbi.visuals.visualPluginFactory.create().getPlugin(b).create(), d.init({
                element: e,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("labels should support display units with no precision", function(b) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo") ], g = {
                metadata: c(f, 1e3, 0),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: e
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ 500123 ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".data-labels").first().text()).toEqual("500K"), b();
            }, I);
        }), it("labels should support display units with precision", function(b) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo") ], g = {
                metadata: c(f, 1e3, 1),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: e
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ 500123 ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".data-labels").first().text()).toEqual("500.1K"), b();
            }, I);
        }), it("labels should use default display unit automatically", function(b) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo") ], g = {
                metadata: c(f, 0, 2),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: e
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ 1500123 ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".data-labels").first().text()).toEqual("1.50M"), b();
            }, I);
        }), it("with NaN value shows warning", function(b) {
            var e = jasmine.createSpy("setWarnings");
            g.setWarnings = e;
            var h = [ a.mocks.dataViewScopeIdentity("John Domo") ], i = {
                metadata: c(f, 0, 2),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: h
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ NaN ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ i ]
            }), setTimeout(function() {
                expect(e).toHaveBeenCalled(), expect(e.calls.count()).toBe(1), expect(e.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                b();
            }, I);
        }), it("with Negative Infinity value shows warning", function(b) {
            var e = jasmine.createSpy("setWarnings");
            g.setWarnings = e;
            var h = [ a.mocks.dataViewScopeIdentity("John Domo") ], i = {
                metadata: c(f, 0, 2),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: h
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ Number.NEGATIVE_INFINITY ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ i ]
            }), setTimeout(function() {
                expect(e).toHaveBeenCalled(), expect(e.calls.count()).toBe(1), expect(e.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                b();
            }, I);
        }), it("with Infinity value shows warning", function(b) {
            var e = jasmine.createSpy("setWarnings");
            g.setWarnings = e;
            var h = [ a.mocks.dataViewScopeIdentity("John Domo") ], i = {
                metadata: c(f, 0, 2),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: h
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ Number.POSITIVE_INFINITY ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ i ]
            }), setTimeout(function() {
                expect(e).toHaveBeenCalled(), expect(e.calls.count()).toBe(1), expect(e.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                b();
            }, I);
        }), it("with out of range value shows warning", function(b) {
            var e = jasmine.createSpy("setWarnings");
            g.setWarnings = e;
            var h = [ a.mocks.dataViewScopeIdentity("John Domo") ], i = {
                metadata: c(f, 0, 2),
                categorical: {
                    categories: [ {
                        source: f[0],
                        values: [ "John Domo" ],
                        identity: h
                    } ],
                    values: s.createValueColumns([ {
                        source: f[1],
                        values: [ 1e301 ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ i ]
            }), setTimeout(function() {
                expect(e).toHaveBeenCalled(), expect(e.calls.count()).toBe(1), expect(e.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                b();
            }, I);
        });
    }
    var r = powerbi.data.DataViewSelfCrossJoin, s = powerbi.data.DataViewTransform, t = powerbi.visuals.ColumnChart, u = powerbi.data.dsr.DataShapeUtility, v = powerbi.data.SemanticType, w = powerbi.visuals.ClusteredUtil, x = powerbi.visuals.StackedUtil, y = powerbi.visuals.ColumnUtil, z = powerbi.visuals.AxisHelper, A = powerbi.ValueType, B = powerbi.visuals.SelectionId, C = (powerbi.PrimitiveType, 
    powerbi.Prototype), D = powerbi.visuals.CartesianChart, E = powerbi.visuals.SVGUtil, F = powerbi.axisType, G = a.utils.ColorUtility, H = powerbi.data.SQExprShortSerializer, I = 10;
    describe("ColumnChart", function() {
        function b(a, b) {
            var c = [];
            return a && c.push({
                type: a
            }), {
                metadata: {
                    objects: b
                },
                categorical: {
                    categories: {
                        "for": {
                            "in": {
                                role: "Category",
                                items: c
                            }
                        },
                        dataReductionAlgorithm: {
                            top: {}
                        }
                    },
                    values: {
                        group: {
                            by: {
                                role: "Series",
                                items: [ {
                                    type: A.fromPrimitiveTypeAndCategory(1)
                                } ]
                            },
                            select: [ {
                                "for": {
                                    "in": {
                                        role: "Y",
                                        items: [ {
                                            type: A.fromPrimitiveTypeAndCategory(4)
                                        } ]
                                    }
                                }
                            } ],
                            dataReductionAlgorithm: {
                                top: {}
                            }
                        }
                    }
                }
            };
        }
        var c = {
            displayName: "year",
            queryName: "selectYear",
            type: u.describeDataType(2048)
        }, d = {
            displayName: "sales",
            queryName: "selectSales",
            isMeasure: !0,
            type: u.describeDataType(v.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            }
        }, e = {
            displayName: "tax",
            queryName: "selectTax",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, f = {
            displayName: "profit",
            queryName: "selectProfit",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, g = {
            displayName: null,
            queryName: "selectNull",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, h = {
            displayName: "tax",
            queryName: "selectTax",
            isMeasure: !0,
            type: u.describeDataType(1),
            format: "$0"
        }, i = {
            displayName: "sales",
            queryName: "selectSales",
            isMeasure: !0,
            type: u.describeDataType(v.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            },
            groupName: "A"
        }, j = {
            displayName: "sales",
            queryName: "selectSales",
            isMeasure: !0,
            type: u.describeDataType(v.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            },
            groupName: "B"
        }, k = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "sales"
        });
        it("ColumnChart registered capabilities", function() {
            expect(JSON.stringify(powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").capabilities)).toBe(JSON.stringify(powerbi.visuals.getColumnChartCapabilities()));
        }), it("ColumnChart registered customizeQuery", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").customizeQuery).toBe(t.customizeQuery);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.getColumnChartCapabilities().dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.getColumnChartCapabilities().dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.getColumnChartCapabilities().suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.getColumnChartCapabilities().objects)).toEqual(powerbi.visuals.columnChartProps.general.formatString);
        }), beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("CustomizeQuery scalar type, no scalar axis flag", function() {
            var a = {
                categoryAxis: {
                    axisType: null
                }
            }, c = b(A.fromPrimitiveTypeAndCategory(7), a);
            t.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("CustomizeQuery non-scalar type, scalar axis flag", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, c = b(A.fromPrimitiveTypeAndCategory(1), a);
            t.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("CustomizeQuery scalar type, scalar axis flag", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, c = b(A.fromPrimitiveTypeAndCategory(7), a);
            t.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.categorical.categories.dataReductionAlgorithm).toEqual({
                sample: {}
            });
        }), it("CustomizeQuery no category", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, c = b(null, a);
            t.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("Sortable roles with scalar axis", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, c = b(null, a);
            expect(t.getSortableRoles({
                dataViewMappings: [ c ]
            })).toBeNull();
        }), it("Sortable roles with categorical axis", function() {
            var a = {
                categoryAxis: {
                    axisType: "Categorical"
                }
            }, c = b(A.fromPrimitiveTypeAndCategory(7), a);
            expect(t.getSortableRoles({
                dataViewMappings: [ c ]
            })).toEqual([ "Category", "Y" ]);
        }), it("has positive measure", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 200 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors;
            spyOn(powerbi.visuals.valueFormatter, "create").and.callThrough();
            var g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ];
            expect(powerbi.visuals.valueFormatter.create).toHaveBeenCalledWith({
                format: void 0,
                value: 2011,
                value2: 2012,
                displayUnitSystemType: 1
            });
            var i = g.legendData.dataPoints;
            expect(i.length).toBe(1), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(z.createValueDomain(g.series, !0)).toEqual([ 0, 200 ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: 0,
                max: 200
            });
        }), it("has positive measure (100%)", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 200 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f, !0), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(i.length).toBe(1), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 1,
                    position: 1,
                    valueAbsolute: 1,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: g.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 1,
                    originalPosition: 1,
                    originalValueAbsolute: 1,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 1,
                    position: 1,
                    valueAbsolute: 1,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: g.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 1,
                    originalPosition: 1,
                    originalValueAbsolute: 1,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(g.series, !0)).toEqual({
                min: 0,
                max: 1
            });
        }), it("has positive measure - two series (100%)", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 200 ]
                }, {
                    source: e,
                    values: [ 60, 50 ]
                } ])
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = t.converter(f, g, !0), i = [ B.createWithIdAndMeasure(b[0], "selectSales"), B.createWithIdAndMeasure(b[1], "selectSales"), B.createWithIdAndMeasure(b[0], "selectTax"), B.createWithIdAndMeasure(b[1], "selectTax") ], j = h.legendData.dataPoints;
            expect(j.length).toBe(2), expect(h.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: .625,
                    position: .625,
                    valueAbsolute: .625,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: j[0].color,
                    selected: !1,
                    originalValue: .625,
                    originalPosition: .625,
                    originalValueAbsolute: .625,
                    identity: i[0],
                    key: i[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: .8,
                    position: .8,
                    valueAbsolute: .8,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: j[0].color,
                    selected: !1,
                    originalValue: .8,
                    originalPosition: .8,
                    originalValueAbsolute: .8,
                    identity: i[1],
                    key: i[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "tax",
                identity: B.createWithMeasure("selectTax"),
                data: [ {
                    categoryValue: 2011,
                    value: .375,
                    position: 1,
                    valueAbsolute: .375,
                    valueOriginal: 60,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: j[1].color,
                    selected: !1,
                    originalValue: .375,
                    originalPosition: 1,
                    originalValueAbsolute: .375,
                    identity: i[2],
                    key: i[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "tax",
                        value: "60"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: .2,
                    position: 1,
                    valueAbsolute: .2,
                    valueOriginal: 50,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: j[1].color,
                    selected: !1,
                    originalValue: .2,
                    originalPosition: 1,
                    originalValueAbsolute: .2,
                    identity: i[3],
                    key: i[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "tax",
                        value: "50"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(h.series, !0)).toEqual({
                min: 0,
                max: 1
            });
        }), it("has negative measure", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, -200 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: -200,
                    position: 0,
                    valueAbsolute: 200,
                    valueOriginal: -200,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: -200,
                    originalPosition: 0,
                    originalValueAbsolute: 200,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "-$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(z.createValueDomain(g.series, !0)).toEqual([ -200, 100 ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: -200,
                max: 100
            });
        }), it("has positive and negative measure - two series", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], g = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 2, -2 ]
                }, {
                    source: e,
                    values: [ -3, 4 ]
                }, {
                    source: f,
                    values: [ 4, -3 ]
                } ])
            }, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = t.converter(g, h);
            expect(i.series[2].data[0].position).toEqual(6), expect(i.series[2].data[1].position).toEqual(-2), 
            expect(z.createValueDomain(i.series, !0)).toEqual([ -3, 4 ]), expect(x.calcValueDomain(i.series, !1)).toEqual({
                min: -5,
                max: 6
            });
        }), it("has negative measure (100%)", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, -200 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f, !0), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 1,
                    position: 1,
                    valueAbsolute: 1,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: g.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 1,
                    originalPosition: 1,
                    originalValueAbsolute: 1,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: -1,
                    position: 0,
                    valueAbsolute: 1,
                    valueOriginal: -200,
                    seriesIndex: 0,
                    labelFill: g.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: -1,
                    originalPosition: 0,
                    originalValueAbsolute: 1,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "-$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(g.series, !0)).toEqual({
                min: -1,
                max: 1
            });
        }), it("is missing a measure", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, null ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: null,
                    position: 0,
                    valueAbsolute: 0,
                    valueOriginal: null,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: null,
                    originalPosition: 0,
                    originalValueAbsolute: 0,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(z.createValueDomain(g.series, !0)).toEqual([ 0, 100 ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: 0,
                max: 100
            });
        }), it("is missing a category", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity(null) ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, null ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 175 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: null,
                    value: 175,
                    position: 175,
                    valueAbsolute: 175,
                    valueOriginal: 175,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 175,
                    originalPosition: 175,
                    originalValueAbsolute: 175,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "(Blank)"
                    }, {
                        displayName: "sales",
                        value: "$175"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(z.createValueDomain(g.series, !0)).toEqual([ 0, 175 ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: 0,
                max: 175
            });
        }), it("multiple measures", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 200 ]
                }, {
                    source: e,
                    values: [ 62, 55 ]
                } ])
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = g.getColor(d.queryName).value, i = g.getColor(e.queryName).value, j = t.converter(f, g), k = [ B.createWithIdAndMeasure(b[0], "selectSales"), B.createWithIdAndMeasure(b[1], "selectSales"), B.createWithIdAndMeasure(b[0], "selectTax"), B.createWithIdAndMeasure(b[1], "selectTax") ], l = j.legendData.dataPoints;
            expect(j.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: l[0].color,
                    categoryIndex: 0,
                    color: l[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: k[0],
                    key: k[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: l[0].color,
                    categoryIndex: 1,
                    color: l[0].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: k[1],
                    key: k[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "tax",
                identity: B.createWithMeasure("selectTax"),
                data: [ {
                    categoryValue: 2011,
                    value: 62,
                    position: 162,
                    valueAbsolute: 62,
                    valueOriginal: 62,
                    seriesIndex: 1,
                    labelFill: l[1].color,
                    categoryIndex: 0,
                    color: l[1].color,
                    selected: !1,
                    originalValue: 62,
                    originalPosition: 162,
                    originalValueAbsolute: 62,
                    identity: k[2],
                    key: k[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "tax",
                        value: "62"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 55,
                    position: 255,
                    valueAbsolute: 55,
                    valueOriginal: 55,
                    seriesIndex: 1,
                    labelFill: l[1].color,
                    categoryIndex: 1,
                    color: l[1].color,
                    selected: !1,
                    originalValue: 55,
                    originalPosition: 255,
                    originalValueAbsolute: 55,
                    identity: k[3],
                    key: k[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "tax",
                        value: "55"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(z.createValueDomain(j.series, !0)).toEqual([ 0, 200 ]), expect(x.calcValueDomain(j.series, !1)).toEqual({
                min: 0,
                max: 255
            }), expect(l).toEqual([ {
                icon: 0,
                color: h,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            }, {
                icon: 0,
                color: i,
                label: e.displayName,
                identity: B.createWithMeasure("selectTax"),
                selected: !1
            } ]);
        }), it("converter: dynamic series", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = [ a.mocks.dataViewScopeIdentityWithEquality(k, "A"), a.mocks.dataViewScopeIdentityWithEquality(k, "B") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: i,
                    values: [ 100, 200 ],
                    identity: e[0]
                }, {
                    source: j,
                    values: [ 62, 55 ],
                    identity: e[1]
                } ], [ k ])
            };
            f.values.source = d;
            var g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = H.serializeArray([ k ]), l = g.getColorByScale(h, "A").value, m = g.getColorByScale(h, "B").value, n = t.converter(f, g), o = [ B.createWithIdsAndMeasure(b[0], e[0], i.queryName), B.createWithIdsAndMeasure(b[1], e[0], j.queryName), B.createWithIdsAndMeasure(b[0], e[1], i.queryName), B.createWithIdsAndMeasure(b[1], e[1], j.queryName) ], p = n.legendData.dataPoints;
            expect(n.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "A",
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: p[0].color,
                    categoryIndex: 0,
                    color: p[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: o[0],
                    key: o[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: p[0].color,
                    categoryIndex: 1,
                    color: p[0].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: o[1],
                    key: o[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "B",
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 62,
                    position: 162,
                    valueAbsolute: 62,
                    valueOriginal: 62,
                    seriesIndex: 1,
                    labelFill: p[1].color,
                    categoryIndex: 0,
                    color: p[1].color,
                    selected: !1,
                    originalValue: 62,
                    originalPosition: 162,
                    originalValueAbsolute: 62,
                    identity: o[2],
                    key: o[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$62"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 55,
                    position: 255,
                    valueAbsolute: 55,
                    valueOriginal: 55,
                    seriesIndex: 1,
                    labelFill: p[1].color,
                    categoryIndex: 1,
                    color: p[1].color,
                    selected: !1,
                    originalValue: 55,
                    originalPosition: 255,
                    originalValueAbsolute: 55,
                    identity: o[3],
                    key: o[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$55"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(n.legendData.title).toEqual("sales"), expect(p).toEqual([ {
                icon: 0,
                color: l,
                label: i.groupName,
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                selected: !1
            }, {
                icon: 0,
                color: m,
                label: j.groupName,
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                selected: !1
            } ]);
        }), it("converter: dynamic series falsy group instances", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = [ a.mocks.dataViewScopeIdentityWithEquality(k, null), a.mocks.dataViewScopeIdentityWithEquality(k, !1) ], f = [ C.inherit(i, function(a) {
                return a.groupName = null;
            }), C.inherit(j, function(a) {
                return a.groupName = !1;
            }) ], g = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: f[0],
                    values: [ 100, 200 ],
                    identity: e[0]
                }, {
                    source: f[1],
                    values: [ 62, 55 ],
                    identity: e[1]
                } ], [ k ])
            };
            g.values.source = d;
            var h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, l = t.converter(g, h), m = l.legendData.dataPoints;
            expect(l.legendData.title).toEqual("sales"), expect(m).toEqual([ {
                icon: 0,
                color: m[0].color,
                label: "(Blank)",
                identity: B.createWithIdAndMeasure(e[0], f[0].queryName),
                selected: !1
            }, {
                icon: 0,
                color: m[1].color,
                label: "False",
                identity: B.createWithIdAndMeasure(e[1], f[1].queryName),
                selected: !1
            } ]);
        }), it("converter: dynamic series + fill color", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = [ a.mocks.dataViewScopeIdentityWithEquality(k, "A"), a.mocks.dataViewScopeIdentityWithEquality(k, "B") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: i,
                    values: [ 100, 200 ],
                    identity: e[0]
                }, {
                    source: j,
                    values: [ 62, 55 ],
                    identity: e[1]
                } ], [ k ])
            };
            f.values.source = d;
            var g = f.values.grouped();
            g[1].objects = {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "red"
                        }
                    }
                }
            }, f.values.grouped = function() {
                return g;
            };
            var h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, l = t.converter(f, h), m = [ B.createWithIdsAndMeasure(b[0], e[0], i.queryName), B.createWithIdsAndMeasure(b[1], e[0], j.queryName), B.createWithIdsAndMeasure(b[0], e[1], i.queryName), B.createWithIdsAndMeasure(b[1], e[1], j.queryName) ], n = l.legendData.dataPoints;
            expect(l.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "A",
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: n[0].color,
                    categoryIndex: 0,
                    color: n[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: m[0],
                    key: m[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: n[0].color,
                    categoryIndex: 1,
                    color: n[0].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: m[1],
                    key: m[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "B",
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 62,
                    position: 162,
                    valueAbsolute: 62,
                    valueOriginal: 62,
                    seriesIndex: 1,
                    labelFill: n[1].color,
                    categoryIndex: 0,
                    color: n[1].color,
                    selected: !1,
                    originalValue: 62,
                    originalPosition: 162,
                    originalValueAbsolute: 62,
                    identity: m[2],
                    key: m[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$62"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 55,
                    position: 255,
                    valueAbsolute: 55,
                    valueOriginal: 55,
                    seriesIndex: 1,
                    labelFill: n[1].color,
                    categoryIndex: 1,
                    color: n[1].color,
                    selected: !1,
                    originalValue: 55,
                    originalPosition: 255,
                    originalValueAbsolute: 55,
                    identity: m[3],
                    key: m[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$55"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(l.legendData.title).toEqual("sales"), expect(n).toEqual([ {
                icon: 0,
                color: "#01B8AA",
                label: i.groupName,
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                selected: !1
            }, {
                icon: 0,
                color: "red",
                label: j.groupName,
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                selected: !1
            } ]);
        }), it("converter: dynamic series, default color", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = [ a.mocks.dataViewScopeIdentityWithEquality(k, "A"), a.mocks.dataViewScopeIdentityWithEquality(k, "B") ], f = "#FF0000", g = {
                columns: null,
                objects: {
                    dataPoint: {
                        defaultColor: {
                            solid: {
                                color: f
                            }
                        }
                    }
                }
            }, h = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: i,
                    values: [ 100, 200 ],
                    identity: e[0]
                }, {
                    source: j,
                    values: [ 62, 55 ],
                    identity: e[1]
                } ], [ k ])
            };
            h.values.source = d;
            var l = h.values.grouped();
            h.values.grouped = function() {
                return l;
            };
            var m = powerbi.visuals.visualStyles.create().colorPalette.dataColors, n = t.converter(h, m, null, null, null, g), o = [ B.createWithIdsAndMeasure(b[0], e[0], i.queryName), B.createWithIdsAndMeasure(b[1], e[0], j.queryName), B.createWithIdsAndMeasure(b[0], e[1], i.queryName), B.createWithIdsAndMeasure(b[1], e[1], j.queryName) ], p = n.legendData.dataPoints;
            expect(n.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "A",
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: f,
                    categoryIndex: 0,
                    color: f,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: o[0],
                    key: o[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: f,
                    categoryIndex: 1,
                    color: f,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: o[1],
                    key: o[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "B",
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 62,
                    position: 162,
                    valueAbsolute: 62,
                    valueOriginal: 62,
                    seriesIndex: 1,
                    labelFill: f,
                    categoryIndex: 0,
                    color: f,
                    selected: !1,
                    originalValue: 62,
                    originalPosition: 162,
                    originalValueAbsolute: 62,
                    identity: o[2],
                    key: o[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$62"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 55,
                    position: 255,
                    valueAbsolute: 55,
                    valueOriginal: 55,
                    seriesIndex: 1,
                    labelFill: f,
                    categoryIndex: 1,
                    color: f,
                    selected: !1,
                    originalValue: 55,
                    originalPosition: 255,
                    originalValueAbsolute: 55,
                    identity: o[3],
                    key: o[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$55"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(p).toEqual([ {
                icon: 0,
                color: f,
                label: i.groupName,
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                selected: !1
            }, {
                icon: 0,
                color: f,
                label: j.groupName,
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                selected: !1
            } ]);
        }), it("converter: dynamic series, formatted color + default color", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = [ a.mocks.dataViewScopeIdentityWithEquality(k, "A"), a.mocks.dataViewScopeIdentityWithEquality(k, "B") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: i,
                    values: [ 100, 200 ],
                    identity: e[0]
                }, {
                    source: j,
                    values: [ 62, 55 ],
                    identity: e[1]
                } ], [ k ])
            };
            f.values.source = d;
            var g = f.values.grouped(), h = "#00FF00";
            g[1].objects = {
                dataPoint: {
                    fill: {
                        solid: {
                            color: h
                        }
                    }
                }
            }, f.values.grouped = function() {
                return g;
            };
            var l = powerbi.visuals.visualStyles.create().colorPalette.dataColors, m = "#FF0000", n = {
                columns: null,
                objects: {
                    dataPoint: {
                        defaultColor: {
                            solid: {
                                color: m
                            }
                        }
                    }
                }
            }, o = t.converter(f, l, void 0, void 0, void 0, n), p = [ B.createWithIdsAndMeasure(b[0], e[0], i.queryName), B.createWithIdsAndMeasure(b[1], e[0], j.queryName), B.createWithIdsAndMeasure(b[0], e[1], i.queryName), B.createWithIdsAndMeasure(b[1], e[1], j.queryName) ], q = o.legendData.dataPoints;
            expect(o.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "A",
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: m,
                    categoryIndex: 0,
                    color: m,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: p[0],
                    key: p[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 0,
                    labelFill: m,
                    categoryIndex: 1,
                    color: m,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: p[1],
                    key: p[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "A"
                    }, {
                        displayName: "sales",
                        value: "$200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "B",
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                data: [ {
                    categoryValue: 2011,
                    value: 62,
                    position: 162,
                    valueAbsolute: 62,
                    valueOriginal: 62,
                    seriesIndex: 1,
                    labelFill: h,
                    categoryIndex: 0,
                    color: h,
                    selected: !1,
                    originalValue: 62,
                    originalPosition: 162,
                    originalValueAbsolute: 62,
                    identity: p[2],
                    key: p[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$62"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: 55,
                    position: 255,
                    valueAbsolute: 55,
                    valueOriginal: 55,
                    seriesIndex: 1,
                    labelFill: h,
                    categoryIndex: 1,
                    color: h,
                    selected: !1,
                    originalValue: 55,
                    originalPosition: 255,
                    originalValueAbsolute: 55,
                    identity: p[3],
                    key: p[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "B"
                    }, {
                        displayName: "sales",
                        value: "$55"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(q).toEqual([ {
                icon: 0,
                color: m,
                label: i.groupName,
                identity: B.createWithIdAndMeasure(e[0], i.queryName),
                selected: !1
            }, {
                icon: 0,
                color: h,
                label: j.groupName,
                identity: B.createWithIdAndMeasure(e[1], j.queryName),
                selected: !1
            } ]);
        }), it("validate highlighted tooltip", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012"), a.mocks.dataViewScopeIdentity("2013") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012, 2013 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, 200, 300 ],
                    highlights: [ null, 50, 0 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors;
            spyOn(powerbi.visuals.valueFormatter, "create").and.callThrough();
            var g = t.converter(e, f);
            expect(g.series[0].data[0].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2011"
            }, {
                displayName: "sales",
                value: "$100"
            } ]), expect(g.series[0].data[1].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2011"
            }, {
                displayName: "sales",
                value: "$100"
            } ]), expect(g.series[0].data[2].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2012"
            }, {
                displayName: "sales",
                value: "$200"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "$50"
            } ]), expect(g.series[0].data[3].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2012"
            }, {
                displayName: "sales",
                value: "$200"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "$50"
            } ]), expect(g.series[0].data[4].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2013"
            }, {
                displayName: "sales",
                value: "$300"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "$0"
            } ]), expect(g.series[0].data[5].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2013"
            }, {
                displayName: "sales",
                value: "$300"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "$0"
            } ]);
        }), it("null measures legend", function() {
            var a = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ]
                } ],
                values: s.createValueColumns([ {
                    source: g,
                    values: [ 100, 200 ]
                }, {
                    source: e,
                    values: [ 62, 55 ]
                } ])
            }, b = powerbi.visuals.visualStyles.create().colorPalette.dataColors, d = t.converter(a, b), f = d.legendData.dataPoints;
            expect(f).toEqual([ {
                icon: 0,
                color: f[0].color,
                label: powerbi.visuals.valueFormatter.format(null),
                identity: B.createWithMeasure(g.queryName),
                selected: !1
            }, {
                icon: 0,
                color: f[1].color,
                label: a.values[1].source.displayName,
                identity: B.createWithMeasure(e.queryName),
                selected: !1
            } ]);
        }), it("multiple measures (100%)", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2010"), a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012"), a.mocks.dataViewScopeIdentity("2013") ], f = {
                categories: [ {
                    source: c,
                    values: [ 2010, 2011, 2012, 2013 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 30, -20, 100, -300 ]
                }, {
                    source: e,
                    values: [ 90, 50, -100, -100 ]
                } ])
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = t.converter(f, g, !0), i = [ B.createWithIdAndMeasure(b[0], "selectSales"), B.createWithIdAndMeasure(b[1], "selectSales"), B.createWithIdAndMeasure(b[2], "selectSales"), B.createWithIdAndMeasure(b[3], "selectSales"), B.createWithIdAndMeasure(b[0], "selectTax"), B.createWithIdAndMeasure(b[1], "selectTax"), B.createWithIdAndMeasure(b[2], "selectTax"), B.createWithIdAndMeasure(b[3], "selectTax") ], j = h.legendData.dataPoints;
            expect(j.length).toBe(2), expect(h.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2010,
                    value: .25,
                    position: .25,
                    valueAbsolute: .25,
                    valueOriginal: 30,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: j[0].color,
                    selected: !1,
                    originalValue: .25,
                    originalPosition: .25,
                    originalValueAbsolute: .25,
                    identity: i[0],
                    key: i[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2010"
                    }, {
                        displayName: "sales",
                        value: "$30"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2011,
                    value: -.2857142857142857,
                    position: 0,
                    valueAbsolute: .2857142857142857,
                    valueOriginal: -20,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: j[0].color,
                    selected: !1,
                    originalValue: -.2857142857142857,
                    originalPosition: 0,
                    originalValueAbsolute: .2857142857142857,
                    identity: i[1],
                    key: i[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "-$20"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: .5,
                    position: .5,
                    valueAbsolute: .5,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 2,
                    color: j[0].color,
                    selected: !1,
                    originalValue: .5,
                    originalPosition: .5,
                    originalValueAbsolute: .5,
                    identity: i[2],
                    key: i[2].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2013,
                    value: -.75,
                    position: 0,
                    valueAbsolute: .75,
                    valueOriginal: -300,
                    seriesIndex: 0,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 3,
                    color: j[0].color,
                    selected: !1,
                    originalValue: -.75,
                    originalPosition: 0,
                    originalValueAbsolute: .75,
                    identity: i[3],
                    key: i[3].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2013"
                    }, {
                        displayName: "sales",
                        value: "-$300"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "tax",
                identity: B.createWithMeasure("selectTax"),
                data: [ {
                    categoryValue: 2010,
                    value: .75,
                    position: 1,
                    valueAbsolute: .75,
                    valueOriginal: 90,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 0,
                    color: j[1].color,
                    selected: !1,
                    originalValue: .75,
                    originalPosition: 1,
                    originalValueAbsolute: .75,
                    identity: i[4],
                    key: i[4].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2010"
                    }, {
                        displayName: "tax",
                        value: "90"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2011,
                    value: .7142857142857143,
                    position: .7142857142857143,
                    valueAbsolute: .7142857142857143,
                    valueOriginal: 50,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 1,
                    color: j[1].color,
                    selected: !1,
                    originalValue: .7142857142857143,
                    originalPosition: .7142857142857143,
                    originalValueAbsolute: .7142857142857143,
                    identity: i[5],
                    key: i[5].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "tax",
                        value: "50"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: -.5,
                    position: 0,
                    valueAbsolute: .5,
                    valueOriginal: -100,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 2,
                    color: j[1].color,
                    selected: !1,
                    originalValue: -.5,
                    originalPosition: 0,
                    originalValueAbsolute: .5,
                    identity: i[6],
                    key: i[6].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "tax",
                        value: "-100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2013,
                    value: -.25,
                    position: -.75,
                    valueAbsolute: .25,
                    valueOriginal: -100,
                    seriesIndex: 1,
                    labelFill: h.labelSettings.labelColor,
                    categoryIndex: 3,
                    color: j[1].color,
                    selected: !1,
                    originalValue: -.25,
                    originalPosition: -.75,
                    originalValueAbsolute: .25,
                    identity: i[7],
                    key: i[7].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2013"
                    }, {
                        displayName: "tax",
                        value: "-100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(h.series, !0)).toEqual({
                min: -1,
                max: 1
            });
        }), it("no category single measure", function() {
            var a = {
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100 ]
                } ])
            }, b = powerbi.visuals.visualStyles.create().colorPalette.dataColors, c = t.converter(a, b), e = B.createWithMeasure(d.queryName), f = c.legendData.dataPoints;
            expect(f.length).toBe(1), expect(c.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: null,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: f[0].color,
                    categoryIndex: 0,
                    color: f[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: e,
                    key: e.getKey(),
                    tooltipInfo: [ {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(c.series, !1)).toEqual({
                min: 0,
                max: 100
            }), expect(f).toEqual([ {
                icon: 0,
                color: f[0].color,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("no category multiple measure", function() {
            var a = {
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100 ]
                }, {
                    source: e,
                    values: [ 200 ]
                } ])
            }, b = powerbi.visuals.visualStyles.create().colorPalette.dataColors, c = t.converter(a, b), f = [ B.createWithMeasure("selectSales"), B.createWithMeasure("selectTax") ], g = c.legendData.dataPoints;
            expect(g.length).toBe(2), expect(c.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: null,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: g[0].color,
                    categoryIndex: 0,
                    color: g[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: f[0],
                    key: f[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "tax",
                identity: B.createWithMeasure("selectTax"),
                data: [ {
                    categoryValue: null,
                    value: 200,
                    position: 300,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 1,
                    labelFill: g[1].color,
                    categoryIndex: 0,
                    color: g[1].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 300,
                    originalValueAbsolute: 200,
                    identity: f[1],
                    key: f[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "tax",
                        value: "200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(c.series, !1)).toEqual({
                min: 0,
                max: 300
            }), expect(g).toEqual([ {
                icon: 0,
                color: g[0].color,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            }, {
                icon: 0,
                color: g[1].color,
                label: e.displayName,
                identity: B.createWithMeasure("selectTax"),
                selected: !1
            } ]);
        }), it("no category multiple measure + fill color", function() {
            var a = {
                values: s.createValueColumns([ {
                    source: {
                        displayName: "sales",
                        queryName: "selectSales",
                        isMeasure: !0,
                        type: u.describeDataType(v.Integer),
                        objects: {
                            general: {
                                formatString: "$0"
                            },
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "red"
                                    }
                                }
                            }
                        }
                    },
                    values: [ 100 ]
                } ])
            }, b = powerbi.visuals.visualStyles.create().colorPalette.dataColors, c = t.converter(a, b), e = [ B.createWithMeasure("selectSales") ], f = c.legendData.dataPoints;
            expect(f.length).toBe(1), expect(c.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: null,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: "red",
                    categoryIndex: 0,
                    color: "red",
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: e[0],
                    key: e[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(f).toEqual([ {
                icon: 0,
                color: "red",
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("category and measure + fill color", function() {
            var b = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], c = {
                categories: [ {
                    source: {
                        displayName: "prod",
                        queryName: "selectProd",
                        type: u.describeDataType(v.Integer)
                    },
                    values: [ "a", "b" ],
                    objects: [ void 0, {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: "red"
                                }
                            }
                        }
                    } ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: {
                        displayName: "sales",
                        queryName: "selectSales",
                        isMeasure: !0,
                        type: u.describeDataType(v.Integer)
                    },
                    values: [ 100, 150 ]
                } ])
            }, d = t.converter(c, powerbi.visuals.visualStyles.create().colorPalette.dataColors), e = [ B.createWithIdAndMeasure(b[0], "selectSales"), B.createWithIdAndMeasure(b[1], "selectSales") ], f = d.legendData.dataPoints;
            expect(f.length).toBe(1), expect(d.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "sales",
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: "a",
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: "#01B8AA",
                    categoryIndex: 0,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: e[0],
                    key: e[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "prod",
                        value: "a"
                    }, {
                        displayName: "sales",
                        value: "100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: "b",
                    value: 150,
                    position: 150,
                    valueAbsolute: 150,
                    valueOriginal: 150,
                    seriesIndex: 0,
                    labelFill: "red",
                    categoryIndex: 1,
                    color: "red",
                    selected: !1,
                    originalValue: 150,
                    originalPosition: 150,
                    originalValueAbsolute: 150,
                    identity: e[1],
                    key: e[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "prod",
                        value: "b"
                    }, {
                        displayName: "sales",
                        value: "150"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(f).toEqual([ {
                icon: 0,
                color: "#01B8AA",
                label: "sales",
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("Gradient measure: should not become a series", function() {
            var b = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ]
                } ],
                values: s.createValueColumns([ {
                    source: C.inherit(d, function(a) {
                        return a.roles = {
                            Y: !0
                        };
                    }),
                    values: [ 100, 200 ]
                }, {
                    source: C.inherit(e, function(a) {
                        return a.roles = {
                            Gradient: !0
                        };
                    }),
                    values: [ 75, 50 ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(b, f);
            expect(g.legendData.dataPoints.length).toBe(1), expect(g.series.length).toBe(1), 
            expect(g.series[0].data.length).toBe(2), expect(g.series[0].data.map(m)).toEqual([ {
                categoryValue: 2011,
                value: 100
            }, {
                categoryValue: 2012,
                value: 200
            } ]);
        }), it("single measure with infinite value", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, Number.POSITIVE_INFINITY ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(i.length).toBe(1), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: Number.MAX_VALUE,
                    position: Number.MAX_VALUE,
                    valueAbsolute: Number.MAX_VALUE,
                    valueOriginal: Number.MAX_VALUE,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: Number.MAX_VALUE,
                    originalPosition: Number.MAX_VALUE,
                    originalValueAbsolute: Number.MAX_VALUE,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "$179769313486231600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: 0,
                max: Number.MAX_VALUE
            }), expect(i).toEqual([ {
                icon: 0,
                color: i[0].color,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("single measure with negative infinite value", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, Number.NEGATIVE_INFINITY ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(i.length).toBe(1), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: -Number.MAX_VALUE,
                    position: 0,
                    valueAbsolute: Number.MAX_VALUE,
                    valueOriginal: -Number.MAX_VALUE,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: -Number.MAX_VALUE,
                    originalPosition: 0,
                    originalValueAbsolute: Number.MAX_VALUE,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    }, {
                        displayName: "sales",
                        value: "-$179769313486231600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: -Number.MAX_VALUE,
                max: 100
            }), expect(i).toEqual([ {
                icon: 0,
                color: i[0].color,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("single measure with NaN value", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: d,
                    values: [ 100, Number.NaN ]
                } ])
            }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(b[0], d.queryName), B.createWithIdAndMeasure(b[1], d.queryName) ], i = g.legendData.dataPoints;
            expect(i.length).toBe(1), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                data: [ {
                    categoryValue: 2011,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2011"
                    }, {
                        displayName: "sales",
                        value: "$100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: 2012,
                    value: null,
                    position: 0,
                    valueAbsolute: 0,
                    valueOriginal: null,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 1,
                    color: i[0].color,
                    selected: !1,
                    originalValue: null,
                    originalPosition: 0,
                    originalValueAbsolute: 0,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "year",
                        value: "2012"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
                min: 0,
                max: 100
            }), expect(i).toEqual([ {
                icon: 0,
                color: i[0].color,
                label: d.displayName,
                identity: B.createWithMeasure("selectSales"),
                selected: !1
            } ]);
        }), it("Tooltip info formatString with measure that has no object", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], d = {
                categories: [ {
                    source: c,
                    values: [ 2011, 2012 ],
                    identity: b
                } ],
                values: s.createValueColumns([ {
                    source: h,
                    values: [ 100, 200 ]
                } ])
            }, e = powerbi.visuals.visualStyles.create().colorPalette.dataColors;
            spyOn(powerbi.visuals.valueFormatter, "create").and.callThrough();
            var f = t.converter(d, e);
            expect(f.series[0].data[0].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2011"
            }, {
                displayName: "tax",
                value: "$100"
            } ]), expect(f.series[0].data[1].tooltipInfo).toEqual([ {
                displayName: "year",
                value: "2012"
            }, {
                displayName: "tax",
                value: "$200"
            } ]);
        }), it("dataView that should pivot categories", function() {
            var b = {
                columns: [ {
                    displayName: "",
                    index: 0
                }, {
                    displayName: "",
                    isMeasure: !0,
                    index: 1
                } ]
            }, c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], d = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "category"
            }), e = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "a", "b" ],
                        identity: c,
                        identityFields: [ d ]
                    } ],
                    values: s.createValueColumns([ {
                        source: b.columns[1],
                        values: [ 100, 200 ]
                    } ])
                }
            };
            e = s.apply({
                prototype: e,
                objectDescriptors: powerbi.visuals.plugins.columnChart.capabilities.objects,
                dataViewMappings: powerbi.visuals.plugins.columnChart.capabilities.dataViewMappings,
                transforms: {
                    selects: [ {
                        displayName: "col1",
                        queryName: "select1",
                        roles: {
                            Series: !0
                        }
                    }, {
                        displayName: "col2",
                        queryName: "select2",
                        roles: {
                            Y: !0
                        }
                    } ]
                },
                colorAllocatorFactory: powerbi.visuals.createColorAllocatorFactory()
            })[0];
            var f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e.categorical, f), h = [ B.createWithIdAndMeasure(c[0], "select2"), B.createWithIdAndMeasure(c[1], "select2") ], i = g.legendData.dataPoints;
            expect(i.length).toBe(2), expect(g.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "a",
                identity: B.createWithIdAndMeasure(c[0], "select2"),
                data: [ {
                    categoryValue: null,
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: i[0].color,
                    categoryIndex: 0,
                    color: i[0].color,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: h[0],
                    key: h[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "b",
                identity: B.createWithIdAndMeasure(c[1], "select2"),
                data: [ {
                    categoryValue: null,
                    value: 200,
                    position: 300,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 1,
                    labelFill: i[1].color,
                    categoryIndex: 0,
                    color: i[1].color,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 300,
                    originalValueAbsolute: 200,
                    identity: h[1],
                    key: h[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]), expect(i).toEqual([ {
                icon: 0,
                color: i[0].color,
                label: "a",
                identity: h[0],
                selected: !1
            }, {
                icon: 0,
                color: i[1].color,
                label: "b",
                identity: h[1],
                selected: !1
            } ]);
        }), it("dataView with Series & Category role that should pivot categories", function() {
            var b = {
                columns: [ {
                    displayName: "col1",
                    queryName: "selectCol1",
                    roles: {
                        Series: !0,
                        Category: !0
                    }
                }, {
                    displayName: "col2",
                    queryName: "selectCol2",
                    properties: {
                        Y: !0
                    }
                } ]
            }, c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], d = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "col1"
            }), e = r.apply({
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "a", "b" ],
                        identity: c,
                        identityFields: [ d ]
                    } ],
                    values: s.createValueColumns([ {
                        source: b.columns[1],
                        values: [ 100, 200 ]
                    } ])
                }
            }), f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = f.getColorByScale(H.serialize(d), "a").value, h = f.getColorByScale(H.serialize(d), "b").value, i = t.converter(e.categorical, f, void 0, void 0, void 0, b), j = [ B.createWithIdAndMeasure(c[0], "selectCol2"), B.createWithIdAndMeasure(c[1], "selectCol2") ], k = i.legendData.dataPoints;
            expect(k.length).toBe(2), expect(k.map(function(a) {
                return a.label;
            })).toEqual([ "a", "b" ]), expect(i.series).toEqual([ {
                key: "series0",
                index: 0,
                displayName: "a",
                identity: j[0],
                data: [ {
                    categoryValue: "a",
                    value: 100,
                    position: 100,
                    valueAbsolute: 100,
                    valueOriginal: 100,
                    seriesIndex: 0,
                    labelFill: "#01B8AA",
                    categoryIndex: 0,
                    color: g,
                    selected: !1,
                    originalValue: 100,
                    originalPosition: 100,
                    originalValueAbsolute: 100,
                    identity: j[0],
                    key: j[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                }, {
                    categoryValue: "b",
                    value: null,
                    position: 0,
                    valueAbsolute: 0,
                    valueOriginal: null,
                    seriesIndex: 0,
                    labelFill: "#01B8AA",
                    categoryIndex: 1,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: null,
                    originalPosition: 0,
                    originalValueAbsolute: 0,
                    identity: jasmine.any(Object),
                    key: jasmine.any(String),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            }, {
                key: "series1",
                index: 1,
                displayName: "b",
                identity: j[1],
                data: [ {
                    categoryValue: "b",
                    value: 200,
                    position: 200,
                    valueAbsolute: 200,
                    valueOriginal: 200,
                    seriesIndex: 1,
                    labelFill: "#374649",
                    categoryIndex: 1,
                    color: h,
                    selected: !1,
                    originalValue: 200,
                    originalPosition: 200,
                    originalValueAbsolute: 200,
                    identity: j[1],
                    key: j[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    lastSeries: void 0,
                    chartType: void 0
                } ]
            } ]);
        }), it("100% stacked -- rounding (-1)", function() {
            var a = [ B.createWithMeasure("measure0"), B.createWithMeasure("measure1") ], b = [ {
                key: "1",
                index: 0,
                displayName: "measure0",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: -.75,
                    position: 0,
                    valueAbsolute: .75,
                    valueOriginal: -.75,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    labelFill: "red",
                    color: "red",
                    selected: !1,
                    originalValue: -.75,
                    originalPosition: 0,
                    originalValueAbsolute: .75,
                    identity: a[0],
                    key: a[0].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedColumn
                } ]
            }, {
                key: "2",
                index: 1,
                displayName: "measure1",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: -.25000001,
                    position: -.75,
                    valueAbsolute: .25000001,
                    valueOriginal: -.25000001,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    labelFill: "blue",
                    color: "blue",
                    selected: !1,
                    originalValue: -.25000001,
                    originalPosition: -.75,
                    originalValueAbsolute: .25000001,
                    identity: a[1],
                    key: a[1].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedColumn
                } ]
            } ];
            expect(x.calcValueDomain(b, !0)).toEqual({
                min: -1,
                max: 0
            });
        }), it("100% stacked -- rounding (+1)", function() {
            var a = [ B.createWithMeasure("measure0"), B.createWithMeasure("measure1") ], b = [ {
                key: "1",
                index: 0,
                displayName: "measure0",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: .25,
                    position: .25,
                    valueAbsolute: .25,
                    valueOriginal: .25,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    labelFill: "red",
                    color: "red",
                    selected: !1,
                    originalValue: .25,
                    originalPosition: .25,
                    originalValueAbsolute: .25,
                    identity: a[0],
                    key: a[0].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                } ]
            }, {
                key: "2",
                index: 1,
                displayName: "measure1",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: .7500001,
                    position: 1.000001,
                    valueAbsolute: .75000001,
                    valueOriginal: .7500001,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    labelFill: "blue",
                    color: "blue",
                    selected: !1,
                    originalValue: .7500001,
                    originalPosition: 1.000001,
                    originalValueAbsolute: .75000001,
                    identity: a[1],
                    key: a[1].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                } ]
            } ];
            expect(x.calcValueDomain(b, !0)).toEqual({
                min: 0,
                max: 1
            });
        }), it("100% stacked -- rounding (+1 and -1)", function() {
            var b = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], c = [ B.createWithIdAndMeasure(b[0], "measure0"), B.createWithIdAndMeasure(b[0], "measure1"), B.createWithIdAndMeasure(b[1], "measure0"), B.createWithIdAndMeasure(b[1], "measure1") ], d = [ {
                key: "1",
                index: 0,
                displayName: "measure0",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: -.75,
                    position: 0,
                    valueAbsolute: .75,
                    valueOriginal: -.75,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    color: "red",
                    selected: !1,
                    originalValue: -.75,
                    originalPosition: 0,
                    originalValueAbsolute: .75,
                    identity: c[0],
                    key: c[0].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                }, {
                    categoryValue: 1,
                    value: .25,
                    position: .25,
                    valueAbsolute: .25,
                    valueOriginal: .25,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    color: "red",
                    selected: !1,
                    originalValue: .25,
                    originalPosition: .25,
                    originalValueAbsolute: .25,
                    identity: c[1],
                    key: c[1].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                } ]
            }, {
                key: "2",
                index: 1,
                displayName: "measure1",
                identity: B.createNull(),
                data: [ {
                    categoryValue: 0,
                    value: -.25000001,
                    position: -.75,
                    valueAbsolute: .25000001,
                    valueOriginal: -.25000001,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    labelFill: "blue",
                    color: "blue",
                    selected: !1,
                    originalValue: -.25000001,
                    originalPosition: -.75,
                    originalValueAbsolute: .25000001,
                    identity: c[2],
                    key: c[2].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                }, {
                    categoryValue: 1,
                    value: .7500001,
                    position: 1.000001,
                    valueAbsolute: .75000001,
                    valueOriginal: .7500001,
                    categoryIndex: 1,
                    seriesIndex: 1,
                    labelFill: "blue",
                    color: "blue",
                    selected: !1,
                    originalValue: .7500001,
                    originalPosition: 1.000001,
                    originalValueAbsolute: .75000001,
                    identity: c[3],
                    key: c[3].getKey(),
                    chartType: powerbi.visuals.ColumnChartType.hundredPercentStackedBar
                } ]
            } ];
            expect(x.calcValueDomain(d, !0)).toEqual({
                min: -1,
                max: 1
            });
        }), it("createValueFormatter: value (hundreds)", function() {
            var a = [ d, e ], b = 0, c = 200, f = 100;
            expect(w.createValueFormatter(a, c - b).format(f)).toBe("$100"), expect(x.createValueFormatter(a, !1, c - b).format(f)).toBe("$100");
        }), it("createValueFormatter: value (millions)", function() {
            var a = [ d, e ], b = 0, c = 2e6, f = 1e6;
            expect(w.createValueFormatter(a, c - b).format(f)).toBe("$1M"), expect(x.createValueFormatter(a, !1, c - b).format(f)).toBe("$1M");
        }), it("createValueFormatter: 100% stacked", function() {
            var a = [ d, e ], b = 0, c = 1, f = .5;
            expect(x.createValueFormatter(a, !0, c - b).format(f)).toBe("50%");
        });
        var l = {
            categories: [],
            categoryFormatter: null,
            series: [],
            valuesMetadata: [],
            legendData: {
                dataPoints: []
            },
            hasSelection: !1,
            hasHighlights: !1,
            selectedIds: [],
            categoryMetadata: null,
            scalarCategoryAxis: !1,
            labelSettings: null,
            axesLabels: {
                x: null,
                y: null
            },
            hasDynamicSeries: !1
        }, n = {
            displayName: "NumberCol",
            type: A.fromDescriptor({
                text: !0
            })
        }, o = {
            categories: [ 1, 2, 3 ],
            categoryFormatter: null,
            series: [ {
                key: "1",
                index: 0,
                displayName: "1",
                identity: B.createNull(),
                data: []
            } ],
            valuesMetadata: [],
            legendData: {
                dataPoints: []
            },
            hasSelection: !1,
            hasHighlights: !1,
            selectedIds: [],
            categoryMetadata: null,
            scalarCategoryAxis: !0,
            labelSettings: null,
            axesLabels: {
                x: null,
                y: null
            },
            hasDynamicSeries: !1
        }, p = {
            displayName: "NumberCol",
            type: A.fromDescriptor({
                numeric: !0
            })
        }, q = {
            displayName: "DateCol",
            type: A.fromDescriptor({
                dateTime: !0
            })
        };
        it("getLayout: no category metadata", function() {
            expect(D.getLayout(l, {
                availableWidth: 114,
                categoryCount: 1,
                domain: []
            })).toEqual({
                categoryCount: 1,
                categoryThickness: 30,
                outerPaddingRatio: 1.4,
                isScalar: !1
            });
        }), it("getLayout: text (one)", function() {
            l.categories = [ "A" ], l.categoryMetadata = n, expect(D.getLayout(l, {
                availableWidth: 114,
                categoryCount: 1,
                domain: []
            })).toEqual({
                categoryCount: 1,
                categoryThickness: 30,
                outerPaddingRatio: 1.4,
                isScalar: !1
            });
        }), it("getLayout: text (few)", function() {
            l.categories = [ "A", "B", "C", "D", "E", "F" ], l.categoryMetadata = n, expect(D.getLayout(l, {
                availableWidth: 204,
                categoryCount: 6,
                domain: []
            })).toEqual({
                categoryCount: 6,
                categoryThickness: 30,
                outerPaddingRatio: .4,
                isScalar: !1
            });
        }), it("getLayout: text (too many)", function() {
            for (var a = [], b = 0, c = 200; c > b; b++) a.push(Math.round(Math.random()).toString());
            l.categories = a, l.categoryMetadata = n, expect(D.getLayout(l, {
                availableWidth: 220,
                categoryCount: 200,
                domain: []
            })).toEqual({
                categoryCount: 10,
                categoryThickness: 20,
                outerPaddingRatio: .5,
                isScalar: !1
            });
        }), it("getLayout: number (few)", function() {
            for (var b = [], c = 0, d = 10; d > c; c++) {
                var e = B.createWithId(a.mocks.dataViewScopeIdentity("" + c)), f = {
                    categoryValue: 10 * c + Math.pow(10 * c, 1.8),
                    value: c % 5,
                    position: 0,
                    valueAbsolute: c % 5,
                    valueOriginal: c % 5,
                    seriesIndex: 0,
                    labelFill: "#41BEE9",
                    categoryIndex: c,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: c % 5,
                    originalPosition: 0,
                    originalValueAbsolute: c % 5,
                    identity: e,
                    key: e.getKey(),
                    chartType: powerbi.visuals.ColumnChartType.stackedColumn
                };
                b.push(f);
            }
            o.series[0].data = b, o.categoryMetadata = p, expect(D.getLayout(o, {
                availableWidth: 100,
                categoryCount: 10,
                domain: [ 0, 6400 ],
                isScalar: !0
            })).toEqual({
                categoryCount: 10,
                categoryThickness: 2,
                outerPaddingRatio: .4,
                isScalar: !0
            });
        }), it("getLayout: number (many)", function() {
            for (var b = [], c = 0, d = 100; d > c; c++) {
                var e = B.createWithId(a.mocks.dataViewScopeIdentity("" + c)), f = {
                    categoryValue: c + Math.pow(c, 1.8),
                    value: c % 5,
                    position: 0,
                    valueAbsolute: c % 5,
                    valueOriginal: c % 5,
                    seriesIndex: 0,
                    labelFill: "#41BEE9",
                    categoryIndex: c,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: c % 5,
                    originalPosition: 0,
                    originalValueAbsolute: c % 5,
                    identity: e,
                    key: e.getKey(),
                    chartType: powerbi.visuals.ColumnChartType.stackedColumn
                };
                b.push(f);
            }
            o.series[0].data = b, o.categoryMetadata = p, expect(D.getLayout(o, {
                availableWidth: 100,
                categoryCount: 100,
                domain: [ 0, 4e3 ],
                isScalar: !0
            })).toEqual({
                categoryCount: 49,
                categoryThickness: 2,
                outerPaddingRatio: .4,
                isScalar: !0
            });
        }), it("getLayout: datetime", function() {
            for (var b = [], c = 0, d = 25; d > c; c++) {
                var e = B.createWithId(a.mocks.dataViewScopeIdentity("" + c)), f = {
                    categoryValue: new Date(2e3, 1, 1).getTime() + 86e6 * Math.pow(c, .66),
                    value: c % 5,
                    position: 0,
                    valueAbsolute: c % 5,
                    valueOriginal: c % 5,
                    seriesIndex: 0,
                    labelFill: "#41BEE9",
                    categoryIndex: c,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: c % 5,
                    originalPosition: 0,
                    originalValueAbsolute: c % 5,
                    identity: e,
                    key: e.getKey(),
                    chartType: powerbi.visuals.ColumnChartType.stackedColumn
                };
                b.push(f);
            }
            o.series[0].data = b, o.categoryMetadata = q;
            var g = D.getLayout(o, {
                availableWidth: 100,
                categoryCount: 25,
                domain: [ b[0].categoryValue, b[b.length - 1].categoryValue ],
                isScalar: !0
            });
            expect(g.categoryCount).toEqual(25), expect(g.categoryThickness).toBeCloseTo(2.7, 1), 
            expect(g.isScalar).toBeTruthy();
        }), it("getLayout: datetime with highlights", function() {
            for (var b = [], c = 0, d = 0, e = 10; e > d; d++) {
                var f = B.createWithId(a.mocks.dataViewScopeIdentity("" + d));
                c = Math.floor(d / 2);
                var g = {
                    categoryValue: new Date(2e3, 1, 1).getTime() + 86e6 * Math.pow(c, .66),
                    value: d % 5,
                    position: 0,
                    valueAbsolute: d % 5,
                    valueOriginal: d % 5,
                    seriesIndex: 0,
                    labelFill: "#41BEE9",
                    categoryIndex: c,
                    color: "#01B8AA",
                    selected: !1,
                    originalValue: d % 5,
                    originalPosition: 0,
                    originalValueAbsolute: d % 5,
                    identity: f,
                    key: f.getKey(),
                    chartType: powerbi.visuals.ColumnChartType.stackedColumn
                };
                d % 2 !== 0 && (g.highlight = !0), b.push(g);
            }
            o.series[0].data = b, o.categoryMetadata = q;
            var h = D.getLayout(o, {
                availableWidth: 400,
                categoryCount: c + 1,
                domain: [ b[0].categoryValue, b[b.length - 1].categoryValue ],
                isScalar: !0
            });
            expect(h.categoryCount).toEqual(c + 1), expect(h.categoryThickness).toBeCloseTo(61, 0), 
            expect(h.isScalar).toBeTruthy();
        }), it("getForcedTickValues: 0 forced tick count", function() {
            var a = [], b = t.getForcedTickValues(0, 100, 0);
            expect(b).toEqual(a);
        }), it("getForcedTickValues: 0 min", function() {
            var a = [ 0, 50, 100 ], b = t.getForcedTickValues(0, 100, 3);
            expect(b).toEqual(a);
        }), it("getForcedTickValues: 0 max", function() {
            var a = [ -200, -150, -100, -50, 0 ], b = t.getForcedTickValues(-200, 0, 5);
            expect(b).toEqual(a);
        }), it("getForcedTickValues: 0 between min and max", function() {
            var a = [ -20, 40, 100, 0 ], b = t.getForcedTickValues(-20, 100, 3);
            expect(b).toEqual(a);
        }), it("getTickCount: 6 max tick count without forced tick count", function() {
            var a = [];
            a.push(e);
            var b = y.getTickCount(0, 3, a, 6, !1);
            expect(b).toEqual(6);
        }), it("getTickCount: 6 max tick count with 2 forced tick count", function() {
            var a = [];
            a.push(d);
            var b = y.getTickCount(0, 3, a, 6, !1, 2);
            expect(b).toEqual(2);
        }), it("getTickCount: 0 max tick count with 2 forced tick count", function() {
            var a = [];
            a.push(d);
            var b = y.getTickCount(0, 3, a, 0, !1, 2);
            expect(b).toEqual(0);
        }), it("getTickInterval: empty tick value", function() {
            var a = [], b = t.getTickInterval(a);
            expect(b).toBe(0);
        }), it("getTickInterval: single tick value", function() {
            var a = [ 2.35 ], b = t.getTickInterval(a);
            expect(b).toBe(2.35);
        }), it("getTickInterval: sorted tick values", function() {
            var a = [ 48e3, 48500, 49e3, 49500, 5e4 ], b = t.getTickInterval(a);
            expect(b).toBe(500);
        }), it("getTickInterval: unsorted tick values", function() {
            var a = [ 48500, 49e3, 48e3, 49500, 5e4 ], b = t.getTickInterval(a);
            expect(b).toBe(500);
        });
    }), describe("Clustered ColumnChart DOM validation", function() {
        return b(!1, !1);
    }), describe("Clustered ColumnChart DOM validation - Scalar", function() {
        return b(!1, !0);
    }), describe("Interactive Clustered ColumnChart DOM validation", function() {
        return b(!0, !1);
    }), describe("Interactive Clustered ColumnChart DOM validation - Scalar", function() {
        return b(!0, !0);
    }), describe("Stacked ColumnChart DOM validation", function() {
        return c(!1);
    }), describe("Interactive Stacked ColumnChart DOM validation", function() {
        return c(!0);
    }), describe("Hundred Percent Stacked ColumnChart DOM validation", function() {
        return d(!1);
    }), describe("Interactive Hundred Percent Stacked ColumnChart DOM validation", function() {
        return d(!0);
    }), describe("Stacked BarChart DOM validation", function() {
        return e(!1);
    }), describe("Interactive Stacked BarChart DOM validation", function() {
        return e(!0);
    }), describe("Hundred Percent Stacked BarChart DOM validation", function() {
        return f(!1);
    }), describe("Interactive Hundred Percent Stacked BarChart DOM validation", function() {
        return f(!0);
    }), describe("Clustered BarChart DOM validation", function() {
        return g(!1);
    }), describe("Interactive Clustered BarChart DOM validation", function() {
        return g(!0);
    }), describe("Enumerate Objects", function() {
        var b, c, d = {
            displayName: "year",
            queryName: "selectYear",
            type: u.describeDataType(2048)
        }, e = {
            displayName: "sales",
            queryName: "selectSales",
            isMeasure: !0,
            type: u.describeDataType(v.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            }
        }, f = {
            displayName: "tax",
            queryName: "selectTax",
            isMeasure: !0,
            type: u.describeDataType(1)
        }, g = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("800", "800"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create(), 
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("enumerateObjectInstances: category+measure", function(c) {
            var f = [ a.mocks.dataViewScopeIdentity("red"), a.mocks.dataViewScopeIdentity("def") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ d, e ]
                    },
                    categorical: {
                        categories: [ {
                            source: d,
                            values: [ "red", "def" ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: e,
                            min: 1e5,
                            max: 2e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(4), expect(a[0].properties.defaultColor).toBeDefined(), expect(a[1].properties.showAllDataPoints).toBeDefined(), 
                expect(a[2].displayName).toBe("red"), expect(a[2].selector.data).toEqual([ f[0] ]), 
                expect(a[2].selector.metadata).toBeUndefined(), expect(a[3].displayName).toBe("def");
                var a = b.enumerateObjectInstances({
                    objectName: "categoryAxis"
                });
                expect(a.length).toBe(2), expect(a[0].displayName).toBeUndefined();
                var a = b.enumerateObjectInstances({
                    objectName: "legend"
                });
                expect(a).toBeUndefined(), c();
            }, I);
        }), it("enumerateObjectInstances: Verify instances on ordinal category axis", function(c) {
            var f = [ a.mocks.dataViewScopeIdentity("red"), a.mocks.dataViewScopeIdentity("def") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ d, e ]
                    },
                    categorical: {
                        categories: [ {
                            source: d,
                            values: [ "red", "def" ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: e,
                            min: 1e5,
                            max: 2e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(4), expect(a[2].displayName).toBe("red"), expect(a[2].selector.data).toEqual([ f[0] ]), 
                expect(a[2].selector.metadata).toBeUndefined(), expect(a[3].displayName).toBe("def");
                var a = b.enumerateObjectInstances({
                    objectName: "categoryAxis"
                });
                expect(a.length).toBe(2), expect(a[0].displayName).toBeUndefined(), expect(a[0].properties.start).toBeUndefined(), 
                expect(a[0].properties.end).toBeUndefined(), expect(a[0].properties.axisType).toBeUndefined(), 
                expect(a[0].properties.show).toBeDefined, expect(a[0].properties.showAxisTitle).toBeDefined, 
                expect(a[0].properties.axisStyle).toBeDefined, c();
            }, I);
        }), it("enumerateObjectInstances: Verify instances on numerical category axis", function(c) {
            var d = [ a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ e, e ]
                    },
                    categorical: {
                        categories: [ {
                            source: e,
                            values: [ 5e3, 1e4 ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: e,
                            min: 1e5,
                            max: 2e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(4), expect(a[2].displayName).toBe("$5000"), expect(a[2].selector.data).toEqual([ d[0] ]), 
                expect(a[2].selector.metadata).toBeUndefined(), expect(a[3].displayName).toBe("$10000");
                var a = b.enumerateObjectInstances({
                    objectName: "categoryAxis"
                });
                expect(a.length).toBe(2), expect(a[0].displayName).toBeUndefined(), expect("start" in a[0].properties).toBeTruthy(), 
                expect("end" in a[0].properties).toBeTruthy(), expect("axisType" in a[0].properties).toBeTruthy(), 
                expect("show" in a[0].properties).toBeTruthy(), expect("showAxisTitle" in a[0].properties).toBeTruthy(), 
                expect("axisStyle" in a[1].properties).toBeTruthy(), c();
            }, I);
        }), it("enumerateObjectInstances: category+multi-measure", function(c) {
            var g = [ a.mocks.dataViewScopeIdentity("red"), a.mocks.dataViewScopeIdentity("def") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ d, e ]
                    },
                    categorical: {
                        categories: [ {
                            source: d,
                            values: [ "red", "def" ],
                            identity: g
                        } ],
                        values: s.createValueColumns([ {
                            source: e,
                            min: 1e5,
                            max: 2e5,
                            values: [ 1e5, 2e5 ]
                        }, {
                            source: f,
                            min: 150,
                            max: 250,
                            values: [ 150, 250 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(2), expect(a[0].displayName).toBe(e.displayName), expect(a[0].selector).toEqual({
                    metadata: e.queryName
                }), expect(a[1].displayName).toBe(f.displayName), expect(a[1].selector).toEqual({
                    metadata: f.queryName
                }), c();
            }, I);
        });
    }), describe("Column chart labels", function() {
        var b, c, d = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, e = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("800", "800"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check margins for long labels, when you have a few columns that do not take up the whole width, and get centered", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("this is the label that never ends, it just goes on and on my friends. Some axis started rendering it not knowing what it was, and now it keeps on rendering forever just because this the label that never ends..."), a.mocks.dataViewScopeIdentity("def") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "this is the label that never ends, it just goes on and on my friends. Some axis started rendering it not knowing what it was, and now it keeps on rendering forever just because this the label that never ends...", "def" ],
                            identity: e
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            min: 1e5,
                            max: 2e5,
                            subtotal: 3e5,
                            values: [ 1e5, 2e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".columnChart")).toBeInDOM(), c();
            }, I);
        });
    }), describe("BarChart Interactivity", function() {
        var b, c, d = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, e = "" + y.DefaultOpacity, f = "" + y.DimmedOpacity;
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("200", "300"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("barChart").create();
        }), it("Bar chart with dragDataPoint enabled", function() {
            var e = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    dragDataPoint: !0
                }
            });
            var f = a.mocks.dataViewScopeIdentity("b");
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), f ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2 ]
                        } ])
                    }
                } ]
            });
            var g = c.find(".bar");
            expect(g.length).toBe(2), spyOn(e, "onDragStart").and.callThrough();
            var h = a.helpers.getDragStartTriggerFunctionForD3(g[1]), i = {
                abc: "def",
                stopPropagation: function() {}
            };
            h(i), expect(e.onDragStart).toHaveBeenCalledWith({
                event: i,
                data: {
                    data: {
                        data: [ f ]
                    }
                }
            });
        }), it("Bar chart without dragDataPoint enabled", function() {
            var e = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2 ]
                        } ])
                    }
                } ]
            });
            var f = c.find(".bar");
            expect(f.length).toBe(2);
            var g = a.helpers.getDragStartTriggerFunctionForD3(f[1]);
            expect(g).not.toBeDefined();
        }), it("Bar chart with selection enabled", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
            var h = a.mocks.dataViewScopeIdentity("b");
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), h ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2 ]
                        } ])
                    }
                } ]
            });
            var i = c.find(".bar");
            expect(i.length).toBe(2), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(e), 
            spyOn(g, "onSelect").and.callThrough();
            var j = a.helpers.getClickTriggerFunctionForD3(i[1]), k = {
                abc: "def",
                stopPropagation: function() {}
            };
            j(k), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(e), 
            expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h ]
                } ]
            });
        }), it("Bar chart without selection enabled", function() {
            var e = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2 ]
                        } ])
                    }
                } ]
            });
            var f = c.find(".bar");
            expect(f.length).toBe(2);
            var g = a.helpers.getClickTriggerFunctionForD3(f[1]);
            expect(g).not.toBeDefined();
        }), it("Bar chart multi-selection", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
            var h = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: h
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            });
            var i = c.find(".bar");
            expect(i.length).toBe(5);
            var j = a.helpers.getClickTriggerFunctionForD3(i[0]), k = a.helpers.getClickTriggerFunctionForD3(i[3]), l = {
                abc: "def",
                ctrlKey: !0,
                stopPropagation: function() {}
            };
            spyOn(g, "onSelect").and.callThrough(), expect(i[0].style.fillOpacity).toBe(e), 
            expect(i[1].style.fillOpacity).toBe(e), expect(i[2].style.fillOpacity).toBe(e), 
            expect(i[3].style.fillOpacity).toBe(e), expect(i[4].style.fillOpacity).toBe(e), 
            j(l), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(f), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[0] ]
                } ]
            }), k(l), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[0] ]
                }, {
                    data: [ h[3] ]
                } ]
            }), j(l), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[3] ]
                } ]
            }), k(l), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(e), 
            expect(i[2].style.fillOpacity).toBe(e), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(e), expect(g.onSelect).toHaveBeenCalledWith({
                data: []
            });
        }), it("Bar chart repeated single selection", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
            var h = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: h
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            });
            var i = c.find(".bar");
            expect(i.length).toBe(5);
            var j = a.helpers.getClickTriggerFunctionForD3(i[0]), k = a.helpers.getClickTriggerFunctionForD3(i[3]), l = {
                abc: "def",
                stopPropagation: function() {}
            };
            spyOn(g, "onSelect").and.callThrough(), expect(i[0].style.fillOpacity).toBe(e), 
            expect(i[1].style.fillOpacity).toBe(e), expect(i[2].style.fillOpacity).toBe(e), 
            expect(i[3].style.fillOpacity).toBe(e), expect(i[4].style.fillOpacity).toBe(e), 
            j(l), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(f), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[0] ]
                } ]
            }), k(l), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[3] ]
                } ]
            }), k(l), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(e), 
            expect(i[2].style.fillOpacity).toBe(e), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(e), expect(g.onSelect).toHaveBeenCalledWith({
                data: []
            });
        }), it("Bar chart single and multi selection", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
            var h = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: h
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            });
            var i = c.find(".bar");
            expect(i.length).toBe(5);
            var j = a.helpers.getClickTriggerFunctionForD3(i[0]), k = a.helpers.getClickTriggerFunctionForD3(i[1]), l = a.helpers.getClickTriggerFunctionForD3(i[3]), m = a.helpers.getClickTriggerFunctionForD3(i[4]), n = {
                abc: "def",
                stopPropagation: function() {}
            }, o = {
                abc: "def",
                ctrlKey: !0,
                stopPropagation: function() {}
            };
            spyOn(g, "onSelect").and.callThrough(), expect(i[0].style.fillOpacity).toBe(e), 
            expect(i[1].style.fillOpacity).toBe(e), expect(i[2].style.fillOpacity).toBe(e), 
            expect(i[3].style.fillOpacity).toBe(e), expect(i[4].style.fillOpacity).toBe(e), 
            j(n), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(f), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[0] ]
                } ]
            }), l(o), expect(i[0].style.fillOpacity).toBe(e), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[0] ]
                }, {
                    data: [ h[3] ]
                } ]
            }), l(n), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[3] ]
                } ]
            }), k(o), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(e), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(e), 
            expect(i[4].style.fillOpacity).toBe(f), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[3] ]
                }, {
                    data: [ h[1] ]
                } ]
            }), m(n), expect(i[0].style.fillOpacity).toBe(f), expect(i[1].style.fillOpacity).toBe(f), 
            expect(i[2].style.fillOpacity).toBe(f), expect(i[3].style.fillOpacity).toBe(f), 
            expect(i[4].style.fillOpacity).toBe(e), expect(g.onSelect).toHaveBeenCalledWith({
                data: [ {
                    data: [ h[4] ]
                } ]
            });
        }), it("Bar chart external clear selection", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            });
            var h = c.find(".bar");
            expect(h.length).toBe(5);
            var i = a.helpers.getClickTriggerFunctionForD3(h[0]), j = {
                abc: "def",
                stopPropagation: function() {}
            };
            spyOn(g, "onSelect").and.callThrough(), expect(h[0].style.fillOpacity).toBe(e), 
            expect(h[1].style.fillOpacity).toBe(e), expect(h[2].style.fillOpacity).toBe(e), 
            expect(h[3].style.fillOpacity).toBe(e), expect(h[4].style.fillOpacity).toBe(e), 
            i(j), expect(h[0].style.fillOpacity).toBe(e), expect(h[1].style.fillOpacity).toBe(f), 
            expect(h[2].style.fillOpacity).toBe(f), expect(h[3].style.fillOpacity).toBe(f), 
            expect(h[4].style.fillOpacity).toBe(f), b.onClearSelection(), expect(h[0].style.fillOpacity).toBe(e), 
            expect(h[1].style.fillOpacity).toBe(e), expect(h[2].style.fillOpacity).toBe(e), 
            expect(h[3].style.fillOpacity).toBe(e), expect(h[4].style.fillOpacity).toBe(e);
        }), it("Bar clear selection on clearCatcher click", function() {
            var g = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        } ])
                    }
                } ]
            });
            var h = c.find(".bar");
            expect(h.length).toBe(5);
            var i = a.helpers.getClickTriggerFunctionForD3(h[0]), j = {
                abc: "def",
                stopPropagation: function() {}
            }, k = a.helpers.getClickTriggerFunctionForD3($(".clearCatcher")[0]);
            spyOn(g, "onSelect").and.callThrough(), expect(h[0].style.fillOpacity).toBe(e), 
            expect(h[1].style.fillOpacity).toBe(e), expect(h[2].style.fillOpacity).toBe(e), 
            expect(h[3].style.fillOpacity).toBe(e), expect(h[4].style.fillOpacity).toBe(e), 
            i(j), expect(h[0].style.fillOpacity).toBe(e), expect(h[1].style.fillOpacity).toBe(f), 
            expect(h[2].style.fillOpacity).toBe(f), expect(h[3].style.fillOpacity).toBe(f), 
            expect(h[4].style.fillOpacity).toBe(f), k(j), expect(h[0].style.fillOpacity).toBe(e), 
            expect(h[1].style.fillOpacity).toBe(e), expect(h[2].style.fillOpacity).toBe(e), 
            expect(h[3].style.fillOpacity).toBe(e), expect(h[4].style.fillOpacity).toBe(e), 
            expect(g.onSelect).toHaveBeenCalledWith({
                data: []
            });
        });
    });
    var J = 250, K = 200;
    describe("Stacked Bar Chart Interactivity", function() {
        return h("barChart", ".bar", J, K);
    }), describe("Clustered Bar Chart Interactivity", function() {
        return h("clusteredBarChart", ".bar", J, K);
    }), describe("Hundred Percent Stacked Bar Chart Interactivity", function() {
        return h("hundredPercentStackedBarChart", ".bar", J, K);
    }), describe("Stacked Column Chart Interactivity", function() {
        return h("columnChart", ".column", J, K);
    }), describe("Clustered Column Chart Interactivity", function() {
        return h("clusteredColumnChart", ".column", J, K);
    }), describe("Hundred Percent Stacked Column Chart Interactivity", function() {
        return h("hundredPercentStackedColumnChart", ".column", J, K);
    }), describe("Stacked Bar Chart Web Animations", function() {
        return i("barChart");
    }), describe("Clustered Bar Chart Web Animations", function() {
        return i("clusteredBarChart");
    }), describe("Hundred Percent Stacked Bar Chart Web Animations", function() {
        return i("hundredPercentStackedBarChart");
    }), describe("Stacked Column Chart Web Animations", function() {
        return i("columnChart");
    }), describe("Clustered Column Chart Web Animations", function() {
        return i("clusteredColumnChart");
    }), describe("Hundred Percent Stacked Column Chart Web Animations", function() {
        return i("hundredPercentStackedColumnChart");
    }), it("tooltip has category formatted date values", function() {
        var b = {
            displayName: "year",
            queryName: "selectYear",
            type: u.describeDataType(v.Date),
            objects: {
                general: {
                    formatString: "d"
                }
            }
        }, c = {
            displayName: "sales",
            queryName: "selectSales",
            isMeasure: !0,
            type: u.describeDataType(v.Integer)
        }, d = [ a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], e = {
            categories: [ {
                source: b,
                values: [ new Date(2011, 4, 31), new Date(2012, 6, 30) ],
                identity: d
            } ],
            values: s.createValueColumns([ {
                source: c,
                values: [ 100, -200 ]
            } ])
        }, f = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = t.converter(e, f), h = [ B.createWithIdAndMeasure(d[0], c.queryName), B.createWithIdAndMeasure(d[1], c.queryName) ], i = g.legendData.dataPoints;
        expect(g.series).toEqual([ {
            key: "series0",
            index: 0,
            displayName: "sales",
            identity: B.createWithMeasure("selectSales"),
            data: [ {
                categoryValue: new Date(2011, 4, 31).getTime(),
                value: 100,
                position: 100,
                valueAbsolute: 100,
                valueOriginal: 100,
                seriesIndex: 0,
                labelFill: i[0].color,
                categoryIndex: 0,
                color: i[0].color,
                selected: !1,
                originalValue: 100,
                originalPosition: 100,
                originalValueAbsolute: 100,
                identity: h[0],
                key: h[0].getKey(),
                tooltipInfo: [ {
                    displayName: "year",
                    value: "5/31/2011"
                }, {
                    displayName: "sales",
                    value: "100"
                } ],
                lastSeries: void 0,
                chartType: void 0
            }, {
                categoryValue: new Date(2012, 6, 30).getTime(),
                value: -200,
                position: 0,
                valueAbsolute: 200,
                valueOriginal: -200,
                seriesIndex: 0,
                labelFill: i[0].color,
                categoryIndex: 1,
                color: i[0].color,
                selected: !1,
                originalValue: -200,
                originalPosition: 0,
                originalValueAbsolute: 200,
                identity: h[1],
                key: h[1].getKey(),
                tooltipInfo: [ {
                    displayName: "year",
                    value: "7/30/2012"
                }, {
                    displayName: "sales",
                    value: "-200"
                } ],
                lastSeries: void 0,
                chartType: void 0
            } ]
        } ]), expect(z.createValueDomain(g.series, !0)).toEqual([ -200, 100 ]), expect(x.calcValueDomain(g.series, !1)).toEqual({
            min: -200,
            max: 100
        });
    }), describe("Bar chart scrollbar", function() {
        return k("barChart", ".bar");
    }), describe("ClusteredBarChart scrollbar", function() {
        return k("clusteredBarChart", ".bar");
    }), describe("ColumnChart scrollbar", function() {
        return l("columnChart", ".column");
    }), describe("ClusteredcolumnChart Scrollbar", function() {
        return l("clusteredColumnChart", ".column");
    }), describe("Column chart X axis label rotation/cutoff", function() {
        var b, c, d = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("400", "300"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create();
        }), it("long label cutoff at the left edge", function() {
            var e = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    dragDataPoint: !0
                }
            });
            var f = "Very very very very long label";
            b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ f, "b", "c", "d" ],
                            identity: [ a.mocks.dataViewScopeIdentity(f), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1, 1.5 ]
                        } ])
                    }
                } ]
            });
            var g = c.find(".x.axis text")[0].textContent;
            expect(g).toContain("...");
        });
    }), describe("X Axis Customization: Column Chart", function() {
        function b(a) {
            l.objects.categoryAxis.axisType = a, i.dataViews.metadata = l;
        }
        var c, d, e, f, g, h, i, j, k = a.mocks.createVisualHostServices(), l = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(1)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("500", "900"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create(), 
            c.init({
                element: d,
                host: k,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                interactivity: {
                    isInteractiveLegend: !1
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("X Axis Customization: Verify Scalar and Categorical axis type", function() {
            var d = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("20000"), a.mocks.dataViewScopeIdentity("10000"), a.mocks.dataViewScopeIdentity("50000") ];
            l.objects = {
                categoryAxis: {
                    show: !0,
                    start: 0,
                    end: 2e5,
                    axisType: F.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }, i = {
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ 50, 2e4, 1e4, 5e4 ],
                            identity: d
                        } ],
                        values: s.createValueColumns([ {
                            source: l.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }, c.onDataChanged(i), f = $(".column");
            var e = +f[1].getAttribute("x") - (+f[0].getAttribute("x") + +f[0].getAttribute("width"));
            j = f.length - 1;
            var g = +f[j].getAttribute("x") - (+f[j - 1].getAttribute("x") + +f[j - 1].getAttribute("width"));
            expect(e).toBeGreaterThan(0), expect(g).toBeGreaterThan(e), b(F.categorical), c.onDataChanged(i), 
            e = +f[1].getAttribute("x") - (+f[0].getAttribute("x") + +f[0].getAttribute("width")), 
            g = +f[j].getAttribute("x") - (+f[j - 1].getAttribute("x") + +f[j - 1].getAttribute("width")), 
            expect(e).toBeGreaterThan(0), expect(g).toBeCloseTo(e, 2);
        }), it("Basic scale check", function() {
            var b = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            l.objects = {
                categoryAxis: {
                    show: !0,
                    start: 0,
                    end: 1e5,
                    axisType: F.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: b
                        } ],
                        values: s.createValueColumns([ {
                            source: l.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), f = $(".column"), g = $(".x.axis").children(".tick"), e = (f[1].getAttribute("x") - f[0].getAttribute("x")) / 1500, 
            h = f[0].getAttribute("width"), expect(f[0].getAttribute("x")).toBeCloseTo(500 * e, 2), 
            expect(f[1].getAttribute("x")).toBeCloseTo(2e3 * e, 2), expect(f[2].getAttribute("x")).toBeCloseTo(5e3 * e, 2), 
            expect(f[3].getAttribute("x")).toBeCloseTo(1e4 * e, 2), expect(+f[0].getAttribute("x") + +h).toBeLessThan(+f[1].getAttribute("x")), 
            expect(+f[1].getAttribute("x") + +h).toBeLessThan(+f[2].getAttribute("x")), expect(+f[2].getAttribute("x") + +h).toBeLessThan(+f[3].getAttribute("x")), 
            expect(g[0].textContent).toBe("0M"), expect(g[g.length - 1].textContent).toBe("0.1M");
        }), it("Big Range scale check", function() {
            var b = [ a.mocks.dataViewScopeIdentity("50"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("100000") ];
            l.objects = {
                categoryAxis: {
                    show: !0,
                    start: 0,
                    end: 5e4,
                    axisType: F.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ 50, 2e4, 1e4, 5e4 ],
                            identity: b
                        } ],
                        values: s.createValueColumns([ {
                            source: l.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), f = $(".column"), g = $(".x.axis").children(".tick"), e = (f[1].getAttribute("x") - f[0].getAttribute("x")) / 19950, 
            h = f[0].getAttribute("width"), expect(f[0].getAttribute("x")).toBeCloseTo(50 * e, 2), 
            expect(f[2].getAttribute("x")).toBeCloseTo(1e4 * e, 2), expect(f[1].getAttribute("x")).toBeCloseTo(2e4 * e, 2), 
            expect(f[3].getAttribute("x")).toBeCloseTo(5e4 * e, 2), expect(+f[0].getAttribute("x") + +h).toBeLessThan(+f[2].getAttribute("x")), 
            expect(+f[2].getAttribute("x") + +h).toBeLessThan(+f[1].getAttribute("x")), expect(+f[1].getAttribute("x") + +h).toBeLessThan(+f[3].getAttribute("x")), 
            expect(g[0].textContent).toBe("0K"), expect(g[g.length - 1].textContent).toBe("50K");
        }), it("Negative And Positive scale values check", function() {
            var b = [ a.mocks.dataViewScopeIdentity("-50"), a.mocks.dataViewScopeIdentity("-70"), a.mocks.dataViewScopeIdentity("-40"), a.mocks.dataViewScopeIdentity("-100") ];
            l.objects = {
                categoryAxis: {
                    show: !0,
                    start: -100,
                    end: 100,
                    axisType: F.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ -50, 0, 40, -100 ],
                            identity: b
                        } ],
                        values: s.createValueColumns([ {
                            source: l.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), f = $(".column"), g = $(".x.axis").children(".tick"), e = (+f[1].getAttribute("x") - +f[0].getAttribute("x")) / 50, 
            h = f[0].getAttribute("width"), expect(f[0].getAttribute("x")).toBeCloseTo(50 * e, 2), 
            expect(f[1].getAttribute("x")).toBeCloseTo(100 * e, 2), expect(f[2].getAttribute("x")).toBeCloseTo(140 * e, 2), 
            expect(f[3].getAttribute("x")).toBeCloseTo(0, 2), expect(+f[3].getAttribute("x") + +h).toBeLessThan(+f[0].getAttribute("x")), 
            expect(+f[0].getAttribute("x") + +h).toBeLessThan(+f[1].getAttribute("x")), expect(+f[1].getAttribute("x") + +h).toBeLessThan(+f[2].getAttribute("x")), 
            expect(g[0].textContent).toBe("-100"), expect(g[g.length - 1].textContent).toBe("100");
        });
    }), describe("Y Axis Customization: Column Chart", function() {
        var b, c, d, e, f = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(1)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ],
            objects: {
                valueAxis: {
                    show: !0,
                    position: "Right",
                    start: 0,
                    end: 2e5,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "900"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create(), 
            b.init({
                element: c,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                interactivity: {
                    isInteractiveLegend: !1
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("verify begin & end", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), d = $(".column"), e = $(".y.axis").children(".tick"), expect(e[0].textContent).toBe("0K"), 
            expect(e[e.length - 1].textContent).toBe("200K");
        }), it("verify begin & end - Big Scale", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ 500, 2e3, 50, 1e6 ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 1e6, 15e4, 50 ]
                        } ])
                    }
                } ]
            }), d = $(".column"), e = $(".y.axis").children(".tick"), expect(e[0].textContent).toBe("0K"), 
            expect(e[e.length - 1].textContent).toBe("200K");
        }), it("verify Y position change: the axis text should be further right than the axis line", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ], d = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ 500, 2e3, 50, 1e6 ],
                        identity: c
                    } ],
                    values: s.createValueColumns([ {
                        source: g.columns[1],
                        min: 5e4,
                        max: 2e5,
                        subtotal: 5e5,
                        values: [ 1e5, 1e6, 15e4, 50 ]
                    } ])
                }
            };
            b.onDataChanged({
                dataViews: [ d ]
            });
            var e = $(".y.axis"), f = e.find("line")[0], h = e.find("text")[0];
            expect(h.x.baseVal.getItem(0).value).toBeGreaterThan(f.x2.baseVal.value), setTimeout(function() {
                d.metadata.objects.valueAxis.position = "Left", b.onDataChanged({
                    dataViews: [ d ]
                }), expect(h.x.baseVal.getItem(0).value).toBeLessThan(f.x2.baseVal.value);
            }, I);
        });
    }), describe("X Axis Customization: Bar Chart", function() {
        var b, c, d, e, f = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(1)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ],
            objects: {
                valueAxis: {
                    show: !0,
                    position: !0,
                    start: 0,
                    end: 2e5,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "900"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("barChart").create(), 
            b.init({
                element: c,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                interactivity: {
                    isInteractiveLegend: !1
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("verify begin & end", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), d = $(".column"), e = $(".x.axis").children(".tick"), expect(e[0].textContent).toBe("0K"), 
            expect(e[e.length - 1].textContent).toBe("200K");
        }), it("verify begin & end - Big Range", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ 5, 2e3, 5e3, 1e6 ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: g.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e6, 15e4, 50 ]
                        } ])
                    }
                } ]
            }), d = $(".column"), e = $(".x.axis").children(".tick"), expect(e[0].textContent).toBe("0K"), 
            expect(e[e.length - 1].textContent).toBe("200K");
        });
    }), describe("Y Axis Customization: Bar Chart", function() {
        var b, c, d, e, f, g, h, i = a.mocks.createVisualHostServices(), j = [], k = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(1)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: u.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ],
            objects: {
                categoryAxis: {
                    show: !0,
                    start: 0,
                    end: 1e5,
                    axisType: F.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            }
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("750", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("barChart").create(), 
            b.init({
                element: c,
                host: i,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                interactivity: {
                    isInteractiveLegend: !1
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Basic scale check", function() {
            var c = [ a.mocks.dataViewScopeIdentity("500"), a.mocks.dataViewScopeIdentity("2000"), a.mocks.dataViewScopeIdentity("5000"), a.mocks.dataViewScopeIdentity("10000") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: c
                        } ],
                        values: s.createValueColumns([ {
                            source: k.columns[1],
                            min: 5e4,
                            max: 2e5,
                            subtotal: 5e5,
                            values: [ 1e5, 2e5, 15e4, 5e4 ]
                        } ])
                    }
                } ]
            }), e = $(".bar"), f = $(".y.axis").children(".tick"), g = e[0].getAttribute("height"), 
            j = [], h = e.length;
            for (var i = 0; h > i; i++) j.push(e[i].getAttribute("y"));
            j.sort(), d = (+j[1] - +j[0]) / 5e3, expect(f[0].textContent).toBe("0M"), expect(f[f.length - 1].textContent).toBe("0.1M");
        });
    }), describe("Bar chart legend", function() {
        var b, c, d = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1)
            } ]
        }, e = {
            columns: [ {
                displayName: "col1",
                type: u.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: u.describeDataType(1),
                groupName: "group"
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("400", "300"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("barChart").create();
        }), it("hide legend when there is only one legend and no group", function() {
            var e = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    dragDataPoint: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d") ]
                        } ],
                        values: s.createValueColumns([ {
                            source: d.columns[1],
                            values: [ .5, 2, 1, 1.5 ]
                        } ])
                    }
                } ]
            });
            var f = c.find(".legend"), g = f.find(".title");
            expect(g.length).toBe(0);
        }), it("show legend when there is one legend and the legend is in a group", function() {
            var d = a.mocks.createVisualHostServices();
            b.init({
                element: c,
                host: d,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    dragDataPoint: !0
                }
            });
            var f = [ a.mocks.dataViewScopeIdentity("identity") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d" ],
                            identity: f
                        } ],
                        values: s.createValueColumns([ {
                            source: e.columns[1],
                            values: [ .5, 2, 1, 1.5 ],
                            identity: f[0]
                        } ])
                    }
                } ]
            });
            var g = $(".legendText");
            expect(g.length).toBe(1), expect(g.text()).toBe("group");
        });
    }), describe("Stacked Bar Chart Labels outsideRight", function() {
        return n("barChart");
    }), describe("Clustered Bar Chart Labels outsideRight", function() {
        return n("clusteredBarChart");
    }), describe("Hundred Percent Stacked Bar Chart Labels outsideRight", function() {
        return n("hundredPercentStackedBarChart");
    }), describe("Stacked Column Chart Labels outsideTop", function() {
        return n("columnChart");
    }), describe("Clustered Column Chart Labels outsideTop", function() {
        return n("clusteredColumnChart");
    }), describe("Hundred Percent Stacked Column Chart Labels outsideTop", function() {
        return n("hundredPercentStackedColumnChart");
    }), describe("Stacked Bar Chart Labels Visibility", function() {
        return o("barChart", !0);
    }), describe("Clustered Bar Chart Labels Visible", function() {
        return o("clusteredBarChart", !0);
    }), describe("Hundred Percent Stacked Bar Chart Labels Visible", function() {
        return o("hundredPercentStackedBarChart", !0);
    }), describe("Stacked Column Chart Labels Visible", function() {
        return o("columnChart", !0);
    }), describe("Clustered Column Chart Labels Visible", function() {
        return o("clusteredColumnChart", !0);
    }), describe("Hundred Percent Stacked Column Chart Labels Visible", function() {
        return o("hundredPercentStackedColumnChart", !0);
    }), describe("Stacked Bar Chart Labels Unvisible", function() {
        return o("barChart", !1);
    }), describe("Clustered Bar Chart Labels Unvisible", function() {
        return o("clusteredBarChart", !1);
    }), describe("Hundred Percent Stacked Bar Chart Labels Unvisible", function() {
        return o("hundredPercentStackedBarChart", !1);
    }), describe("Stacked Column Chart Labels Unvisible", function() {
        return o("columnChart", !1);
    }), describe("Clustered Column Chart Labels Unvisible", function() {
        return o("clusteredColumnChart", !1);
    }), describe("Hundred Percent Stacked Column Chart Labels Unvisible", function() {
        return o("hundredPercentStackedColumnChart", !1);
    }), describe("Stacked Bar Chart Labels Color", function() {
        return p("barChart", "rgb(255, 0, 0)");
    }), describe("Clustered Bar Chart Labels Color", function() {
        return p("clusteredBarChart", "rgb(255, 0, 0)");
    }), describe("Hundred Percent Stacked Bar Chart Labels Color", function() {
        return p("hundredPercentStackedBarChart", "rgb(255, 0, 0)");
    }), describe("Stacked Column Chart Labels Color", function() {
        return p("columnChart", "rgb(255, 0, 0)");
    }), describe("Clustered Column Chart Labels Color", function() {
        return p("clusteredColumnChart", "rgb(255, 0, 0)");
    }), describe("Hundred Percent Stacked Column Chart Labels Color", function() {
        return p("hundredPercentStackedColumnChart", "rgb(255, 0, 0)");
    }), it("Column Chart X and Y-axis show/hide Title ", function() {
        var b = a.helpers.testDom("500", "500"), c = a.mocks.createVisualHostServices(), d = [ a.mocks.dataViewScopeIdentity("John Domo") ], e = powerbi.visuals.visualPluginFactory.create().getPlugin("columnChart").create();
        e.init({
            element: b,
            host: c,
            style: powerbi.visuals.visualStyles.create(),
            viewport: {
                height: b.height(),
                width: b.width()
            },
            interactivity: {
                isInteractiveLegend: !1
            },
            animation: {
                transitionImmediate: !0
            }
        });
        var f = {
            columns: [ {
                displayName: "AxesTitleTest",
                type: u.describeDataType(1)
            } ],
            objects: {
                categoryAxis: {
                    showAxisTitle: !0
                },
                valueAxis: {
                    showAxisTitle: !0
                }
            }
        };
        e.onDataChanged({
            dataViews: [ {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ 500, 2e3, 5e3, 1e4 ],
                        identity: d
                    } ],
                    values: s.createValueColumns([ {
                        source: f.columns[0],
                        values: [ 20, 1e3 ],
                        subtotal: 1020
                    } ])
                }
            } ]
        }), expect($(".xAxisLabel").first().text()).toBe("AxesTitleTest"), expect($(".yAxisLabel").first().text()).toBe("AxesTitleTest"), 
        f.objects = {
            categoryAxis: {
                showAxisTitle: !1
            },
            valueAxis: {
                showAxisTitle: !1
            }
        }, e.onDataChanged({
            dataViews: [ {
                metadata: f
            } ]
        }), expect($(".xAxisLabel").length).toBe(0), expect($(".yAxisLabel").length).toBe(0);
    }), describe("Column chart format validation", function() {
        return q("columnChart");
    }), describe("Stacked Bar format validation", function() {
        return q("barChart");
    }), describe("Clustered Bar Chart Labels Color", function() {
        return q("clusteredBarChart");
    }), describe("Clustered Column Chart Labels Color", function() {
        return q("clusteredColumnChart");
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.data.DataViewTransform, c = powerbi.data.dsr.DataShapeUtility, d = powerbi.visuals.ComboChart, e = (powerbi.data.SemanticType, 
    a.utils.ColorUtility.convertFromRGBorHexToHex), f = powerbi.axisType, g = 100;
    describe("ComboChart", function() {
        it("registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("comboChart").capabilities).toBe(d.capabilities), 
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("lineClusteredColumnComboChart").capabilities).toBe(d.capabilities), 
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("lineStackedColumnComboChart").capabilities).toBe(d.capabilities);
        }), it("capabilities should include dataViewMappings", function() {
            expect(d.capabilities.dataViewMappings).toBeDefined();
        }), it("capabilities should include dataRoles", function() {
            expect(d.capabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(d.capabilities.suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.ComboChart.capabilities.objects)).toEqual(powerbi.visuals.comboChartProps.general.formatString);
        });
    }), describe("ComboChart DOM validation", function() {
        function d(a) {
            return {
                columns: [ {
                    displayName: "col1",
                    queryName: "col1",
                    type: c.describeDataType(2048)
                }, {
                    displayName: "col2",
                    queryName: "col2",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                }, {
                    displayName: "col3",
                    queryName: "col3",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                }, {
                    displayName: "col4",
                    queryName: "col4",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                } ],
                properties: a
            };
        }
        function h(a) {
            return {
                columns: [ {
                    displayName: "col1",
                    queryName: "col1",
                    type: c.describeDataType(1)
                }, {
                    displayName: "col2",
                    queryName: "col2",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                }, {
                    displayName: "col3",
                    queryName: "col3",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                }, {
                    displayName: "col4",
                    queryName: "col4",
                    isMeasure: !0,
                    type: c.describeDataType(1)
                } ],
                objects: a
            };
        }
        function i(a) {
            var c = d(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "This is a pretty long label I think", "This is a pretty long label I thought", "This is a pretty long label I should think" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    }, {
                        source: c.columns[2],
                        values: [ 1e3, 2e3, 7e3 ],
                        subtotal: 1e4
                    }, {
                        source: c.columns[3],
                        values: [ 1e6, 2e6, 7e6 ],
                        subtotal: 1e7
                    } ])
                }
            };
        }
        function j(a) {
            var c = d(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    }, {
                        source: c.columns[2],
                        values: [ 1e3, 2e3, 7e3 ],
                        subtotal: 1e4
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 2e4, 7e4 ],
                        subtotal: 1e5
                    } ])
                }
            };
        }
        function k(a) {
            var c = NaN;
            switch (a) {
              case "PositiveInfinity":
                c = Number.POSITIVE_INFINITY;
                break;

              case "NegativeInfinity":
                c = Number.NEGATIVE_INFINITY;
                break;

              case "OutOfRange":
                c = 1e301;
                break;

              case "NaN":
                c = NaN;
                break;

              default:
                c = 3;
            }
            var e = d();
            return {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ c ],
                        subtotal: 1e3
                    } ])
                }
            };
        }
        function l(a) {
            var c = h(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ 0, 500, 1e3 ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    }, {
                        source: c.columns[2],
                        values: [ 1e3, 2e3, 7e3 ],
                        subtotal: 1e4
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 2e4, 7e4 ],
                        subtotal: 1e5
                    } ])
                }
            };
        }
        function m(a) {
            var c = d(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 1 ],
                        subtotal: 1
                    }, {
                        source: c.columns[2],
                        values: [ 10 ],
                        subtotal: 10
                    }, {
                        source: c.columns[3],
                        values: [ 20 ],
                        subtotal: 20
                    } ])
                }
            };
        }
        function n(a) {
            var c = d(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 1 ],
                        subtotal: 1
                    } ])
                }
            };
        }
        function o(a) {
            var c = d();
            return 1 === a ? {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 50, 40, 150, 200, 500 ],
                        subtotal: 200
                    } ])
                }
            } : {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 200, 100, 300, 250, 400 ],
                        subtotal: 300
                    } ])
                }
            };
        }
        function p(a) {
            var c = d(a);
            return {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau", "Cat1", "Cat2", "Cat3" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    }, {
                        source: c.columns[2],
                        values: [ 1e3, 2e3, 7e3 ],
                        subtotal: 1e4
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 200, 700 ],
                        subtotal: 1e5
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 2e4, 7e4 ],
                        subtotal: 1e5
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 200, 700 ],
                        subtotal: 1e5
                    }, {
                        source: c.columns[3],
                        values: [ 1e4, 2e4, 7e4 ],
                        subtotal: 1e5
                    } ])
                }
            };
        }
        var q, r, s = {
            metadata: d(),
            categorical: {
                categories: [ {
                    source: d().columns[0],
                    values: []
                } ],
                values: b.createValueColumns([])
            }
        };
        beforeEach(function(b) {
            var c = powerbi.common.createLocalizationService();
            powerbi.common.localize = c, a.mocks.setLocale(c), r = a.helpers.testDom("400", "400"), 
            q = powerbi.visuals.visualPluginFactory.create().getPlugin("comboChart").create(), 
            b();
        }), it("Ensure both charts and axis created with two data views - default", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            }), q.onDataChanged({
                dataViews: [ j(), m() ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1), expect($(".legend").children.length).toBe(2);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(f).toEqual(g), b();
            }, g);
        }), it("Ensure empty 1st dataview and populated 2nd has correct axes and lines", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            }), q.onDataChanged({
                dataViews: [ s, j() ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1);
                var f = $(".y.axis").position(), g = $(".columnChart .column").length, h = $(".lineChart .cat path").length;
                expect(f.left).toBeLessThan(50), expect(g).toBe(0), expect(h).toBe(3);
                var i = $($(".y.axis")[0]).find(".tick").length, j = $($(".y.axis")[1]).find(".tick").length;
                expect(i).toEqual(4), expect(j).toEqual(0), b();
            }, g);
        }), it("Ensure comboCharts clear - default", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            }), q.onDataChanged({
                dataViews: [ m(), j() ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length, f = $(".columnChart .column").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1), expect(f).toBe(3), 
                expect($(".legend").children.length).toBe(2), q.onDataChanged({
                    dataViews: [ m(), s ]
                }), setTimeout(function() {
                    var a = $(".columnChart .column").length;
                    expect(a).toBe(3);
                    var c = $(".lineChart").find(".cat").length;
                    expect(c).toBe(0), q.onDataChanged({
                        dataViews: [ s, j() ]
                    }), setTimeout(function() {
                        var a = $(".columnChart .column").length;
                        expect(a).toBe(0);
                        var c = $(".lineChart").find(".cat").length;
                        expect(c).toBe(3), b();
                    }, g);
                }, g);
            }, g);
        }), it("Ensure both charts and only one axis created with two data views - default", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            }), q.onDataChanged({
                dataViews: [ j(), j() ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1), expect($(".legend").children.length).toBe(2);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(g).toEqual(0), expect(f).not.toEqual(g), b();
            }, g);
        }), it("Ensure both charts and axis created with two data views - stacked", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "ColumnStacked",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ j(c), m(c) ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(f).toEqual(g), b();
            }, g);
        }), it("Ensure both charts and One axis created with two data views - stacked", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "ColumnStacked",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ j(c), j(c) ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(g).toEqual(0), expect(f).not.toEqual(g), b();
            }, g);
        }), it("Ensure both charts and axis created with two data views - clustered", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "ColumnClustered",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ j(c), m(c) ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(f).toEqual(g), b();
            }, g);
        }), it("Ensure both charts and only one axis created with two data views - clustered", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "Column",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ j(c), j(c) ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1);
                var f = $($(".y.axis")[0]).find(".tick").length, g = $($(".y.axis")[1]).find(".tick").length;
                expect(g).toEqual(0), expect(f).not.toEqual(g), b();
            }, g);
        }), it("combo chart validate auto margin", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "Column",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ j(c), j(c) ]
            }), setTimeout(function() {
                var a = parseFloat($(".axisGraphicsContext .x.axis").attr("transform").split(",")[1].replace("(", "")), d = parseFloat($(".axisGraphicsContext .y.axis").attr("transform").split(",")[0].split("(")[1]);
                q.onDataChanged({
                    dataViews: [ i(c), i(c) ]
                }), setTimeout(function() {
                    var c = parseFloat($(".axisGraphicsContext .x.axis").attr("transform").split(",")[1].replace("(", "")), e = parseFloat($(".axisGraphicsContext .y.axis").attr("transform").split(",")[0].split("(")[1]);
                    expect(a).toBeGreaterThan(c), expect(e).toBeGreaterThan(d), b();
                }, g);
            }, g);
        }), it("Ensure scrollbar is shown at smaller viewport dimensions", function(b) {
            r = a.helpers.testDom("100", "100"), q = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("lineClusteredColumnComboChart").create(), q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "ColumnClustered",
                    visualType2: "Line"
                }
            };
            q.onDataChanged({
                dataViews: [ p(c), p(c) ]
            }), setTimeout(function() {
                var a = $(".y.axis").length;
                expect(a).toBe(2);
                var c = $(".svgScrollable").attr("width");
                expect(c).toBeLessThan(r.width()), expect($("rect.extent").length).toBe(1), expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("width").value, 0)).toBeGreaterThan(8), 
                b();
            }, g);
        }), it("Ensure all data points has the default color", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "ColumnClustered",
                    visualType2: "Line"
                }
            }, d = j(c), e = m(c);
            d.metadata.objects = {
                dataPoint: {
                    defaultColor: {
                        solid: {
                            color: "#FF0000"
                        }
                    }
                }
            }, e.metadata.objects = {
                dataPoint: {
                    defaultColor: {
                        solid: {
                            color: "#FF0000"
                        }
                    }
                }
            }, q.onDataChanged({
                dataViews: [ d, e ]
            }), setTimeout(function() {
                var a = $(".lineChart").length, c = $(".columnChart").length, d = $(".y.axis").length, e = $(".legend").length;
                expect(a).toBe(1), expect(c).toBe(1), expect(d).toBe(2), expect(e).toBe(1), expect($($(".legendIcon")[0]).css("fill")).toBe("#ff0000"), 
                expect($($(".legendIcon")[2]).css("fill")).toBe("#ff0000"), b();
            }, g);
        }), it("Ensure data labels are on both charts with default color", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = o(2);
            c.metadata.objects = {
                labels: {
                    show: !0
                }
            }, d.metadata.objects = {
                labels: {
                    show: !0
                }
            }, q.onDataChanged({
                dataViews: [ c, d ]
            }), setTimeout(function() {
                var a = $(".columnChartMainGraphicsContext .data-labels"), c = $(".dataLabelsSVG .data-labels"), d = $(".columnChartMainGraphicsContext .column"), e = $(".mainGraphicsContext .dot");
                expect(a.length).toBeGreaterThan(0), expect(c.length).toBeGreaterThan(0);
                var f = a.first().css("fill"), g = c.first().css("fill"), h = d.first().css("fill"), i = e.first().css("fill");
                expect(f).toBe(h), expect(g).toBe(i), b();
            }, g);
        }), it("labels should support display units with no precision", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = o(2);
            c.metadata.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 0
                }
            }, d.metadata.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 0
                }
            }, q.onDataChanged({
                dataViews: [ c, d ]
            }), setTimeout(function() {
                var a = $(".columnChartMainGraphicsContext .data-labels"), c = $(".dataLabelsSVG .data-labels");
                expect(a.first().text()).toBe("0K"), expect(c.first().text()).toBe("0K"), b();
            }, g);
        }), it("labels should support display units with precision", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = o(2);
            c.metadata.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 1
                }
            }, d.metadata.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 1
                }
            }, q.onDataChanged({
                dataViews: [ c, d ]
            }), setTimeout(function() {
                var a = $(".columnChartMainGraphicsContext .data-labels"), c = $(".dataLabelsSVG .data-labels");
                expect(a.first().text()).toBe("0.1K"), expect(c.first().text()).toBe("0.2K"), b();
            }, g);
        }), it("Values that have NaN show a warning.", function(b) {
            var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
            c.setWarnings = d, q.init({
                element: r,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            }), q.onDataChanged({
                dataViews: [ k("NaN") ]
            }), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                b();
            }, g);
        }), it("Values that have Negative Infinity show a warning.", function(b) {
            var c = a.mocks.createVisualHostServices();
            q.init({
                element: r,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var d = jasmine.createSpy("warning");
            c.setWarnings = d, q.onDataChanged({
                dataViews: [ k("NegativeInfinity") ]
            }), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                b();
            }, g);
        }), it("Values that have Positive Infinity show a warning.", function(b) {
            var c = a.mocks.createVisualHostServices();
            q.init({
                element: r,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var d = jasmine.createSpy("warning");
            c.setWarnings = d, q.onDataChanged({
                dataViews: [ k("PositiveInfinity") ]
            }), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                b();
            }, g);
        }), it("Values that are out of range show a warning.", function(b) {
            var c = a.mocks.createVisualHostServices();
            q.init({
                element: r,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var d = jasmine.createSpy("warning");
            c.setWarnings = d, q.onDataChanged({
                dataViews: [ k("OutOfRange") ]
            }), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                b();
            }, g);
        }), it("All values good do not show a warning.", function(b) {
            var c = a.mocks.createVisualHostServices();
            q.init({
                element: r,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var d = jasmine.createSpy("warning");
            c.setWarnings = d, q.onDataChanged({
                dataViews: [ k("Good") ]
            }), setTimeout(function() {
                expect(d).not.toHaveBeenCalled(), b();
            }, g);
        }), it("Ensure data lables are on both charts with custom color", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = o(2), f = {
                solid: {
                    color: "rgb(255, 0, 0)"
                }
            };
            c.metadata.objects = {
                labels: {
                    show: !0,
                    color: f
                }
            }, d.metadata.objects = {
                labels: {
                    show: !0,
                    color: f
                }
            }, q.onDataChanged({
                dataViews: [ c, d ]
            }), setTimeout(function() {
                var a = $(".columnChartMainGraphicsContext .data-labels"), c = $(".dataLabelsSVG .data-labels");
                expect(a.length).toBeGreaterThan(0), expect(c.length).toBeGreaterThan(0);
                var d = a.first().css("fill"), g = c.first().css("fill");
                expect(e(d)).toBe(e(f.solid.color)), expect(e(g)).toBe(e(f.solid.color)), b();
            }, g);
        }), it("Ensure data lables are on both charts and removed", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = o(2);
            c.metadata.objects = {
                labels: {
                    show: !0
                }
            }, d.metadata.objects = {
                labels: {
                    show: !0
                }
            }, q.onDataChanged({
                dataViews: [ c, d ]
            }), setTimeout(function() {
                var a = $(".columnChartMainGraphicsContext .data-labels"), e = $(".dataLabelsSVG .data-labels");
                expect(a.length).toBeGreaterThan(0), expect(e.length).toBeGreaterThan(0), c.metadata.objects = {
                    labels: {
                        show: !1
                    }
                }, d.metadata.objects = {
                    labels: {
                        show: !1
                    }
                }, q.onDataChanged({
                    dataViews: [ c, d ]
                }), setTimeout(function() {
                    var a = $(".columnChartMainGraphicsContext .data-labels"), c = $(".dataLabelsSVG .data-labels");
                    expect(a.length).toBe(0), expect(c.length).toBe(0), b();
                }, g), b();
            }, g);
        }), it("validate enumerate labels", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = o(1), d = null;
            q.onDataChanged({
                dataViews: [ c, d ]
            });
            var e = q.enumerateObjectInstances({
                objectName: "labels"
            });
            setTimeout(function() {
                expect(e.length).toBeGreaterThan(0), b();
            }, g);
        }), it("xAxis customization- begin and end check", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "Column",
                    visualType2: "Line"
                },
                categoryAxis: {
                    displayName: "scalar",
                    show: !0,
                    start: 0,
                    end: 1e3,
                    axisType: f.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            };
            q.onDataChanged({
                dataViews: [ l(c), l(c) ]
            }), setTimeout(function() {
                var a = $(".x.axis").children(".tick");
                expect(a[0].textContent).toBe("0.00"), expect(a[a.length - 1].textContent).toBe("1,000.00"), 
                b();
            }, g);
        }), it("Verify force to zero works for a positive domain range", function(c) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var e = d(), f = {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ 4e3, 6e3, 7e3 ],
                        subtotal: 17e3
                    } ])
                }
            };
            q.onDataChanged({
                dataViews: [ m(), f ]
            }), setTimeout(function() {
                var a = $(".axisGraphicsContext .y.axis").last().find(".tick");
                expect(a[0].textContent).toBe("0K"), expect(a[a.length - 1].textContent).toBe("7K"), 
                c();
            }, g);
        }), it("Verify force to zero is not set for a negative domain range", function(c) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var e = d(), f = {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ -4e3, -6e3, -7e3 ],
                        subtotal: -17e3
                    } ])
                }
            };
            q.onDataChanged({
                dataViews: [ m(), f ]
            }), setTimeout(function() {
                var a = $(".axisGraphicsContext .y.axis").last().find(".tick");
                expect(a[0].textContent).toBe("-7,000.00"), expect(a[a.length - 1].textContent).toBe("-4,000.00"), 
                c();
            }, g);
        }), it("Ensure both titles created in Line and Stacked column chart", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "Column",
                    visualType2: "Line"
                },
                valueAxis: {
                    show: !0,
                    showAxisTitle: !0,
                    secShowAxisTitle: !0
                }
            };
            q.onDataChanged({
                dataViews: [ l(c), n(c) ]
            }), setTimeout(function() {
                var a = $(".yAxisLabel").length;
                expect(a).toBe(2), expect($(".yAxisLabel").first().text()).toBe("col2, col3 and col4"), 
                expect($(".yAxisLabel").last().text()).toBe("col2"), b();
            }, g);
        }), it("Ensure only secondary title created in Line and Stacked column chart", function(b) {
            q.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                }
            });
            var c = {
                general: {
                    visualType1: "Column",
                    visualType2: "Line"
                },
                valueAxis: {
                    show: !0,
                    showAxisTitle: !1,
                    secShowAxisTitle: !0
                }
            };
            q.onDataChanged({
                dataViews: [ l(c), n(c) ]
            }), setTimeout(function() {
                var a = $(".yAxisLabel").length;
                expect(a).toBe(1), expect($(".yAxisLabel").first().text()).toBe("col2"), b();
            }, g);
        });
    });
}(powerbitests || (powerbitests = {})), describe("DataColorPalette", function() {
    var a = new powerbi.visuals.DataColorPalette();
    it("Check get color no duplicates until wrap-around", function() {
        var b = a.getColor("test datavalue");
        expect(b).toExist();
        var c = a.getColor("series index N");
        expect(c).toExist(), expect(b.value).not.toBe(c.value);
        var d = a.getColor({
            seriesProperty: "X"
        });
        expect(d).toExist(), expect(c.value).not.toBe(d.value);
        var e = a.getColor(-1);
        expect(e).toExist(), expect(d.value).not.toBe(e.value);
        for (var f = e, g = 4; 480 > g; ++g) {
            var h = a.getColor(g);
            expect(h).toExist(), expect(h.value).not.toBe(f.value), f = h;
        }
        expect(a.getColor("abc series")).toBe(b);
    }), it("Check get color same index key returns same color", function() {
        var b = 4, c = "pie slice 7", d = a.getColor(b);
        expect(d).toExist();
        var e = a.getColor(c);
        expect(e).toExist();
        var f = a.getColor(b);
        expect(f).toExist(), expect(f.value).toBe(d.value);
        var g = a.getColor(c);
        expect(g).toExist(), expect(e.value).toBe(g.value);
    }), it("Check get Sentiment color", function() {
        var b = a.getSentimentColors();
        expect(b.length).toBe(3), expect(b[0].value).not.toBe(b[1].value), expect(b[1].value).not.toBe(b[2].value), 
        expect(b[0].value).not.toBe(b[2].value);
    }), it("Check parameter colors", function() {
        var a = new powerbi.visuals.DataColorPalette([ {
            value: "#112233"
        } ]), b = a.getColor(0);
        expect(b.value).toBe("#112233");
    });
});

var powerbitests;

!function(a) {
    var b = powerbi.visuals.DataDotChart, c = powerbi.data.dsr.DataShapeUtility, d = powerbi.data.DataViewTransform, e = (powerbi.data.SemanticType, 
    a.helpers.ClickEventType, powerbi.visuals.ColumnUtil);
    describe("Check DataDotChart capabilities", function() {
        it("DataDotChart registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("dataDotChart").capabilities).toBe(b.capabilities);
        }), it("DataDotChart capabilities should include dataRoles", function() {
            expect(b.capabilities.dataRoles).toBeDefined();
        }), it("DataDotChart capabilities should include dataViewMappings", function() {
            expect(b.capabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(b.capabilities.suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(b.capabilities.objects)).toEqual(b.formatStringProp);
        });
    }), describe("DataDotChart converter", function() {
        var e = "(Blank)", f = {
            columns: [ {
                displayName: "stringColumn",
                queryName: "stringColumn",
                type: c.describeDataType(2048)
            }, {
                displayName: "numberColumn",
                queryName: "numberColumn",
                isMeasure: !0,
                type: c.describeDataType(1)
            }, {
                displayName: "dateTimeColumn",
                queryName: "dateTimeColumn",
                isMeasure: !0,
                type: c.describeDataType(4)
            } ]
        };
        it("Check converter with string categories undefined series", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: []
                    } ],
                    values: void 0
                }
            }, c = b.converter(a, e);
            expect(c).toBeDefined(), expect(c.series).toBeDefined(), expect(c.series.data).toBeDefined(), 
            expect(c.series.data.length).toEqual(0);
        }), it("Check converter with string categories and an empty numeric series", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "Cat 1", "Cat 2", "Cat 3" ]
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: []
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c).toEqual({
                series: {
                    xCol: a.metadata.columns[0],
                    yCol: a.metadata.columns[1],
                    data: []
                },
                hasHighlights: !1,
                hasDynamicSeries: !0
            });
        }), it("Check converter with string categories and a numeric series", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "Cat 1", "Cat 2", "Cat 3" ]
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 300 ]
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c.series).toBeDefined(), expect(c.series.xCol).toEqual(a.metadata.columns[0]), 
            expect(c.series.yCol).toEqual(a.metadata.columns[1]), expect(c.series.data).toBeDefined(), 
            expect(c.series.data.length).toEqual(3);
            for (var g = 0; g < c.series.data.length; g++) {
                var h = c.series.data[g];
                expect(h.categoryValue).toBe(a.categorical.categories[0].values[g]), expect(h.value).toBe(a.categorical.values[0].values[g]), 
                expect(h.categoryIndex).toBe(g), expect(h.seriesIndex).toBe(0), expect(h.selected).toBe(!1);
            }
        }), it("Check converter with empty categories and single numeric value", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100 ]
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c.series).toBeDefined(), expect(c.series.xCol).toBeUndefined(), expect(c.series.yCol).toEqual(a.metadata.columns[1]), 
            expect(c.series.data).toBeDefined(), expect(c.series.data.length).toEqual(1);
            for (var g = 0; g < c.series.data.length; g++) {
                var h = c.series.data[g];
                expect(h.categoryValue).toBe(e), expect(h.value).toBe(a.categorical.values[0].values[g]), 
                expect(h.categoryIndex).toBe(g), expect(h.seriesIndex).toBe(0), expect(h.selected).toBe(!1);
            }
        }), it("Check converter with undefined categories and single numeric value", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100 ]
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c.series).toBeDefined(), expect(c.series.xCol).toBeUndefined(), expect(c.series.yCol).toEqual(a.metadata.columns[1]), 
            expect(c.series.data).toBeDefined(), expect(c.series.data.length).toEqual(1);
            for (var g = 0; g < c.series.data.length; g++) {
                var h = c.series.data[g];
                expect(h.categoryValue).toBe(e), expect(h.value).toBe(a.categorical.values[0].values[g]), 
                expect(h.categoryIndex).toBe(g), expect(h.seriesIndex).toBe(0), expect(h.selected).toBe(!1);
            }
        }), it("Check converter with string categories and multiple numeric series", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "Cat 1", "Cat 2", "Cat 3" ]
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 300 ]
                    }, {
                        source: f.columns[1],
                        values: [ 101, 201, 301 ]
                    }, {
                        source: f.columns[1],
                        values: [ 102, 202, 302 ]
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c.series).toBeDefined(), expect(c.series.xCol).toEqual(a.metadata.columns[0]), 
            expect(c.series.yCol).toEqual(a.metadata.columns[1]), expect(c.series.data).toBeDefined(), 
            expect(c.series.data.length).toEqual(3);
            for (var g = 0; g < c.series.data.length; g++) {
                var h = c.series.data[g];
                expect(h.categoryValue).toBe(a.categorical.categories[0].values[g]), expect(h.value).toBe(a.categorical.values[0].values[g]), 
                expect(h.categoryIndex).toBe(g), expect(h.seriesIndex).toBe(0), expect(h.selected).toBe(!1);
            }
        }), it("Check converter with date-time categories and a numeric series", function() {
            var a = [ new Date("2014/9/25"), new Date("2014/12/12"), new Date("2015/9/25") ], c = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[2],
                        values: a
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 300 ]
                    } ])
                }
            }, g = b.converter(c, e);
            expect(g.series).toBeDefined(), expect(g.series.xCol).toEqual(c.metadata.columns[2]), 
            expect(g.series.yCol).toEqual(c.metadata.columns[1]), expect(g.series.data).toBeDefined(), 
            expect(g.series.data.length).toEqual(3);
            for (var h = 0; h < g.series.data.length; h++) {
                var i = g.series.data[h];
                expect(i.categoryValue).toBe(a[h].getTime()), expect(i.value).toBe(c.categorical.values[0].values[h]), 
                expect(i.categoryIndex).toBe(h), expect(i.seriesIndex).toBe(0), expect(i.selected).toBe(!1);
            }
        }), it("Check converter with date-time categories and a numeric series where category value is null", function() {
            var a = [ new Date("2014/9/25"), null, new Date("2015/9/25") ], c = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[2],
                        values: a
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 300 ]
                    } ])
                }
            }, g = b.converter(c, e);
            expect(g.series).toBeDefined(), expect(g.series.xCol).toEqual(c.metadata.columns[2]), 
            expect(g.series.yCol).toEqual(c.metadata.columns[1]), expect(g.series.data).toBeDefined(), 
            expect(g.series.data.length).toEqual(3);
            for (var h = 0; h < g.series.data.length; h++) {
                var i = g.series.data[h];
                expect(i.categoryValue).toBe(a[h] ? a[h].getTime() : null), expect(i.value).toBe(c.categorical.values[0].values[h]), 
                expect(i.categoryIndex).toBe(h), expect(i.seriesIndex).toBe(0), expect(i.selected).toBe(!1);
            }
        }), it("Check converter pass string categories and a numeric series produces identities", function() {
            var c = [ "John Domo", "Delta Force", "Jean Tablau" ], g = [ a.mocks.dataViewScopeIdentity(c[0]), a.mocks.dataViewScopeIdentity(c[1]), a.mocks.dataViewScopeIdentity(c[2]) ], h = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "Cat 1", "Cat 2", "Cat 3" ],
                        identity: g
                    } ],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 300 ]
                    } ])
                }
            }, i = b.converter(h, e);
            expect(i.series).toBeDefined(), expect(i.series.data).toBeDefined(), expect(i.series.data.length).toEqual(3);
            for (var j = 0; j < i.series.data.length; j++) {
                var k = i.series.data[j];
                expect(k.identity).toBeDefined(), expect(k.identity.getKey()).toContain(c[j]);
            }
        }), it("Check converter passed undefined categories produces measure name identities ", function() {
            var a = {
                metadata: f,
                categorical: {
                    categories: [],
                    values: d.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100 ]
                    } ])
                }
            }, c = b.converter(a, e);
            expect(c.series).toBeDefined(), expect(c.series.data).toBeDefined(), expect(c.series.data.length).toEqual(1);
            for (var g = 0; g < c.series.data.length; g++) {
                var h = c.series.data[g];
                expect(h.identity).toBeDefined(), expect(h.identity.getKey()).toContain(f.columns[1].displayName);
            }
        });
    }), describe("DataDotChart render to DOM", function() {
        function b(a) {
            var b = {
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: k,
                            identity: l
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: a
                        } ])
                    }
                } ]
            };
            return b;
        }
        var f, g, h = a.mocks.createVisualHostServices(), i = 100, j = {
            columns: [ {
                displayName: "stringColumn",
                type: c.describeDataType(2048)
            }, {
                displayName: "numberColumn",
                isMeasure: !0,
                type: c.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "dateTimeColumn",
                isMeasure: !0,
                type: c.describeDataType(4)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), g = a.helpers.testDom("500", "500"), 
            f = powerbi.visuals.visualPluginFactory.create().getPlugin("dataDotChart").create(), 
            f.init({
                element: g,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !1
                }
            });
        });
        var k = [ "a", "b", "c", "d", "e" ], l = k.map(function(b) {
            return a.mocks.dataViewScopeIdentity(b);
        });
        it("NaN in values shows a warning", function(a) {
            var c = jasmine.createSpy("warning");
            h.setWarnings = c;
            var d = b([ NaN ]);
            f.onDataChanged(d), setTimeout(function() {
                expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                a();
            }, i);
        }), it("Negative Infinity in values shows a warning", function(a) {
            var c = jasmine.createSpy("warning");
            h.setWarnings = c;
            var d = b([ Number.NEGATIVE_INFINITY ]);
            f.onDataChanged(d), setTimeout(function() {
                expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, i);
        }), it("Positive Infinity in values shows a warning", function(a) {
            var c = jasmine.createSpy("warning");
            h.setWarnings = c;
            var d = b([ Number.POSITIVE_INFINITY ]);
            f.onDataChanged(d), setTimeout(function() {
                expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, i);
        }), it("Out of range value in values shows a warning", function(a) {
            var c = jasmine.createSpy("warning");
            h.setWarnings = c;
            var d = b([ -1e301 ]);
            f.onDataChanged(d), setTimeout(function() {
                expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                a();
            }, i);
        }), it("Values all okay does not show a warning", function(a) {
            var c = jasmine.createSpy("warning");
            h.setWarnings = c;
            var d = b([ 300 ]);
            f.onDataChanged(d), setTimeout(function() {
                expect(c).not.toHaveBeenCalled(), a();
            }, i);
        }), it("Check axis in DOM", function(a) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: k,
                            identity: l
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".dataDotChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".dataDotChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".dataDotChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("0M"), 
                expect($(".dataDotChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("0.5M"), 
                a();
            }, i);
        }), it("Check dots in DOM", function(a) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: k,
                            identity: l
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .dot");
                expect(b.length).toBe(5);
                var c = 0;
                b.each(function(a, b) {
                    var d = $(b), e = +d.attr("r");
                    0 === a ? (expect(e).toBeGreaterThan(0), c = e) : expect(e).toEqual(c), expect(+d.attr("cx")).toBeGreaterThan(0), 
                    0 === a || 4 === a ? expect(+d.attr("cy")).toBe(0) : expect(+d.attr("cy")).toBeGreaterThan(0);
                }), a();
            }, i);
        }), it("Check dot labels in DOM", function(a) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: k,
                            identity: l
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .label");
                expect(b.length).toBe(5), b.each(function(a, b) {
                    var c = $(b);
                    expect(+c.attr("x")).toBeGreaterThan(0), 0 === a || 4 === a ? expect(+c.attr("y")).toBe(0) : expect(+c.attr("y")).toBeGreaterThan(0);
                });
                var c = $(b.get(0));
                expect(c.text()).toBe("0.5M");
                var d = $(b.get(2));
                expect(d.text()).toBe("0.49M"), a();
            }, i);
        });
        var m = [ "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z" ], n = m.map(function(b) {
            return a.mocks.dataViewScopeIdentity(b);
        });
        it("Check dots text overflow handled in DOM", function(a) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: m,
                            identity: n
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 999, 888, 777, 666, 555, 444, 333, 222, 111, 999, 888, 777, 666, 555, 444, 333, 222, 111, 999, 888, 777, 666, 555, 444, 333, 222 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .label");
                expect(b.length).toBeGreaterThan(0), b.each(function(a, b) {
                    var c = $(b);
                    expect(c.attr("class")).toContain("overflowed");
                }), a();
            }, i);
        }), it("Check partial highlighting dots in DOM", function(a) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: k,
                            identity: l
                        } ],
                        values: d.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            highlights: [ 1e5, 195e3, null, 18e4, 9e3 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .dot");
                expect(b.length).toBe(10);
                var c = "" + e.DefaultOpacity, d = "" + e.DimmedOpacity;
                expect(b[0].style.fillOpacity).toBe(d), expect(b[1].style.fillOpacity).toBe(c), 
                expect(b[2].style.fillOpacity).toBe(d), expect(b[3].style.fillOpacity).toBe(c), 
                expect(b[4].style.fillOpacity).toBe(d), expect(b[5].style.fillOpacity).toBe(c), 
                expect(b[6].style.fillOpacity).toBe(d), expect(b[7].style.fillOpacity).toBe(c), 
                expect(b[8].style.fillOpacity).toBe(d), expect(b[9].style.fillOpacity).toBe(c), 
                expect($(b[5]).attr("class")).toContain("null-value"), a();
            }, i);
        });
    }), describe("DataDotChart interactivity in DOM", function() {
        var b, f, g = a.mocks.createVisualHostServices(), h = 100, i = "" + e.DefaultOpacity, j = "" + e.DimmedOpacity, k = {
            columns: [ {
                displayName: "stringColumn",
                type: c.describeDataType(2048)
            }, {
                displayName: "numberColumn",
                isMeasure: !0,
                type: c.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "dateTimeColumn",
                isMeasure: !0,
                type: c.describeDataType(4)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), f = a.helpers.testDom("500", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("dataDotChart").create(), 
            b.init({
                element: f,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0,
                    isInteractiveLegend: !1
                }
            });
        });
        var l = [ "a", "b", "c", "d", "e" ], m = l.map(function(b) {
            return a.mocks.dataViewScopeIdentity(b);
        });
        it("Check select dot", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: l,
                            identity: m
                        } ],
                        values: d.createValueColumns([ {
                            source: k.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .dot");
                spyOn(g, "onSelect").and.callThrough(), b.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(i), 
                expect(b[1].style.fillOpacity).toBe(j), expect(b[2].style.fillOpacity).toBe(j), 
                expect(b[3].style.fillOpacity).toBe(j), expect(b[4].style.fillOpacity).toBe(j), 
                expect(g.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m[0] ]
                    } ]
                }), a();
            }, h);
        }), it("Check multi-select dot", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: l,
                            identity: m
                        } ],
                        values: d.createValueColumns([ {
                            source: k.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .dot");
                spyOn(g, "onSelect").and.callThrough(), b.first().d3Click(0, 0), b.last().d3Click(0, 0, 1), 
                expect(b[0].style.fillOpacity).toBe(i), expect(b[1].style.fillOpacity).toBe(j), 
                expect(b[2].style.fillOpacity).toBe(j), expect(b[3].style.fillOpacity).toBe(j), 
                expect(b[4].style.fillOpacity).toBe(i), expect(g.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m[0] ]
                    }, {
                        data: [ m[4] ]
                    } ]
                }), a();
            }, h);
        }), it("Check external clear selection", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: l,
                            identity: m
                        } ],
                        values: d.createValueColumns([ {
                            source: k.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var c = $(".dataDotChart .dot");
                spyOn(g, "onSelect").and.callThrough(), c.first().d3Click(0, 0), c.last().d3Click(0, 0, 1), 
                b.onClearSelection(), expect(c[0].style.fillOpacity).toBe(i), expect(c[1].style.fillOpacity).toBe(i), 
                expect(c[2].style.fillOpacity).toBe(i), expect(c[3].style.fillOpacity).toBe(i), 
                expect(c[4].style.fillOpacity).toBe(i), a();
            }, h);
        }), it("Check clearCatcher clear selection", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: l,
                            identity: m
                        } ],
                        values: d.createValueColumns([ {
                            source: k.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".dataDotChart .dot");
                b.first().d3Click(0, 0), b.last().d3Click(0, 0, 1), spyOn(g, "onSelect").and.callThrough(), 
                $(".clearCatcher").last().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(i), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(i), 
                expect(b[3].style.fillOpacity).toBe(i), expect(b[4].style.fillOpacity).toBe(i), 
                expect(g.onSelect).toHaveBeenCalledWith({
                    data: []
                }), a();
            }, h);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b, c) {
        var f, g, h = a.mocks.createVisualHostServices(), i = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        };
        c ? i.objects = {
            legend: {
                show: !0
            }
        } : i.objects = void 0;
        var k = {
            columns: [ {
                displayName: "col1",
                queryName: "col1"
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0
            }, {
                displayName: "col3",
                queryName: "col3",
                isMeasure: !0
            } ]
        };
        c ? k.objects = {
            legend: {
                show: !0
            }
        } : k.objects = void 0;
        var l = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        });
        beforeEach(function() {
            powerbi.common.localize = powerbi.common.createLocalizationService(), a.mocks.setLocale(powerbi.common.localize), 
            g = a.helpers.testDom("500", "500"), f = b ? powerbi.visuals.visualPluginFactory.create().getPlugin("pieChart").create() : powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("pieChart").create(), f.init({
                element: g,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                interactivity: {
                    isInteractiveLegend: b,
                    selection: !0
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("pie chart dom validation", function(b) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(3), 
                b();
            }, j);
        }), it("pie chart dom validation with partial highlights", function(c) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ],
                            highlights: [ 50, 0, 300 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM();
                var a = b ? .6 : powerbi.visuals.ColumnUtil.DimmedOpacity, d = $(".donutChart .slice");
                expect(d.length).toBe(3), d.each(function(b, c) {
                    return expect(parseFloat($(c).css("fill-opacity"))).toBeCloseTo(a, 0);
                });
                var e = $(".donutChart .slice-highlight");
                expect(e.length).toBe(3), e.each(function(a, b) {
                    return expect(parseFloat($(b).css("fill-opacity"))).toBeCloseTo(powerbi.visuals.ColumnUtil.DefaultOpacity, 2);
                }), c();
            }, j);
        }), it("pie chart should clear dom validation", function(c) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(3), 
                b && expect($(".legend-item").length).toBe(3), f.onDataChanged({
                    dataViews: [ {
                        metadata: i,
                        categorical: {
                            categories: [ {
                                source: i.columns[0],
                                values: [],
                                identity: [],
                                identityFields: [ l ]
                            } ],
                            values: e.createValueColumns([ {
                                source: i.columns[1],
                                values: []
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(0), 
                    b && expect($(".legend-item").length).toBe(0), c();
                }, j);
            }, j);
        }), it("pie chart dom validation with slices", function(c) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: k,
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: k.columns[1],
                            values: [ 200, 100, 150 ]
                        }, {
                            source: k.columns[2],
                            values: [ 300, 200, 50 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), b ? expect($(".donutChart .slice").length).toBe(3) : expect($(".donutChart .slice").length).toBe(6), 
                c();
            }, j);
        }), it("pie chart dom validation with normal slices", function(b) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 300, 300, 400 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = $(".donutChart");
                expect(a).toBeInDOM(), b();
            }, j);
        }), it("pie chart label dom validation with thin slices", function(d) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 5, 5, 990 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), b || c || expect($(".donutChart polyline").length).toBe(3), 
                d();
            }, 2 * j);
        }), it("pie chart with duplicate labels dom validation", function(d) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "abc", "abc", "abc" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(3), 
                b || c || (expect($(".donutChart polyline").length).toBe(3), expect($(".donutChart .labels text").length).toBe(3)), 
                d();
            }, j);
        }), it("pie chart dom validation with very long labels", function(b) {
            var c = powerbi.Prototype.inherit(i);
            c.objects = {
                categoryLabels: {
                    show: !0
                },
                labels: {
                    show: !1
                }
            }, f.onDataChanged({
                dataViews: [ {
                    metadata: c,
                    categorical: {
                        categories: [ {
                            source: c.columns[0],
                            values: [ "John Domo Who lives far far away", "Delta Force of the 56th Battalion", "Jean Tablau from the silicon valley" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: c.columns[1],
                            values: [ 300, 300, 400 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM();
                for (var a = $(".labels").find("text"), c = 0; c < a.length; c++) {
                    var d = $(a[c]).text().substr(-3);
                    expect(d).toEqual("...");
                }
                b();
            }, j);
        }), it("pie chart opacity validation with overlapping slices", function(d) {
            i.objects = {
                labels: {
                    show: !1
                },
                categoryLabels: {
                    show: !0
                }
            }, f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "abc", "def", "ghi", "jkl" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 1, 1, 5, 90 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), b || c || (expect($(".donutChart polyline").filter(function() {
                    return "0.5" === $(this).css("opacity");
                }).length).toBe(2), expect($(".donutChart text").filter(function() {
                    return "0" === $(this).css("opacity");
                }).length).toBe(2)), d();
            }, 2 * j);
        }), it("pie chart radius calculation validation", function(c) {
            var d = f;
            spyOn(d, "calculateRadius").and.callThrough(), f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "abc", "def", "ghi", "jkl" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 2, 3, 4, 90 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), expect(d.calculateRadius).toHaveBeenCalled();
                var a = d.calculateRadius(), e = $(".donutChart").height(), f = $(".donutChart").width(), g = Math.min(f, e), h = e / f, i = 2 + 1 / (1 + Math.exp(-5 * (h - 1))), j = b ? g / 2 : g / i;
                expect(a).toBeCloseTo(j, 0), c();
            }, 2 * j);
        }), it("pie chart slice select", function(c) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            });
            var d = $(".donutChart .slice"), g = 1, h = $(d[g]), k = d.not(h), m = i.objects && i.objects.legend;
            d.each(function() {
                expect(parseFloat($(this).css("fill-opacity"))).toBe(1);
            });
            var n = f;
            if (b) {
                var o = n.interactivityState, p = o.interactiveLegend;
                spyOn(n, "setInteractiveChosenSlice").and.callThrough(), spyOn(p, "updateLegend").and.callThrough();
            }
            h.d3Click(), setTimeout(function() {
                if (expect($(".donutChart .slice").length).toBe(3), b) expect(n.setInteractiveChosenSlice).toHaveBeenCalledWith(g), 
                expect(p.updateLegend).toHaveBeenCalledWith(g); else if (expect(parseFloat(h.css("fill-opacity"))).toBe(1), 
                k.each(function() {
                    expect(parseFloat($(this).css("fill-opacity"))).toBeLessThan(1);
                }), m) {
                    expect($(".legend .item").length).toBe(3);
                    var a = $(".legend .icon.tall");
                    expect(a[g].style.backgroundColor).toBe("rgb(55, 70, 73)"), expect(a[0].style.backgroundColor).toBe("rgb(166, 166, 166)"), 
                    expect(a[2].style.backgroundColor).toBe("rgb(166, 166, 166)");
                }
                var e = $(".clearCatcher");
                e.d3Click(), setTimeout(function() {
                    d.each(function() {
                        expect(parseFloat($(this).css("fill-opacity"))).toBe(1);
                    }), c();
                }, j);
            }, j);
        }), it("pie chart selecting a slice triggers select", function() {
            if (!b) {
                var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
                f.onDataChanged({
                    dataViews: [ {
                        metadata: i,
                        categorical: {
                            categories: [ {
                                source: i.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: c,
                                identityFields: [ l ]
                            } ],
                            values: e.createValueColumns([ {
                                source: i.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                });
                var d = spyOn(h, "onSelect"), g = $(".donutChart .slice"), j = 1;
                $(g[j]).d3Click(), expect(d).toHaveBeenCalled(), expect(d.calls.argsFor(0)[0].data[0]).toEqual({
                    data: [ c[j] ]
                });
            }
        }), it("pie chart highlighted slice select", function(c) {
            if (b) return void c();
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: d,
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ],
                            highlights: [ 50, 100, 350 ]
                        } ])
                    }
                } ]
            });
            var g = $(".donutChart .slice"), h = 1, k = $(g[h]), m = g.not(k);
            k.d3Click(), setTimeout(function() {
                expect($(".donutChart .slice").length).toBe(3), expect(parseFloat(k.css("fill-opacity"))).toBe(1), 
                m.each(function() {
                    expect(parseFloat($(this).css("fill-opacity"))).toBeLessThan(1);
                }), c();
            }, j);
        }), it("pie chart selecting a highlighted slice triggers select", function() {
            if (!b) {
                var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
                f.onDataChanged({
                    dataViews: [ {
                        metadata: i,
                        categorical: {
                            categories: [ {
                                source: i.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: c,
                                identityFields: [ l ]
                            } ],
                            values: e.createValueColumns([ {
                                source: i.columns[1],
                                values: [ 100, 200, 700 ],
                                highlights: [ 50, 100, 350 ]
                            } ])
                        }
                    } ]
                });
                var d = spyOn(h, "onSelect"), g = $(".donutChart .slice-highlight"), j = 1;
                $(g[j]).d3Click(), expect(d).toHaveBeenCalled(), expect(d.calls.argsFor(0)[0].data[0]).toEqual({
                    data: [ c[j] ]
                });
            }
        }), it("pie chart slice multi-select", function(c) {
            f.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ l ]
                        } ],
                        values: e.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            });
            var d = $(".donutChart .slice"), g = [ 1, 2 ], h = $(d).slice(1, 3), k = d.not(h), m = i.objects && i.objects.legend;
            d.each(function() {
                expect(parseFloat($(this).css("fill-opacity"))).toBe(1);
            });
            var n = f;
            if (b) {
                var o = n.interactivityState, p = o.interactiveLegend;
                spyOn(n, "setInteractiveChosenSlice").and.callThrough(), spyOn(p, "updateLegend").and.callThrough();
            }
            h.eq(0).d3Click(), h.eq(1).d3Click(0, 0, 1), setTimeout(function() {
                if (expect($(".donutChart .slice").length).toBe(3), b) g.forEach(function(a) {
                    expect(n.setInteractiveChosenSlice).toHaveBeenCalledWith(a), expect(p.updateLegend).toHaveBeenCalledWith(a);
                }); else if (h.each(function() {
                    expect(parseFloat($(this).css("fill-opacity"))).toBe(1);
                }), k.each(function() {
                    expect(parseFloat($(this).css("fill-opacity"))).toBeLessThan(1);
                }), m) {
                    expect($(".legend .item").length).toBe(3);
                    var a = $(".legend .icon.tall");
                    expect(a[0].style.backgroundColor).toBe("rgb(166, 166, 166)"), expect(a[1].style.backgroundColor).toBe("rgb(157, 73, 140)"), 
                    expect(a[2].style.backgroundColor).toBe("rgb(187, 203, 80)");
                    var e = $(".labels").find("text");
                    expect($(e[0]).css("opacity")).toBe("0"), expect($(e[1]).css("opacity")).toBe("0"), 
                    expect($(e[2]).css("opacity")).toBe("0");
                } else expect($(".labels").find("text").length).toBe(3);
                var f = $(".clearCatcher");
                f.d3Click(), setTimeout(function() {
                    d.each(function() {
                        expect(parseFloat($(this).css("fill-opacity"))).toBe(1);
                    }), c();
                }, j);
            }, j);
        }), it("pie chart legend interactivity", function() {
            if (!b) {
                f.onDataChanged({
                    dataViews: [ {
                        metadata: i,
                        categorical: {
                            categories: [ {
                                source: i.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ l ]
                            } ],
                            values: e.createValueColumns([ {
                                source: i.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                });
                var c = i.objects && i.objects.legend;
                if (c) {
                    var d = $(".legend .icon.tall"), g = $(".donutChart .slice");
                    d.first().d3Click(0, 0), setTimeout(function() {
                        expect(d[0].style.backgroundColor).toBe("rgb(1, 184, 170)"), expect(d[1].style.backgroundColor).toBe("rgb(166, 166, 166)"), 
                        expect(d[2].style.backgroundColor).toBe("rgb(166, 166, 166)"), expect(parseFloat(g[0].style.fillOpacity)).toBe(1), 
                        expect(parseFloat(g[1].style.fillOpacity)).toBeLessThan(1), expect(parseFloat(g[2].style.fillOpacity)).toBeLessThan(1);
                    }, 2 * j);
                }
            }
        }), c && it("legend formatting", function(b) {
            var d = {
                metadata: i,
                categorical: {
                    categories: [ {
                        source: i.columns[0],
                        values: [ "a", "b", "c" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                        identityFields: [ l ]
                    } ],
                    values: e.createValueColumns([ {
                        source: i.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            };
            d.metadata.objects = {
                legend: {
                    show: !0
                }
            }, f.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(3), 
                c && expect($(".legend").attr("orientation")).toBe(0..toString()), d.metadata.objects = {
                    legend: {
                        show: !0,
                        position: "Right"
                    }
                }, f.onDataChanged({
                    dataViews: [ d ]
                }), setTimeout(function() {
                    expect($(".donutChart")).toBeInDOM(), expect($(".donutChart .slice").length).toBe(3), 
                    c && expect($(".legend").attr("orientation")).toBe(2..toString());
                    var a = "Test Title";
                    d.metadata.objects = {
                        legend: {
                            show: !0,
                            position: "Right",
                            showTitle: !0,
                            titleText: a
                        }
                    }, f.onDataChanged({
                        dataViews: [ d ]
                    }), setTimeout(function() {
                        expect($(".donutChart")).toBeInDOM(), c && (expect($(".legend").attr("orientation")).toBe(2..toString()), 
                        expect($(".legendTitle").text()).toBe(a)), d.metadata.objects = {
                            legend: {
                                show: !1,
                                position: "Right"
                            }
                        }, f.onDataChanged({
                            dataViews: [ d ]
                        }), setTimeout(function() {
                            expect($(".donutChart")).toBeInDOM(), c && expect($(".legend").attr("orientation")).toBe(4..toString()), 
                            b();
                        }, j);
                    }, j);
                }, j);
            }, j);
        });
    }
    var c = a.utils.ColorUtility.convertFromRGBorHexToHex, d = powerbi.data.dsr.DataShapeUtility, e = powerbi.data.DataViewTransform, f = powerbi.visuals.DonutChart, g = powerbi.visuals.SelectionId, h = powerbi.data.SemanticType, i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = 10;
    describe("DonutChart", function() {
        function b(a) {
            return {
                identity: a.identity,
                measure: a.measure,
                measureFormat: a.measureFormat,
                percentage: a.value,
                index: a.index,
                label: a.label,
                selected: !1,
                highlightRatio: a.highlightRatio || 0,
                tooltipInfo: a.tooltipInfo,
                color: a.color,
                labelColor: powerbi.visuals.dataLabelUtils.defaultLabelColor
            };
        }
        var k = {
            columns: [ {
                displayName: "col1",
                queryName: "col1"
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0
            } ]
        }, l = {
            columns: [ {
                displayName: "col1",
                queryName: "col1",
                isMeasure: !0
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0
            }, {
                displayName: "col3",
                queryName: "col3",
                isMeasure: !0
            } ]
        }, m = {
            columns: [ {
                displayName: "col1",
                queryName: "col1"
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0
            }, {
                displayName: "col3",
                queryName: "col3",
                isMeasure: !0
            } ]
        }, n = {
            columns: [ {
                displayName: "col1",
                queryName: "col1"
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "$#,0;($#,0);$#,0"
                    }
                }
            }, {
                displayName: "col3",
                queryName: "col3",
                isMeasure: !0
            } ]
        }, o = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        });
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("DonutChart registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("donutChart").capabilities).toBe(powerbi.visuals.donutChartCapabilities);
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.donutChartCapabilities.suppressDefaultTitle).toBeUndefined();
        }), it("Donutchart preferred capabilities requires at least 2 row", function() {
            var b = {
                metadata: k,
                categorical: {
                    categories: [ {
                        source: k.columns[0],
                        values: [ "a" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a") ]
                    } ],
                    values: e.createValueColumns([ {
                        source: k.columns[1],
                        values: [ 100 ],
                        subtotal: 100
                    } ])
                }
            }, c = {
                metadata: k,
                categorical: {
                    categories: [ {
                        source: k.columns[0],
                        values: [ "a", "b" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                    } ],
                    values: e.createValueColumns([ {
                        source: k.columns[1],
                        values: [ 100, 200 ],
                        subtotal: 300
                    } ])
                }
            }, d = powerbi.visuals.visualPluginFactory.create().getPlugin("donutChart");
            expect(powerbi.DataViewAnalysis.supports(b, d.capabilities.dataViewMappings[0], !0)).toBe(!1), 
            expect(powerbi.DataViewAnalysis.supports(c, d.capabilities.dataViewMappings[0])).toBe(!0);
        }), describe("Data Labels", function() {
            function b(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !0
                    },
                    categoryLabels: {
                        show: !0
                    }
                };
                var d = {
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: b
                            } ])
                        }
                    } ]
                };
                return d;
            }
            var f, g, i = a.mocks.createVisualHostServices(), k = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(h.Integer)
                } ]
            };
            beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService());
            }), beforeEach(function() {
                g = a.helpers.testDom("500", "500"), f = powerbi.visuals.visualPluginFactory.createMinerva({
                    heatMap: !1,
                    dataDotChartOverride: !1
                }).getPlugin("donutChart").create(), f.init({
                    element: g,
                    host: i,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: g.height(),
                        width: g.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("NaN in values shows a warning", function(a) {
                var c = jasmine.createSpy("warning");
                i.setWarnings = c;
                var d = b([ 300, NaN, 700 ]);
                f.onDataChanged(d), setTimeout(function() {
                    expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                    a();
                }, j);
            }), it("Negative Infinity in values shows a warning", function(a) {
                var c = jasmine.createSpy("warning");
                i.setWarnings = c;
                var d = b([ 300, Number.NEGATIVE_INFINITY, 700 ]);
                f.onDataChanged(d), setTimeout(function() {
                    expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    a();
                }, j);
            }), it("Positive Infinity in values shows a warning", function(a) {
                var c = jasmine.createSpy("warning");
                i.setWarnings = c;
                var d = b([ 300, Number.POSITIVE_INFINITY, 700 ]);
                f.onDataChanged(d), setTimeout(function() {
                    expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    a();
                }, j);
            }), it("Out of range value in values shows a warning", function(a) {
                var c = jasmine.createSpy("warning");
                i.setWarnings = c;
                var d = b([ 300, 1e301, 700 ]);
                f.onDataChanged(d), setTimeout(function() {
                    expect(c).toHaveBeenCalled(), expect(c.calls.count()).toBe(1), expect(c.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                    a();
                }, j);
            }), it("All are good in values shows a warning", function(a) {
                var c = jasmine.createSpy("warning");
                i.setWarnings = c;
                var d = b([ 300, 200, 700 ]);
                f.onDataChanged(d), setTimeout(function() {
                    expect(c).not.toHaveBeenCalled(), a();
                }, j);
            }), it("Show the correct text - measure and category", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !0,
                        labelPrecision: 0
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toBe("a 100"), expect($(a[1]).text()).toBe("b 200"), expect($(a[2]).text()).toBe("c 700"), 
                    b();
                }, j);
            }), it("Show the correct text - measure with display units and no precision", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !0,
                        labelDisplayUnits: 1e3,
                        labelPrecision: 0
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 12345, 15533, 776 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toBe("a 12K"), expect($(a[1]).text()).toBe("b 16K"), expect($(a[2]).text()).toBe("c 1K"), 
                    b();
                }, j);
            }), it("Show the correct text - measure with display units and precision", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !0,
                        labelDisplayUnits: 1e6,
                        labelPrecision: 3
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 12345, 15533, 776 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toBe("a 0.012M"), expect($(a[1]).text()).toBe("b 0.016M"), 
                    expect($(a[2]).text()).toBe("c 0.001M"), b();
                }, j);
            }), it("Show the correct text - measure", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !0,
                        labelPrecision: 0
                    },
                    categoryLabels: {
                        show: !1
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toBe("100"), expect($(a[1]).text()).toBe("200"), expect($(a[2]).text()).toBe("700"), 
                    b();
                }, j);
            }), it("Show the correct text - category", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !1
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toBe("a"), expect($(a[1]).text()).toBe("b"), expect($(a[2]).text()).toBe("c"), 
                    b();
                }, j);
            }), it("No data labels", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !1
                    },
                    categoryLabels: {
                        show: !1
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).length).toBe(0), b();
                }, j);
            }), it("Verify data labels - default style", function(b) {
                var d = powerbi.Prototype.inherit(k);
                d.objects = {
                    labels: {
                        show: !0
                    },
                    categoryLabels: {
                        show: !1
                    }
                };
                var h = "rgb(105, 105, 105)", i = "1", l = "11px";
                f.onDataChanged({
                    dataViews: [ {
                        metadata: d,
                        categorical: {
                            categories: [ {
                                source: d.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: d.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text"), d = $(a[0]).css("fill");
                    expect(c(d)).toBe(c(h)), expect($(a[0]).css("opacity")).toBe(i), expect($(a[0]).css("font-size")).toBe(l), 
                    b();
                }, j);
            }), it("Verify data labels - changing measure color", function(b) {
                var d = {
                    solid: {
                        color: "rgb(255, 0, 0)"
                    }
                }, h = powerbi.Prototype.inherit(k);
                h.objects = {
                    labels: {
                        show: !0,
                        color: d
                    },
                    categoryLabels: {
                        show: !1
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: h.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text"), e = $(a[0]).css("fill");
                    expect(c(e)).toBe(c(d.solid.color)), b();
                }, j);
            }), it("Verify data labels - changing category color", function(b) {
                var d = {
                    solid: {
                        color: "rgb(255, 0, 0)"
                    }
                }, h = powerbi.Prototype.inherit(k);
                h.objects = {
                    labels: {
                        show: !1,
                        color: d
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: h.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text"), e = $(a[0]).css("fill");
                    expect(c(e)).toBe(c(d.solid.color)), b();
                }, j);
            }), it("Long data labels", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !1
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "abcdefghijklmnopqrstuvwxyz", "01234567890123456789", "abcdefg", "d", "e" ],
                                identity: [ a.mocks.dataViewScopeIdentity("abcdefghijklmnopqrstuvwxyz"), a.mocks.dataViewScopeIdentity("01234567890123456789"), a.mocks.dataViewScopeIdentity("abcdefg"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 110, 120, 130, 140, 150 ],
                                subtotal: 650
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect($(a[0]).text()).toContain("..."), expect($(a[1]).text()).toContain("..."), 
                    expect($(a[2]).text()).toBe("abcdefg"), expect($(a[3]).text()).toBe("d"), expect($(a[4]).text()).toBe("e"), 
                    b();
                }, j);
            }), it("Data lables with null", function(b) {
                var c = powerbi.Prototype.inherit(k);
                c.objects = {
                    labels: {
                        show: !1
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, f.onDataChanged({
                    dataViews: [ {
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ o ]
                            } ],
                            values: e.createValueColumns([ {
                                source: c.columns[1],
                                values: [ 100, 200, 700 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = g.find(".donutChart .labels").find("text");
                    expect(a.length).toBe(3), b();
                }, j);
            });
        }), describe("converter", function() {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
            it("empty", function() {
                var a = {
                    categorical: {
                        categorical: {
                            categories: [ {
                                source: k.columns[0],
                                values: []
                            } ],
                            values: e.createValueColumns([ {
                                source: k.columns[1],
                                values: [],
                                subtotal: 0
                            } ])
                        }
                    },
                    metadata: k
                }, b = f.converter(a, !0, i), c = {
                    dataPointsToDeprecate: [],
                    dataPointsToEnumerate: [],
                    dataPoints: [],
                    legendData: {
                        title: "",
                        dataPoints: []
                    },
                    hasHighlights: !1,
                    dataLabelsSettings: powerbi.visuals.dataLabelUtils.getDefaultDonutLabelSettings(),
                    legendObjectProperties: void 0
                };
                expect(b).toEqual(c);
            }), it("categorical, with slicing", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: k.columns[1],
                            values: [ -300, null, 700 ]
                        } ])
                    },
                    metadata: k
                }, d = f.converter(a, !0, i), h = c.map(function(a) {
                    return g.createWithId(a);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), l = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], m = [ {
                    identity: h[0],
                    measure: -300,
                    value: .3,
                    index: 0,
                    label: "a",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "-300"
                    } ],
                    color: l[0]
                }, {
                    identity: h[1],
                    measure: 0,
                    value: 0,
                    index: 1,
                    label: "b",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "0"
                    } ],
                    color: l[1]
                }, {
                    identity: h[2],
                    measure: 700,
                    value: .7,
                    index: 2,
                    label: "c",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    color: l[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(m), expect(d.legendData.title).toBe("col1"), expect(d.legendData.dataPoints[0].label).toBe("a");
            }), it("categorical, no slicing", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: k.columns[1],
                            values: [ -300, null, 700 ]
                        } ])
                    },
                    metadata: k
                }, d = f.converter(a, !1, i), h = c.map(function(a) {
                    return g.createWithId(a);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), l = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], m = [ {
                    identity: h[0],
                    measure: -300,
                    value: .3,
                    index: 0,
                    label: "a",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "-300"
                    } ],
                    color: l[0]
                }, {
                    identity: h[1],
                    measure: 0,
                    value: 0,
                    index: 1,
                    label: "b",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "0"
                    } ],
                    color: l[1]
                }, {
                    identity: h[2],
                    measure: 700,
                    value: .7,
                    index: 2,
                    label: "c",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    color: l[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(m), expect(d.legendData.title).toBe("col1"), expect(d.legendData.dataPoints[0].label).toBe("a");
            }), it("category and series, with slicing", function() {
                var d = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: m.columns[1],
                            values: [ -200, null, 150 ],
                            identity: a.mocks.dataViewScopeIdentity("foo")
                        }, {
                            source: m.columns[2],
                            values: [ -300, 300, -50 ],
                            identity: a.mocks.dataViewScopeIdentity("bar")
                        } ])
                    },
                    metadata: m
                }, h = f.converter(d, !0, i), j = powerbi.data.SQExprShortSerializer.serializeArray(d.categorical.categories[0].identityFields), k = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], l = [ {
                    identity: g.createWithIds(c[0], d.categorical.values[0].identity),
                    measure: -200,
                    value: .2,
                    index: 0,
                    label: "col2",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "-200"
                    } ],
                    color: k[0]
                }, {
                    identity: g.createWithIds(c[0], d.categorical.values[1].identity),
                    measure: -300,
                    value: .3,
                    index: 0,
                    label: "col3",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col3",
                        value: "-300"
                    } ],
                    color: k[0]
                }, {
                    identity: g.createWithIds(c[1], d.categorical.values[0].identity),
                    measure: 0,
                    value: 0,
                    index: 1,
                    label: "col2",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "0"
                    } ],
                    color: k[1]
                }, {
                    identity: g.createWithIds(c[1], d.categorical.values[1].identity),
                    measure: 300,
                    value: .3,
                    index: 1,
                    label: "col3",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col3",
                        value: "300"
                    } ],
                    color: k[1]
                }, {
                    identity: g.createWithIds(c[2], d.categorical.values[0].identity),
                    measure: 150,
                    value: .15,
                    index: 2,
                    label: "col2",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "150"
                    } ],
                    color: k[2]
                }, {
                    identity: g.createWithIds(c[2], d.categorical.values[1].identity),
                    measure: -50,
                    value: .05,
                    index: 2,
                    label: "col3",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col3",
                        value: "-50"
                    } ],
                    color: k[2]
                } ].map(b);
                expect(h.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(l), expect(h.legendData.title).toBe("col1"), expect(h.legendData.dataPoints.length).toBe(3), 
                expect(h.legendData.dataPoints[0].label).toBe("a"), expect(h.legendData.dataPoints[1].label).toBe("b"), 
                expect(h.legendData.dataPoints[2].label).toBe("c");
            }), it("categorical, no slicing, formatted color", function() {
                var a = "#00FF00", d = {
                    categorical: {
                        categories: [ {
                            source: k.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ],
                            objects: [ void 0, {
                                dataPoint: {
                                    fill: {
                                        solid: {
                                            color: a
                                        }
                                    }
                                }
                            }, void 0 ]
                        } ],
                        values: e.createValueColumns([ {
                            source: k.columns[1],
                            values: [ -300, null, 700 ]
                        } ])
                    },
                    metadata: k
                }, h = f.converter(d, !1, i), j = c.map(function(a) {
                    return g.createWithId(a);
                }), l = powerbi.data.SQExprShortSerializer.serializeArray(d.categorical.categories[0].identityFields), m = [ i.getColorByScale(l, "a").value, a, i.getColorByScale(l, "c").value ], n = [ {
                    identity: j[0],
                    measure: -300,
                    value: .3,
                    index: 0,
                    label: "a",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "-300"
                    } ],
                    color: m[0]
                }, {
                    identity: j[1],
                    measure: 0,
                    value: 0,
                    index: 1,
                    label: "b",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "0"
                    } ],
                    color: m[1]
                }, {
                    identity: j[2],
                    measure: 700,
                    value: .7,
                    index: 2,
                    label: "c",
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    color: m[2]
                } ].map(b);
                expect(h.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(n), expect(h.legendData.title).toBe("col1"), expect(h.legendData.dataPoints[0].label).toBe("a");
            }), it("categorical multi-measure, no slicing", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: n.columns[1],
                            values: [ -200, null, 150 ]
                        }, {
                            source: n.columns[2],
                            values: [ -300, 300, -50 ]
                        } ])
                    },
                    metadata: n
                }, d = f.converter(a, !1, i), h = c.map(function(a) {
                    return g.createWithId(a);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), k = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], l = [ {
                    identity: h[0],
                    measure: -500,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "a",
                    value: .5,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "($500)"
                    } ],
                    color: k[0]
                }, {
                    identity: h[1],
                    label: "b",
                    measure: 300,
                    measureFormat: "$#,0;($#,0);$#,0",
                    value: .3,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "$300"
                    } ],
                    color: k[1]
                }, {
                    identity: h[2],
                    measure: 100,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "c",
                    value: .2,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "$100"
                    } ],
                    color: k[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(l), expect(d.legendData.title).toBe("col1"), expect(d.legendData.dataPoints[0].label).toBe("a");
            }), it("categorical multi-measure, with slicing", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: m.columns[1],
                            values: [ -200, null, 150 ]
                        }, {
                            source: m.columns[2],
                            values: [ -300, 300, -50 ]
                        } ])
                    },
                    metadata: m
                }, d = f.converter(a, !0, i), h = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), j = [ i.getColorByScale(h, "a").value, i.getColorByScale(h, "b").value, i.getColorByScale(h, "c").value ], k = [ {
                    identity: g.createWithIdAndMeasure(c[0], "col2"),
                    measure: -200,
                    label: "col2",
                    value: .2,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "-200"
                    } ],
                    color: j[0]
                }, {
                    identity: g.createWithIdAndMeasure(c[0], "col3"),
                    measure: -300,
                    label: "col3",
                    value: .3,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col3",
                        value: "-300"
                    } ],
                    color: j[0]
                }, {
                    identity: g.createWithIdAndMeasure(c[1], "col2"),
                    measure: 0,
                    label: "col2",
                    value: 0,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "0"
                    } ],
                    color: j[1]
                }, {
                    identity: g.createWithIdAndMeasure(c[1], "col3"),
                    measure: 300,
                    label: "col3",
                    value: .3,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col3",
                        value: "300"
                    } ],
                    color: j[1]
                }, {
                    identity: g.createWithIdAndMeasure(c[2], "col2"),
                    label: "col2",
                    measure: 150,
                    value: .15,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "150"
                    } ],
                    color: j[2]
                }, {
                    identity: g.createWithIdAndMeasure(c[2], "col3"),
                    label: "col3",
                    measure: -50,
                    value: .05,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col3",
                        value: "-50"
                    } ],
                    color: j[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(k), expect(d.legendData.title).toBe("col1"), expect(d.legendData.dataPoints.length).toBe(3), 
                expect(d.legendData.dataPoints[0].label).toBe("a"), expect(d.legendData.dataPoints[1].label).toBe("b"), 
                expect(d.legendData.dataPoints[2].label).toBe("c");
            }), it("non-categorical multi-measure, with slicing", function() {
                var a = powerbi.Prototype.inherit(l.columns[0]);
                a.objects = {
                    dataPoint: {
                        fill: {
                            solid: {
                                color: "red"
                            }
                        }
                    }
                };
                var c = {
                    categorical: {
                        values: e.createValueColumns([ {
                            source: a,
                            values: [ 200 ]
                        }, {
                            source: l.columns[1],
                            values: [ -300 ]
                        }, {
                            source: l.columns[2],
                            values: [ 500 ]
                        } ])
                    },
                    metadata: l
                }, d = f.converter(c, !0, i), h = l.columns.map(function(a) {
                    return g.createWithMeasure(a.displayName);
                }), j = [ "red", i.getColor(l.columns[1].queryName).value, i.getColor(l.columns[2].queryName).value ], k = [ {
                    identity: h[0],
                    label: "col1",
                    measure: 200,
                    value: .2,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "200"
                    } ],
                    color: j[0]
                }, {
                    identity: h[1],
                    label: "col2",
                    measure: -300,
                    value: .3,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "-300"
                    } ],
                    color: j[1]
                }, {
                    identity: h[2],
                    label: "col3",
                    measure: 500,
                    value: .5,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col3",
                        value: "500"
                    } ],
                    color: j[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(k), expect(d.legendData.title).toBe(""), expect(d.legendData.dataPoints[0].label).toBe("col1");
            }), it("non-categorical single-measure, with slicing", function() {
                var a = {
                    categorical: {
                        values: e.createValueColumns([ {
                            source: l.columns[0],
                            values: [ 200 ]
                        } ])
                    },
                    metadata: l
                }, c = f.converter(a, !0, i), d = l.columns.map(function(a) {
                    return g.createWithMeasure(a.displayName);
                }), h = [ i.getColor(l.columns[0].queryName).value ], j = [ {
                    identity: d[0],
                    label: "col1",
                    measure: 200,
                    value: 1,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "200"
                    } ],
                    color: h[0]
                } ].map(b);
                expect(c.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(j), expect(c.legendData.title).toBe(""), expect(c.legendData.dataPoints[0].label).toBe("col1");
            }), it("non-categorical series", function() {
                var c = {
                    categorical: {
                        values: e.createValueColumns([ {
                            source: l.columns[0],
                            values: [ 200 ],
                            identity: a.mocks.dataViewScopeIdentity("col1")
                        }, {
                            source: l.columns[1],
                            values: [ 300 ],
                            identity: a.mocks.dataViewScopeIdentity("col2")
                        } ], [ o ])
                    },
                    metadata: k
                };
                c.categorical.values.source = k[1];
                var d = f.converter(c, !0, i), h = c.categorical.values.map(function(a) {
                    return g.createWithId(a.identity);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray([ o ]), m = [ i.getColorByScale(j, "col1").value, i.getColorByScale(j, "col2").value ], n = [ {
                    identity: h[0],
                    label: "col1",
                    measure: 200,
                    value: .4,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "200"
                    } ],
                    color: m[0]
                }, {
                    identity: h[1],
                    label: "col2",
                    measure: 300,
                    value: .6,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "300"
                    } ],
                    color: m[1]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(n), expect(d.legendData.title).toBe(""), expect(d.legendData.dataPoints[0].label).toBe("col1"), 
                expect(d.legendData.dataPoints[1].label).toBe("col2");
            }), it("with highlights", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: n.columns[1],
                            values: [ -200, null, 150 ],
                            highlights: [ -100, null, 10 ]
                        }, {
                            source: n.columns[2],
                            values: [ -300, 300, -50 ],
                            highlights: [ -150, 75, 50 ]
                        } ])
                    },
                    metadata: null
                }, d = f.converter(a, !1, i), h = c.map(function(a) {
                    return g.createWithId(a);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), k = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], l = [ {
                    identity: h[0],
                    measure: -500,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "a",
                    value: .5,
                    highlightRatio: .5,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "($500)"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "($250)"
                    } ],
                    color: k[0]
                }, {
                    identity: h[1],
                    label: "b",
                    measure: 300,
                    measureFormat: "$#,0;($#,0);$#,0",
                    value: .3,
                    highlightRatio: .25,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "$300"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "$75"
                    } ],
                    color: k[1]
                }, {
                    identity: h[2],
                    measure: 100,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "c",
                    value: .2,
                    highlightRatio: .3,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "$100"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "$30"
                    } ],
                    color: k[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(l);
            }), it("with highlights - tooltip validation", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: n.columns[1],
                            values: [ -200, null, 150 ],
                            highlights: [ 0, null, 10 ]
                        }, {
                            source: n.columns[2],
                            values: [ -300, 300, -50 ],
                            highlights: [ 0, 75, 50 ]
                        } ])
                    },
                    metadata: null
                }, b = f.converter(a, !1, i);
                expect(b.dataPoints[0].data.tooltipInfo).toEqual([ {
                    displayName: "col1",
                    value: "a"
                }, {
                    displayName: "col2",
                    value: "($500)"
                } ]), expect(b.dataPoints[1].data.tooltipInfo).toEqual([ {
                    displayName: "col1",
                    value: "b"
                }, {
                    displayName: "col2",
                    value: "$300"
                }, {
                    displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                    value: "$75"
                } ]), expect(b.dataPoints[2].data.tooltipInfo).toEqual([ {
                    displayName: "col1",
                    value: "c"
                }, {
                    displayName: "col2",
                    value: "$100"
                }, {
                    displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                    value: "$30"
                } ]);
            }), it("on/off data lables - tooltip validation", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: n.columns[1],
                            values: [ -200, 100, 150 ]
                        }, {
                            source: n.columns[2],
                            values: [ -300, 300, -50 ]
                        } ])
                    },
                    metadata: null
                }, b = [ {
                    displayName: "col1",
                    value: "a"
                }, {
                    displayName: "col2",
                    value: "($500)"
                } ], d = [ {
                    displayName: "col1",
                    value: "b"
                }, {
                    displayName: "col2",
                    value: "$400"
                } ], g = [ {
                    displayName: "col1",
                    value: "c"
                }, {
                    displayName: "col2",
                    value: "$100"
                } ], h = f.converter(a, !1, i);
                expect(h.dataPoints[0].data.tooltipInfo).toEqual(b), expect(h.dataPoints[1].data.tooltipInfo).toEqual(d), 
                expect(h.dataPoints[2].data.tooltipInfo).toEqual(g), m.objects = {
                    labels: {
                        show: !0
                    },
                    categoryLabels: {
                        show: !1
                    }
                }, h = f.converter(a, !1, i), expect(h.dataPoints[0].data.tooltipInfo).toEqual(b), 
                expect(h.dataPoints[1].data.tooltipInfo).toEqual(d), expect(h.dataPoints[2].data.tooltipInfo).toEqual(g), 
                m.objects = {
                    labels: {
                        show: !0
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, h = f.converter(a, !1, i), expect(h.dataPoints[0].data.tooltipInfo).toEqual(b), 
                expect(h.dataPoints[1].data.tooltipInfo).toEqual(d), expect(h.dataPoints[2].data.tooltipInfo).toEqual(g), 
                m.objects = {
                    labels: {
                        show: !1
                    },
                    categoryLabels: {
                        show: !0
                    }
                }, h = f.converter(a, !1, i), expect(h.dataPoints[0].data.tooltipInfo).toEqual(b), 
                expect(h.dataPoints[1].data.tooltipInfo).toEqual(d), expect(h.dataPoints[2].data.tooltipInfo).toEqual(g);
            }), it("with highlights that overflow", function() {
                var a = {
                    categorical: {
                        categories: [ {
                            source: m.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ o ]
                        } ],
                        values: e.createValueColumns([ {
                            source: n.columns[1],
                            values: [ -200, null, 150 ],
                            highlights: [ -100, null, 250 ]
                        }, {
                            source: n.columns[2],
                            values: [ -300, 300, -50 ],
                            highlights: [ -150, 75, 50 ]
                        } ])
                    },
                    metadata: null
                }, d = f.converter(a, !1, i), h = c.map(function(a) {
                    return g.createWithId(a);
                }), j = powerbi.data.SQExprShortSerializer.serializeArray(a.categorical.categories[0].identityFields), k = [ i.getColorByScale(j, "a").value, i.getColorByScale(j, "b").value, i.getColorByScale(j, "c").value ], l = [ {
                    identity: h[0],
                    measure: -250,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "a",
                    value: .4,
                    highlightRatio: 1,
                    index: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "($250)"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "($250)"
                    } ],
                    color: k[0]
                }, {
                    identity: h[1],
                    label: "b",
                    measure: 75,
                    measureFormat: "$#,0;($#,0);$#,0",
                    value: .12,
                    highlightRatio: 1,
                    index: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "$75"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "$75"
                    } ],
                    color: k[1]
                }, {
                    identity: h[2],
                    measure: 300,
                    measureFormat: "$#,0;($#,0);$#,0",
                    label: "c",
                    value: .48,
                    highlightRatio: 1,
                    index: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "$300"
                    }, {
                        displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                        value: "$300"
                    } ],
                    color: k[2]
                } ].map(b);
                expect(d.dataPoints.map(function(a) {
                    return a.data;
                })).toEqual(l);
            });
        }), it("non-categorical multi-measure tooltip values test", function() {
            var a = {
                columns: [ {
                    displayName: "a",
                    isMeasure: !0
                }, {
                    displayName: "b",
                    isMeasure: !0
                }, {
                    displayName: "c",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: e.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 1 ]
                    }, {
                        source: a.columns[1],
                        values: [ 2 ]
                    }, {
                        source: a.columns[2],
                        values: [ 3 ]
                    } ])
                }
            }, c = f.converter(b, !1, i);
            expect(c.dataPoints[0].data.tooltipInfo).toEqual([ {
                displayName: "a",
                value: "1"
            } ]), expect(c.dataPoints[1].data.tooltipInfo).toEqual([ {
                displayName: "b",
                value: "2"
            } ]), expect(c.dataPoints[2].data.tooltipInfo).toEqual([ {
                displayName: "c",
                value: "3"
            } ]);
        });
    }), describe("PieChart DOM validation", function() {
        return b(!1, !1);
    }), describe("PieChart DOM validation - with legend", function() {
        return b(!1, !0);
    }), describe("Interactive PieChart DOM validation", function() {
        return b(!0, !1);
    }), describe("Pie Chart Interactivity", function() {
        function b(a, b, c) {
            var d = g, e = d.interactivityState, f = e.interactiveLegend;
            spyOn(d, "setInteractiveChosenSlice").and.callThrough(), spyOn(f, "updateLegend").and.callThrough(), 
            f.dragLegend(a), setTimeout(function() {
                expect(d.setInteractiveChosenSlice).toHaveBeenCalledWith(b), expect(f.updateLegend).toHaveBeenCalledWith(b), 
                expect($(".donutChart").length).toBe(1), expect($(".donutLegend").length).toBe(1), 
                expect($(".legend-item").length).toBe(3), expect($(".donutChart .slice").length).toBe(3), 
                c();
            }, j);
        }
        function f(a, b) {
            var c = g, d = c.interactivityState, e = d.interactiveLegend;
            spyOn(c, "setInteractiveChosenSlice").and.callThrough(), spyOn(e, "updateLegend").and.callThrough();
            var f = $(".legend-item");
            expect(f.length).toEqual(3), expect(f.eq(0).attr("data-legend-index")).toEqual("2"), 
            expect(f.eq(1).attr("data-legend-index")).toEqual("0"), expect(f.eq(2).attr("data-legend-index")).toEqual("1"), 
            e.dragLegend(a), setTimeout(function() {
                var c = $(".legend-item");
                a ? (expect(c.eq(0).attr("data-legend-index")).toBe("0"), expect(c.eq(1).attr("data-legend-index")).toBe("1"), 
                expect(c.eq(2).attr("data-legend-index")).toBe("2")) : (expect(c.eq(0).attr("data-legend-index")).toBe("1"), 
                expect(c.eq(1).attr("data-legend-index")).toBe("2"), expect(c.eq(2).attr("data-legend-index")).toBe("0")), 
                b();
            }, j);
        }
        var g, h, i = a.mocks.createVisualHostServices(), k = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            powerbi.common.localize = powerbi.common.createLocalizationService(), a.mocks.setLocale(powerbi.common.localize), 
            h = a.helpers.testDom("500", "500"), g = powerbi.visuals.visualPluginFactory.create().getPlugin("pieChart").create(), 
            g.init({
                element: h,
                host: i,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: h.height(),
                    width: h.width()
                },
                interactivity: {
                    isInteractiveLegend: !0
                },
                animation: {
                    transitionImmediate: !0
                }
            });
            var b = powerbi.Prototype.inherit(k);
            b.objects = {
                categoryLabels: {
                    show: !0
                },
                labels: {
                    show: !1
                }
            };
            var c = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "p"
            });
            g.onDataChanged({
                dataViews: [ {
                    metadata: b,
                    categorical: {
                        categories: [ {
                            source: b.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ c ]
                        } ],
                        values: e.createValueColumns([ {
                            source: b.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            });
        }), it("legend structure", function(a) {
            setTimeout(function() {
                expect($("[data-legend-index=0]>.category").text()).toBe("a"), expect($("[data-legend-index=0]>.value").text()).toBe("100"), 
                expect(c($("[data-legend-index=0]>.percentage").css("color"))).toBe(c($(".slice").eq(0).css("fill"))), 
                expect($("[data-legend-index=1]>.category").text()).toBe("b"), expect($("[data-legend-index=1]>.value").text()).toBe("200"), 
                expect(c($("[data-legend-index=1]>.percentage").css("color"))).toBe(c($(".slice").eq(1).css("fill"))), 
                expect($("[data-legend-index=2]>.category").text()).toBe("c"), expect($("[data-legend-index=2]>.value").text()).toBe("700"), 
                expect(c($("[data-legend-index=2]>.percentage").css("color"))).toBe(c($(".slice").eq(2).css("fill"))), 
                expect($(".donutLegend").length).toBe(1), expect($(".legend-item").length).toBe(3), 
                expect($(".donutChart .slice").length).toBe(3), a();
            }, j);
        }), it("slice drag", function(a) {
            function b(a, b) {
                var c = document.createEvent("MouseEvents");
                c.sourceEvent = {
                    type: "mouseEvent",
                    pageX: a,
                    pageY: b,
                    stopPropagation: function() {}
                }, d3.event = c;
            }
            var c = g, d = c.interactivityState;
            spyOn(powerbi.visuals.SVGUtil, "translateAndRotate"), spyOn(c, "setInteractiveChosenSlice").and.callThrough(), 
            spyOn(c, "getAngleFromDragEvent").and.callThrough();
            var e = d.donutCenter, f = {
                x: e.x,
                y: e.y - 20
            }, h = {
                x: e.x,
                y: e.y + 20
            }, i = c.interactivityState.currentRotate;
            b(f.x, f.y), c.interactiveDragStart(), b(h.x, h.y), c.interactiveDragMove(), c.interactiveDragEnd(), 
            expect(c.getAngleFromDragEvent.calls.count()).toBe(2), expect(powerbi.visuals.SVGUtil.translateAndRotate.calls.first().args[4]).toBe(i + 180), 
            expect(c.setInteractiveChosenSlice).toHaveBeenCalledWith(2), a();
        }), it("legend items swipe right", function(a) {
            return b(!1, 2, a);
        }), it("legend items swipe left", function(a) {
            return b(!0, 1, a);
        }), it("legend items are rotated correctly when swiping right", function(a) {
            return f(!1, a);
        }), it("legend items are rotated correctly when swiping left", function(a) {
            return f(!0, a);
        });
    }), describe("Enumerate Objects", function() {
        var b, c, f = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        }, g = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        });
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("donutChart").create(), 
            b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check enumeration for categorical", function(c) {
            f.objects = {
                labels: {
                    show: !1
                },
                categoryLabels: {
                    show: !0
                }
            };
            var d = {
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: f.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ g ]
                        } ],
                        values: e.createValueColumns([ {
                            source: f.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            };
            b.onDataChanged(d);
            var h = b.enumerateObjectInstances({
                objectName: "dataPoint"
            });
            expect(h.length).toBe(3), expect(h[0].displayName).toEqual("a"), expect(h[0].properties.fill).toBeDefined(), 
            expect(h[1].displayName).toEqual("b"), expect(h[1].properties.fill).toBeDefined(), 
            c();
        }), it("Check enumeration for category and series", function(c) {
            var d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                } ]
            }, h = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ], i = {
                dataViews: [ {
                    metadata: f,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: h,
                            identityFields: [ g ]
                        } ],
                        values: e.createValueColumns([ {
                            source: d.columns[1],
                            values: [ -200, null, 150 ],
                            identity: a.mocks.dataViewScopeIdentity("foo")
                        }, {
                            source: d.columns[2],
                            values: [ -300, 300, -50 ],
                            identity: a.mocks.dataViewScopeIdentity("bar")
                        } ])
                    }
                } ]
            };
            b.onDataChanged(i);
            var j = b.enumerateObjectInstances({
                objectName: "dataPoint"
            });
            expect(j.length).toBe(3), expect(j[0].displayName).toEqual("a"), expect(j[0].properties.fill).toBeDefined(), 
            expect(j[1].displayName).toEqual("b"), expect(j[1].properties.fill).toBeDefined(), 
            c();
        }), it("Check datapoints enumeration after hiding legend", function(c) {
            var d = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "a", "b", "c" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                        identityFields: [ g ]
                    } ],
                    values: e.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            };
            d.metadata.objects = {
                legend: {
                    show: !1
                }
            }, b.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                expect($(".legend").attr("orientation")).toBe(4..toString());
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(3), c();
            }, j);
        });
    }), describe("Pie Chart Web Animation", function() {
        var b, c, f = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        }, h = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        });
        beforeEach(function() {
            powerbi.common.localize = powerbi.common.createLocalizationService(), a.mocks.setLocale(powerbi.common.localize), 
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("pieChart").create(), b.init({
                element: c,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                interactivity: {
                    selection: !0
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("pie chart partial highlight animations", function(c) {
            var d = {
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ h ]
                        } ],
                        values: e.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 100, 200, 700 ]
                        } ])
                    }
                } ]
            }, f = {
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ h ]
                        } ],
                        values: e.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 100, 200, 700 ],
                            highlights: [ 50, 26, 560 ]
                        } ])
                    }
                } ]
            }, i = {
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ h ]
                        } ],
                        values: e.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 100, 200, 700 ],
                            highlights: [ 20, 126, 60 ]
                        } ])
                    }
                } ]
            };
            b.onDataChanged(d), setTimeout(function() {
                var a = $(".donutChart"), e = a.attr("height"), g = a.attr("width"), h = b.animator;
                spyOn(h, "animate").and.callThrough(), b.onDataChanged(f), b.onDataChanged(i), b.onDataChanged(d), 
                expect(h).toBeTruthy(), expect(h.animate).toHaveBeenCalled(), setTimeout(function() {
                    var a = $(".donutChart");
                    expect(a).toBeInDOM(), expect(a.attr("height")).toBe(e), expect(a.attr("width")).toBe(g), 
                    c();
                }, j);
            }, j);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.data.DataViewTransform, c = powerbi.visuals.FunnelChart, d = powerbi.data.dsr.DataShapeUtility, e = (powerbi.data.SemanticType, 
    a.helpers.ClickEventType, powerbi.visuals.SelectionId), f = 10;
    describe("FunnelChart", function() {
        it("FunnelChart registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("funnel").capabilities).toBe(powerbi.visuals.funnelChartCapabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.funnelChartCapabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.funnelChartCapabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.funnelChartCapabilities.suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.funnelChartCapabilities.objects)).toEqual(powerbi.visuals.funnelChartProps.general.formatString);
        });
    }), describe("FunnelChart Dataview Validation", function() {
        var d;
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = powerbi.visuals.visualStyles.create().colorPalette.dataColors;
        });
        var f = {
            columns: [ {
                displayName: "col1",
                queryName: "col1"
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0
            } ]
        }, g = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "p"
        });
        it("Check explicit color is applied", function() {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], h = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        identityFields: [ g ],
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#FF0000"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#00FF00"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#0000FF"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: b.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            }, i = c.converter(h, d);
            expect(i.slices[0].color).toBe("#FF0000"), expect(i.slices[0].labelFill).toBe("#FF0000"), 
            expect(i.slices[1].color).toBe("#00FF00"), expect(i.slices[1].labelFill).toBe("#00FF00"), 
            expect(i.slices[2].color).toBe("#0000FF"), expect(i.slices[2].labelFill).toBe("#0000FF");
        }), it("Check default color is applied", function() {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], h = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        identityFields: [ g ]
                    } ],
                    values: b.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            }, i = "#00FF00", j = c.converter(h, d, i);
            j.slices.forEach(function(a) {
                expect(a.color).toEqual(i), expect(a.labelFill).toEqual(i);
            });
        }), it("Check multi-measures and custom colors", function() {
            var a = {
                columns: [ {
                    displayName: "col2",
                    queryName: "col2",
                    isMeasure: !0,
                    objects: {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: "#FF0000"
                                }
                            }
                        }
                    }
                }, {
                    displayName: "col3",
                    queryName: "col3",
                    isMeasure: !0,
                    objects: {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: "#00FF00"
                                }
                            }
                        }
                    }
                } ]
            }, f = {
                metadata: a,
                categorical: {
                    categories: [],
                    values: b.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 100 ]
                    }, {
                        source: a.columns[1],
                        values: [ 300 ]
                    } ])
                }
            }, g = c.converter(f, d), h = [ e.createWithMeasure("col2"), e.createWithMeasure("col3") ], i = {
                slices: [ {
                    value: 100,
                    label: "col2",
                    identity: h[0],
                    key: h[0].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "100"
                    } ],
                    color: "#FF0000",
                    labelFill: "#FF0000"
                }, {
                    value: 300,
                    label: "col3",
                    identity: h[1],
                    key: h[1].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "300"
                    } ],
                    color: "#00FF00",
                    labelFill: "#00FF00"
                } ],
                valuesMetadata: [ a.columns[0], a.columns[1] ],
                hasHighlights: !1,
                highlightsOverflow: !1,
                dataLabelsSettings: powerbi.visuals.dataLabelUtils.getDefaultFunnelLabelSettings()
            };
            expect(g).toEqual(i);
        }), it("Check converter with category and single measure", function() {
            var h = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ], i = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "a", "b", "c" ],
                        identity: h,
                        identityFields: [ g ]
                    } ],
                    values: b.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            }, j = c.converter(i, d), k = [ e.createWithIdAndMeasure(h[0], "col2"), e.createWithIdAndMeasure(h[1], "col2"), e.createWithIdAndMeasure(h[2], "col2") ], l = d.getColor("").value, m = {
                slices: [ {
                    value: 100,
                    label: "a",
                    identity: k[0],
                    key: k[0].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    color: l,
                    labelFill: l
                }, {
                    value: 200,
                    label: "b",
                    identity: k[1],
                    key: k[1].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    color: l,
                    labelFill: l
                }, {
                    value: 700,
                    label: "c",
                    identity: k[2],
                    key: k[2].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "c"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    color: l,
                    labelFill: l
                } ],
                valuesMetadata: [ f.columns[1] ],
                hasHighlights: !1,
                highlightsOverflow: !1,
                dataLabelsSettings: powerbi.visuals.dataLabelUtils.getDefaultFunnelLabelSettings()
            };
            expect(j).toEqual(m);
        }), it("Validate highlighted tooltip", function() {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], g = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#FF0000"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#00FF00"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#0000FF"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: b.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 0, 140, 420 ]
                    } ])
                }
            }, h = "#00FF00", i = c.converter(g, d, h);
            expect(i.slices[0].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "John Domo"
            }, {
                displayName: "col2",
                value: "100"
            } ]), expect(i.slices[1].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "John Domo"
            }, {
                displayName: "col2",
                value: "100"
            } ]), expect(i.slices[2].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "Delta Force"
            }, {
                displayName: "col2",
                value: "200"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "140"
            } ]), expect(i.slices[3].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "Delta Force"
            }, {
                displayName: "col2",
                value: "200"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "140"
            } ]), expect(i.slices[4].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "Jean Tablau"
            }, {
                displayName: "col2",
                value: "700"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "420"
            } ]), expect(i.slices[5].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "Jean Tablau"
            }, {
                displayName: "col2",
                value: "700"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "420"
            } ]);
        }), it("Check converter with multi-category and multi-measures", function() {
            var f = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], h = {
                columns: [ {
                    displayName: "col1",
                    queryName: "col1"
                }, {
                    displayName: "col2",
                    queryName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    queryName: "col3",
                    isMeasure: !0
                } ]
            }, i = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "a", "b" ],
                        identity: f,
                        identityFields: [ g ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200 ],
                        subtotal: 300
                    }, {
                        source: h.columns[2],
                        values: [ 300, 500 ],
                        subtotal: 800
                    } ])
                }
            }, j = c.converter(i, d), k = [ e.createWithIdAndMeasure(f[0], "col2"), e.createWithIdAndMeasure(f[1], "col2") ], l = d.getColor("").value, m = {
                slices: [ {
                    value: 400,
                    label: "a",
                    identity: k[0],
                    selected: !1,
                    categoryOrMeasureIndex: 0,
                    key: k[0].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "a"
                    }, {
                        displayName: "col2",
                        value: "400"
                    } ],
                    color: l,
                    labelFill: l
                }, {
                    value: 700,
                    label: "b",
                    identity: k[1],
                    selected: !1,
                    categoryOrMeasureIndex: 1,
                    key: k[1].getKey(),
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "b"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    color: l,
                    labelFill: l
                } ],
                valuesMetadata: [ h.columns[1], h.columns[2] ],
                hasHighlights: !1,
                highlightsOverflow: !1,
                dataLabelsSettings: powerbi.visuals.dataLabelUtils.getDefaultFunnelLabelSettings()
            };
            expect(j).toEqual(m);
        }), it("Check converter with no category and multi-measures", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    queryName: "col1"
                }, {
                    displayName: "col2",
                    queryName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    queryName: "col3",
                    isMeasure: !0
                } ]
            }, f = {
                metadata: a,
                categorical: {
                    categories: [],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ 100, 200, 300 ],
                        subtotal: 600
                    }, {
                        source: a.columns[2],
                        values: [ 300, 200, 100 ],
                        subtotal: 600
                    } ])
                }
            }, g = c.converter(f, d), h = [ e.createWithMeasure("col2"), e.createWithMeasure("col3") ], i = d.getColor("").value, j = {
                slices: [ {
                    value: 600,
                    label: "col2",
                    identity: h[0],
                    key: h[0].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "600"
                    } ],
                    color: i,
                    labelFill: i
                }, {
                    value: 600,
                    label: "col3",
                    identity: h[1],
                    key: h[1].getKey(),
                    selected: !1,
                    categoryOrMeasureIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "600"
                    } ],
                    color: i,
                    labelFill: i
                } ],
                valuesMetadata: [ a.columns[1], a.columns[2] ],
                hasHighlights: !1,
                highlightsOverflow: !1,
                dataLabelsSettings: powerbi.visuals.dataLabelUtils.getDefaultFunnelLabelSettings()
            };
            expect(g).toEqual(j);
        }), it("non-categorical multi-measure tooltip values test", function() {
            var a = {
                columns: [ {
                    displayName: "a",
                    isMeasure: !0
                }, {
                    displayName: "b",
                    isMeasure: !0
                }, {
                    displayName: "c",
                    isMeasure: !0
                } ]
            }, e = {
                metadata: a,
                categorical: {
                    values: b.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 1 ]
                    }, {
                        source: a.columns[1],
                        values: [ 2 ]
                    }, {
                        source: a.columns[2],
                        values: [ 3 ]
                    } ])
                }
            }, f = c.converter(e, d);
            expect(f.slices[0].tooltipInfo).toEqual([ {
                displayName: "a",
                value: "1"
            } ]), expect(f.slices[1].tooltipInfo).toEqual([ {
                displayName: "b",
                value: "2"
            } ]), expect(f.slices[2].tooltipInfo).toEqual([ {
                displayName: "c",
                value: "3"
            } ]);
        });
    }), describe("FunnelChart Interactivity", function() {
        function e(c) {
            var d = {
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "A", "B" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ],
                            identityFields: [ j ]
                        } ],
                        values: b.createValueColumns([ {
                            source: i.columns[2],
                            values: c,
                            identity: a.mocks.dataViewScopeIdentity("201501")
                        } ])
                    }
                } ]
            };
            return d;
        }
        var f, g, h, i = {
            columns: [ {
                displayName: "Squad",
                properties: {
                    Category: !0
                },
                type: d.describeDataType(2048)
            }, {
                displayName: "Period",
                properties: {
                    Series: !0
                },
                type: d.describeDataType(1)
            }, {
                displayName: null,
                groupName: "201501",
                isMeasure: !0,
                properties: {
                    Values: !0
                },
                type: d.describeDataType(1)
            }, {
                displayName: null,
                groupName: "201502",
                isMeasure: !0,
                properties: {
                    Values: !0
                },
                type: d.describeDataType(1)
            }, {
                displayName: null,
                groupName: "201503",
                isMeasure: !0,
                properties: {
                    Values: !0
                },
                type: d.describeDataType(1)
            } ]
        }, j = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "Squad"
        }), k = "" + c.DefaultBarOpacity, l = "" + c.DimmedBarOpacity, m = {
            dataViews: [ {
                metadata: i,
                categorical: {
                    categories: [ {
                        source: i.columns[0],
                        values: [ "A", "B" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ],
                        identityFields: [ j ]
                    } ],
                    values: b.createValueColumns([ {
                        source: i.columns[2],
                        values: [ 110, 120 ],
                        identity: a.mocks.dataViewScopeIdentity("201501")
                    }, {
                        source: i.columns[3],
                        values: [ 210, 220 ],
                        identity: a.mocks.dataViewScopeIdentity("201502")
                    }, {
                        source: i.columns[4],
                        values: [ 310, 320 ],
                        identity: a.mocks.dataViewScopeIdentity("201503")
                    } ])
                }
            } ]
        };
        beforeEach(function() {
            g = a.helpers.testDom("500", "500"), f = powerbi.visuals.visualPluginFactory.create().getPlugin("funnel").create(), 
            h = a.mocks.createVisualHostServices(), f.init({
                element: g,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: g.height(),
                    width: g.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("NaN in values shows warning", function(a) {
            var b = jasmine.createSpy("warning");
            h.setWarnings = b;
            var c = e([ 110, 120, NaN ]);
            f.onDataChanged(c), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                a();
            });
        }), it("Negative Infinity in values shows warning", function(a) {
            var b = jasmine.createSpy("warning");
            h.setWarnings = b;
            var c = e([ 110, 120, Number.NEGATIVE_INFINITY ]);
            f.onDataChanged(c), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            });
        }), it("Positive Infinity in values shows warning", function(a) {
            var b = jasmine.createSpy("warning");
            h.setWarnings = b;
            var c = e([ 110, 120, Number.POSITIVE_INFINITY ]);
            f.onDataChanged(c), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            });
        }), it("Out of range value in values shows warning", function(a) {
            var b = jasmine.createSpy("warning");
            h.setWarnings = b;
            var c = e([ 110, 120, 1e301 ]);
            f.onDataChanged(c), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                a();
            });
        }), it("All good in values shows warning", function(a) {
            var b = jasmine.createSpy("warning");
            h.setWarnings = b;
            var c = e([ 110, 120, 300 ]);
            f.onDataChanged(c), setTimeout(function() {
                expect(b).not.toHaveBeenCalled(), a();
            });
        }), it("funnel chart category select", function(a) {
            f.onDataChanged(m), setTimeout(function() {
                var b = $(".funnelChart .funnelBar");
                spyOn(h, "onSelect").and.callThrough(), b.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(k), 
                expect(b[1].style.fillOpacity).toBe(l), expect(h.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                }), a();
            });
        }), it("funnel chart category multi-select", function(a) {
            f.onDataChanged(m), setTimeout(function() {
                var b = $(".funnelChart .funnelBar");
                spyOn(h, "onSelect").and.callThrough(), b.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(k), 
                expect(b[1].style.fillOpacity).toBe(l), expect(h.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                }), b.last().d3Click(0, 0, 1), expect(b[0].style.fillOpacity).toBe(k), expect(b[1].style.fillOpacity).toBe(k), 
                expect(h.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m.dataViews[0].categorical.categories[0].identity[0] ]
                    }, {
                        data: [ m.dataViews[0].categorical.categories[0].identity[1] ]
                    } ]
                }), a();
            });
        }), it("funnel chart external clear", function(a) {
            f.onDataChanged(m), setTimeout(function() {
                var b = $(".funnelChart .funnelBar");
                spyOn(h, "onSelect").and.callThrough(), b.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(k), 
                expect(b[1].style.fillOpacity).toBe(l), expect(h.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                }), f.onClearSelection(), expect(b[0].style.fillOpacity).toBe(k), expect(b[1].style.fillOpacity).toBe(k), 
                a();
            });
        }), it("funnel chart clear on clearCatcher click", function(a) {
            f.onDataChanged(m), setTimeout(function() {
                var b = $(".funnelChart .funnelBar");
                spyOn(h, "onSelect").and.callThrough(), b.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(k), 
                expect(b[1].style.fillOpacity).toBe(l), expect(h.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ m.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                });
                var c = $(".clearCatcher");
                c.first().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(k), expect(b[1].style.fillOpacity).toBe(k), 
                expect(h.onSelect).toHaveBeenCalledWith({
                    data: []
                }), a();
            });
        });
    }), describe("FunnelChart DOM Validation", function() {
        function c(a) {
            var b = $("<div/>");
            return $(b).css("color", a), $(b).css("color");
        }
        var d, e, g = 62, h = {
            columns: [ {
                displayName: "col1"
            }, {
                displayName: "col2",
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "$0"
                    }
                }
            } ],
            objects: {
                labels: {
                    show: !0,
                    labelPrecision: 0
                }
            }
        }, i = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "col1"
        });
        beforeEach(function() {
            e = a.helpers.testDom("500", "500"), d = powerbi.visuals.visualPluginFactory.create().getPlugin("funnel").create(), 
            d.init({
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Ensure DOM built", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], g = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ]
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".funnelChart g").length).toBe(6), expect($(".funnelChart .axis").find("text").length).toBe(3), 
                expect($(".funnelChart .innerTextGroup").find("text").length).toBe(3), expect($(".funnelChart .innerTextGroup").find("text").first().text()).toBe("$100"), 
                c();
            }, f);
        }), it("Funnel partial highlight", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], g = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 50, 140, 420 ],
                        subtotal: 1e3
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".funnelChart g").length).toBe(6), expect($(".funnelBar").length).toBe(6), 
                expect($(".highlight").length).toBe(3), expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeLessThan(+$(".funnelBar")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeGreaterThan(+$(".funnelBar")[0].attributes.getNamedItem("y").value), 
                expect($(".funnelChart .axis").find("text").length).toBe(3), c();
            }, f);
        }), it("Funnel partial highlight with overflow", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], g = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 150, 340, 720 ],
                        subtotal: 1e3
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                expect($(".funnelChart g").length).toBe(6), expect($(".funnelBar").length).toBe(6), 
                expect($(".highlight").length).toBe(3), expect(+$(".highlight")[0].attributes.getNamedItem("height").value).toBeGreaterThan(+$(".funnelBar")[0].attributes.getNamedItem("height").value), 
                expect(+$(".highlight")[0].attributes.getNamedItem("y").value).toBeLessThan(+$(".funnelBar")[0].attributes.getNamedItem("y").value), 
                expect($(".funnelChart .axis").find("text").length).toBe(3), c();
            }, f);
        }), it("Ensure Max Width is respected", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], g = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200 ],
                        subtotal: 300
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ g ]
            }), setTimeout(function() {
                var a = $(".funnelChart").find(".funnelBar").first();
                expect(a.attr("width")).toBeLessThan(40), c();
            }, f);
        }), it("Ensure Labels that do not fit in the bar are shown outside and are the bar fill color", function(e) {
            var j = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], k = powerbi.Prototype.inherit(h);
            k.objects = {
                labels: {
                    labelPosition: powerbi.labelPosition.insideCenter
                }
            };
            var l = {
                metadata: k,
                categorical: {
                    categories: [ {
                        source: k.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: j,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: k.columns[1],
                        values: [ 1e3, 2e3, 20 ],
                        subtotal: 3020
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text"), b = +$(".funnelChart").find(".funnelBar").first().attr("height"), d = +$(".funnelChart").find(".funnelBar").first().attr("y"), f = +$(".funnelChart").find(".funnelBar").last().attr("height"), h = +$(".funnelChart").find(".funnelBar").last().attr("y");
                expect(a.length).toBe(3), expect($(a[0]).attr("x")).toEqual($(a[1]).attr("x")), 
                expect($(a[1]).attr("x")).not.toEqual($(a[2]).attr("x")), expect(c($(a[0]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect($(a[0]).attr("x")).toBeGreaterThan(d + g), expect($(a[0]).attr("x")).toBeLessThan(d + b + g), 
                expect(c($(a[2]).css("fill"))).toEqual(c($(".funnelChart").find(".funnelBar").eq(2).css("fill"))), 
                expect($(a[2]).attr("x")).toBeGreaterThan(h + f + g), e();
            }, f);
        }), it("Ensure Labels hide when viewport forces bars to be smaller than min hight", function(c) {
            var e = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Bugs Bunny", "Mickey Mouse", "Donald Duck", "VRM Jones" ],
                        identity: [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Bugs Bunny"), a.mocks.dataViewScopeIdentity("Mickey Mouse"), a.mocks.dataViewScopeIdentity("Donald Duck"), a.mocks.dataViewScopeIdentity("VRM Jones") ],
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 300, 400, 500, 600 ],
                        subtotal: 2100
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ e ]
            }), setTimeout(function() {
                expect($(".funnelChart g").length).toBe(9), expect($(".funnelChart .axis").find("text").length).toBe(6), 
                expect($(".funnelChart .innerTextGroup text").length).toBe(6), d.onResizing({
                    height: 50,
                    width: 100
                }, 0), setTimeout(function() {
                    expect($(".funnelChart g").length).toBe(3), expect($(".funnelChart .axis").find("text").length).toBe(0), 
                    expect($(".funnelChart .innerTextGroup text").length).toBe(0), c();
                }, f);
            }, f);
        }), it("Default labels validation", function(e) {
            var j = $.extend(!0, {}, h);
            j.objects = {
                labels: {
                    labelDisplayUnits: 1e3
                }
            };
            var k = "12px", l = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], m = {
                metadata: j,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: l,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 555, 2e3, 20 ],
                        subtotal: 2575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ m ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text"), b = +$(".funnelChart").find(".funnelBar").first().attr("y"), d = +$(".funnelChart").find(".funnelBar").first().attr("height"), f = +$(".funnelChart").find(".funnelBar").last().attr("y"), h = +$(".funnelChart").find(".funnelBar").last().attr("height");
                expect(a.length).toBe(3), expect(c($(a[0]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect(c($(a[2]).css("fill"))).toEqual(c($(".funnelChart").find(".funnelBar").last().css("fill"))), 
                expect($(a[0]).css("fill-opacity")).toEqual("1"), expect($(a[1]).css("fill-opacity")).toEqual("1"), 
                expect($(a[2]).css("fill-opacity")).toEqual("1"), expect($(a.first().css("font-size")).selector).toBe(k), 
                expect($(a[0]).text()).toEqual("$0.56K"), expect($(a[0]).attr("x")).toBeGreaterThan(b + g), 
                expect($(a[0]).attr("x")).toBeLessThan(b + d + g), expect($(a[2]).attr("x")).toBeGreaterThan(f + h), 
                e();
            }, f);
        }), it("Validate label colors and positioning", function(e) {
            var j = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], k = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: j,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 2e3, 1555, 20 ],
                        subtotal: 3575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ k ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text"), b = +$(".funnelChart").find(".funnelBar").first().attr("y"), d = +$(".funnelChart").find(".funnelBar").first().attr("height");
                expect($(a[0]).text()).toEqual("$2000"), expect(c($(a[0]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect($(a[0]).attr("x")).toBeGreaterThan(b + g), expect($(a[0]).attr("x")).toBeLessThan(b + d + g);
                var f = +$(".funnelChart").find(".funnelBar").eq(2).attr("y"), h = +$(".funnelChart").find(".funnelBar").eq(2).attr("height");
                expect($(a[2]).text()).toEqual("$20"), expect(c($(a[2]).css("fill"))).toEqual(c($(".funnelChart").find(".funnelBar").eq(2).css("fill"))), 
                expect($(a[2]).attr("x")).toBeGreaterThan(f + h + g), e();
            }, f);
        }), it("Change labels position validation", function(e) {
            var j = powerbi.Prototype.inherit(h);
            j.objects = {
                labels: {
                    labelPosition: powerbi.labelPosition.insideBase
                }
            };
            var k = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], l = {
                metadata: j,
                categorical: {
                    categories: [ {
                        source: j.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: k,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: j.columns[1],
                        values: [ 1e3, 2e3, 2e3 ],
                        subtotal: 5e3
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup .data-labels"), b = +$(".funnelChart").find(".funnelBar").first().attr("x"), d = +$(".funnelChart").find(".funnelBar").first().attr("height"), f = b - g, h = f + d;
                expect(a.length).toBe(3), expect(c($(a[0]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect(c($(a[1]).css("fill"))).toEqual(c("#FFFFFF")), expect(c($(a[2]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect($(a[0]).attr("x")).toBeGreaterThan(f), expect($(a[0]).attr("x")).toBeLessThan(h), 
                e();
            }, f);
        }), it("Change labels color validation", function(e) {
            var g = "#CC0099", j = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], k = powerbi.Prototype.inherit(h);
            k.objects = {
                labels: {
                    color: {
                        solid: {
                            color: "#CC0099"
                        }
                    }
                }
            };
            var l = {
                metadata: k,
                categorical: {
                    categories: [ {
                        source: k.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: j,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: k.columns[1],
                        values: [ 1555, 2e3, 20 ],
                        subtotal: 3575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text");
                expect(a.length).toBe(3), expect(c($(a[0]).css("fill"))).toEqual(c(g)), expect(c($(a[1]).css("fill"))).toEqual(c(g)), 
                expect(c($(a[2]).css("fill"))).toEqual(c(g)), e();
            }, f);
        }), it("Hide labels validation", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], g = powerbi.Prototype.inherit(h);
            g.objects = {
                labels: {
                    show: !1
                }
            };
            var j = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: [ 1555, 2e3, 20 ],
                        subtotal: 3575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text");
                expect(a.length).toBe(0), c();
            }, f);
        }), it("Funnel highlighted values - validate labels", function(e) {
            var g = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], j = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, k = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 50, 140, 420 ],
                        subtotal: 1e3
                    } ])
                }
            }, l = {
                metadata: h,
                categorical: {
                    categories: [ {
                        source: h.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: h.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 75, 40, 220 ],
                        subtotal: 1e3
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ j ]
            }), d.onDataChanged({
                dataViews: [ k ]
            }), d.onDataChanged({
                dataViews: [ l ]
            }), d.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = $(".funnelChart .innerTextGroup text");
                expect(a.length).toBe(3), expect(c($(a[0]).css("fill"))).toEqual(c("#FFFFFF")), 
                expect($(a[0]).text()).toEqual("$100"), expect($(a[1]).text()).toEqual("$200"), 
                expect($(a[2]).text()).toEqual("$700"), e();
            }, f);
        }), it("labels should support display units with no precision", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], g = powerbi.Prototype.inherit(h);
            g.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 0
                }
            };
            var j = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: [ 1555, 2e3, 20 ],
                        subtotal: 3575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                expect($(".funnelChart .innerTextGroup text").first().text()).toBe("$2K"), c();
            }, f);
        }), it("labels should support display units with precision", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Mr Bing") ], g = powerbi.Prototype.inherit(h);
            g.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 2
                }
            };
            var j = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "John Domo", "Delta Force", "Mr Bing" ],
                        identity: e,
                        identityFields: [ i ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: [ 1555, 2e3, 20 ],
                        subtotal: 3575
                    } ])
                }
            };
            d.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                expect($(".funnelChart .innerTextGroup text").first().text()).toBe("$1.56K"), c();
            }, f);
        });
    }), describe("funnel chart web animation", function() {
        var c, d, e = {
            columns: [ {
                displayName: "col1"
            }, {
                displayName: "col2"
            }, {
                displayName: "col3"
            } ]
        }, f = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "col1"
        });
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            d = a.helpers.testDom("500", "500"), c = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("funnel").create(), c.init({
                element: d,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("funnel highlight animation", function(d) {
            var g = [ a.mocks.dataViewScopeIdentity("John Domo"), a.mocks.dataViewScopeIdentity("Delta Force"), a.mocks.dataViewScopeIdentity("Jean Tablau") ], h = {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ f ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, i = {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ f ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 50, 140, 420 ],
                        subtotal: 1e3
                    } ])
                }
            }, j = {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        identity: g,
                        identityFields: [ f ]
                    } ],
                    values: b.createValueColumns([ {
                        source: e.columns[1],
                        values: [ 100, 200, 700 ],
                        highlights: [ 75, 40, 220 ],
                        subtotal: 1e3
                    } ])
                }
            }, k = c.animator;
            spyOn(k, "animate").and.callThrough(), c.onDataChanged({
                dataViews: [ h ]
            }), c.onDataChanged({
                dataViews: [ i ]
            }), c.onDataChanged({
                dataViews: [ j ]
            }), c.onDataChanged({
                dataViews: [ h ]
            }), expect(k).toBeTruthy(), expect(k.animate).toHaveBeenCalled(), d();
        });
    }), describe("Enumerate Objects", function() {
        var e, f, g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                type: d.describeDataType(1),
                isMeasure: !0
            }, {
                displayName: "col3",
                type: d.describeDataType(1),
                isMeasure: !0
            } ]
        }, h = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "col1"
        });
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            f = a.helpers.testDom("500", "500"), e = powerbi.visuals.visualPluginFactory.create().getPlugin("funnel").create(), 
            e.init({
                element: f,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check enumeration: category measure", function() {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ], d = {
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c,
                            identityFields: [ h ]
                        } ],
                        values: b.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: g.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        } ])
                    }
                } ]
            };
            e.onDataChanged(d);
            var f = e.enumerateObjectInstances({
                objectName: "dataPoint"
            });
            expect(f.length).toBe(4), expect(f[1].displayName).toBe("a"), expect(f[1].properties.fill).toBeDefined(), 
            expect(f[2].displayName).toBe("b"), expect(f[2].properties.fill).toBeDefined();
        }), it("Check enumeration: multi-measure", function() {
            var a = {
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        values: b.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 100 ]
                        }, {
                            source: g.columns[2],
                            values: [ 200 ]
                        } ])
                    }
                } ]
            };
            e.onDataChanged(a);
            var c = e.enumerateObjectInstances({
                objectName: "dataPoint"
            });
            expect(c.length).toBe(3), expect(c[1].displayName).toBe("col2"), expect(c[1].properties.fill).toBeDefined(), 
            expect(c[2].displayName).toBe("col3"), expect(c[2].properties.fill).toBeDefined();
        }), it("enumerateObjectInstances - Gradient color", function() {
            var a = powerbi.visuals.visualStyles.create().colorPalette.dataColors, d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, e = [ "#d9f2fb", "#ff557f", "#b1eab7" ], f = [ {
                dataPoint: {
                    fill: {
                        solid: {
                            color: e[0]
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: e[1]
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: e[2]
                        }
                    }
                }
            } ], g = {
                metadata: d,
                categorical: {
                    categories: [ {
                        source: d.columns[0],
                        values: [ "a", "b", "c" ],
                        objects: f
                    } ],
                    values: b.createValueColumns([ {
                        source: d.columns[1],
                        values: [ 100, 200, 300, 400, 500 ]
                    }, {
                        source: d.columns[2],
                        values: [ 200, 400, 600, 800, 1e3 ]
                    } ])
                }
            }, h = "#00FF00", i = c.converter(g, a, h);
            expect(i.slices[0].color).toBe(e[0]), expect(i.slices[1].color).toBe(e[1]), expect(i.slices[2].color).toBe(e[2]);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b, c) {
        var d, e;
        "string" == typeof b ? d = e = b : (d = b.width, e = b.height);
        var f, g, h = a.mocks.createVisualHostServices();
        return g = c ? powerbi.visuals.visualPluginFactory.createMobile().getPlugin("gauge").create() : powerbi.visuals.visualPluginFactory.create().getPlugin("gauge").create(), 
        f = a.helpers.testDom(e, d), g.init({
            element: f,
            host: h,
            style: powerbi.visuals.visualStyles.create(),
            viewport: {
                height: f.height(),
                width: f.width()
            },
            animation: {
                transitionImmediate: !0
            }
        }), g;
    }
    function c(b, c) {
        var e, f, g = a.mocks.createVisualHostServices(), h = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Y: !0
                },
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "$0"
                    }
                }
            }, {
                displayName: "col2",
                roles: {
                    MinValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col3",
                roles: {
                    MaxValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col4",
                roles: {
                    TargetValue: !0
                },
                isMeasure: !0
            } ],
            groups: [],
            measures: [ 0 ]
        };
        powerbi.common.localize = powerbi.common.createLocalizationService(), f = a.helpers.testDom(b, b), 
        e = c ? powerbi.visuals.visualPluginFactory.createMobile().getPlugin("gauge").create() : powerbi.visuals.visualPluginFactory.create().getPlugin("gauge").create(), 
        e.init({
            element: f,
            host: g,
            style: powerbi.visuals.visualStyles.create(),
            viewport: {
                height: f.height(),
                width: f.width()
            },
            animation: {
                transitionImmediate: !0
            }
        }), e.onDataChanged({
            dataViews: [ {
                metadata: h,
                categorical: {
                    values: d.createValueColumns([ {
                        source: h.columns[0],
                        values: [ -25 ]
                    } ])
                }
            } ]
        });
    }
    var d = powerbi.data.DataViewTransform, e = powerbi.visuals.Gauge, f = powerbi.visuals.SVGUtil, g = 400, h = powerbi.visuals.visualPluginFactory.MobileVisualPluginService.MinHeightGaugeSideNumbersVisible, i = h + 1, j = h - 1, k = i.toString(), l = j.toString(), m = powerbi.visuals.visualPluginFactory.MobileVisualPluginService.GaugeMarginsOnSmallViewPort, n = {
        columns: [ {
            displayName: "col1",
            roles: {
                Y: !0
            },
            isMeasure: !0,
            objects: {
                general: {
                    formatString: "$0"
                }
            }
        }, {
            displayName: "col2",
            roles: {
                MinValue: !0
            },
            isMeasure: !0
        }, {
            displayName: "col3",
            roles: {
                MaxValue: !0
            },
            isMeasure: !0
        }, {
            displayName: "col4",
            roles: {
                TargetValue: !0
            },
            isMeasure: !0
        } ],
        groups: [],
        measures: [ 0 ]
    };
    describe("Gauge", function() {
        it("Capabilities should include dataViewMappings", function() {
            expect(e.capabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(e.capabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(e.capabilities.suppressDefaultTitle).toBeUndefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(e.capabilities.dataRoles).toBeDefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(e.capabilities.objects)).toEqual(e.formatStringProp);
        });
    }), describe("Gauge DOM tests", function() {
        var b, c, e = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.helpers.suppressDebugAssertFailure(), powerbi.common.localize = powerbi.common.createLocalizationService(), 
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("gauge").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Ensure min & target dont overlap", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 0 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".targetText"), c = $($(".labelText")[0]);
                expect(b.length).toBe(1);
                var d = {
                    x: b.attr("x"),
                    y: b.attr("y")
                }, e = {
                    x: c.attr("x"),
                    y: c.attr("y")
                };
                expect(d.x).not.toEqual(e.x), expect(d.y).not.toEqual(e.y), a();
            }, g);
        }), it("Ensure max & target dont overlap", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 300 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".targetText"), c = $($(".labelText")[1]);
                expect(b.length).toBe(1);
                var d = {
                    x: b.attr("x"),
                    y: b.attr("y")
                }, e = {
                    x: c.attr("x"),
                    y: c.attr("y")
                };
                expect(d.x).not.toEqual(e.x), expect(d.y).not.toEqual(e.y), a();
            }, g);
        }), it("Check Gauge DOM", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 200 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".backgroundArc"), c = $(".foregroundArc");
                expect(b.length).toBe(1), expect(b.attr("d")).toBeDefined(), expect(c.length).toBe(1), 
                expect(c.attr("d")).toBeDefined(), expect($(".mainText").length).toBe(1), expect($(".mainText").text()).toEqual("$10");
                var d = $(".animatedNumber").attr("transform"), e = f.parseTranslateTransform(d);
                expect(e.x).toBeGreaterThan(120), expect(e.y).toBeGreaterThan(220), a();
            }, g);
        }), it("If value less that zero, then scale should be 0-1, but number should show negative value", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ -25 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".backgroundArc"), c = $(".foregroundArc");
                expect(b.length).toBe(1), expect(b.attr("d")).toBeDefined(), expect(c.length).toBe(1), 
                expect(c.attr("d")).toBeDefined();
                var d = $(".labelText");
                expect(d.length).toBe(2), expect($(d[0]).text()).toEqual("$0"), expect($(d[1]).text()).toEqual("$1"), 
                expect($(".mainText").length).toBe(1), expect($(".mainText").text()).toEqual("-$25"), 
                a();
            }, g);
        }), it("Check Gauge DOM on Style Changed", function(a) {
            b.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 500 ]
                        }, {
                            source: n.columns[3],
                            values: [ 200 ]
                        } ])
                    }
                } ]
            });
            var c = new powerbi.visuals.DataColorPalette();
            b.onStyleChanged({
                titleText: {
                    color: {
                        value: "rgba(51,51,51,1)"
                    }
                },
                subTitleText: {
                    color: {
                        value: "rgba(145,145,145,1)"
                    }
                },
                labelText: {
                    color: {
                        value: "#008000"
                    },
                    fontSize: "11px"
                },
                colorPalette: {
                    dataColors: c
                },
                isHighContrast: !1
            }), setTimeout(function() {
                var b = $(".labelText"), c = $(b[0]).css("fill");
                expect("#008000" === c || "rgb(0, 128, 0)" === c).toBeTruthy(), a();
            }, g);
        });
    }), describe("Gauge Data Tests", function() {
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        });
        var b = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Y: !0
                },
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "$0"
                    }
                }
            }, {
                displayName: "col2",
                roles: {
                    MinValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col3",
                roles: {
                    MaxValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col4",
                roles: {
                    TargetValue: !0
                },
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "$0"
                    }
                }
            } ],
            groups: [],
            measures: [ 0 ]
        }, c = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Y: !0
                },
                isMeasure: !0,
                objects: {
                    general: {
                        formatString: "0.00"
                    }
                }
            }, {
                displayName: "col2",
                roles: {
                    MinValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col3",
                roles: {
                    MaxValue: !0
                },
                isMeasure: !0
            }, {
                displayName: "col4",
                roles: {
                    TargetValue: !0
                },
                isMeasure: !0
            } ],
            groups: [],
            measures: [ 0 ]
        };
        it("Gauge registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("gauge").capabilities).toBe(e.capabilities);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(e.capabilities.objects)).toEqual(e.formatStringProp);
        }), it("Gauge_greaterThanMax", function() {
            var a = {
                metadata: b,
                single: {
                    value: 500
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 500 ]
                    }, {
                        source: b.columns[1],
                        values: [ 0 ]
                    }, {
                        source: b.columns[2],
                        values: [ 300 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            };
            expect(e.converter(a).percent).toBe(1);
        }), it("Gauge_smallerThanMin", function() {
            var a = {
                metadata: b,
                single: {
                    value: -3
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ -3 ]
                    }, {
                        source: b.columns[1],
                        values: [ 0 ]
                    }, {
                        source: b.columns[2],
                        values: [ 300 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            };
            expect(e.converter(a).percent).toBe(0);
        }), it("Gauge_betweenMinMax", function() {
            var a = {
                metadata: b,
                single: {
                    value: 200
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 200 ]
                    }, {
                        source: b.columns[1],
                        values: [ 100 ]
                    }, {
                        source: b.columns[2],
                        values: [ 300 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            };
            expect(e.converter(a).percent).toBe(.5);
        }), it("Gauge_Nulls", function() {
            var a = {
                metadata: b,
                single: {
                    value: null
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ null ]
                    }, {
                        source: b.columns[1],
                        values: [ null ]
                    }, {
                        source: b.columns[2],
                        values: [ null ]
                    }, {
                        source: b.columns[3],
                        values: [ null ]
                    } ])
                }
            }, c = e.converter(a);
            expect(c.percent).toBe(0), expect(c.targetSettings).toEqual({
                min: 0,
                max: 0,
                target: 0
            });
        }), it("Gauge_tooltip_work", function() {
            var a = {
                metadata: b,
                single: {
                    value: 500
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 10 ]
                    }, {
                        source: b.columns[1],
                        values: [ 0 ]
                    }, {
                        source: b.columns[2],
                        values: [ 500 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            }, c = e.converter(a), f = {
                percent: .02,
                adjustedTotal: 10,
                total: 10,
                metadataColumn: b.columns[0],
                targetSettings: {
                    min: 0,
                    max: 500,
                    target: 200
                },
                tooltipInfo: [ {
                    displayName: "col1",
                    value: "$10"
                }, {
                    displayName: "col4",
                    value: "$200"
                } ]
            };
            expect(c).toEqual(f);
        }), it("Gauge_Nulls_Tooltip_Data", function() {
            var a = {
                metadata: b,
                single: {
                    value: null
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ null ]
                    }, {
                        source: b.columns[1],
                        values: [ null ]
                    }, {
                        source: b.columns[2],
                        values: [ null ]
                    }, {
                        source: b.columns[3],
                        values: [ null ]
                    } ])
                }
            }, c = e.converter(a), f = {
                percent: 0,
                adjustedTotal: 0,
                total: 0,
                metadataColumn: b.columns[0],
                targetSettings: {
                    min: 0,
                    max: 0,
                    target: 0
                },
                tooltipInfo: []
            };
            expect(c).toEqual(f);
        }), it("Gauge_betweenMinMax_Tooltip_Data", function() {
            var a = {
                metadata: b,
                single: {
                    value: 200
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 200 ]
                    }, {
                        source: b.columns[1],
                        values: [ 100 ]
                    }, {
                        source: b.columns[2],
                        values: [ 300 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            }, c = e.converter(a), f = {
                percent: .5,
                adjustedTotal: 200,
                total: 200,
                metadataColumn: {
                    displayName: "col1",
                    roles: {
                        Y: !0
                    },
                    isMeasure: !0,
                    objects: {
                        general: {
                            formatString: "$0"
                        }
                    }
                },
                targetSettings: {
                    min: 100,
                    max: 300,
                    target: 200
                },
                tooltipInfo: [ {
                    displayName: "col1",
                    value: "$200"
                }, {
                    displayName: "col4",
                    value: "$200"
                } ]
            };
            expect(c).toEqual(f);
        }), describe("Gauge Rendering Tests", function() {
            function f(b) {
                var c = i;
                spyOn(c, "getGaugeVisualProperties").and.callThrough(), spyOn(c, "getAnimatedNumberProperties").and.callThrough(), 
                spyOn(c, "drawViewPort").and.callThrough();
                var d = a.helpers.testDom(k, k);
                return c.init({
                    element: d,
                    host: b,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: d.height(),
                        width: d.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                }), c;
            }
            function h(a) {
                var c = [ {
                    metadata: b,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: b.columns[0],
                            values: [ 10 ]
                        }, {
                            source: b.columns[1],
                            values: [ 0 ]
                        }, {
                            source: b.columns[2],
                            values: a
                        }, {
                            source: b.columns[3],
                            values: [ 200 ]
                        } ])
                    }
                } ];
                return c;
            }
            var i, j, l = a.mocks.createVisualHostServices(), m = [ {
                metadata: b,
                single: {
                    value: 10
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 10 ]
                    }, {
                        source: b.columns[1],
                        values: [ 0 ]
                    }, {
                        source: b.columns[2],
                        values: [ 300 ]
                    }, {
                        source: b.columns[3],
                        values: [ 200 ]
                    } ])
                }
            } ], n = [ {
                metadata: c,
                single: {
                    value: 10
                },
                categorical: {
                    values: d.createValueColumns([ {
                        source: c.columns[0],
                        values: [ 5.5 ]
                    }, {
                        source: c.columns[1],
                        values: [ 0 ]
                    }, {
                        source: c.columns[2],
                        values: [ 10 ]
                    }, {
                        source: c.columns[3],
                        values: [ 6.5 ]
                    } ])
                }
            } ];
            beforeEach(function() {
                i = powerbi.visuals.visualPluginFactory.create().getPlugin("gauge").create(), j = a.helpers.testDom("500", "500"), 
                i.init({
                    element: j,
                    host: l,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: j.height(),
                        width: j.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("Get_Animated_Number_Properties works", function() {
                var a = i, b = {
                    transformString: "translate(0.2928932188134524,0.29289321881345254)",
                    viewport: {
                        height: .7071067811865475,
                        width: 1.4142135623730951
                    }
                }, c = a.getAnimatedNumberProperties(1, 1, 1, 1);
                expect(c).toEqual(b);
            }), it("Get_Viewport_Properties works", function() {
                var a = i, b = {
                    radius: 205,
                    innerRadiusOfArc: 143.5,
                    left: 250,
                    top: 352.5,
                    height: 460,
                    width: 410,
                    margin: {
                        top: 20,
                        bottom: 20,
                        left: 45,
                        right: 45
                    },
                    transformString: "translate(250,352.5)",
                    innerRadiusFactor: .7
                }, c = a.getGaugeVisualProperties();
                expect(c).toEqual(b);
            }), it("NaN in values shows a warning", function(b) {
                var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
                c.setWarnings = d;
                var e = f(c), i = h([ NaN, 1 ]);
                e.onDataChanged({
                    dataViews: i
                }), setTimeout(function() {
                    expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                    b();
                }, g);
            }), it("Negative Infinity in values shows a warning", function(b) {
                var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
                c.setWarnings = d;
                var e = f(c), i = h([ Number.NEGATIVE_INFINITY ]);
                e.onDataChanged({
                    dataViews: i
                }), setTimeout(function() {
                    expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    b();
                }, g);
            }), it("Positive Infinity in values shows a warning", function(b) {
                var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
                c.setWarnings = d;
                var e = f(c), i = h([ Number.POSITIVE_INFINITY ]);
                e.onDataChanged({
                    dataViews: i
                }), setTimeout(function() {
                    expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    b();
                }, g);
            }), it("Value out of range in values shows a warning", function(b) {
                var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
                c.setWarnings = d;
                var e = f(c), i = h([ 1e301 ]);
                e.onDataChanged({
                    dataViews: i
                }), setTimeout(function() {
                    expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                    b();
                }, g);
            }), it("All okay in values shows a warning", function(b) {
                var c = a.mocks.createVisualHostServices(), d = jasmine.createSpy("warning");
                c.setWarnings = d;
                var e = f(c), i = h([ 20 ]);
                e.onDataChanged({
                    dataViews: i
                }), setTimeout(function() {
                    expect(d).not.toHaveBeenCalled(), b();
                }, g);
            }), it("OnDataChange calls expected methods", function(a) {
                var b = i;
                spyOn(b, "getGaugeVisualProperties").and.callThrough(), spyOn(b, "getAnimatedNumberProperties").and.callThrough(), 
                spyOn(b, "drawViewPort").and.callThrough(), b.onDataChanged({
                    dataViews: m
                }), setTimeout(function() {
                    expect(b.drawViewPort).toHaveBeenCalled(), expect(b.getGaugeVisualProperties).toHaveBeenCalled(), 
                    expect(b.getAnimatedNumberProperties).toHaveBeenCalled(), a();
                }, g);
            }), it("onResizing calls expected methods", function(a) {
                var b = i;
                b.onDataChanged({
                    dataViews: m
                }), spyOn(b, "getGaugeVisualProperties").and.callThrough(), spyOn(b, "getAnimatedNumberProperties").and.callThrough(), 
                spyOn(b, "drawViewPort").and.callThrough(), b.onResizing({
                    height: 200,
                    width: 300
                }, 0), setTimeout(function() {
                    expect(b.getGaugeVisualProperties).toHaveBeenCalled(), expect(b.getAnimatedNumberProperties).toHaveBeenCalled(), 
                    expect(b.drawViewPort).toHaveBeenCalled(), a();
                }, g);
            }), it("onResizing aspect ratio check", function(a) {
                var b = i;
                b.onDataChanged({
                    dataViews: m
                }), b.onResizing({
                    height: 100,
                    width: 400
                }, 0), setTimeout(function() {
                    var b = $(".foregroundArc"), c = b.attr("d");
                    expect(c.indexOf("A 60 60") > -1 || c.indexOf("A60,60") > -1 || c.indexOf("A60 60") > -1).toBeTruthy(), 
                    a();
                }, g);
            }), it("check target has decimal values", function(a) {
                var b = i;
                b.onDataChanged({
                    dataViews: n
                }), b.onResizing({
                    height: 100,
                    width: 400
                }, 0), setTimeout(function() {
                    var b = $(".targetText").text();
                    expect(b).toEqual("6.50"), a();
                }, g);
            }), it("Gauge_default_gauge_values", function() {
                var a = {
                    metadata: null,
                    single: {
                        value: 500
                    },
                    categorical: null
                }, b = {
                    percent: 0,
                    adjustedTotal: 0,
                    total: 0,
                    metadataColumn: null,
                    targetSettings: {
                        min: 0,
                        max: 1,
                        target: void 0
                    },
                    tooltipInfo: void 0
                };
                expect(e.converter(a)).toEqual(b);
            });
        });
    }), describe("Gauge margins tests", function() {
        it("Gauge margin test with view port sideNumbersVisibleGreaterThanMinHeightString", function() {
            var a = b(k, !1), c = a, d = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 45,
                    right: 45
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with view port sideNumbersVisibleSmallerThanMinHeightString", function() {
            var a = b(l, !1), c = a, d = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 45,
                    right: 45
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with view port sideNumbersVisibleGreaterThanMinHeightString mobile", function() {
            var a = b(k, !0), c = a, d = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 45,
                    right: 45
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with view port sideNumbersVisibleSmallerThanMinHeightString mobile", function() {
            var a = b(l, !0), c = a, d = {
                margin: {
                    top: m,
                    bottom: m,
                    left: m,
                    right: m
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with height greater than width", function() {
            var a = b({
                height: "200",
                width: "199"
            }, !1), c = a, d = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 15,
                    right: 15
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with height greater than width", function() {
            var a = b({
                height: "200",
                width: "199"
            }, !1), c = a, d = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 15,
                    right: 15
                }
            }, e = c.getGaugeVisualProperties();
            expect(e.margin).toEqual(d.margin);
        }), it("Gauge margin test with target on left and height greater than width", function() {
            var a = b({
                height: "200",
                width: "199"
            }, !1), c = a;
            c.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 0 ]
                        } ])
                    }
                } ]
            });
            var e = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 45,
                    right: 15
                }
            }, f = c.getGaugeVisualProperties();
            expect(f.margin).toEqual(e.margin);
        }), it("Gauge margin test with target on right and height greater than width", function() {
            var a = b({
                height: "200",
                width: "199"
            }, !1), c = a;
            c.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 250 ]
                        } ])
                    }
                } ]
            });
            var e = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 15,
                    right: 45
                }
            }, f = c.getGaugeVisualProperties();
            expect(f.margin).toEqual(e.margin);
        }), it("Gauge margin test with small width and target", function() {
            var a = b({
                height: "200",
                width: "140"
            }, !1), c = a;
            c.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    single: {
                        value: 10
                    },
                    categorical: {
                        values: d.createValueColumns([ {
                            source: n.columns[0],
                            values: [ 10 ]
                        }, {
                            source: n.columns[1],
                            values: [ 0 ]
                        }, {
                            source: n.columns[2],
                            values: [ 300 ]
                        }, {
                            source: n.columns[3],
                            values: [ 250 ]
                        } ])
                    }
                } ]
            });
            var e = {
                margin: {
                    top: 20,
                    bottom: 20,
                    left: 15,
                    right: 15
                }
            }, f = c.getGaugeVisualProperties();
            expect(f.margin).toEqual(e.margin);
        });
    }), describe("Gauge side number tests", function() {
        it("Gauge margin test with view port sideNumbersVisibleSmallerThanMinHeightString mobile", function(a) {
            c(l, !0), setTimeout(function() {
                var b = $(".labelText");
                expect(b.length).toBe(0), expect($(b[0]).text()).toEqual(""), expect($(b[1]).text()).toEqual(""), 
                a();
            }, g);
        }), it("Gauge margin test with view port sideNumbersVisibleGreaterThanMinHeightString mobile", function(a) {
            c(k, !0), setTimeout(function() {
                var b = $(".labelText");
                expect(b.length).toBe(2), expect($(b[0]).text()).toEqual("$0"), expect($(b[1]).text()).toEqual("$1"), 
                a();
            }, g);
        }), it("Gauge margin test with view port sideNumbersVisibleSmallerThanMinHeightString", function(a) {
            c(l, !1), setTimeout(function() {
                var b = $(".labelText");
                expect(b.length).toBe(2), expect($(b[0]).text()).toEqual("$0"), expect($(b[1]).text()).toEqual("$1"), 
                a();
            }, g);
        }), it("Gauge margin test with view port sideNumbersVisibleGreaterThanMinHeightString", function(a) {
            c(k, !1), setTimeout(function() {
                var b = $(".labelText");
                expect(b.length).toBe(2), expect($(b[0]).text()).toEqual("$0"), expect($(b[1]).text()).toEqual("$1"), 
                a();
            }, g);
        });
    });
}(powerbitests || (powerbitests = {}));

var GeocodingManager = powerbi.visuals.BI.Services.GeocodingManager;

describe("GeocodingManagerTests", function() {
    it("GeocodingManager.isCategoryType", function() {
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.Address)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.City)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.Continent)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType("Country")).toBeTruthy(), expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.County)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.Longitude)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.Latitude)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.Place)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.PostalCode)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType(GeocodingManager.CategoryTypes.StateOrProvince)).toBeTruthy(), 
        expect(GeocodingManager.isCategoryType("")).toBeFalsy();
    });
});

var powerbitests;

!function(a) {
    var b = powerbi.visuals.ImageVisual;
    describe("ImageVisual", function() {
        it("ImageVisual registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("image").capabilities).toBe(b.capabilities);
        }), it("ImageVisual registered capabilities: objects", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("image").capabilities.objects).toBeDefined();
        }), it("Image no visual configuration", function() {
            var c = a.helpers.testDom("200", "300"), d = {
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }, e = new b();
            e.init(d), expect(c.children().length).toBe(0);
        }), it("Image to about:blank", function() {
            var c = a.helpers.testDom("200", "300"), d = {
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }, e = new b();
            e.init(d), e.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [],
                        objects: {
                            general: {
                                imageUrl: "about:blank"
                            }
                        }
                    }
                } ]
            }), expect(c.find(".imageBackground").css("backgroundImage")).toBe("url(about:blank)");
        }), it("Image from base64 string", function() {
            var c = a.helpers.testDom("200", "300"), d = {
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            }, e = new b();
            e.init(d);
            var f = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAkFBMVEX////+/v78+/vz8e/29PLr5+Tw7etwWEdbPyzTy8Tj3trn4t78+/mTgHOsnZLCt69PMRzX0cvJwLmllYm1qJ53YE8zEQBsUj9QMR68sKZHKRREJA+aiHx+aViGcF7q5t6NeWpkSDafjoAvCwA4FgC4rKSnmJE+HAaKdWhVOCeHeG1TPi5jT0BxX1J5aFtlSznQd83pAAACIklEQVQYGZXBiVraQBiG0ff7s8BMQsJkEaNsalspXbj/u2us1Scg7TM9B64R/0X8H6FMxBPu53ePiCS6bz/qkljCfatK4hnHIxjRjPURiWjCf69AIpYIP44eRCxRdj/bBBFLkHZHh4glQbYOiGgykgoRT2QDIprIhxwRr3AJ8VTuChDvJPFPZQrijQyQuE6vTC94IUiLHMRHMnFGQmSHu+f7vkBckIDcN0PXfR7qJmR5Caj4+mnR1LN5InFGENrDYVHVLviiKIJzIWQp65uG0anCmBKu7ytvTCjNdmVwmJWqDogJEU4NIzPTG0YlCEzdAjFhDPOMP/QbryTAWFcYE4L262lfucx4l7jq0CFAtvGICeGTpN6v5svl/DTrN5t+9rB8/vR0WyMw6kfElHiYMUp8XS22/Wx1WvWbRRXESOT7RGJKrOYmE5cEIm094oxY32cISTaSkMxMYpQOHnHOcDcO443Eu9TliAtSulxjXFHuSsQHxn4ucYVAfCT8vZOIV3KYYUSznfLlgBFHZBk0S09JFOEzjM8PASQuyMQFEQpkNLPOQBITxjVJjWTkj4s6Y0oi/eIQ54QbwAzyuhtclpa8kAT17VODuCCaKgczIE2LXSnJDAj9022D+ECExy5jJEbiRVr3N3ePCeIKoXq/HnzKq9R3m+XzvMpBXCWQa7f9ZrvdbvrV/O521gbAxN+IURKGqm3brvElIxP/ImNCJi78AkZVGOZlPDldAAAAAElFTkSuQmCC";
            e.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [],
                        objects: {
                            general: {
                                imageUrl: f
                            }
                        }
                    }
                } ]
            }), expect(c.find(".imageBackground").css("backgroundImage")).toBe("url(" + f + ")");
        });
    });
}(powerbitests || (powerbitests = {}));

var LegendIcon = powerbi.visuals.LegendIcon, LegendPosition = powerbi.visuals.LegendPosition, DefaultWaitForRender = 10;

describe("legendChart DOM validation", function() {
    function a(a) {
        var b = a.length, c = $(".legendText");
        expect(c.length).toBe(b);
        var d = $(".legendIcon");
        expect(d.length).toBe(b);
        for (var e = 0; b > e; ++e) {
            var f = a[e];
            expect($(c.get(e)).text()).toBe(f.label), expect($(d.get(e)).css("fill")).toBe(f.color);
        }
    }
    function b() {
        for (var a = [ "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY", "AE", "AA", "AP" ], b = d3.scale.category20c(), c = [], d = 0; d < a.length; d++) c.push({
            label: a[d],
            color: b(d),
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        });
        return c;
    }
    var c, d, e, f, g;
    beforeEach(function() {
        powerbi.common.localize = powerbi.common.createLocalizationService();
    }), beforeEach(function() {
        c = powerbitests.helpers.testDom("500", "500"), g = powerbitests.mocks.createVisualHostServices(), 
        f = powerbi.visuals.createInteractivityService(g), e = powerbi.visuals.createLegend(c, !1, f), 
        d = {
            height: c.height(),
            width: c.width()
        };
    }), it("legend dom validation one legend item count validation", function(a) {
        var b = [ {
            label: "California",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.drawLegend({
            dataPoints: b
        }, d), setTimeout(function() {
            expect($(".legendItem").length).toBe(1), expect($(".legendText").length).toBe(1), 
            expect($(".legendIcon").length).toBe(1), a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items count validation", function(a) {
        var b = [ {
            label: "California",
            color: "#ff0000",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Texas",
            color: "#0000ff",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Washington",
            color: "00ff00",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.drawLegend({
            dataPoints: b
        }, d), setTimeout(function() {
            expect($(".legendItem").length).toBe(3), expect($(".legendText").length).toBe(3), 
            expect($(".legendIcon").length).toBe(3), a();
        }, DefaultWaitForRender);
    }), it("legend dom validation incremental build", function(b) {
        var c = [ {
            label: "California",
            color: "#fff000",
            icon: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Texas",
            color: "#ff00ff",
            icon: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Washington",
            color: "#fff000",
            icon: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.drawLegend({
            dataPoints: c
        }, d), setTimeout(function() {
            a(c);
            var f = [ {
                label: "Alaska",
                color: "#fff000",
                icon: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                label: "California",
                color: "#fff00d",
                icon: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                label: "Texas",
                color: "#fffe00",
                icon: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                label: "Washington",
                color: "#0000dd",
                icon: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            } ];
            e.reset(), e.drawLegend({
                dataPoints: f
            }, d), setTimeout(function() {
                a(f), b();
            }, DefaultWaitForRender);
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items first item text", function(a) {
        var b = [ {
            label: "California",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Texas",
            color: "blue",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Washington",
            color: "green",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.reset(), e.drawLegend({
            dataPoints: b
        }, d), setTimeout(function() {
            expect($(".legendText").first().text()).toBe("California"), a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items last item text", function(a) {
        var b = [ {
            label: "California",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Texas",
            color: "blue",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Washington",
            color: "green",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.drawLegend({
            dataPoints: b
        }, d), setTimeout(function() {
            expect($(".legendText").last().text()).toBe("Washington"), a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items colors count", function(a) {
        var b = [ {
            label: "California",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Texas",
            color: "blue",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            label: "Washington",
            color: "green",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.drawLegend({
            dataPoints: b
        }, d), setTimeout(function() {
            expect($(".legendIcon").length).toBe(3), a();
        }, DefaultWaitForRender);
    }), it("legend defaults", function() {
        var a = b(), c = {
            dataPoints: a,
            title: ""
        }, d = {};
        powerbi.visuals.LegendData.update(c, d), expect(d[powerbi.visuals.legendProps.show]).toBe(!0), 
        expect(d[powerbi.visuals.legendProps.position]).toEqual(powerbi.legendPosition.top);
    }), it("legend with title", function() {
        var a = b();
        e.drawLegend({
            dataPoints: a,
            title: "states"
        }, d), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendTitle").length).toBe(1);
    }), it("legend with long title on Right", function() {
        var a = b();
        e.changeOrientation(2), e.drawLegend({
            dataPoints: a,
            title: "This is a super long title and should be truncated by now"
        }, d), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendTitle").text()).toEqual("This is a super long title...");
    }), it("legend no title", function() {
        var a = b();
        e.drawLegend({
            dataPoints: a
        }, d), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendTitle").length).toBe(0);
    }), it("legend Top & horizontal trim", function() {
        var a = b();
        e.changeOrientation(0), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBeGreaterThan(5), 
        expect($(".legendItem").length).toBeLessThan(52);
    }), it("legend Bottom & horizontal trim", function() {
        var a = b();
        e.changeOrientation(1), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBeGreaterThan(5), 
        expect($(".legendItem").length).toBeLessThan(52);
    }), it("legend Left & vertical trim", function() {
        var a = b();
        e.changeOrientation(3), e.drawLegend({
            dataPoints: a
        }, {
            height: 200,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBeGreaterThan(5), 
        expect($(".legendItem").length).toBeLessThan(52);
    }), it("legend Right & vertical trim", function() {
        var a = b();
        e.changeOrientation(2), e.drawLegend({
            dataPoints: a
        }, {
            height: 200,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBeGreaterThan(5), 
        expect($(".legendItem").length).toBeLessThan(52);
    }), it("Intelligent Layout: Low label count should result in longer max-width", function() {
        var a = [ {
            label: "Really long label, but i have the space to show",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.changeOrientation(0), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBe(1), 
        expect($($(".legendText")[0]).text()).not.toContain("...");
    }), it("Intelligent Layout: Lots of small labels should get compacted in horizontal layout", function() {
        var a = b();
        e.changeOrientation(0), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect($(".legendItem").length).toBe(25);
    }), it("Intelligent Layout: If labels in horizontal layout have small widths, width of legend should be small", function() {
        var a = b();
        e.changeOrientation(2), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect(e.getMargins().width).toBeLessThan(200);
    }), it("Intelligent Layout: If labels in horizontal layout have large widths, width of legend should be 30% of viewport", function() {
        var a = [ {
            label: "I am a really long label, but you should not allow me to take more than 300px",
            color: "red",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        e.changeOrientation(2), e.drawLegend({
            dataPoints: a
        }, {
            height: 100,
            width: 1e3
        }), powerbi.visuals.SVGUtil.flushAllD3Transitions(), expect(e.getMargins().width).toBe(300);
    }), it("legend interactivity test ", function() {
        var a = powerbitests.mocks.dataViewScopeIdentity("California"), b = powerbitests.mocks.dataViewScopeIdentity("Texas"), d = powerbitests.mocks.dataViewScopeIdentity("Washington"), h = [ {
            label: "California",
            color: "#ff0000",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createWithId(a),
            selected: !1
        }, {
            label: "Texas",
            color: "#0000ff",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createWithId(b),
            selected: !1
        }, {
            label: "Washington",
            color: "#00ff00",
            icon: 2,
            identity: powerbi.visuals.SelectionId.createWithId(d),
            selected: !1
        } ], i = {
            height: 500,
            width: 500
        };
        e = powerbi.visuals.createLegend(c, !1, f), e.drawLegend({
            title: "Top Data",
            dataPoints: h
        }, i);
        var j = $(".legendIcon");
        spyOn(g, "onSelect").and.callThrough(), j.first().d3Click(0, 0), expect(j[0].style.fill).toBe("#ff0000"), 
        expect(j[1].style.fill).toBe("#a6a6a6"), expect(j[2].style.fill).toBe("#a6a6a6"), 
        j.last().d3Click(0, 0), expect(j[0].style.fill).toBe("#a6a6a6"), expect(j[1].style.fill).toBe("#a6a6a6"), 
        expect(j[2].style.fill).toBe("#00ff00"), j.first().d3Click(0, 0, 1), expect(j[0].style.fill).toBe("#ff0000"), 
        expect(j[1].style.fill).toBe("#a6a6a6"), expect(j[2].style.fill).toBe("#00ff00"), 
        $(".clearCatcher").first().d3Click(0, 0), expect(j[0].style.fill).toBe("#ff0000"), 
        expect(j[1].style.fill).toBe("#0000ff"), expect(j[2].style.fill).toBe("#00ff00");
    });
}), describe("interactive legend DOM validation", function() {
    function a(a) {
        var b = a.length, c = $(".interactive-legend .item");
        expect($(".interactive-legend .title").length).toBe(1), expect(c.length).toBe(b);
        var d = $(".interactive-legend .icon");
        expect(d.length).toBe(b);
        for (var e = [], g = [], h = 0; b > h; h += 2) e.push($(c.get(h))), g.push($(d.get(h)));
        for (var h = 1; b > h; h += 2) e.push($(c.get(h))), g.push($(d.get(h)));
        for (var h = 0; b > h; ++h) {
            var i = a[h], j = e[h], k = g[h];
            expect(j.find(".itemName").text()).toBe(i.label), expect(j.find(".itemMeasure").text().trim()).toBe(i.measure.toString()), 
            expect(k.attr("style").trim()).toBe(jsCommon.StringExtensions.format(f, i.color));
        }
    }
    var b, c, d, e, f = "color: {0};", g = 65;
    beforeEach(function() {
        powerbi.common.localize = powerbi.common.createLocalizationService();
    }), beforeEach(function() {
        b = powerbitests.helpers.testDom("500", "500");
        var a = powerbitests.mocks.createVisualHostServices();
        e = powerbi.visuals.createInteractivityService(a), d = powerbi.visuals.createLegend(b, !0, e);
    }), it("legend dom validation one legend item count validation", function(a) {
        var b = [ {
            category: "state",
            label: "California",
            color: "red",
            icon: 2,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: b
        }, c), setTimeout(function() {
            expect($(".interactive-legend .title").length).toBe(1), expect($(".interactive-legend .item").length).toBe(1), 
            a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items count validation", function(a) {
        var b = [ {
            category: "state",
            label: "California",
            color: "red",
            icon: 2,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Texas",
            color: "blue",
            icon: 2,
            measure: 10,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Washington",
            color: "green",
            icon: 2,
            measure: 15,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: b
        }, c), setTimeout(function() {
            expect($(".interactive-legend .title").length).toBe(1), expect($(".interactive-legend .item").length).toBe(3), 
            a();
        }, DefaultWaitForRender);
    }), it("legend dom validation incremental build", function(b) {
        var e = [ {
            category: "state",
            label: "California",
            color: "red",
            icon: 0,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Texas",
            color: "blue",
            icon: 0,
            measure: 10,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Washington",
            color: "green",
            icon: 0,
            measure: 15,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: e
        }, c), setTimeout(function() {
            a(e);
            var f = [ {
                category: "state",
                label: "Alaska",
                color: "red",
                icon: 0,
                measure: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                category: "state",
                label: "California",
                color: "blue",
                icon: 0,
                measure: 5,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                category: "state",
                label: "Texas",
                color: "green",
                icon: 0,
                measure: 10,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                category: "state",
                label: "Washington",
                color: "orange",
                icon: 0,
                measure: 15,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            } ];
            d.reset(), d.drawLegend({
                dataPoints: f
            }, c), setTimeout(function() {
                a(f), b();
            }, DefaultWaitForRender);
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items first item name and measure", function(a) {
        var b = [ {
            category: "state",
            label: "Alaska",
            color: "red",
            icon: 0,
            measure: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "California",
            color: "blue",
            icon: 0,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Texas",
            color: "green",
            icon: 0,
            measure: 10,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: b
        }, c), setTimeout(function() {
            expect($(".interactive-legend .title").text()).toBe(b[0].category), expect($(".interactive-legend .item").first().find(".itemName").text().trim()).toBe("Alaska"), 
            expect($(".interactive-legend .item").first().find(".itemMeasure").text().trim()).toBe("0"), 
            a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items last item name and measure", function(a) {
        var b = [ {
            category: "state",
            label: "Alaska",
            color: "red",
            icon: 0,
            measure: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "California",
            color: "blue",
            icon: 0,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Texas",
            color: "green",
            icon: 0,
            measure: 10,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: b
        }, c), setTimeout(function() {
            expect($(".interactive-legend .title").text()).toBe(b[0].category), expect($(".interactive-legend .item").last().find(".itemName").text().trim()).toBe("California"), 
            expect($(".interactive-legend .item").last().find(".itemMeasure").text().trim()).toBe("5"), 
            a();
        }, DefaultWaitForRender);
    }), it("legend dom validation three legend items colors count", function(a) {
        var b = [ {
            category: "state",
            label: "Alaska",
            color: "red",
            icon: 0,
            measure: 0,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "California",
            color: "blue",
            icon: 0,
            measure: 5,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        }, {
            category: "state",
            label: "Texas",
            color: "green",
            icon: 0,
            measure: 10,
            identity: powerbi.visuals.SelectionId.createNull(),
            selected: !1
        } ];
        d.drawLegend({
            dataPoints: b
        }, c), setTimeout(function() {
            expect($(".interactive-legend .icon").length).toBe(3), a();
        }, DefaultWaitForRender);
    }), it("legend getHeight empty", function() {
        expect(d.getMargins().height).toBe(g);
    }), it("legend getHeight no data", function() {
        d.drawLegend({
            dataPoints: []
        }, c), expect(d.getMargins().height).toBe(g);
    }), it("legend getHeight data", function() {
        d.drawLegend({
            dataPoints: [ {
                category: "state",
                label: "Alaska",
                color: "red",
                icon: 0,
                measure: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                category: "state",
                label: "California",
                color: "blue",
                icon: 0,
                measure: 5,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            }, {
                category: "state",
                label: "Texas",
                color: "green",
                icon: 0,
                measure: 10,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            } ]
        }, c), expect(d.getMargins().height).toBe(g);
    }), it("legend getHeight one data point", function() {
        d.drawLegend({
            dataPoints: [ {
                category: "state",
                label: "Alaska",
                color: "red",
                icon: 0,
                measure: 0,
                identity: powerbi.visuals.SelectionId.createNull(),
                selected: !1
            } ]
        }, c), expect(d.getMargins().height).toBe(g);
    });
});

var powerbitests;

!function(a) {
    var b = powerbi.axisType, c = a.utils.ColorUtility, d = powerbi.data.dsr.DataShapeUtility, e = powerbi.data.DataViewPivotCategorical, f = powerbi.data.DataViewTransform, g = powerbi.visuals.LineChart, h = (powerbi.PrimitiveType, 
    powerbi.visuals.SVGUtil), i = powerbi.visuals.SelectionId, j = powerbi.data.SemanticType, k = powerbi.ValueType, l = 10;
    describe("LineChart Dataview Validation", function() {
        function h(a, b) {
            var c = [];
            return a && c.push({
                type: a
            }), {
                metadata: {
                    objects: b
                },
                categorical: {
                    categories: {
                        "for": {
                            "in": {
                                role: "Category",
                                items: c
                            }
                        },
                        dataReductionAlgorithm: {
                            top: {}
                        }
                    },
                    values: {
                        group: {
                            by: {
                                role: "Series",
                                items: [ {
                                    type: k.fromPrimitiveTypeAndCategory(1)
                                } ]
                            },
                            select: [ {
                                "for": {
                                    "in": {
                                        role: "Y",
                                        items: [ {
                                            type: k.fromPrimitiveTypeAndCategory(4)
                                        } ]
                                    }
                                }
                            } ],
                            dataReductionAlgorithm: {
                                top: {}
                            }
                        }
                    }
                }
            };
        }
        function m(c, g) {
            function h(a) {
                var b = {
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: a,
                                subtotal: 246500
                            } ])
                        }
                    } ]
                };
                return b;
            }
            var i, m, n = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1),
                    objects: {
                        general: {
                            formatString: "0.000"
                        }
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !1,
                    type: d.describeDataType(4),
                    objects: {
                        general: {
                            formatString: "d"
                        }
                    }
                } ]
            }, o = powerbi.Prototype.inherit(n);
            o.objects = {
                categoryAxis: {
                    scalar: !0
                }
            }, beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService()), m = a.helpers.testDom("500", "500"), 
                i = g ? powerbi.visuals.visualPluginFactory.createMinerva({
                    heatMap: !1,
                    scrollableVisuals: !0
                }).getPlugin("lineChart").create() : powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
                i.init({
                    element: m,
                    host: s,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: m.height(),
                        width: m.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    },
                    interactivity: {
                        isInteractiveLegend: c
                    }
                });
            }), it("NaN in values shows a warning", function(a) {
                var b = jasmine.createSpy("warning");
                s.setWarnings = b;
                var c = h([ NaN, 495e3, 49e4, 48e4, 5e5 ]);
                i.onDataChanged(c), setTimeout(function() {
                    expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                    a();
                }, l);
            }), it("Negative Infinity in values shows a warning", function(a) {
                var b = jasmine.createSpy("warning");
                s.setWarnings = b;
                var c = h([ Number.NEGATIVE_INFINITY, 495e3, 49e4, 48e4, 5e5 ]);
                i.onDataChanged(c), setTimeout(function() {
                    expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    a();
                }, l);
            }), it("Positive Infinity in values shows a warning", function(a) {
                var b = jasmine.createSpy("warning");
                s.setWarnings = b;
                var c = h([ Number.POSITIVE_INFINITY, 495e3, 49e4, 48e4, 5e5 ]);
                i.onDataChanged(c), setTimeout(function() {
                    expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                    a();
                }, l);
            }), it("Out of range value in values shows a warning", function(a) {
                var b = jasmine.createSpy("warning");
                s.setWarnings = b;
                var c = h([ -1e301, 495e3, 49e4, 48e4, 5e5 ]);
                i.onDataChanged(c), setTimeout(function() {
                    expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                    a();
                }, l);
            }), it("All okay in values does not show a warning", function(a) {
                var b = jasmine.createSpy("warning");
                s.setWarnings = b;
                var c = h([ 48e4, 495e3, 49e4, 48e4, 5e5 ]);
                i.onDataChanged(c), setTimeout(function() {
                    expect(b).not.toHaveBeenCalled(), a();
                }, l);
            }), it("line chart dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("480K"), 
                    a();
                }, l);
            }), it("verify viewport when filtering data", function(a) {
                var d = _.clone(n);
                d.objects = {
                    categoryAxis: {
                        show: !0,
                        start: 490001,
                        end: 495001,
                        axisType: b.scalar,
                        showAxisTitle: !0,
                        axisStyle: !0
                    }
                }, i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                });
                var e = $(".mainGraphicsContext").parent()[0].getBoundingClientRect();
                c ? setTimeout(function() {
                    expect(e.height).toBeCloseTo(405, 0), expect(e.width).toBeCloseTo(384, 0), a();
                }, l) : setTimeout(function() {
                    expect(e.height).toBeCloseTo(470, 0), expect(e.width).toBeCloseTo(384, 0), a();
                }, l);
            }), it("ensure line chart is cleared when an empty dataview is applied", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".lineChart").find(".line").length;
                    expect(b).toBe(1), i.onDataChanged({
                        dataViews: [ {
                            metadata: n,
                            categorical: {
                                categories: [ {
                                    source: n.columns[0],
                                    values: []
                                } ],
                                values: f.createValueColumns([])
                            }
                        } ]
                    }), setTimeout(function() {
                        var b = $(".lineChart").find(".line").length;
                        expect(b).toBe(0), a();
                    }, l);
                }, l);
            }), it("line chart check if date time axis has margin allocated in DOM", function(a) {
                var b = {
                    columns: [ {
                        displayName: "Date",
                        type: k.fromDescriptor({
                            dateTime: !0
                        })
                    }, {
                        displayName: "PowerBI Customers",
                        isMeasure: !0
                    } ]
                }, c = {
                    metadata: b,
                    categorical: {
                        categories: [ {
                            source: b.columns[0],
                            values: [ new Date("2014/9/25"), new Date("2014/12/12"), new Date("2015/9/25") ]
                        } ],
                        values: f.createValueColumns([ {
                            source: b.columns[1],
                            values: [ 8e3, 2e4, 1e6 ]
                        } ])
                    }
                };
                i.onDataChanged({
                    dataViews: [ c ]
                }), setTimeout(function() {
                    var b = $(".lineChart .axisGraphicsContext .x.axis .tick text");
                    expect(b.length).toBe(6);
                    for (var c = [ "Nov 2014", "Jan 2015", "Mar 2015", "May 2015", "Jul 2015", "Sep 2015" ], d = 0; 0 > d; d++) {
                        var e = $(b[d]).text(), f = new Date(e).toUTCString(), g = new Date(c[d]).toUTCString();
                        expect(f).toEqual(g);
                    }
                    a();
                }, l);
            }), it("Line chart with an undefined domain", function(a) {
                var b = {
                    columns: [ {
                        displayName: "Date",
                        type: k.fromDescriptor({
                            dateTime: !0
                        })
                    }, {
                        displayName: "PowerBI Fans",
                        isMeasure: !0
                    } ]
                }, c = {
                    metadata: b,
                    categorical: {
                        categories: [ {
                            source: b.columns[0],
                            values: []
                        } ],
                        values: f.createValueColumns([ {
                            source: b.columns[1],
                            values: []
                        } ])
                    }
                };
                i.onDataChanged({
                    dataViews: [ c ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    a();
                }, l);
            }), it("line chart with small interval dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 1, .995, .99, .985, .995 ],
                                subtotal: 4.965
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("0.985"), 
                    a();
                }, l);
            }), it("line chart validate auto margin", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "ReallyLongValuesSoYouRotate1", "ReallyLongValuesSoYouRotate2", "ReallyLongValuesSoYouRotate3", "ReallyLongValuesSoYouRotate4", "ReallyLongValuesSoYouRotate5" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 5e4, 49500, 49e3, 48e3, 5e4 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = parseFloat($(".lineChart .axisGraphicsContext .x.axis").attr("transform").split(",")[1].replace("(", "")), c = parseFloat($(".lineChart .axisGraphicsContext .y.axis").attr("transform").split(",")[0].split("(")[1]);
                    i.onDataChanged({
                        dataViews: [ {
                            metadata: n,
                            categorical: {
                                categories: [ {
                                    source: n.columns[0],
                                    values: [ "a", "b", "c", "d", "e" ]
                                } ],
                                values: f.createValueColumns([ {
                                    source: n.columns[1],
                                    values: [ 0, 1, 2, 3, 4 ],
                                    subtotal: 246500
                                } ])
                            }
                        } ]
                    }), setTimeout(function() {
                        var d = parseFloat($(".lineChart .axisGraphicsContext .x.axis").attr("transform").split(",")[1].replace("(", "")), e = parseFloat($(".lineChart .axisGraphicsContext .y.axis").attr("transform").split(",")[0].split("(")[1]);
                        expect(b).toBeLessThan(d), expect(c).toBeLessThan(e), a();
                    }, l);
                }, l);
            }), it("line chart multi-series dom validation", function(b) {
                var e = {
                    columns: [ {
                        displayName: "col1",
                        type: d.describeDataType(2048)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    }, {
                        displayName: "col3",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    } ]
                }, g = [ a.mocks.dataViewScopeIdentity("col2"), a.mocks.dataViewScopeIdentity("col3") ], h = {
                    displayName: "sales",
                    isMeasure: !0,
                    type: d.describeDataType(j.Integer)
                }, k = powerbi.data.SQExprBuilder.fieldDef({
                    schema: "s",
                    entity: "e",
                    column: "sales"
                }), m = f.createValueColumns([ {
                    source: e.columns[1],
                    values: [ 110, 120, 130, 140, 150 ],
                    identity: g[0]
                }, {
                    source: e.columns[2],
                    values: [ 210, 220, 230, 240, 250 ],
                    identity: g[1]
                } ], [ k ]);
                m.source = h, i.onDataChanged({
                    dataViews: [ {
                        metadata: e,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: [ "a", "b", "c", "d", "e" ],
                                identityFields: [ r ]
                            } ],
                            values: m
                        }
                    } ]
                }), setTimeout(function() {
                    var a = $(".lineChart .mainGraphicsContext .line");
                    expect(a.length).toEqual(2);
                    var d = $(a.get(0)).attr("style");
                    expect(d).toBeDefined();
                    var e = $(a.get(1)).attr("style");
                    expect(e).toBeDefined(), c || expect($(".legendTitle").text()).toBe("sales"), b();
                }, l);
            }), it("line chart with nulls dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 0, 10, null, 15, 5 ],
                                subtotal: 20
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .mainGraphicsContext .line")[0].getAttribute("d")).toBeDefined(), 
                    a();
                }, l);
            }), it("Regression Test: Ensure chart does not miraculously shrink with data updates", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            }, {
                                source: n.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    for (var b = $(".lineChart svg"), c = b.height(), d = 0; 5 > d; d++) i.onDataChanged({
                        dataViews: [ {
                            metadata: n,
                            categorical: {
                                categories: [ {
                                    source: n.columns[0],
                                    values: [ "a", "b", "c", "d", "e" ]
                                } ],
                                values: f.createValueColumns([ {
                                    source: n.columns[1],
                                    values: [ 1, 2, 3, 4, 5 ],
                                    subtotal: 15
                                }, {
                                    source: n.columns[1],
                                    values: [ 1, 2, 3, 4, 6 ],
                                    subtotal: 16
                                } ])
                            }
                        } ]
                    });
                    setTimeout(function() {
                        var b = $(".lineChart svg").height();
                        expect(b).toBe(c), a();
                    }, l);
                }, l);
            }), it("line chart with null points dom validation (in the middle)", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ null, 10, null, 15, null ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".dot");
                    expect(b.length).toBe(g ? 2 : 5);
                    var c = b.filter('[r^="4"]');
                    expect(c.length).toBe(2), a();
                }, l);
            }), it("line chart with null points dom validation (first and last)", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 10, null, 5, null, 15 ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".dot");
                    expect(b.length).toBe(g ? 3 : 5);
                    var c = b.filter('[r^="4"]');
                    expect(c.length).toBe(3), a();
                }, l);
            }), it("line chart with null points dom validation (first and last) - scalar does not draw dots", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: o,
                        categorical: {
                            categories: [ {
                                source: n.columns[2],
                                values: [ new Date("2014/1/1"), new Date("2014/2/1"), new Date("2014/3/1"), new Date("2014/4/1"), new Date("2014/5/1") ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 10, null, 5, null, 15 ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".dot").filter('[r^="4"]');
                    expect(b.length).toBe(0);
                    var c = $(".lineChart .mainGraphicsContext .line");
                    expect(c.length).toBe(1), a();
                }, l);
            }), it("ensure selection circle is removed from dom when series is dropped", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ null, 10, null, 15, null ],
                                subtotal: 15
                            }, {
                                source: n.columns[1],
                                values: [ null, 10, null, 15, null ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".selection-circle");
                    expect(b.length).toBe(g ? 0 : 2), i.onDataChanged({
                        dataViews: [ {
                            metadata: n,
                            categorical: {
                                categories: [ {
                                    source: n.columns[0],
                                    values: [ "a", "b", "c", "d", "e" ]
                                } ],
                                values: f.createValueColumns([ {
                                    source: n.columns[1],
                                    values: [ null, 10, null, 15, null ],
                                    subtotal: 15
                                } ])
                            }
                        } ]
                    }), setTimeout(function() {
                        var b = $(".selection-circle");
                        expect(b.length).toBe(g ? 0 : 1), a();
                    }, l);
                }, l);
            }), it("line chart non-category multi-measure dom validation", function(a) {
                var b = {
                    columns: [ {
                        displayName: "col1",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    } ]
                };
                i.onDataChanged({
                    dataViews: [ {
                        metadata: b,
                        categorical: {
                            values: f.createValueColumns([ {
                                source: n.columns[0],
                                values: [ 100 ]
                            }, {
                                source: n.columns[1],
                                values: [ 200 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    g || (expect($(".lineChart .hover-line .selection-circle").length).toEqual(2), expect($(".lineChart .hover-line .selection-circle:eq(0)").attr("r")).toEqual("4"), 
                    expect($(".lineChart .hover-line .selection-circle:eq(1)").attr("r")).toEqual("4")), 
                    a();
                }, l);
            }), it("line chart series only dom validation", function(b) {
                var c = {
                    columns: [ {
                        displayName: "col1",
                        properties: {
                            Series: !0
                        },
                        type: d.describeDataType(2048)
                    }, {
                        displayName: "col2",
                        properties: {
                            Y: !0
                        },
                        type: d.describeDataType(j.Integer)
                    } ]
                };
                i.onDataChanged({
                    dataViews: [ e.apply({
                        metadata: c,
                        categorical: {
                            categories: [ {
                                source: c.columns[0],
                                values: [ "a", "b", "c" ],
                                identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                                identityFields: [ r ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 1, 2, 3 ]
                            } ])
                        }
                    }) ]
                }), setTimeout(function() {
                    g || (expect($(".lineChart .hover-line .selection-circle").length).toEqual(3), expect($(".lineChart .hover-line .selection-circle:eq(0)").attr("r")).toEqual("4"), 
                    expect($(".lineChart .hover-line .selection-circle:eq(1)").attr("r")).toEqual("4"), 
                    expect($(".lineChart .hover-line .selection-circle:eq(2)").attr("r")).toEqual("4")), 
                    b();
                }, l);
            }), it("empty line chart dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: []
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: []
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBe(0), expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("10"), 
                    a();
                }, l);
            }), it("line chart with single point dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 4 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".dot");
                    expect(b.length).toBe(1);
                    var c = b.filter('[r^="4"]');
                    expect(c.length).toBe(1), g || (expect($(".lineChart .hover-line .selection-circle").length).toEqual(1), 
                    expect($(".lineChart .hover-line .selection-circle:eq(0)").attr("r")).toEqual("4")), 
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBe(1), expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("5"), 
                    a();
                }, l);
            }), it("line chart does not show less ticks dom validation", function(a) {
                i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 26.125, 26.125 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(1), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("30"), 
                    a();
                }, l);
            }), it("line chart shows less ticks dom validation", function(a) {
                var b = {
                    columns: [ {
                        displayName: "col1",
                        type: d.describeDataType(2048)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(j.Integer)
                    } ]
                };
                i.onDataChanged({
                    dataViews: [ {
                        metadata: b,
                        categorical: {
                            categories: [ {
                                source: b.columns[0],
                                values: [ "a", "b" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: b.columns[1],
                                values: [ 5, 5 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBe(3), expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("6"), 
                    a();
                }, l);
            }), it("line chart on small tile shows at least two tick lines dom validation", function(a) {
                i.onResizing({
                    height: 101,
                    width: 226
                }, 0), i.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: n.columns[0],
                                values: [ "a", "b", "c" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ .1495, .15, .1633 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(1), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("0.150"), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("0.160"), 
                    a();
                }, l);
            });
        }
        function n(b) {
            var c, e, g = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                } ]
            };
            beforeEach(function() {
                e = a.helpers.testDom("500", "500"), c = powerbi.visuals.visualPluginFactory.create().getPlugin("areaChart").create(), 
                c.init({
                    element: e,
                    host: s,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: e.height(),
                        width: e.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    },
                    interactivity: {
                        isInteractiveLegend: b
                    }
                });
            }), it("check area rendered", function(a) {
                c.onDataChanged({
                    dataViews: [ {
                        metadata: g,
                        categorical: {
                            categories: [ {
                                source: g.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: g.columns[1],
                                values: [ 5e4, 49500, 49e3, 48e3, 5e4 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".cat")).toBeDefined(), expect($(".catArea")).toBeDefined(), a();
                }, l);
            }), it("check linear scale with big interval renders", function(a) {
                c.onDataChanged({
                    dataViews: [ {
                        metadata: g,
                        categorical: {
                            categories: [ {
                                source: g.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: g.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".cat")).toBeDefined(), expect($(".catArea")).toBeDefined(), expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("480K"), 
                    a();
                }, l);
            }), it("check linear scale with small interval renders", function(a) {
                c.onDataChanged({
                    dataViews: [ {
                        metadata: g,
                        categorical: {
                            categories: [ {
                                source: g.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: g.columns[1],
                                values: [ 1, .995, .99, .985, .995 ],
                                subtotal: 4.965
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".cat")).toBeDefined(), expect($(".catArea")).toBeDefined(), expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("0.98"), 
                    a();
                }, l);
            }), it("empty areaChart dom validation", function(a) {
                c.onDataChanged({
                    dataViews: [ {
                        metadata: g,
                        categorical: {
                            categories: [ {
                                source: g.columns[0],
                                values: []
                            } ],
                            values: f.createValueColumns([ {
                                source: g.columns[1],
                                values: []
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .x.axis .tick").length).toBe(0), expect($(".lineChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("10"), 
                    a();
                }, l);
            });
        }
        function o(b) {
            var e, g, h = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                }, {
                    displayName: "col3",
                    isMeasure: !1,
                    type: d.describeDataType(4),
                    format: "d"
                } ]
            }, k = powerbi.visuals.visualStyles.create().colorPalette.dataColors, m = powerbi.Prototype.inherit(h);
            m.objects = {
                labels: {
                    show: !0,
                    labelPrecision: 0
                }
            };
            var n = powerbi.Prototype.inherit(h);
            n.objects = {
                labels: {
                    show: !1
                }
            };
            var o = powerbi.Prototype.inherit(h);
            o.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 0
                }
            };
            var p = powerbi.Prototype.inherit(h);
            p.objects = {
                labels: {
                    show: !0,
                    labelDisplayUnits: 1e3,
                    labelPrecision: 1
                }
            }, beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService()), g = a.helpers.testDom("500", "500"), 
                e = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
                e.init({
                    element: g,
                    host: s,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: g.height(),
                        width: g.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    },
                    interactivity: {
                        isInteractiveLegend: b
                    }
                });
            }), it("line chart show labels validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: m.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: m.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBeGreaterThan(0), 
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toBe("495000"), 
                    a();
                }, l);
            }), it("line chart labels style validation", function(a) {
                var b = i.createWithMeasure("col1"), d = b.getKey(), g = k.getColor(d).value, h = "1";
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: m.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: m.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var b = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().css("fill");
                    expect(c.convertFromRGBorHexToHex(b)).toBe(c.convertFromRGBorHexToHex(g).toLowerCase()), 
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().css("fill-opacity")).toBe(h), 
                    a();
                }, l);
            }), it("line chart labels custom style validation", function(a) {
                var b = {
                    solid: {
                        color: "rgb(255, 0, 0)"
                    }
                }, d = powerbi.Prototype.inherit(h);
                d.objects = {
                    labels: {
                        show: !0,
                        color: b
                    }
                }, e.onDataChanged({
                    dataViews: [ {
                        metadata: d,
                        categorical: {
                            categories: [ {
                                source: d.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: d.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var d = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().css("fill");
                    expect(c.convertFromRGBorHexToHex(d)).toBe(c.convertFromRGBorHexToHex(b.solid.color)), 
                    a();
                }, l);
            }), it("line chart hide labels validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: n,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(0), 
                    a();
                }, l);
            }), it("labels should support display units with no precision", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: o,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 500123, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toBe("500K"), 
                    a();
                }, l);
            }), it("labels should support display units with precision", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: p,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: n.columns[1],
                                values: [ 500123, 495e3, 49e4, 48e4, 5e5 ],
                                subtotal: 246500
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toBe("500.1K"), 
                    a();
                }, l);
            }), it("line chart data labels multi-series", function(b) {
                var g = [ a.mocks.dataViewScopeIdentity("col2"), a.mocks.dataViewScopeIdentity("col3") ], h = {
                    columns: [ {
                        displayName: "col1",
                        type: d.describeDataType(2048)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    }, {
                        displayName: "col3",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    } ]
                };
                h.objects = {
                    labels: {
                        show: !0
                    }
                };
                var m = [ i.createWithMeasure("col1"), i.createWithMeasure("col2") ], n = [ m[0].getKey(), m[1].getKey() ], o = k.getColor(n[0]).value, p = k.getColor(n[1]).value, q = {
                    displayName: "sales",
                    isMeasure: !0,
                    type: d.describeDataType(j.Integer)
                }, s = powerbi.data.SQExprBuilder.fieldDef({
                    schema: "s",
                    entity: "e",
                    column: "sales"
                }), t = f.createValueColumns([ {
                    source: h.columns[1],
                    values: [ 110, 120, 130, 140, 150 ],
                    identity: g[0]
                }, {
                    source: h.columns[2],
                    values: [ 210, 220, 230, 240, 250 ],
                    identity: g[1]
                } ], [ s ]);
                t.source = q, e.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ],
                                identityFields: [ r ]
                            } ],
                            values: t
                        }
                    } ]
                }), setTimeout(function() {
                    var a = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().css("fill");
                    expect(c.convertFromRGBorHexToHex(a)).toBe(c.convertFromRGBorHexToHex(o).toLowerCase());
                    var d = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").last().css("fill");
                    expect(c.convertFromRGBorHexToHex(d)).toBe(c.convertFromRGBorHexToHex(p).toLowerCase()), 
                    b();
                }, l);
            }), it("line chart data labels multi-series to one series", function(b) {
                var g = [ a.mocks.dataViewScopeIdentity("col2"), a.mocks.dataViewScopeIdentity("col3") ], h = {
                    columns: [ {
                        displayName: "col1",
                        type: d.describeDataType(2048)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    }, {
                        displayName: "col3",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    } ]
                };
                h.objects = {
                    labels: {
                        show: !0
                    }
                };
                var m = [ i.createWithMeasure("col1"), i.createWithMeasure("col2") ], n = [ m[0].getKey(), m[1].getKey() ], o = k.getColor(n[0]).value, p = {
                    displayName: "sales",
                    isMeasure: !0,
                    type: d.describeDataType(j.Integer)
                }, q = powerbi.data.SQExprBuilder.fieldDef({
                    schema: "s",
                    entity: "e",
                    column: "sales"
                }), s = f.createValueColumns([ {
                    source: h.columns[1],
                    values: [ 110, 120, 130, 140, 150 ],
                    identity: g[0]
                }, {
                    source: h.columns[2],
                    values: [ 210, 220, 230, 240, 250 ],
                    identity: g[1]
                } ], [ q ]);
                s.source = p, e.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ],
                                identityFields: [ r ]
                            } ],
                            values: s
                        }
                    } ]
                });
                var t = f.createValueColumns([ {
                    source: h.columns[1],
                    values: [ 110, 120, 130, 140, 150 ],
                    identity: g[0]
                } ], [ q ]);
                t.source = p, e.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ],
                                identityFields: [ r ]
                            } ],
                            values: t
                        }
                    } ]
                }), setTimeout(function() {
                    var a = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().css("fill");
                    expect(c.convertFromRGBorHexToHex(a)).toBe(c.convertFromRGBorHexToHex(o).toLowerCase());
                    var d = $(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").last().css("fill");
                    expect(c.convertFromRGBorHexToHex(d)).toBe(c.convertFromRGBorHexToHex(o).toLowerCase()), 
                    b();
                }, l);
            }), it("line chart with nulls dom validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: h.columns[1],
                                values: [ null, 10, null, 15, null ],
                                subtotal: 20
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(1), 
                    a();
                }, l);
            }), it("change line chart dom data label validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: m.columns[1],
                                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(3), 
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toBe("495000"), 
                    e.onDataChanged({
                        dataViews: [ {
                            metadata: m,
                            categorical: {
                                categories: [ {
                                    source: h.columns[0],
                                    values: [ "q", "w", "r", "t" ]
                                } ],
                                values: f.createValueColumns([ {
                                    source: m.columns[1],
                                    values: [ 400, 500, 300, 200 ]
                                } ])
                            }
                        } ]
                    }), setTimeout(function() {
                        expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(3), 
                        expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").first().text()).toBe("400"), 
                        a();
                    }, l);
                }, l);
            }), it("line chart non-category multi-measure dom data label validation", function(a) {
                var b = {
                    columns: [ {
                        displayName: "col1",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    }, {
                        displayName: "col2",
                        isMeasure: !0,
                        type: d.describeDataType(1)
                    } ]
                };
                b.objects = {
                    labels: {
                        show: !0
                    }
                }, e.onDataChanged({
                    dataViews: [ {
                        metadata: b,
                        categorical: {
                            values: f.createValueColumns([ {
                                source: h.columns[0],
                                values: [ 100 ]
                            }, {
                                source: h.columns[1],
                                values: [ 200 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(1), 
                    a();
                }, l);
            }), it("empty line chart dom data labels validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: []
                            } ],
                            values: f.createValueColumns([ {
                                source: h.columns[1],
                                values: []
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").length).toBe(0), 
                    a();
                }, l);
            }), it("line chart with single point dom data label validation", function(a) {
                e.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ "a" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: h.columns[1],
                                values: [ 4 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".lineChart .axisGraphicsContext .dataLabelsSVG .data-labels").text()).toBe("4"), 
                    a();
                }, l);
            });
        }
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        });
        var p = "(Blank)", q = {
            columns: [ {
                displayName: "col1",
                queryName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                queryName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            }, {
                displayName: "col3",
                queryName: "col3",
                isMeasure: !0,
                type: d.describeDataType(1)
            }, {
                displayName: "col4",
                queryName: "col4",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        }, r = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "col1"
        }), s = a.mocks.createVisualHostServices(), t = powerbi.visuals.visualStyles.create().colorPalette.dataColors;
        it("LineChart registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").capabilities).toBe(powerbi.visuals.lineChartCapabilities);
        }), it("LineChart registered customizeQuery", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").customizeQuery).toBe(g.customizeQuery);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.lineChartCapabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.lineChartCapabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.lineChartCapabilities.suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.lineChartCapabilities.objects)).toEqual(powerbi.visuals.lineChartProps.general.formatString);
        }), it("CustomizeQuery picks sample based on data type", function() {
            var a = {
                categoryAxis: {}
            }, b = h(k.fromPrimitiveTypeAndCategory(7), a);
            g.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.categorical.categories.dataReductionAlgorithm).toEqual({
                sample: {}
            });
        }), it("CustomizeQuery picks top based on data type", function() {
            var a = {
                categoryAxis: {}
            }, b = h(k.fromPrimitiveTypeAndCategory(1), a);
            g.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("CustomizeQuery no category", function() {
            var a = {
                categoryAxis: {}
            }, b = h(null, a);
            g.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("CustomizeQuery explicit scalar axis on non-scalar type", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, b = h(k.fromPrimitiveTypeAndCategory(1), a);
            g.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("CustomizeQuery explicit categorical axis on scalar type", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, b = h(k.fromPrimitiveTypeAndCategory(1), a);
            g.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.categorical.categories.dataReductionAlgorithm).toEqual({
                top: {}
            });
        }), it("Sortable roles with scalar axis", function() {
            var a = {
                categoryAxis: {
                    axisType: "Scalar"
                }
            }, b = h(k.fromPrimitiveTypeAndCategory(7), a);
            expect(g.getSortableRoles({
                dataViewMappings: [ b ]
            })).toBeNull();
        }), it("Sortable roles with categorical axis", function() {
            var a = {
                categoryAxis: {
                    axisType: "Categorical"
                }
            }, b = h(k.fromPrimitiveTypeAndCategory(7), a);
            expect(g.getSortableRoles({
                dataViewMappings: [ b ]
            })).toEqual([ "Category" ]);
        }), it("Check convert empty + fill color", function() {
            var a = {
                columns: [ q.columns[0], powerbi.Prototype.inherit(q.columns[1], function(a) {
                    return a.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: "#41BEE0"
                                }
                            }
                        }
                    };
                }) ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [],
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE0"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: f.createValueColumns([ {
                        source: a.columns[1],
                        values: [],
                        subtotal: 0
                    } ])
                }
            }, c = i.createWithMeasure("col2"), d = c.getKey(), e = g.converter(b, p, t, !1);
            expect(e.series).toEqual([ {
                key: d,
                lineIndex: 0,
                color: "#41BEE0",
                xCol: b.metadata.columns[0],
                yCol: b.metadata.columns[1],
                data: [],
                selected: !1,
                identity: i.createWithMeasure("col2")
            } ]);
        }), it("Check convert categorical + fill color", function() {
            var a = "#41BEE0", b = {
                columns: [ q.columns[0], powerbi.Prototype.inherit(q.columns[1], function(b) {
                    return b.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: a
                                }
                            }
                        }
                    };
                }) ]
            }, c = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: b.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, d = i.createWithMeasure("col2"), e = d.getKey(), h = g.converter(c, p, t, !1).series, j = [ {
                key: e,
                lineIndex: 0,
                color: a,
                xCol: c.metadata.columns[0],
                yCol: c.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: d,
                    selected: !1,
                    key: JSON.stringify({
                        ser: e,
                        catIdx: 0
                    }),
                    labelFill: a
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: d,
                    selected: !1,
                    key: JSON.stringify({
                        ser: e,
                        catIdx: 1
                    }),
                    labelFill: a
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: d,
                    selected: !1,
                    key: JSON.stringify({
                        ser: e,
                        catIdx: 2
                    }),
                    labelFill: a
                } ],
                identity: i.createWithMeasure("col2"),
                selected: !1
            } ];
            expect(h).toEqual(j);
        }), it("Check convert categorical + default color", function() {
            var a = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, b = i.createWithMeasure("col2"), c = b.getKey(), d = "#FF0000";
            a.metadata.objects = {
                dataPoint: {
                    defaultColor: {
                        solid: {
                            color: d
                        }
                    }
                }
            };
            var e = g.converter(a, p, t, !1, null).series, h = [ {
                key: c,
                lineIndex: 0,
                color: d,
                xCol: a.metadata.columns[0],
                yCol: a.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 0
                    }),
                    labelFill: d
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 1
                    }),
                    labelFill: d
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 2
                    }),
                    labelFill: d
                } ],
                identity: i.createWithMeasure("col2"),
                selected: !1
            } ];
            expect(e).toEqual(h);
        }), it("Check convert categorical multi-series + fill colors", function() {
            var a = i.createWithMeasure("col2"), b = a.getKey(), c = i.createWithMeasure("col3"), d = c.getKey(), e = i.createWithMeasure("col4"), h = e.getKey(), j = [ "#41BEE0", "#41BEE1", "#41BEE2" ], k = {
                columns: [ q.columns[0], powerbi.Prototype.inherit(q.columns[1], function(a) {
                    return a.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: j[0]
                                }
                            }
                        }
                    };
                }), powerbi.Prototype.inherit(q.columns[2], function(a) {
                    return a.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: j[1]
                                }
                            }
                        }
                    };
                }), powerbi.Prototype.inherit(q.columns[3], function(a) {
                    return a.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: j[2]
                                }
                            }
                        }
                    };
                }) ]
            }, l = {
                metadata: k,
                categorical: {
                    categories: [ {
                        source: k.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: k.columns[1],
                        values: [ 100, 200, 700 ]
                    }, {
                        source: k.columns[2],
                        values: [ 700, 100, 200 ]
                    }, {
                        source: k.columns[3],
                        values: [ 200, 700, 100 ]
                    } ])
                }
            };
            l.categorical.values.source = k.columns[4];
            var m = g.converter(l, p, t, !1).series, n = [ {
                key: b,
                lineIndex: 0,
                color: j[0],
                xCol: l.metadata.columns[0],
                yCol: l.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 0
                    }),
                    labelFill: j[0]
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 1
                    }),
                    labelFill: j[0]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 2
                    }),
                    labelFill: j[0]
                } ],
                identity: a,
                selected: !1
            }, {
                key: d,
                lineIndex: 1,
                color: j[1],
                xCol: l.metadata.columns[0],
                yCol: l.metadata.columns[2],
                data: [ {
                    categoryValue: "John Domo",
                    value: 700,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col3",
                        value: "700"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 0
                    }),
                    labelFill: j[1]
                }, {
                    categoryValue: "Delta Force",
                    value: 100,
                    categoryIndex: 1,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col3",
                        value: "100"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 1
                    }),
                    labelFill: j[1]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 200,
                    categoryIndex: 2,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col3",
                        value: "200"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 2
                    }),
                    labelFill: j[1]
                } ],
                identity: c,
                selected: !1
            }, {
                key: h,
                lineIndex: 2,
                color: j[2],
                xCol: l.metadata.columns[0],
                yCol: l.metadata.columns[3],
                data: [ {
                    categoryValue: "John Domo",
                    value: 200,
                    categoryIndex: 0,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col4",
                        value: "200"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 0
                    }),
                    labelFill: j[2]
                }, {
                    categoryValue: "Delta Force",
                    value: 700,
                    categoryIndex: 1,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col4",
                        value: "700"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 1
                    }),
                    labelFill: j[2]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 100,
                    categoryIndex: 2,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col4",
                        value: "100"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 2
                    }),
                    labelFill: j[2]
                } ],
                identity: e,
                selected: !1
            } ];
            expect(m).toEqual(n);
        }), it("Check convert categorical multi-series", function() {
            var a = i.createWithMeasure("col2"), b = a.getKey(), c = i.createWithMeasure("col3"), d = c.getKey(), e = i.createWithMeasure("col4"), h = e.getKey();
            q.objects = void 0;
            var j = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, 200, 700 ]
                    }, {
                        source: q.columns[2],
                        values: [ 700, 100, 200 ]
                    }, {
                        source: q.columns[3],
                        values: [ 200, 700, 100 ]
                    } ])
                }
            }, k = [ t.getColor(q.columns[1].queryName).value, t.getColor(q.columns[2].queryName).value, t.getColor(q.columns[3].queryName).value ], l = g.converter(j, p, t, !1).series, m = [ {
                key: b,
                lineIndex: 0,
                color: k[0],
                xCol: j.metadata.columns[0],
                yCol: j.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 0
                    }),
                    labelFill: k[0]
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 1
                    }),
                    labelFill: k[0]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 2
                    }),
                    labelFill: k[0]
                } ],
                identity: a,
                selected: !1
            }, {
                key: d,
                lineIndex: 1,
                color: k[1],
                xCol: j.metadata.columns[0],
                yCol: j.metadata.columns[2],
                data: [ {
                    categoryValue: "John Domo",
                    value: 700,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col3",
                        value: "700"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 0
                    }),
                    labelFill: k[1]
                }, {
                    categoryValue: "Delta Force",
                    value: 100,
                    categoryIndex: 1,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col3",
                        value: "100"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 1
                    }),
                    labelFill: k[1]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 200,
                    categoryIndex: 2,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col3",
                        value: "200"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 2
                    }),
                    labelFill: k[1]
                } ],
                identity: c,
                selected: !1
            }, {
                key: h,
                lineIndex: 2,
                color: k[2],
                xCol: j.metadata.columns[0],
                yCol: j.metadata.columns[3],
                data: [ {
                    categoryValue: "John Domo",
                    value: 200,
                    categoryIndex: 0,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col4",
                        value: "200"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 0
                    }),
                    labelFill: k[2]
                }, {
                    categoryValue: "Delta Force",
                    value: 700,
                    categoryIndex: 1,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col4",
                        value: "700"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 1
                    }),
                    labelFill: k[2]
                }, {
                    categoryValue: "Jean Tablau",
                    value: 100,
                    categoryIndex: 2,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col4",
                        value: "100"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 2
                    }),
                    labelFill: k[2]
                } ],
                identity: e,
                selected: !1
            } ];
            expect(l).toEqual(m);
        }), it("Check convert categorical multi-series + default color + fill color", function() {
            var a = i.createWithMeasure("col2"), b = a.getKey(), c = i.createWithMeasure("col3"), d = c.getKey(), e = i.createWithMeasure("col4"), h = e.getKey(), j = "#41BEE0", k = "FF0000", l = {
                columns: [ q.columns[0], powerbi.Prototype.inherit(q.columns[1], function(a) {
                    return a.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: j
                                }
                            }
                        }
                    };
                }), q.columns[2], q.columns[3] ]
            };
            l.objects = {
                dataPoint: {
                    defaultColor: {
                        solid: {
                            color: k
                        }
                    }
                }
            };
            var m = powerbi.visuals.dataLabelUtils.getDefaultPointLabelSettings();
            m.formatterOptions = l.columns[1];
            var n = {
                metadata: l,
                categorical: {
                    categories: [ {
                        source: l.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ],
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: j
                                    }
                                }
                            }
                        }, void 0, void 0 ]
                    } ],
                    values: f.createValueColumns([ {
                        source: l.columns[1],
                        values: [ 100, 200, 700 ]
                    }, {
                        source: l.columns[2],
                        values: [ 700, 100, 200 ]
                    }, {
                        source: l.columns[3],
                        values: [ 200, 700, 100 ]
                    } ])
                }
            };
            n.categorical.values.source = l.columns[4];
            var k = "FF0000", o = g.converter(n, p, t, !1, null).series, r = [ {
                key: b,
                lineIndex: 0,
                color: j,
                xCol: l.columns[0],
                yCol: l.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 0
                    }),
                    labelFill: j
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 1
                    }),
                    labelFill: j
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: a,
                    selected: !1,
                    key: JSON.stringify({
                        ser: b,
                        catIdx: 2
                    }),
                    labelFill: j
                } ],
                identity: a,
                selected: !1
            }, {
                key: d,
                lineIndex: 1,
                color: k,
                xCol: l.columns[0],
                yCol: l.columns[2],
                data: [ {
                    categoryValue: "John Domo",
                    value: 700,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col3",
                        value: "700"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 0
                    }),
                    labelFill: k
                }, {
                    categoryValue: "Delta Force",
                    value: 100,
                    categoryIndex: 1,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col3",
                        value: "100"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 1
                    }),
                    labelFill: k
                }, {
                    categoryValue: "Jean Tablau",
                    value: 200,
                    categoryIndex: 2,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col3",
                        value: "200"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 2
                    }),
                    labelFill: k
                } ],
                identity: c,
                selected: !1
            }, {
                key: h,
                lineIndex: 2,
                color: k,
                xCol: l.columns[0],
                yCol: l.columns[3],
                data: [ {
                    categoryValue: "John Domo",
                    value: 200,
                    categoryIndex: 0,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col4",
                        value: "200"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 0
                    }),
                    labelFill: k
                }, {
                    categoryValue: "Delta Force",
                    value: 700,
                    categoryIndex: 1,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col4",
                        value: "700"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 1
                    }),
                    labelFill: k
                }, {
                    categoryValue: "Jean Tablau",
                    value: 100,
                    categoryIndex: 2,
                    seriesIndex: 2,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col4",
                        value: "100"
                    } ],
                    identity: e,
                    selected: !1,
                    key: JSON.stringify({
                        ser: h,
                        catIdx: 2
                    }),
                    labelFill: k
                } ],
                identity: e,
                selected: !1
            } ];
            expect(o).toEqual(r);
        }), it("Check convert non-category multi-measure + fill colors", function() {
            var a = [ "#41BEE0", "#41BEE1" ], b = {
                columns: [ powerbi.Prototype.inherit(q.columns[0], function(b) {
                    return b.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: a[0]
                                }
                            }
                        }
                    };
                }), powerbi.Prototype.inherit(q.columns[1], function(b) {
                    return b.objects = {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: a[1]
                                }
                            }
                        }
                    };
                }) ]
            }, c = {
                metadata: b,
                categorical: {
                    values: f.createValueColumns([ {
                        source: b.columns[0],
                        values: [ 100 ]
                    }, {
                        source: b.columns[1],
                        values: [ 200 ]
                    } ])
                }
            }, d = [ i.createWithMeasure("col1"), i.createWithMeasure("col2") ], e = [ d[0].getKey(), d[1].getKey() ], h = g.converter(c, p, t, !1).series, j = [ {
                key: e[0],
                lineIndex: 0,
                color: a[0],
                xCol: void 0,
                yCol: c.metadata.columns[0],
                data: [ {
                    categoryValue: p,
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "100"
                    } ],
                    identity: d[0],
                    selected: !1,
                    key: JSON.stringify({
                        ser: e[0],
                        catIdx: 0
                    }),
                    labelFill: a[0]
                } ],
                identity: d[0],
                selected: !1
            }, {
                key: e[1],
                lineIndex: 1,
                color: a[1],
                xCol: void 0,
                yCol: c.metadata.columns[1],
                data: [ {
                    categoryValue: p,
                    value: 200,
                    categoryIndex: 0,
                    seriesIndex: 1,
                    tooltipInfo: [ {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: d[1],
                    selected: !1,
                    key: JSON.stringify({
                        ser: e[1],
                        catIdx: 0
                    }),
                    labelFill: a[1]
                } ],
                identity: d[1],
                selected: !1
            } ];
            expect(h).toEqual(j);
        }), it("Check convert date time", function() {
            var a = {
                columns: [ {
                    displayName: "Date",
                    queryName: "Date",
                    type: k.fromDescriptor({
                        dateTime: !0
                    })
                }, {
                    displayName: "PowerBI Customers",
                    queryName: "PowerBI Customers",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ new Date("2014/9/25"), new Date("2014/12/12"), new Date("2015/9/25") ]
                    } ],
                    values: f.createValueColumns([ {
                        source: a.columns[1],
                        values: [ 8e3, 2e4, 1e6 ]
                    } ])
                }
            }, c = i.createWithMeasure("PowerBI Customers"), d = c.getKey(), e = g.converter(b, p, t, !0).series, h = t.getColor(a.columns[1].queryName).value, j = [ {
                key: d,
                lineIndex: 0,
                color: h,
                xCol: b.metadata.columns[0],
                yCol: b.metadata.columns[1],
                data: [ {
                    categoryValue: new Date("2014/9/25").getTime(),
                    value: 8e3,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "9/25/2014 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "8000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 0
                    }),
                    labelFill: h
                }, {
                    categoryValue: new Date("2014/12/12").getTime(),
                    value: 2e4,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "12/12/2014 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "20000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 1
                    }),
                    labelFill: h
                }, {
                    categoryValue: new Date("2015/9/25").getTime(),
                    value: 1e6,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "9/25/2015 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "1000000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 2
                    }),
                    labelFill: h
                } ],
                identity: c,
                selected: !1
            } ];
            expect(e).toEqual(j);
        }), it("Check convert datetime category with null category value", function() {
            var a = {
                columns: [ {
                    displayName: "Date",
                    queryName: "Date",
                    type: k.fromDescriptor({
                        dateTime: !0
                    })
                }, {
                    displayName: "PowerBI Customers",
                    queryName: "PowerBI Customers",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ null, new Date("2014/9/25"), new Date("2014/12/12"), new Date("2015/9/25") ]
                    } ],
                    values: f.createValueColumns([ {
                        source: a.columns[1],
                        values: [ 3e4, 8e3, 2e4, 1e6 ]
                    } ])
                }
            }, c = i.createWithMeasure("PowerBI Customers"), d = c.getKey(), e = g.converter(b, p, t, !0).series, h = t.getColor(a.columns[1].queryName).value, j = [ {
                key: d,
                lineIndex: 0,
                color: h,
                xCol: b.metadata.columns[0],
                yCol: b.metadata.columns[1],
                data: [ {
                    categoryValue: new Date("2014/9/25").getTime(),
                    value: 8e3,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "9/25/2014 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "8000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 1
                    }),
                    labelFill: h
                }, {
                    categoryValue: new Date("2014/12/12").getTime(),
                    value: 2e4,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "12/12/2014 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "20000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 2
                    }),
                    labelFill: h
                }, {
                    categoryValue: new Date("2015/9/25").getTime(),
                    value: 1e6,
                    categoryIndex: 3,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "Date",
                        value: "9/25/2015 12:00:00 AM"
                    }, {
                        displayName: "PowerBI Customers",
                        value: "1000000"
                    } ],
                    identity: c,
                    selected: !1,
                    key: JSON.stringify({
                        ser: d,
                        catIdx: 3
                    }),
                    labelFill: h
                } ],
                identity: c,
                selected: !1
            } ];
            expect(e).toEqual(j);
        }), it("Check convert categorical with null category value", function() {
            var a = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", null, "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, 300, 200, 700 ],
                        subtotal: 1300
                    } ])
                }
            }, b = i.createWithMeasure("col2"), c = b.getKey(), d = g.converter(a, p, t, !1).series, e = t.getColor(q.columns[1].queryName).value, h = [ {
                key: c,
                lineIndex: 0,
                color: e,
                xCol: a.metadata.columns[0],
                yCol: a.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 0
                    }),
                    labelFill: e
                }, {
                    categoryValue: null,
                    value: 300,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "(Blank)"
                    }, {
                        displayName: "col2",
                        value: "300"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 1
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Delta Force",
                    value: 200,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "200"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 2
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 3,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 3
                    }),
                    labelFill: e
                } ],
                identity: b,
                selected: !1
            } ];
            expect(d).toEqual(h);
        }), it("Check convert categorical with positive infinity value", function() {
            var a = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, Number.POSITIVE_INFINITY, 700 ],
                        subtotal: 800
                    } ])
                }
            }, b = i.createWithMeasure("col2"), c = b.getKey(), d = g.converter(a, p, t, !1).series, e = t.getColor(q.columns[1].queryName).value, h = [ {
                key: c,
                lineIndex: 0,
                color: e,
                xCol: a.metadata.columns[0],
                yCol: a.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 0
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Delta Force",
                    value: Number.MAX_VALUE,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "1.7976931348623157E+308"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 1
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 2
                    }),
                    labelFill: e
                } ],
                identity: b,
                selected: !1
            } ];
            expect(d).toEqual(h);
        }), it("Check convert categorical with negative infinity value", function() {
            var a = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, Number.NEGATIVE_INFINITY, 700 ],
                        subtotal: 800
                    } ])
                }
            }, b = i.createWithMeasure("col2"), c = b.getKey(), d = g.converter(a, p, t, !1).series, e = t.getColor(q.columns[1].queryName).value, h = [ {
                key: c,
                lineIndex: 0,
                color: e,
                xCol: a.metadata.columns[0],
                yCol: a.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 0
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Delta Force",
                    value: -Number.MAX_VALUE,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    }, {
                        displayName: "col2",
                        value: "-1.7976931348623157E+308"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 1
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 2
                    }),
                    labelFill: e
                } ],
                identity: b,
                selected: !1
            } ];
            expect(d).toEqual(h);
        }), it("Check convert categorical with NaN value", function() {
            var a = {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "John Domo", "Delta Force", "Jean Tablau" ]
                    } ],
                    values: f.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 100, Number.NaN, 700 ],
                        subtotal: 800
                    } ])
                }
            }, b = i.createWithMeasure("col2"), c = b.getKey(), d = g.converter(a, p, t, !1).series, e = t.getColor(q.columns[1].queryName).value, h = [ {
                key: c,
                lineIndex: 0,
                color: e,
                xCol: a.metadata.columns[0],
                yCol: a.metadata.columns[1],
                data: [ {
                    categoryValue: "John Domo",
                    value: 100,
                    categoryIndex: 0,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "John Domo"
                    }, {
                        displayName: "col2",
                        value: "100"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 0
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Delta Force",
                    value: null,
                    categoryIndex: 1,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Delta Force"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 1
                    }),
                    labelFill: e
                }, {
                    categoryValue: "Jean Tablau",
                    value: 700,
                    categoryIndex: 2,
                    seriesIndex: 0,
                    tooltipInfo: [ {
                        displayName: "col1",
                        value: "Jean Tablau"
                    }, {
                        displayName: "col2",
                        value: "700"
                    } ],
                    identity: b,
                    selected: !1,
                    key: JSON.stringify({
                        ser: c,
                        catIdx: 2
                    }),
                    labelFill: e
                } ],
                identity: b,
                selected: !1
            } ];
            expect(d).toEqual(h);
        }), describe("lineChart DOM validation", function() {
            return m(!1, !1);
        }), describe("interactive lineChart DOM validation", function() {
            return m(!0, !1);
        }), describe("minerva lineChart DOM validation", function() {
            return m(!1, !0);
        }), describe("areaChart DOM validation", function() {
            return n(!1);
        }), describe("interactive areaChart DOM validation", function() {
            return n(!0);
        }), describe("lineChart Data Labels validation", function() {
            return o(!1);
        }), describe("interactive lineChart Data Labels validation", function() {
            return o(!0);
        });
    }), describe("Line Chart Legend Formatting", function() {
        var b, c, e = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                format: "d",
                type: d.describeDataType(j.Date)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ new Date("Thu Dec 18 2014 00:08:00"), new Date("Thu Dec 19 2014 00:20:00"), new Date("Thu Dec 20 2014 00:11:00") ]
                        } ],
                        values: f.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
        }), it("verify legend formatted as date", function() {
            var a = $(".interactive-legend"), b = a.find(".title");
            expect(a.length).toBe(1), expect(b.text().trim()).toBe("12/18/2014");
        });
    }), describe("Line Chart Interactivity", function() {
        var b, c, e = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(j.Integer)
            } ],
            objects: {
                labels: {
                    show: !0,
                    labelPrecision: 0
                }
            }
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
        }), it("line chart drag and click interaction validation", function() {
            var a = b.layers[0], c = $(".mainGraphicsContext");
            expect(c.length).toBe(1);
            var d = a.findIndex(250);
            expect(d).toBe(2);
        }), it("select column validation", function() {
            var a = b.layers[0];
            spyOn(a, "setHoverLine").and.callThrough(), a.selectColumn(2);
            var c = $(".interactive-legend"), d = c.find(".title"), e = c.find(".item"), f = $(".hover-line");
            expect(c.length).toBe(1), expect(d.text().trim()).toBe("c"), expect(e.find(".itemName").text()).toBe("col2"), 
            expect(e.find(".itemMeasure").text().trim()).toBe("490000"), expect(a.setHoverLine).toHaveBeenCalled();
            var g = a.setHoverLine.calls ? a.setHoverLine.calls.allArgs()[0][0] : 193;
            expect(192 === Math.floor(g) || 193 === g).toBeTruthy(), expect(f.length).toBe(1);
        });
    }), describe("Line Chart Interactivity - Creation", function() {
        var b, c, e = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: []
            });
        }), it("select column validation", function() {
            var a = b.layers[0];
            spyOn(a, "selectColumn").and.callThrough(), b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
            var c = $(".hover-line");
            expect(a.selectColumn).toHaveBeenCalledWith(0, !0), expect(c.length).toBe(1);
        });
    }), describe("Enumerate Objects", function() {
        var b, c, e = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                type: d.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                type: d.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check basic enumeration", function(a) {
            var c = {
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            };
            b.onDataChanged(c), setTimeout(function() {
                var c = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(c.length).toBe(3), expect(c[0].displayName).toEqual("col2"), expect(c[0].properties.fill).toBeDefined(), 
                expect(c[1].displayName).toEqual("col3"), expect(c[1].properties.fill).toBeDefined(), 
                a();
            }, l);
        });
    }), describe("Line Chart Scrollbar Validation", function() {
        var c, e, g = a.mocks.createVisualHostServices(), i = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(j.Integer)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), e = a.helpers.testDom("150", "50"), 
            c = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1,
                scrollableVisuals: !0
            }).getPlugin("lineChart").create(), c.init({
                element: e,
                host: g,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), c.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: i.columns[0],
                            values: [ "a", "b", "c", "d", "e", "f", "g", "h", "i" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5, 5e5, 5e5, 5e5, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
        }), it("Line Chart Scrollbar DOM Validation", function(a) {
            setTimeout(function() {
                expect($(".lineChart")).toBeInDOM(), expect($("rect.extent").length).toBe(1);
                var b = h.parseTranslateTransform($(".lineChart .axisGraphicsContext .x.axis .tick").last().attr("transform"));
                expect(b.x).toBeLessThan(e.width()), expect($(".brush").first().attr("transform").split(",")[0].split("(")[1]).toBe("19"), 
                expect($(".brush").first().attr("transform").split(",")[1].split(")")[0]).toBe("75"), 
                expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("width").value, 0)).toBeGreaterThan(1), 
                expect($(".brush .extent")[0].attributes.getNamedItem("x").value).toBe("0"), a();
            }, l);
        }), describe("xAxis Validations", function() {
            function c(a) {
                g = [], l.objects = {
                    categoryAxis: {
                        show: !0,
                        start: 0,
                        end: 25,
                        axisType: a,
                        showAxisTitle: !0,
                        axisStyle: !0
                    }
                };
                var b = {
                    dataViews: [ {
                        metadata: l,
                        categorical: {
                            categories: [ {
                                source: l.columns[0],
                                values: [ 1, 2, 5, 10, 20 ]
                            } ],
                            values: f.createValueColumns([ {
                                source: l.columns[1],
                                values: [ 100, 200, 300, 400, 500 ]
                            }, {
                                source: l.columns[2],
                                values: [ 200, 400, 600, 800, 1e3 ]
                            } ])
                        }
                    } ]
                };
                j.onDataChanged(b), e = $(".line").first().attr("d");
                var c = e.split("L");
                c[0] = c[0].substr(1);
                for (var d = 0; d < c.length; d++) {
                    var k = c[d].split(","), m = {
                        x: k[0],
                        y: k[1]
                    };
                    g.push(m);
                }
                h = +g[1].x - +g[0].x, i = g.length - 1;
            }
            var e, g, h, i, j, k, l = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(1)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                } ]
            }, m = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                } ]
            };
            beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService());
            }), beforeEach(function() {
                k = a.helpers.testDom("500", "500"), j = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
                j.init({
                    element: k,
                    host: a.mocks.createVisualHostServices(),
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: k.height(),
                        width: k.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("Category vs Scalar Check", function() {
                c(b.scalar), expect(+g[i].x - +g[i - 1].x).toBeGreaterThan(h), c(b.categorical), 
                expect(+g[i].x - +g[i - 1].x).toBeCloseTo(h, 2);
            }), it("enumerateObjectInstances: Verify instances on ordinal category axis", function() {
                l.objects = {
                    categoryAxis: {
                        show: !0,
                        start: 0,
                        end: 25,
                        axisType: b.scalar,
                        showAxisTitle: !0,
                        axisStyle: !0
                    }
                }, j.onDataChanged({
                    dataViews: [ {
                        metadata: m,
                        categorical: {
                            categories: [ {
                                source: m.columns[0],
                                values: [ "a", "b", "c", "d", "e" ]
                            } ],
                            values: f.createValueColumns([ {
                                source: m.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            }, {
                                source: m.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                });
                var a = j.enumerateObjectInstances({
                    objectName: "categoryAxis"
                });
                expect(a[0].properties.start).toBeUndefined(), expect(a[0].properties.end).toBeUndefined(), 
                expect(a[0].properties.axisType).toBeUndefined(), expect(a[0].properties.show).toBeDefined, 
                expect(a[0].properties.showAxisTitle).toBeDefined, expect(a[0].properties.axisStyle).toBeDefined;
            }), it("enumerateObjectInstances: Verify instances on numerical category axis", function() {
                l.objects = {
                    categoryAxis: {
                        show: !0,
                        start: 0,
                        end: 25,
                        axisType: b.scalar,
                        showAxisTitle: !0,
                        axisStyle: !0
                    }
                }, j.onDataChanged({
                    dataViews: [ {
                        metadata: l,
                        categorical: {
                            categories: [ {
                                source: l.columns[0],
                                values: [ 1, 2, 3, 4, 5 ]
                            } ],
                            values: f.createValueColumns([ {
                                source: l.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            }, {
                                source: l.columns[1],
                                values: [ 1, 2, 3, 4, 5 ],
                                subtotal: 15
                            } ])
                        }
                    } ]
                });
                var a = j.enumerateObjectInstances({
                    objectName: "categoryAxis"
                });
                expect(a[0].properties.start).toBeDefined(), expect(a[0].properties.end).toBeDefined(), 
                expect(a[0].properties.axisType).toBeDefined(), expect(a[0].properties.show).toBeDefined, 
                expect(a[0].properties.showAxisTitle).toBeDefined, expect(a[0].properties.axisStyle).toBeDefined;
            });
        });
    }), describe("Area Chart Scrollbar Validation", function() {
        var b, c, e = a.mocks.createVisualHostServices(), g = {
            columns: [ {
                displayName: "col1",
                type: d.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: d.describeDataType(j.Integer)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("150", "50"), 
            b = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1,
                scrollableVisuals: !0
            }).getPlugin("areaChart").create(), b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e", "f", "g", "h", "i" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5, 5e5, 5e5, 5e5, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
        }), it("Area Chart Scrollbar DOM Validation", function(a) {
            setTimeout(function() {
                expect($(".catArea")).toBeInDOM(), expect($("rect.extent").length).toBe(1);
                var b = h.parseTranslateTransform($(".lineChart .axisGraphicsContext .x.axis .tick").last().attr("transform"));
                expect(b.x).toBeLessThan(c.width()), expect($(".brush").first().attr("transform").split(",")[0].split("(")[1]).toBe("19"), 
                expect($(".brush").first().attr("transform").split(",")[1].split(")")[0]).toBe("75"), 
                expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("width").value, 0)).toBeGreaterThan(1), 
                expect($(".brush .extent")[0].attributes.getNamedItem("x").value).toBe("0"), a();
            }, l);
        });
    }), describe("Line Chart Tooltips", function() {
        var b, c, e = a.mocks.createVisualHostServices();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "500"), 
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: []
            });
        }), it("Scalar xAxis - closest data point", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(1)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                } ]
            }, c = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "col1"
            }), e = b.layers[0];
            spyOn(e, "selectColumn").and.callThrough(), b.onDataChanged({
                dataViews: [ {
                    metadata: a,
                    categorical: {
                        categories: [ {
                            source: a.columns[0],
                            values: [ 2001, 2002, 2003, 2004, 2005 ],
                            identityFields: [ c ]
                        } ],
                        values: f.createValueColumns([ {
                            source: a.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
            var e = b.layers[0], h = 10, i = e.data.series[0], j = g.getTooltipInfoByPointX(e, i, h);
            expect(j).toEqual([ {
                displayName: "col1",
                value: "2001"
            }, {
                displayName: "col2",
                value: "500000"
            } ]), h = 120, j = g.getTooltipInfoByPointX(e, i, h), expect(j).toEqual([ {
                displayName: "col1",
                value: "2002"
            }, {
                displayName: "col2",
                value: "495000"
            } ]), h = 303, j = g.getTooltipInfoByPointX(e, i, h), expect(j).toEqual([ {
                displayName: "col1",
                value: "2004"
            }, {
                displayName: "col2",
                value: "480000"
            } ]), h = 450, j = g.getTooltipInfoByPointX(e, i, h), expect(j).toEqual([ {
                displayName: "col1",
                value: "2005"
            }, {
                displayName: "col2",
                value: "500000"
            } ]);
        }), it("Scalar xAxis, multi series - closest data point", function() {
            var c = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(1)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                }, {
                    displayName: "col3",
                    type: d.describeDataType(1),
                    isMeasure: !0
                } ]
            }, e = [ a.mocks.dataViewScopeIdentity("col2"), a.mocks.dataViewScopeIdentity("col3") ], h = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "col2"
            }), i = f.createValueColumns([ {
                source: c.columns[1],
                values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                identity: e[0]
            }, {
                source: c.columns[2],
                values: [ null, null, 49e4, 48e4, 5e5 ],
                identity: e[1]
            } ], [ h ]);
            i.source = c.columns[2];
            var j = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ 2001, 2002, 2003, 2004, 2005 ]
                    } ],
                    values: i
                }
            }, k = b.layers[0];
            spyOn(k, "selectColumn").and.callThrough(), b.onDataChanged({
                dataViews: [ j ]
            });
            var l = 10, m = k.data.series[0], n = g.getTooltipInfoByPointX(k, m, l);
            expect(n).toEqual([ {
                displayName: "col1",
                value: "2001"
            }, {
                displayName: "col3",
                value: "(Blank)"
            }, {
                displayName: "col2",
                value: "500000"
            } ]), l = 120, n = g.getTooltipInfoByPointX(k, m, l), expect(n).toEqual([ {
                displayName: "col1",
                value: "2002"
            }, {
                displayName: "col3",
                value: "(Blank)"
            }, {
                displayName: "col2",
                value: "495000"
            } ]), l = 303, n = g.getTooltipInfoByPointX(k, m, l), expect(n).toEqual([ {
                displayName: "col1",
                value: "2004"
            }, {
                displayName: "col3",
                value: "(Blank)"
            }, {
                displayName: "col2",
                value: "480000"
            } ]), l = 450, n = g.getTooltipInfoByPointX(k, m, l), expect(n).toEqual([ {
                displayName: "col1",
                value: "2005"
            }, {
                displayName: "col3",
                value: "(Blank)"
            }, {
                displayName: "col2",
                value: "500000"
            } ]);
        }), it("Line Chart X and Y-axis show/hide Title ", function() {
            var b = a.helpers.testDom("500", "500"), c = a.mocks.createVisualHostServices(), e = [ a.mocks.dataViewScopeIdentity("John Domo") ], g = powerbi.visuals.visualPluginFactory.create().getPlugin("lineChart").create();
            g.init({
                element: b,
                host: c,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: b.height(),
                    width: b.width()
                },
                interactivity: {
                    isInteractiveLegend: !1
                },
                animation: {
                    transitionImmediate: !0
                }
            });
            var h = {
                columns: [ {
                    displayName: "AxesTitleTest",
                    type: d.describeDataType(1)
                } ],
                objects: {
                    categoryAxis: {
                        showAxisTitle: !0
                    },
                    valueAxis: {
                        showAxisTitle: !0
                    }
                }
            };
            g.onDataChanged({
                dataViews: [ {
                    metadata: h,
                    categorical: {
                        categories: [ {
                            source: h.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: e
                        } ],
                        values: f.createValueColumns([ {
                            source: h.columns[0],
                            values: [ 20, 1e3 ],
                            subtotal: 1020
                        } ])
                    }
                } ]
            }), expect($(".xAxisLabel").first().text()).toBe("AxesTitleTest"), expect($(".yAxisLabel").first().text()).toBe("AxesTitleTest"), 
            h.objects = {
                categoryAxis: {
                    showAxisTitle: !1
                },
                valueAxis: {
                    showAxisTitle: !1
                }
            }, g.onDataChanged({
                dataViews: [ {
                    metadata: h
                } ]
            }), expect($(".xAxisLabel").length).toBe(0), expect($(".yAxisLabel").length).toBe(0);
        }), it("Non scalar xAxis - closest data point", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    type: d.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    type: d.describeDataType(1)
                } ]
            }, c = b.layers[0];
            spyOn(c, "selectColumn").and.callThrough(), b.onDataChanged({
                dataViews: [ {
                    metadata: a,
                    categorical: {
                        categories: [ {
                            source: a.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: f.createValueColumns([ {
                            source: a.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            });
            var c = b.layers[0], e = 10, h = c.data.series[0], i = g.getTooltipInfoByPointX(c, h, e);
            expect(i).toEqual([ {
                displayName: "col1",
                value: "a"
            }, {
                displayName: "col2",
                value: "500000"
            } ]), e = 120, i = g.getTooltipInfoByPointX(c, h, e), expect(i).toEqual([ {
                displayName: "col1",
                value: "b"
            }, {
                displayName: "col2",
                value: "495000"
            } ]), e = 303, i = g.getTooltipInfoByPointX(c, h, e), expect(i).toEqual([ {
                displayName: "col1",
                value: "d"
            }, {
                displayName: "col2",
                value: "480000"
            } ]), e = 450, i = g.getTooltipInfoByPointX(c, h, e), expect(i).toEqual([ {
                displayName: "col1",
                value: "e"
            }, {
                displayName: "col2",
                value: "500000"
            } ]);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.data.DataViewTransform, c = powerbi.visuals.Map, d = powerbi.visuals.dataLabelUtils, e = powerbi.ValueType, f = powerbi.data.SQExprShortSerializer;
    describe("Map", function() {
        var g, h;
        powerbi.data.SelectKind;
        beforeEach(function() {
            var b = powerbi.common.createLocalizationService();
            a.mocks.setLocale(b), powerbi.common.localize = b, h = powerbi.createGeoTaggingAnalyzerService(function(a) {
                return b.get(a);
            }), g = a.helpers.testDom("800", "500");
        }), it("Map registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("map").capabilities).toBe(powerbi.visuals.mapCapabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.mapCapabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.mapCapabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.mapCapabilities.suppressDefaultTitle).toBeUndefined();
        }), it("Capabilities DataRole preferredTypes", function() {
            expect(powerbi.visuals.mapCapabilities.dataRoles.map(function(a) {
                return !!a.preferredTypes;
            })).toEqual([ !0, !1, !0, !0, !1, !1 ]), expect(powerbi.visuals.mapCapabilities.dataRoles[0].preferredTypes.map(e.fromDescriptor)).toEqual([ e.fromExtendedType(powerbi.ExtendedType.Address), e.fromExtendedType(powerbi.ExtendedType.City), e.fromExtendedType(powerbi.ExtendedType.Continent), e.fromExtendedType(powerbi.ExtendedType.Country), e.fromExtendedType(powerbi.ExtendedType.County), e.fromExtendedType(powerbi.ExtendedType.Place), e.fromExtendedType(powerbi.ExtendedType.PostalCode_Text), e.fromExtendedType(powerbi.ExtendedType.Region), e.fromExtendedType(powerbi.ExtendedType.StateOrProvince) ]), 
            expect(powerbi.visuals.mapCapabilities.dataRoles[2].preferredTypes.map(e.fromDescriptor)).toEqual([ e.fromPrimitiveTypeAndCategory(3, "Longitude") ]), 
            expect(powerbi.visuals.mapCapabilities.dataRoles[3].preferredTypes.map(e.fromDescriptor)).toEqual([ e.fromPrimitiveTypeAndCategory(3, "Latitude") ]);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.mapCapabilities.objects)).toEqual(powerbi.visuals.mapProps.general.formatString);
        }), it("Map.getMeasureIndexOfRole", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, c = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    }, {
                        source: a.columns[2],
                        values: [ 1, 2, 3 ],
                        subtotal: 6
                    } ])
                }
            }, d = c.categorical.values.grouped(), e = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(d, "InvalidRoleName");
            expect(e).toBe(-1), e = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(d, "Size"), 
            expect(e).toBe(0), e = powerbi.visuals.DataRoleHelper.getMeasureIndexOfRole(d, "X"), 
            expect(e).toBe(1);
        }), it("Map.calculateGroupSizes", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, e = d.categorical.values.grouped(), f = [], g = null, h = 0, i = c.calculateGroupSizes(d.categorical, e, f, h, g);
            expect(i.min).toBe(-100), expect(i.max).toBe(700), expect(f.length).toBe(3), expect(f[0]).toBe(-100), 
            expect(f[1]).toBe(200), expect(f[2]).toBe(700), f = [], h = -1, i = c.calculateGroupSizes(d.categorical, e, f, h, g), 
            expect(i).toBe(null), expect(f.length).toBe(3), expect(f[0]).toBe(null), expect(f[1]).toBe(null), 
            expect(f[2]).toBe(null);
        }), it("Map.createMapDataPoint", function() {
            var b = powerbi.visuals.visualStyles.create().colorPalette.dataColors, d = "Arizona", e = 100, f = {
                sizeValuesForGroup: [ {
                    value: 100,
                    index: 0,
                    fill: "#112233",
                    stroke: "#223344",
                    seriesId: a.mocks.dataViewScopeIdentity("Sales")
                } ],
                latitude: null,
                longitude: null
            }, g = 3, h = c.createMapDataPoint(d, e, null, g, b, null);
            expect(h).toBe(null), h = c.createMapDataPoint(d, e, f, g, b, a.mocks.dataViewScopeIdentity("Arizona")), 
            expect(h.seriesInfo).toBe(f), expect(h.radius).toBe(g), expect(h.location).toBe(null), 
            expect(h.cachedLocation).toBe(h.location), expect(h.geocodingQuery).toBe(d), expect(h.categoryValue).toBe(d), 
            d = null, h = c.createMapDataPoint(d, e, f, g, b, null), expect(h).toBe(null);
        }), it("Map.calculateSeriesInfo", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    } ])
                }
            }, e = 0, f = 0, g = -1, h = -1, i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = c.calculateSeriesInfo(d.categorical.values.grouped(), e, f, g, h, i);
            expect(j.sizeValuesForGroup.length).toBe(1), expect(j.sizeValuesForGroup[0].value).toBe(-100), 
            expect(j.sizeValuesForGroup[0].index).toBe(0), expect(j.latitude).toBe(null), expect(j.longitude).toBe(null);
        }), it("Map.calculateSeriesInfo multi-series", function() {
            var a = {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }, b = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: b,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, a, "s").dataView, f = 0, g = 0, h = -1, i = -1, j = powerbi.visuals.visualStyles.create().colorPalette.dataColors, k = e.categorical.values.identityFields, l = c.calculateSeriesInfo(e.categorical.values.grouped(), f, g, i, h, j, void 0, void 0, k);
            expect(l.sizeValuesForGroup.length).toBe(2), expect(l.sizeValuesForGroup[0].value).toBe(150), 
            expect(l.sizeValuesForGroup[0].index).toBe(0), expect(l.sizeValuesForGroup[0].fill).not.toBeNull(), 
            expect(l.sizeValuesForGroup[0].stroke).not.toBeNull(), expect(l.sizeValuesForGroup[1].value).toBe(100), 
            expect(l.sizeValuesForGroup[1].index).toBe(1), expect(l.sizeValuesForGroup[1].fill).not.toBeNull(), 
            expect(l.sizeValuesForGroup[1].stroke).not.toBeNull(), expect(l.sizeValuesForGroup[1].fill).not.toBe(l.sizeValuesForGroup[0].fill), 
            expect(l.latitude).toBe(null), expect(l.longitude).toBe(null);
        }), it("Map.calculateSeriesLegend colors from palette with dynamic series", function() {
            var d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2"
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    groupName: "a"
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    groupName: "b"
                } ]
            }, e = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "col3"
            }), g = [ a.mocks.dataViewScopeIdentityWithEquality(e, "a"), a.mocks.dataViewScopeIdentityWithEquality(e, "b") ], h = {
                metadata: d,
                categorical: {
                    categories: [ {
                        source: d.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: d.columns[2],
                        values: [ -100, 200, 700 ],
                        identity: g[0]
                    }, {
                        source: d.columns[3],
                        values: [ 200, 400, 500 ],
                        identity: g[1]
                    } ], [ e ])
                }
            }, i = 0, j = 0, k = powerbi.visuals.visualStyles.create().colorPalette.dataColors, l = k.getColorByScale(f.serialize(e), "a"), m = k.getColorByScale(f.serialize(e), "b"), n = c.calculateSeriesLegend(h.categorical.values.grouped(), i, j, k, void 0, [ e ]);
            expect(n.length).toBe(2), expect(n[0].color).toBe(l.value), expect(n[1].color).toBe(m.value);
        }), it("Map.calculateSeriesLegend colors from palette with static series", function() {
            var d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                } ]
            }, e = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "col1"
            }), g = [ a.mocks.dataViewScopeIdentity("col2"), a.mocks.dataViewScopeIdentity("col3") ], h = {
                metadata: d,
                categorical: {
                    categories: [ {
                        source: d.columns[0],
                        values: [ "Montana", "California", "Arizona" ],
                        identityFields: [ e ]
                    } ],
                    values: b.createValueColumns([ {
                        source: d.columns[1],
                        values: [ -100, 200, 700 ],
                        identity: g[0]
                    }, {
                        source: d.columns[2],
                        values: [ 200, 400, 500 ],
                        identity: g[1]
                    } ])
                }
            }, i = 0, j = 0, k = powerbi.visuals.visualStyles.create().colorPalette.dataColors, l = k.getColorByScale(f.serialize(e), "col2").value, m = k.getColorByScale(f.serialize(e), "col3").value, n = c.calculateSeriesLegend(h.categorical.values.grouped(), i, j, k, void 0, [ e ]);
            expect(n.length).toBe(2), expect(n[0].color).toBe(l), expect(n[1].color).toBe(m);
        }), it("Map.calculateSeriesLegend", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ],
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#FF0000"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#00FF00"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#0000FF"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    } ])
                }
            }, e = 0, f = 0, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = c.calculateSeriesLegend(d.categorical.values.grouped(), e, f, g);
            expect(h.length).toBe(1);
        }), it("Map.calculateSeriesLegend default color", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    } ])
                }
            }, e = 0, f = 0, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = "#FF0000", i = c.calculateSeriesLegend(d.categorical.values.grouped(), e, f, g, h);
            expect(i.length).toBe(1), expect(i[0].color).toBe(h);
        }), it("Map.calculateSeriesLegend multi-series", function() {
            var a = {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }, b = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: b,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, a, "s").dataView, f = 0, g = 0, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = c.calculateSeriesLegend(e.categorical.values.grouped(), f, g, h);
            expect(i.length).toBe(2);
        }), it("Map.calculateSeriesLegend null legend", function() {
            var a = {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: null
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }, b = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: b,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, a, "s").dataView, f = 0, g = 0, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = c.calculateSeriesLegend(e.categorical.values.grouped(), f, g, h);
            expect(i[0].label).toBe(powerbi.visuals.valueFormatter.format(null));
        }), it("Map.calculateRadius", function() {
            var a = {
                min: -100,
                max: 100
            }, b = 0, d = c.calculateRadius(a, 0, null);
            expect(d).toBe(6), b = a.max - a.min, d = c.calculateRadius(a, b, -100), expect(d).toBe(6), 
            d = c.calculateRadius(a, b, 0), expect(d).toBe(13), d = c.calculateRadius(a, b, 100), 
            expect(d).toBe(20), d = c.calculateRadius({
                min: 100,
                max: 100
            }, 0, 100), expect(d).toBe(6);
        }), it("Map.getGeocodingCategory", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        StateOrProvince: !0
                    }
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, e = c.getGeocodingCategory(d.categorical, h);
            expect(e).toBe("StateOrProvince");
        }), it("Map.getGeocodingCategoryDataCategory", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    type: e.fromDescriptor({
                        geography: {
                            stateOrProvince: !0
                        }
                    })
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 1e3
                    } ])
                }
            }, f = c.getGeocodingCategory(d.categorical, h);
            expect(f).toBe("StateOrProvince");
        }), it("Map Geocode With Size", function() {}), it("Map.hasSizeField", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Category: !0
                    }
                } ]
            }, d = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Category: !0
                    }
                }, {
                    displayName: "col2",
                    roles: {
                        Size: !0
                    }
                } ]
            }, f = {
                columns: [ {
                    displayName: "col1",
                    type: e.fromDescriptor({
                        text: !0
                    })
                }, {
                    displayName: "col2",
                    type: e.fromDescriptor({
                        numeric: !0
                    })
                } ]
            }, g = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Category: !0
                    }
                }, {
                    displayName: "col2",
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    roles: {
                        X: !0
                    }
                } ]
            }, h = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "98052", "98004", "98034", "12345", "67890" ]
                    } ]
                }
            }, i = {
                metadata: d,
                categorical: {
                    categories: [ {
                        source: d.columns[0],
                        values: [ "San Diego", "San Francisco", "Seattle" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: d.columns[1],
                        values: [ 3, 4, 5 ],
                        subtotal: 12
                    } ])
                }
            }, j = {
                metadata: f,
                categorical: {
                    categories: [ {
                        source: f.columns[0],
                        values: [ "San Diego", "San Francisco", "Seattle" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: f.columns[1],
                        values: [ 3, 4, 5 ],
                        subtotal: 12
                    } ])
                }
            }, k = {
                metadata: g,
                categorical: {
                    categories: [ {
                        source: g.columns[0],
                        values: [ "San Diego", "San Francisco", "Seattle" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: g.columns[1],
                        values: [ 32.715691, 37.777119, 47.603569 ],
                        subtotal: 39.36545966666666
                    }, {
                        source: g.columns[2],
                        values: [ -117.16172, -122.41964, -122.329453 ],
                        subtotal: -120.63693766666667
                    } ])
                }
            }, l = c.hasSizeField(h.categorical.values, 0);
            expect(l).toBe(!1), l = c.hasSizeField(i.categorical.values, 0), expect(l).toBe(!0), 
            l = c.hasSizeField(j.categorical.values, 0), expect(l).toBe(!0), l = c.hasSizeField(k.categorical.values, 0), 
            expect(l).toBe(!1);
        }), it("Map.createDefaultValueColumns", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Category: !0
                    }
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "98052", "98004", "98034", "12345", "67890" ]
                    } ]
                }
            }, d = [ {
                source: {
                    displayName: "col",
                    isMeasure: !0,
                    queryName: "",
                    roles: {
                        Size: !0
                    },
                    type: e.fromDescriptor({
                        numeric: !0
                    }),
                    isAutoGeneratedColumn: !0
                },
                values: [ 1, 1, 1, 1, 1 ]
            } ], f = c.createDefaultValueColumns(b.categorical);
            expect(f).toEqual(d);
        }), it("Map.createDefaultValueColumns with Gradient", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Category: !0
                    }
                }, {
                    displayName: "col2",
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "98052", "98004", "98034", "12345", "67890" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ 12, 1, 155, 543, 222 ]
                    } ])
                }
            }, f = [ {
                source: {
                    displayName: "col",
                    isMeasure: !0,
                    queryName: "",
                    roles: {
                        Size: !0
                    },
                    type: e.fromDescriptor({
                        numeric: !0
                    }),
                    isAutoGeneratedColumn: !0
                },
                values: [ 1, 1, 1, 1, 1 ]
            }, {
                source: {
                    displayName: "col2",
                    roles: {
                        Gradient: !0
                    }
                },
                values: [ 12, 1, 155, 543, 222 ]
            } ], g = c.createDefaultValueColumns(d.categorical);
            expect(g).toEqual(f);
        }), it("Map.tooltipInfo single series", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ],
                        subtotal: 800
                    } ])
                }
            }, e = 0, f = 0, g = -1, h = -1, i = d.categorical.categories[0].values[0], j = powerbi.visuals.visualStyles.create().colorPalette.dataColors, k = c.calculateSeriesInfo(d.categorical.values.grouped(), e, f, h, g, j), l = k.sizeValuesForGroup[0].value, m = powerbi.visuals.TooltipBuilder.createTooltipInfo(powerbi.visuals.mapProps.general.formatString, d.categorical.categories, i, d.categorical.values, l, null, 0), n = [ {
                displayName: "col1",
                value: "Montana"
            }, {
                displayName: "col2",
                value: "-100"
            } ];
            expect(m).toEqual(n);
        }), it("Map.tooltipInfo multi series", function() {
            var a = {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }, b = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.DataViewTransform.apply({
                prototype: powerbi.data.dsr.readDsr({
                    Select: [ {
                        Kind: 1,
                        Depth: 0,
                        Value: "G0",
                        Format: "0"
                    }, {
                        Kind: 2,
                        Value: "M0",
                        Format: "#,0.00"
                    }, {
                        Kind: 2,
                        Value: "M1",
                        Format: "#,0"
                    }, {
                        Kind: 1,
                        SecondaryDepth: 0,
                        Value: "G1"
                    } ],
                    Expressions: {
                        Primary: {
                            Groupings: [ {
                                Keys: [ {
                                    Source: b,
                                    Select: 0
                                } ]
                            } ]
                        },
                        Secondary: {
                            Groupings: [ {
                                Keys: [ {
                                    Source: d,
                                    Select: 3
                                } ]
                            } ]
                        }
                    }
                }, a, "s").dataView,
                colorAllocatorFactory: powerbi.visuals.createColorAllocatorFactory(),
                dataViewMappings: powerbi.visuals.mapCapabilities.dataViewMappings,
                objectDescriptors: powerbi.visuals.mapCapabilities.objects,
                transforms: {
                    selects: [ {
                        queryName: "select0"
                    }, {
                        queryName: "select1"
                    }, {
                        queryName: "select2"
                    }, {
                        queryName: "select3"
                    } ]
                }
            })[0], f = 0, g = 0, h = -1, i = -1, j = e.categorical.categories[0].values[0], k = powerbi.visuals.visualStyles.create().colorPalette.dataColors, l = c.calculateSeriesInfo(e.categorical.values.grouped(), f, g, i, h, k), m = l.sizeValuesForGroup[0].value, n = powerbi.visuals.TooltipBuilder.createTooltipInfo(powerbi.visuals.mapProps.general.formatString, e.categorical.categories, j, e.categorical.values, m, null, 0), o = [ {
                displayName: "",
                value: "2012"
            }, {
                displayName: "",
                value: "Canada"
            }, {
                displayName: "",
                value: "150.00"
            } ];
            expect(n).toEqual(o);
        }), it("Map.createMapDataLabel bubble", function() {
            var a = {
                show: !0,
                displayUnits: null,
                position: 0,
                precision: 2,
                labelColor: "#000000",
                overrideDefaultColor: !1,
                formatterOptions: null
            }, b = [ {
                x: 50,
                y: 50,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Test Label"
            } ], c = d.getMapLabelLayout(a), e = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapBubbles", !0), f = {
                height: 150,
                width: 300
            }, g = d.drawDefaultLabelsForDataPointChart(b, e, c, f);
            expect(g).toBeDefined(), expect(g[0][0]).toBeDefined(), expect(g.data.length).toBe(2), 
            expect(g[0][0].__data__.fill).toBe(a.labelColor), expect(g[0][0].__data__.labeltext).toBe(powerbi.visuals.dataLabelUtils.getLabelFormattedText("Test Label"));
        }), it("Map.createMapDataLabel slice", function() {
            var a = {
                show: !0,
                displayUnits: null,
                position: 0,
                precision: 2,
                labelColor: "#000000",
                overrideDefaultColor: !1,
                formatterOptions: null
            }, b = [ {
                x: 50,
                y: 50,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Test Label",
                value: 0
            } ], c = d.getMapLabelLayout(a), e = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapBubbles", !0), f = {
                height: g.height(),
                width: g.width()
            }, h = d.drawDefaultLabelsForDataPointChart(b, e, c, f);
            expect(h).toBeDefined(), expect(h[0][0]).toBeDefined(), expect(h.data.length).toBe(2), 
            expect(h[0][0].__data__.fill).toBe(a.labelColor), expect(h[0][0].__data__.labeltext).toBe(powerbi.visuals.dataLabelUtils.getLabelFormattedText("Test Label"));
        }), it("Map.createMapDataLabel hide bubble", function() {
            var a = {
                show: !0,
                displayUnits: null,
                position: 0,
                precision: 2,
                labelColor: "#000000",
                overrideDefaultColor: !1,
                formatterOptions: null
            }, b = [ {
                x: 50,
                y: 50,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Test Label"
            } ], c = d.getMapLabelLayout(a), e = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapBubbles1", !0), f = {
                height: 150,
                width: 300
            }, g = d.drawDefaultLabelsForDataPointChart(b, e, c, f);
            d.cleanDataLabels(e), expect(g).toBeDefined(), expect($(".mapBubbles1 text").length).toBe(0);
        }), it("Map.createMapDataLabel hide slice", function() {
            var a = {
                show: !0,
                displayUnits: null,
                position: 0,
                precision: 2,
                labelColor: "#000000",
                overrideDefaultColor: !1,
                formatterOptions: null
            }, b = [ {
                x: 50,
                y: 50,
                radius: 10,
                fill: "#000000",
                stroke: "2",
                strokeWidth: 2,
                selected: !0,
                identity: null,
                labeltext: "Test Label",
                value: 0
            } ], c = d.getMapLabelLayout(a), e = d3.select("body").append("svg").style("position", "absolute").append("g").classed("mapSlice1", !0), f = {
                height: 150,
                width: 300
            }, g = d.drawDefaultLabelsForDataPointChart(b, e, c, f);
            d.cleanDataLabels(e), expect(g).toBeDefined(), expect($(".mapSlice1 text").length).toBe(0);
        }), it("Map.tooltipInfo no series, no values", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ]
                }
            }, d = 0, e = 0, f = -1, g = -1, h = b.categorical.categories[0].values[0], i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = c.createDefaultValueColumns(b.categorical), k = c.calculateSeriesInfo(j.grouped(), d, e, f, g, i), l = k.sizeValuesForGroup[0].value, m = powerbi.visuals.TooltipBuilder.createTooltipInfo(powerbi.visuals.mapProps.general.formatString, b.categorical.categories, h, b.categorical.values, l, null, 0), n = [ {
                displayName: "col1",
                value: "Montana"
            } ];
            expect(m).toEqual(n);
        }), it("Map shows warning with no Location set", function() {
            var a = {
                metadata: {
                    columns: [ {
                        displayName: "NotLocation",
                        roles: {
                            NotCategory: !0
                        }
                    } ]
                }
            }, b = c.showLocationMissingWarningIfNecessary(a);
            expect(b[0]).not.toBeNull();
        }), it("Map shows warning with no columns set", function() {
            var a = {
                metadata: {
                    columns: []
                }
            }, b = c.showLocationMissingWarningIfNecessary(a);
            expect(b[0]).not.toBeNull();
        }), it("Map does not show warning with location set", function() {
            var a = {
                metadata: {
                    columns: [ {
                        displayName: "Location",
                        roles: {
                            Category: !0
                        }
                    } ]
                }
            }, b = c.showLocationMissingWarningIfNecessary(a);
            expect(b).toBeNull();
        }), it("Map legend is hidden:show false", function() {
            var a = {
                metadata: {
                    columns: [],
                    objects: {
                        legend: {
                            show: !1
                        }
                    }
                }
            };
            expect(c.isLegendHidden(a)).toBe(!0);
        }), it("Map legend is hidden:show true", function() {
            var a = {
                metadata: {
                    columns: [],
                    objects: {
                        legend: {
                            show: !0
                        }
                    }
                }
            };
            expect(c.isLegendHidden(a)).toBe(!1);
        }), it("Map legend is hidden:no legend object", function() {
            var a = {
                metadata: {
                    columns: [],
                    objects: {}
                }
            };
            expect(c.isLegendHidden(a)).toBe(!1);
        }), it("Map legend is hidden:no objects", function() {
            var a = {
                metadata: {
                    columns: []
                }
            };
            expect(c.isLegendHidden(a)).toBe(!1);
        }), it("Map legend is bottom", function() {
            var a = {
                metadata: {
                    columns: [],
                    objects: {
                        legend: {
                            position: "Bottom"
                        }
                    }
                }
            };
            expect(c.legendPosition(a)).toBe(1);
        }), it("Map enumerateLegend", function() {
            var a = {
                metadata: {
                    columns: [],
                    objects: {
                        legend: {
                            show: !0
                        }
                    }
                }
            }, b = {
                changeOrientation: function() {},
                drawLegend: function() {},
                getMargins: function() {
                    return {
                        width: 0,
                        height: 0
                    };
                },
                getOrientation: function() {
                    return 0;
                },
                isVisible: function() {
                    return !0;
                },
                reset: function() {}
            }, d = c.enumerateLegend(a, b, "");
            expect(d.length).toBe(1);
            var e = d[0];
            expect(e.objectName).toBe("legend"), expect(e.selector).toBeNull(), expect(e.properties).toBeDefined();
            var f = e.properties;
            expect(f.show).toBe(!0), expect(f.position).toBe("Top");
        }), it("Map.calculateSeriesInfo - Gradient color", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, d = {
                metadata: a,
                categorical: {
                    categories: [ {
                        source: a.columns[0],
                        values: [ "Montana", "California", "Arizona" ]
                    } ],
                    values: b.createValueColumns([ {
                        source: a.columns[1],
                        values: [ -100, 200, 700 ]
                    }, {
                        source: a.columns[2],
                        values: [ 75, 50, 0 ]
                    } ])
                }
            }, e = 0, f = -1, g = -1, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = [ {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#d9f2fb"
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#b1eab7"
                        }
                    }
                }
            } ], j = c.calculateSeriesInfo(d.categorical.values.grouped(), 0, e, g, f, h, null, i);
            expect(j.sizeValuesForGroup[0].fill).toBe("rgba(217,242,251,0.6)"), j = c.calculateSeriesInfo(d.categorical.values.grouped(), 1, e, g, f, h, null, i), 
            expect(j.sizeValuesForGroup[0].fill).toBe("rgba(177,234,183,0.6)");
        }), it("MapShapeDataPointRenderer.updateInternal calling updateInternal without converter throws a nullref", function() {
            var a = new powerbi.visuals.MapShapeDataPointRenderer(), b = {
                bubbleData: [],
                shapeData: [],
                sliceData: []
            };
            a.updateInternal(b), expect(!0).toBe(!0);
        }), it("Map.shouldEnumerateDataPoints filledMap", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                } ]
            }, b = {
                metadata: a
            };
            expect(c.shouldEnumerateDataPoints(b, !0)).toBe(!1);
        }), it("Map.shouldEnumerateDataPoints filledMap series overrides size", function() {
            var a = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Series: !0
                    }
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                } ]
            }, b = {
                metadata: a
            };
            expect(c.shouldEnumerateDataPoints(b, !0)).toBe(!0);
        }), it("Map.shouldEnumerateDataPoints filledMap", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                } ]
            }, b = {
                metadata: a
            };
            expect(c.shouldEnumerateDataPoints(b, !0)).toBe(!0);
        }), it("Map.shouldEnumerateDataPoints Map", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, b = {
                metadata: a
            };
            expect(c.shouldEnumerateDataPoints(b, !1)).toBe(!1);
        }), it("Map.shouldEnumerateDataPoints Map", function() {
            var a = {
                columns: [ {
                    displayName: "col1"
                } ]
            }, b = {
                metadata: a
            };
            expect(c.shouldEnumerateDataPoints(b, !1)).toBe(!0);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = (powerbi.data.CompiledSubtotalType, powerbi.data.dsr.DataShapeUtility), c = powerbi.DataViewAnalysis, d = powerbi.visuals.Matrix, e = (powerbi.data.SemanticType, 
    powerbi.visuals.valueFormatter), f = 500, g = b.describeDataType(1), h = b.describeDataType(2048), i = b.describeDataType(4096), j = b.describeDataType(2048, "WebUrl"), k = {
        displayName: "RowGroup1",
        queryName: "RowGroup1",
        type: h,
        index: 0
    }, l = {
        displayName: "RowGroup2",
        queryName: "RowGroup2",
        type: h,
        index: 1
    }, m = {
        displayName: "RowGroup3",
        queryName: "RowGroup3",
        type: h,
        index: 2
    }, n = {
        displayName: "RowGroup3",
        queryName: "RowGroup3",
        type: h,
        index: 2,
        objects: {
            general: {
                formatString: "0.0"
            }
        }
    }, o = {
        displayName: "RowGroup4",
        queryName: "RowGroup4",
        type: i,
        index: 9
    }, p = {
        displayName: "RowGroupWebUrl",
        queryName: "RowGroupWebUrl",
        type: j,
        index: 0
    }, q = {
        displayName: "ColGroup1",
        queryName: "ColGroup1",
        type: h,
        index: 3
    }, r = {
        displayName: "ColGroup2",
        queryName: "ColGroup2",
        type: h,
        index: 4
    }, s = {
        displayName: "ColGroup3",
        queryName: "ColGroup3",
        type: h,
        index: 5
    }, t = {
        displayName: "ColGroup3",
        queryName: "ColGroup3",
        type: h,
        index: 5,
        objects: {
            general: {
                formatString: "0.00"
            }
        }
    }, u = {
        displayName: "ColGroup4",
        queryName: "ColGroup4",
        type: i,
        index: 10
    }, v = {
        displayName: "ColGroupWebUrl",
        queryName: "ColGroupWebUrl",
        type: j,
        index: 0
    }, w = {
        displayName: "Measure1",
        queryName: "Measure1",
        type: g,
        isMeasure: !0,
        index: 6
    }, x = {
        displayName: "Measure2",
        queryName: "Measure2",
        type: g,
        isMeasure: !0,
        index: 7
    }, y = {
        displayName: "Measure3",
        queryName: "Measure3",
        type: g,
        isMeasure: !0,
        index: 8
    }, z = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    values: {
                        0: {
                            value: 100
                        }
                    }
                } ]
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0
                } ]
            },
            levels: [ {
                sources: [ w ]
            } ]
        },
        valueSources: [ w ]
    }, A = {
        metadata: {
            columns: [ w ]
        },
        matrix: z
    }, B = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    values: {
                        0: {
                            value: 100
                        }
                    }
                } ]
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "Group A"
                } ]
            },
            levels: [ {
                sources: [ q ]
            } ]
        },
        valueSources: [ w ]
    }, C = {
        metadata: {
            columns: [ q, w ]
        },
        matrix: B
    }, D = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    values: {
                        0: {
                            value: 100
                        }
                    }
                } ]
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "http://www.validurl.com"
                } ]
            },
            levels: [ {
                sources: [ v ]
            } ]
        },
        valueSources: [ w ]
    }, E = {
        metadata: {
            columns: [ v, w ]
        },
        matrix: D
    }, F = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    values: {
                        0: {
                            value: 100
                        },
                        1: {
                            value: 200,
                            valueSourceIndex: 1
                        },
                        2: {
                            value: 300,
                            valueSourceIndex: 2
                        }
                    }
                } ]
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0
                }, {
                    level: 0,
                    levelSourceIndex: 1
                }, {
                    level: 0,
                    levelSourceIndex: 2
                } ]
            },
            levels: [ {
                sources: [ w, x, y ]
            } ]
        },
        valueSources: [ w, x, y ]
    }, G = {
        metadata: {
            columns: [ w, x, y ]
        },
        matrix: F
    }, H = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    values: {
                        0: {
                            value: 100
                        },
                        1: {
                            value: 200,
                            valueSourceIndex: 1
                        },
                        2: {
                            value: 300,
                            valueSourceIndex: 2
                        }
                    }
                } ]
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "Group A",
                    children: [ {
                        level: 1
                    }, {
                        level: 1,
                        levelSourceIndex: 1
                    }, {
                        level: 1,
                        levelSourceIndex: 2
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ w, x, y ]
            } ]
        },
        valueSources: [ w, x, y ]
    }, I = {
        metadata: {
            columns: [ q, w, x, y ]
        },
        matrix: H
    }, J = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "North America",
                    children: [ {
                        level: 1,
                        value: "Canada",
                        children: [ {
                            level: 2,
                            value: "Ontario",
                            values: {
                                0: {
                                    value: 1e3
                                },
                                1: {
                                    value: 1001,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 1002,
                                    valueSourceIndex: 2
                                }
                            }
                        }, {
                            level: 2,
                            value: "Quebec",
                            values: {
                                0: {
                                    value: 1010
                                },
                                1: {
                                    value: 1011,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 1012,
                                    valueSourceIndex: 2
                                }
                            }
                        } ]
                    }, {
                        level: 1,
                        value: "USA",
                        children: [ {
                            level: 2,
                            value: "Washington",
                            values: {
                                0: {
                                    value: 1100
                                },
                                1: {
                                    value: 1101,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 1102,
                                    valueSourceIndex: 2
                                }
                            }
                        }, {
                            level: 2,
                            value: "Oregon",
                            values: {
                                0: {
                                    value: 1110
                                },
                                1: {
                                    value: 1111,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 1112,
                                    valueSourceIndex: 2
                                }
                            }
                        } ]
                    } ]
                }, {
                    level: 0,
                    value: "South America",
                    children: [ {
                        level: 1,
                        value: "Brazil",
                        children: [ {
                            level: 2,
                            value: "Amazonas",
                            values: {
                                0: {
                                    value: 2e3
                                },
                                1: {
                                    value: 2001,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 2002,
                                    valueSourceIndex: 2
                                }
                            }
                        }, {
                            level: 2,
                            value: "Mato Grosso",
                            values: {
                                0: {
                                    value: 2010
                                },
                                1: {
                                    value: 2011,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 2012,
                                    valueSourceIndex: 2
                                }
                            }
                        } ]
                    }, {
                        level: 1,
                        value: "Chile",
                        children: [ {
                            level: 2,
                            value: "Arica",
                            values: {
                                0: {
                                    value: 2100
                                },
                                1: {
                                    value: 2101,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 2102,
                                    valueSourceIndex: 2
                                }
                            }
                        }, {
                            level: 2,
                            value: "Parinacota",
                            values: {
                                0: {
                                    value: 2110
                                },
                                1: {
                                    value: 2111,
                                    valueSourceIndex: 1
                                },
                                2: {
                                    value: 2112,
                                    valueSourceIndex: 2
                                }
                            }
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ m ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0
                }, {
                    level: 0,
                    levelSourceIndex: 1
                }, {
                    level: 0,
                    levelSourceIndex: 2
                } ]
            },
            levels: [ {
                sources: [ w, x, y ]
            } ]
        },
        valueSources: [ w, x, y ]
    }, K = {
        metadata: {
            columns: [ k, l, m ],
            segment: {}
        },
        matrix: J
    }, L = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Group 1",
                    values: {
                        0: {
                            value: 100
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ k ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0
                } ]
            },
            levels: [ {
                sources: [ w ]
            } ]
        },
        valueSources: [ w ]
    }, M = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "http://www.validurl.com",
                    values: {
                        0: {
                            value: 100
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ p ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0
                } ]
            },
            levels: [ {
                sources: [ w ]
            } ]
        },
        valueSources: [ w ]
    }, N = {
        metadata: {
            columns: [],
            segment: {}
        },
        matrix: M
    }, O = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: 10
                } ]
            },
            levels: [ {
                sources: [ k ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: 10
                } ]
            },
            levels: [ {
                sources: [ q ]
            } ]
        },
        valueSources: []
    }, P = {
        metadata: {
            columns: [ k, q ]
        },
        matrix: O
    }, Q = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Africa",
                    children: [ {
                        level: 1,
                        value: "Algeria",
                        children: [ {
                            level: 2,
                            value: 2008,
                            identity: a.mocks.dataViewScopeIdentity("rowGroup3")
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ m ]
            } ]
        },
        columns: {
            root: {
                children: []
            },
            levels: []
        },
        valueSources: []
    }, R = {
        metadata: {
            columns: [ k, l, m ]
        },
        matrix: Q
    }, S = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Africa",
                    children: [ {
                        level: 1
                    }, {
                        level: 1,
                        value: "Angola"
                    } ]
                }, {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "China"
                    }, {
                        level: 1
                    } ]
                }, {
                    level: 0,
                    children: [ {
                        level: 1
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            } ]
        },
        columns: {
            root: {
                children: []
            },
            levels: []
        },
        valueSources: []
    }, T = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Africa",
                    children: [ {
                        level: 1,
                        value: "Algeria",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    }, {
                        level: 1,
                        value: "Angola",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    } ]
                }, {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "China",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    }, {
                        level: 1,
                        value: "India",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ m ]
            } ]
        },
        columns: {
            root: {
                children: []
            },
            levels: []
        },
        valueSources: []
    }, U = {
        rows: {
            root: {
                children: []
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "Africa",
                    children: [ {
                        level: 1,
                        value: "Algeria",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    }, {
                        level: 1,
                        value: "Angola",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    } ]
                }, {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "China",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    }, {
                        level: 1,
                        value: "India",
                        children: [ {
                            level: 2,
                            value: 2008
                        }, {
                            level: 2,
                            value: 2012
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ m ]
            } ]
        },
        valueSources: []
    }, V = {
        metadata: {
            columns: [ k, l, m ]
        },
        matrix: U
    }, W = {
        rows: {
            root: {
                children: []
            },
            levels: []
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "Africa",
                    children: [ {
                        level: 1,
                        identity: jasmine.any(Object)
                    }, {
                        level: 1,
                        value: "Angola",
                        identity: jasmine.any(Object)
                    } ]
                }, {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "China",
                        identity: jasmine.any(Object)
                    }, {
                        level: 1,
                        identity: jasmine.any(Object)
                    } ]
                }, {
                    level: 0,
                    children: [ {
                        level: 1,
                        identity: jasmine.any(Object)
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            } ]
        },
        valueSources: []
    }, X = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: 2002
                } ]
            },
            levels: [ {
                sources: [ k ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "United States"
                } ]
            },
            levels: [ {
                sources: [ q ]
            } ]
        },
        valueSources: []
    }, Y = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "A",
                    children: [ {
                        level: 1,
                        value: "a",
                        children: [ {
                            level: 2,
                            value: 1
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ m ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "B",
                    children: [ {
                        level: 1,
                        value: "b",
                        children: [ {
                            level: 2,
                            value: 2
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            }, {
                sources: [ s ]
            } ]
        },
        valueSources: []
    }, Z = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "A",
                    children: [ {
                        level: 1,
                        value: "a",
                        children: [ {
                            level: 2,
                            value: 1
                        }, {
                            level: 2,
                            value: 2
                        } ]
                    }, {
                        level: 1,
                        value: "b",
                        children: [ {
                            level: 2,
                            value: 3
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            }, {
                sources: [ n ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: "C",
                    children: [ {
                        level: 1,
                        value: "c",
                        children: [ {
                            level: 2,
                            value: 4
                        }, {
                            level: 2,
                            value: 5
                        } ]
                    }, {
                        level: 1,
                        value: "d",
                        children: [ {
                            level: 2,
                            value: 6
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            }, {
                sources: [ t ]
            } ]
        },
        valueSources: []
    }, _ = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "South Korea",
                        values: {
                            0: {
                                value: 0
                            },
                            1: {
                                value: 1,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 2
                            },
                            3: {
                                value: 3,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 4
                            },
                            5: {
                                value: 5,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 6
                            },
                            7: {
                                value: 7,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 8
                            },
                            9: {
                                value: 9,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 10
                            },
                            11: {
                                value: 11,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        value: "Unified Team",
                        values: {
                            0: {
                                value: 12
                            },
                            1: {
                                value: 13,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 14
                            },
                            3: {
                                value: 15,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 16
                            },
                            5: {
                                value: 17,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 18
                            },
                            7: {
                                value: 19,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 20
                            },
                            9: {
                                value: 21,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 22
                            },
                            11: {
                                value: null,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Europe",
                    children: [ {
                        level: 1,
                        value: "France",
                        values: {
                            0: {
                                value: 24
                            },
                            1: {
                                value: 25,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 26
                            },
                            3: {
                                value: 27,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 28
                            },
                            5: {
                                value: 29,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 30
                            },
                            7: {
                                value: 31,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 32
                            },
                            9: {
                                value: 33,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 34
                            },
                            11: {
                                value: 35,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        value: "Germany",
                        values: {
                            0: {
                                value: 36
                            },
                            1: {
                                value: 37,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 38
                            },
                            3: {
                                value: 39,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 40
                            },
                            5: {
                                value: 41,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 42
                            },
                            7: {
                                value: 43,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 44
                            },
                            9: {
                                value: 45,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 46
                            },
                            11: {
                                value: 47,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "North America",
                    children: [ {
                        level: 1,
                        value: "United States",
                        values: {
                            0: {
                                value: 48
                            },
                            1: {
                                value: 49,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 50
                            },
                            3: {
                                value: 51,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 52
                            },
                            5: {
                                value: 53,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 54
                            },
                            7: {
                                value: 55,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 56
                            },
                            9: {
                                value: 57,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 58
                            },
                            11: {
                                value: 59,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Oceania",
                    children: [ {
                        level: 1,
                        value: "Australia",
                        values: {
                            0: {
                                value: 60
                            },
                            1: {
                                value: 61,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 62
                            },
                            3: {
                                value: 63,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 64
                            },
                            5: {
                                value: 65,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 66
                            },
                            7: {
                                value: 67,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 68
                            },
                            9: {
                                value: 69,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 70
                            },
                            11: {
                                value: 71,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: 1992,
                    children: [ {
                        level: 1,
                        name: "Bronze",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Gold",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Silver",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    } ]
                }, {
                    level: 0,
                    value: 1996,
                    children: [ {
                        level: 1,
                        value: "Bronze",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Gold",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Silver",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            }, {
                sources: [ w, x ]
            } ]
        },
        valueSources: [ w, x ]
    }, aa = {
        metadata: {
            columns: [ k, l, q, r, w, x ]
        },
        matrix: _
    }, ba = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "South Korea",
                        values: {
                            0: {
                                value: 1
                            },
                            1: {
                                value: 2
                            },
                            2: {
                                value: 3
                            },
                            3: {
                                value: 4
                            },
                            4: {
                                value: 5
                            },
                            5: {
                                value: 9
                            },
                            6: {
                                value: 12
                            }
                        }
                    }, {
                        level: 1,
                        value: "Unified Team",
                        values: {
                            0: {
                                value: 11
                            },
                            1: {
                                value: 12
                            },
                            2: {
                                value: 23
                            },
                            3: {
                                value: 14
                            },
                            4: {
                                value: 15
                            },
                            5: {
                                value: 29
                            },
                            6: {
                                value: 52
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 12
                            },
                            1: {
                                value: 14
                            },
                            2: {
                                value: 26
                            },
                            3: {
                                value: 18
                            },
                            4: {
                                value: 20
                            },
                            5: {
                                value: 38
                            },
                            6: {
                                value: 64
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Europe",
                    children: [ {
                        level: 1,
                        value: "France",
                        values: {
                            0: {
                                value: 21
                            },
                            1: {
                                value: 22
                            },
                            2: {
                                value: 43
                            },
                            3: {
                                value: 24
                            },
                            4: {
                                value: 25
                            },
                            5: {
                                value: 49
                            },
                            6: {
                                value: 92
                            }
                        }
                    }, {
                        level: 1,
                        value: "Germany",
                        values: {
                            0: {
                                value: 31
                            },
                            1: {
                                value: 32
                            },
                            2: {
                                value: 63
                            },
                            3: {
                                value: 34
                            },
                            4: {
                                value: 35
                            },
                            5: {
                                value: 69
                            },
                            6: {
                                value: 132
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 52
                            },
                            1: {
                                value: 54
                            },
                            2: {
                                value: 106
                            },
                            3: {
                                value: 58
                            },
                            4: {
                                value: 60
                            },
                            5: {
                                value: 118
                            },
                            6: {
                                value: 224
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "North America",
                    children: [ {
                        level: 1,
                        value: "United States",
                        values: {
                            0: {
                                value: 41
                            },
                            1: {
                                value: 42
                            },
                            2: {
                                value: 83
                            },
                            3: {
                                value: 44
                            },
                            4: {
                                value: 45
                            },
                            5: {
                                value: 89
                            },
                            6: {
                                value: 172
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 41
                            },
                            1: {
                                value: 42
                            },
                            2: {
                                value: 83
                            },
                            3: {
                                value: 44
                            },
                            4: {
                                value: 45
                            },
                            5: {
                                value: 89
                            },
                            6: {
                                value: 172
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Oceania",
                    children: [ {
                        level: 1,
                        value: "Australia",
                        values: {
                            0: {
                                value: 51
                            },
                            1: {
                                value: 52
                            },
                            2: {
                                value: 103
                            },
                            3: {
                                value: 54
                            },
                            4: {
                                value: 55
                            },
                            5: {
                                value: 109
                            },
                            6: {
                                value: 212
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 51
                            },
                            1: {
                                value: 52
                            },
                            2: {
                                value: 103
                            },
                            3: {
                                value: 54
                            },
                            4: {
                                value: 55
                            },
                            5: {
                                value: 109
                            },
                            6: {
                                value: 212
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    isSubtotal: !0,
                    values: {
                        0: {
                            value: 156
                        },
                        1: {
                            value: 162
                        },
                        2: {
                            value: 318
                        },
                        3: {
                            value: 174
                        },
                        4: {
                            value: 180
                        },
                        5: {
                            value: 354
                        },
                        6: {
                            value: 672
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: 1992,
                    children: [ {
                        level: 1,
                        value: "Silver"
                    }, {
                        level: 1,
                        value: "Gold"
                    }, {
                        level: 1,
                        isSubtotal: !0
                    } ]
                }, {
                    level: 0,
                    value: 1996,
                    children: [ {
                        level: 1,
                        value: "Silver"
                    }, {
                        level: 1,
                        value: "Gold"
                    }, {
                        level: 1,
                        isSubtotal: !0
                    } ]
                }, {
                    level: 0,
                    isSubtotal: !0
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            } ]
        },
        valueSources: [ w ]
    }, ca = {
        metadata: {
            columns: [ k, l, q, r, w ]
        },
        matrix: ba
    }, da = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: "Asia",
                    children: [ {
                        level: 1,
                        value: "South Korea",
                        values: {
                            0: {
                                value: 0
                            },
                            1: {
                                value: 1,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 2
                            },
                            3: {
                                value: 3,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 2
                            },
                            5: {
                                value: 4,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 6
                            },
                            7: {
                                value: 7,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 8
                            },
                            9: {
                                value: 9,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 14
                            },
                            11: {
                                value: 16,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 16
                            },
                            13: {
                                value: 20,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        value: "Unified Team",
                        values: {
                            0: {
                                value: 12
                            },
                            1: {
                                value: 13,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 14
                            },
                            3: {
                                value: 15,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 26
                            },
                            5: {
                                value: 28,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 18
                            },
                            7: {
                                value: 19,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 20
                            },
                            9: {
                                value: 21,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 38
                            },
                            11: {
                                value: 40,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 64
                            },
                            13: {
                                value: 68,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 12
                            },
                            1: {
                                value: 14,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 16
                            },
                            3: {
                                value: 18,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 28
                            },
                            5: {
                                value: 32,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 24
                            },
                            7: {
                                value: 26,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 28
                            },
                            9: {
                                value: 30,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 52
                            },
                            11: {
                                value: 56,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 80
                            },
                            13: {
                                value: 88,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Europe",
                    children: [ {
                        level: 1,
                        value: "France",
                        values: {
                            0: {
                                value: 24
                            },
                            1: {
                                value: 25,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 26
                            },
                            3: {
                                value: 27,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 50
                            },
                            5: {
                                value: 52,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 30
                            },
                            7: {
                                value: 31,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 32
                            },
                            9: {
                                value: 33,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 62
                            },
                            11: {
                                value: 64,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 112
                            },
                            13: {
                                value: 116,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        value: "Germany",
                        values: {
                            0: {
                                value: 36
                            },
                            1: {
                                value: 37,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 38
                            },
                            3: {
                                value: 39,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 74
                            },
                            5: {
                                value: 74,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 42
                            },
                            7: {
                                value: 43,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 44
                            },
                            9: {
                                value: 45,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 86
                            },
                            11: {
                                value: 88,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 160
                            },
                            13: {
                                value: 164,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 60
                            },
                            1: {
                                value: 62,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 64
                            },
                            3: {
                                value: 66,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 124
                            },
                            5: {
                                value: 128,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 72
                            },
                            7: {
                                value: 74,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 76
                            },
                            9: {
                                value: 78,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 148
                            },
                            11: {
                                value: 152,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 272
                            },
                            13: {
                                value: 280,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "North America",
                    children: [ {
                        level: 1,
                        value: "United States",
                        values: {
                            0: {
                                value: 48
                            },
                            1: {
                                value: 49,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 50
                            },
                            3: {
                                value: 51,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 98
                            },
                            5: {
                                value: 100,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 54
                            },
                            7: {
                                value: 55,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 56
                            },
                            9: {
                                value: 57,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 110
                            },
                            11: {
                                value: 112,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 208
                            },
                            13: {
                                value: 212,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 48
                            },
                            1: {
                                value: 49,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 50
                            },
                            3: {
                                value: 51,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 98
                            },
                            5: {
                                value: 100,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 54
                            },
                            7: {
                                value: 55,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 56
                            },
                            9: {
                                value: 57,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 110
                            },
                            11: {
                                value: 112,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 208
                            },
                            13: {
                                value: 212,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    value: "Oceania",
                    children: [ {
                        level: 1,
                        value: "Australia",
                        values: {
                            0: {
                                value: 60
                            },
                            1: {
                                value: 61,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 62
                            },
                            3: {
                                value: 63,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 122
                            },
                            5: {
                                value: 124,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 66
                            },
                            7: {
                                value: 67,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 68
                            },
                            9: {
                                value: 69,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 134
                            },
                            11: {
                                value: 136,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 256
                            },
                            13: {
                                value: 260,
                                valueSourceIndex: 1
                            }
                        }
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        values: {
                            0: {
                                value: 60
                            },
                            1: {
                                value: 61,
                                valueSourceIndex: 1
                            },
                            2: {
                                value: 62
                            },
                            3: {
                                value: 63,
                                valueSourceIndex: 1
                            },
                            4: {
                                value: 122
                            },
                            5: {
                                value: 124,
                                valueSourceIndex: 1
                            },
                            6: {
                                value: 66
                            },
                            7: {
                                value: 67,
                                valueSourceIndex: 1
                            },
                            8: {
                                value: 68
                            },
                            9: {
                                value: 69,
                                valueSourceIndex: 1
                            },
                            10: {
                                value: 134
                            },
                            11: {
                                value: 136,
                                valueSourceIndex: 1
                            },
                            12: {
                                value: 256
                            },
                            13: {
                                value: 260,
                                valueSourceIndex: 1
                            }
                        }
                    } ]
                }, {
                    level: 0,
                    isSubtotal: !0,
                    values: {
                        0: {
                            value: 180
                        },
                        1: {
                            value: 186,
                            valueSourceIndex: 1
                        },
                        2: {
                            value: 192
                        },
                        3: {
                            value: 198,
                            valueSourceIndex: 1
                        },
                        4: {
                            value: 372
                        },
                        5: {
                            value: 384,
                            valueSourceIndex: 1
                        },
                        6: {
                            value: 216
                        },
                        7: {
                            value: 222,
                            valueSourceIndex: 1
                        },
                        8: {
                            value: 228
                        },
                        9: {
                            value: 234,
                            valueSourceIndex: 1
                        },
                        10: {
                            value: 444
                        },
                        11: {
                            value: 456,
                            valueSourceIndex: 1
                        },
                        12: {
                            value: 816
                        },
                        13: {
                            value: 840,
                            valueSourceIndex: 1
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ k ]
            }, {
                sources: [ l ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: 1992,
                    children: [ {
                        level: 1,
                        value: "Silver",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Gold",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        children: [ {
                            level: 2,
                            isSubtotal: !0
                        }, {
                            level: 2,
                            levelSourceIndex: 1,
                            isSubtotal: !0
                        } ]
                    } ]
                }, {
                    level: 0,
                    value: 1996,
                    children: [ {
                        level: 1,
                        value: "Silver",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        value: "Gold",
                        children: [ {
                            level: 2
                        }, {
                            level: 2,
                            levelSourceIndex: 1
                        } ]
                    }, {
                        level: 1,
                        isSubtotal: !0,
                        children: [ {
                            level: 2,
                            isSubtotal: !0
                        }, {
                            level: 2,
                            levelSourceIndex: 1,
                            isSubtotal: !0
                        } ]
                    } ]
                }, {
                    level: 0,
                    isSubtotal: !0,
                    children: [ {
                        level: 2,
                        isSubtotal: !0
                    }, {
                        level: 2,
                        levelSourceIndex: 1,
                        isSubtotal: !0
                    } ]
                } ]
            },
            levels: [ {
                sources: [ q ]
            }, {
                sources: [ r ]
            }, {
                sources: [ w, x ]
            } ]
        },
        valueSources: [ w, x ]
    }, ea = {
        metadata: {
            columns: [ k, l, q, r, w, x ]
        },
        matrix: da
    }, fa = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: !0,
                    values: {
                        0: {
                            value: 1
                        },
                        1: {
                            value: 2
                        }
                    }
                }, {
                    level: 0,
                    value: !1,
                    values: {
                        0: {
                            value: 3
                        },
                        1: {
                            value: 4
                        }
                    }
                }, {
                    level: 0,
                    values: {
                        0: {
                            value: 5
                        },
                        1: {
                            value: 6
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ o ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: !0
                }, {
                    level: 0,
                    value: !1
                } ]
            },
            levels: [ {
                sources: [ u ]
            } ]
        },
        valueSources: [ w ]
    }, ga = {
        rows: {
            root: {
                children: [ {
                    level: 0,
                    value: !0,
                    values: {
                        0: {
                            value: 1
                        },
                        1: {
                            value: 2
                        },
                        2: {
                            value: 3
                        }
                    }
                }, {
                    level: 0,
                    value: !1,
                    values: {
                        0: {
                            value: 3
                        },
                        1: {
                            value: 4
                        },
                        2: {
                            value: 7
                        }
                    }
                }, {
                    level: 0,
                    values: {
                        0: {
                            value: 5
                        },
                        1: {
                            value: 6
                        },
                        2: {
                            value: 11
                        }
                    }
                }, {
                    level: 0,
                    isSubtotal: !0,
                    values: {
                        0: {
                            value: 5
                        },
                        1: {
                            value: 6
                        },
                        2: {
                            value: 21
                        }
                    }
                } ]
            },
            levels: [ {
                sources: [ o ]
            } ]
        },
        columns: {
            root: {
                children: [ {
                    level: 0,
                    value: !0
                }, {
                    level: 0,
                    value: !1
                }, {
                    level: 0,
                    isSubtotal: !0
                } ]
            },
            levels: [ {
                sources: [ u ]
            } ]
        },
        valueSources: [ w ]
    };
    describe("Matrix", function() {
        function a(a) {
            return {
                metadata: {
                    objects: a
                },
                matrix: {
                    rows: {
                        "for": {
                            "in": {
                                role: "Rows",
                                items: []
                            }
                        }
                    },
                    columns: {
                        "for": {
                            "in": {
                                role: "Columns",
                                items: []
                            }
                        }
                    }
                }
            };
        }
        it("Matrix registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("matrix").capabilities).toBe(d.capabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(d.capabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(d.capabilities.dataRoles).toBeDefined();
        }), it("Capabilities should include row windowing", function() {
            expect(d.capabilities.dataViewMappings[0].matrix.rows.dataReductionAlgorithm).toBeDefined();
        }), it("Capabilities should allow measure only matrices", function() {
            var a = {
                Values: [ {
                    queryRef: "0"
                } ]
            }, b = {
                Values: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                }, {
                    queryRef: "2"
                } ]
            }, e = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, e)).toEqual(e), expect(c.chooseDataViewMappings(b, e)).toEqual(e);
        }), it("Capabilities should allow matrices with row groups only", function() {
            var a = {
                Rows: [ {
                    queryRef: "0"
                } ]
            }, b = {
                Rows: [ {
                    queryRef: "2"
                }, {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, e = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, e)).toEqual(e), expect(c.chooseDataViewMappings(b, e)).toEqual(e);
        }), it("Capabilities should allow matrices with row groups and arbitrary number of measures", function() {
            var a = {
                Rows: [ {
                    queryRef: "0"
                } ],
                Values: [ {
                    queryRef: "1"
                }, {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                } ]
            }, b = {
                Rows: [ {
                    queryRef: "3"
                }, {
                    queryRef: "2"
                }, {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "0"
                } ]
            }, e = {
                Rows: [ {
                    queryRef: "1"
                }, {
                    queryRef: "0"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                } ]
            }, f = {
                Rows: [ {
                    queryRef: "0"
                } ],
                Values: [ {
                    queryRef: "1"
                } ]
            }, g = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, g)).toEqual(g), expect(c.chooseDataViewMappings(b, g)).toEqual(g), 
            expect(c.chooseDataViewMappings(e, g)).toEqual(g), expect(c.chooseDataViewMappings(f, g)).toEqual(g);
        }), it("Capabilities should allow matrices with column groups only", function() {
            var a = {
                Columns: [ {
                    queryRef: "0"
                } ]
            }, b = {
                Columns: [ {
                    queryRef: "2"
                }, {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, e = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, e)).toEqual(e), expect(c.chooseDataViewMappings(b, e)).toEqual(e);
        }), it("Capabilities should allow matrices with column groups and measures", function() {
            var a = {
                Columns: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                }, {
                    queryRef: "0"
                } ]
            }, b = {
                Columns: [ {
                    queryRef: "0"
                }, {
                    queryRef: "2"
                }, {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "3"
                } ]
            }, e = {
                Columns: [ {
                    queryRef: "3"
                }, {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, f = {
                Columns: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "0"
                } ]
            }, g = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, g)).toEqual(g), expect(c.chooseDataViewMappings(b, g)).toEqual(g), 
            expect(c.chooseDataViewMappings(e, g)).toEqual(g), expect(c.chooseDataViewMappings(f, g)).toEqual(g);
        }), it("Capabilities should allow matrices with row groups and arbitrary number of column groups and measures", function() {
            var a = {
                Rows: [ {
                    queryRef: "0"
                } ],
                Columns: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                } ]
            }, b = {
                Rows: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ],
                Columns: [ {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                } ],
                Values: [ {
                    queryRef: "4"
                } ]
            }, e = {
                Rows: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ],
                Columns: [ {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "3"
                }, {
                    queryRef: "4"
                } ]
            }, f = {
                Rows: [ {
                    queryRef: "0"
                } ],
                Columns: [ {
                    queryRef: "1"
                }, {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "3"
                }, {
                    queryRef: "4"
                } ]
            }, g = d.capabilities.dataViewMappings;
            expect(c.chooseDataViewMappings(a, g)).toEqual(g), expect(c.chooseDataViewMappings(b, g)).toEqual(g), 
            expect(c.chooseDataViewMappings(e, g)).toEqual(g), expect(c.chooseDataViewMappings(f, g)).toEqual(g);
        }), it("Capabilities should suppressDefaultTitle", function() {
            expect(d.capabilities.suppressDefaultTitle).toBe(!0);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(d.capabilities.objects)).toEqual(d.formatStringProp);
        }), it("CustomizeQuery picks up enabled row subtotals", function() {
            var b = {
                general: {
                    rowSubtotals: !0,
                    columnSubtotals: !1
                }
            }, c = a(b);
            d.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.matrix.rows["for"]["in"].subtotalType).toEqual(2), expect(c.matrix.columns["for"]["in"].subtotalType).toEqual(0);
        }), it("CustomizeQuery picks up enabled column subtotals", function() {
            var b = {
                general: {
                    rowSubtotals: !1,
                    columnSubtotals: !0
                }
            }, c = a(b);
            d.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.matrix.rows["for"]["in"].subtotalType).toEqual(0), expect(c.matrix.columns["for"]["in"].subtotalType).toEqual(2);
        }), it("CustomizeQuery picks up enabled row and column subtotals", function() {
            var b = {
                general: {
                    rowSubtotals: !0,
                    columnSubtotals: !0
                }
            }, c = a(b);
            d.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.matrix.rows["for"]["in"].subtotalType).toEqual(2), expect(c.matrix.columns["for"]["in"].subtotalType).toEqual(2);
        }), it("CustomizeQuery handles missing settings", function() {
            var b = a();
            d.customizeQuery({
                dataViewMappings: [ b ]
            }), expect(b.matrix.rows["for"]["in"].subtotalType).toEqual(2), expect(b.matrix.columns["for"]["in"].subtotalType).toEqual(2);
        }), it("CustomizeQuery handles missing subtotal settings", function() {
            var b = {
                general: {
                    rowSubtotals: void 0,
                    columnSubtotals: void 0
                }
            }, c = a(b);
            d.customizeQuery({
                dataViewMappings: [ c ]
            }), expect(c.matrix.rows["for"]["in"].subtotalType).toEqual(2), expect(c.matrix.columns["for"]["in"].subtotalType).toEqual(2);
        });
    }), describe("Tablix control tests", function() {
        it("touch disabled", function() {
            var a = 0, b = z, c = powerbi.visuals.createMatrixHierarchyNavigator(b, e.formatRaw), d = new powerbi.visuals.MatrixBinder(c, {
                layoutKind: a
            }), f = powerbi.visuals.controls.internal.CanvasTablixLayoutManager.createLayoutManager(d), g = document.createElement("div"), h = new powerbi.visuals.controls.TablixControl(c, f, d, g, {
                interactive: !0,
                enableTouchSupport: !1
            });
            expect(h._touchManager).toBeUndefined();
        });
    }), describe("Matrix hierarchy navigator tests", function() {
        describe("getDepth", function() {
            it("returns the correct depth for an empty hierarchy", function() {
                var a = Q, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getDepth(b)).toBe(1);
            }), it("returns the correct depth for a measure only hierarchy", function() {
                var a = z, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getDepth(b)).toBe(1);
            }), it("returns the correct depth for group only hierarchy", function() {
                var a = J, b = a.rows.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getDepth(b)).toBe(3);
            }), it("returns the correct depth for group and measure hierarchy", function() {
                var a = _, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getDepth(b)).toBe(3);
            });
        }), describe("getLeafCount", function() {
            it("returns the right leaf count for a placeholder hierarchy", function() {
                var a = z, b = a.rows.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLeafCount(b)).toBe(1);
            }), it("returns the right leaf count for an empty hierarchy", function() {
                var a = Q, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLeafCount(b)).toBe(0);
            }), it("returns the right leaf count for a one level deep hierarchy", function() {
                var a = L, b = a.rows.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLeafCount(b)).toBe(1);
            }), it("returns the right leaf count for a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLeafCount(b)).toBe(12);
            });
        }), describe("getLeafAt", function() {
            it("returns the correct leaf from a placeholder hierarchy", function() {
                var a = B, b = a.rows.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getLeafAt(b, 0)).toBe(c);
            }), it("returns the correct leaf from a one level deep hierarchy", function() {
                var a = B, b = a.columns.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getLeafAt(b, 0)).toBe(c);
            }), it("returns the correct leaf from a three level deep hierarchy", function() {
                var a = J, b = a.rows.root.children, c = b[1].children[1].children[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getLeafAt(b, 7)).toBe(c);
            });
        }), describe("getParent", function() {
            it("returns null for outermost node in a one level deep hierarchy", function() {
                var a = L, b = a.columns.root.children[0], c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getParent(b)).toBeNull();
            }), it("returns null for outermost node in a three level deep hierarchy", function() {
                var a = Y, b = a.rows.root.children[0], c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getParent(b)).toBeNull();
            }), it("returns the correct parent for an innermost node in a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children[1].children[1], c = b.children[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getParent(c)).toBe(b);
            }), it("returns the correct parent for a non-innermost node in a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children[0], c = b.children[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getParent(c)).toBe(b);
            });
        }), describe("getIndex", function() {
            it("returns the correct index for outermost nodes", function() {
                var a = _, b = a.rows.root.children, c = b[0], d = b[1], f = b[2], g = b[3], h = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(h.getIndex(c)).toBe(0), expect(h.getIndex(d)).toBe(1), expect(h.getIndex(f)).toBe(2), 
                expect(h.getIndex(g)).toBe(3);
            }), it("returns the correct index for innermost nodes", function() {
                var a = T, b = a.rows.root.children, c = b[0].children[0].children[0], d = b[0].children[0].children[1], f = b[1].children[1].children[0], g = b[1].children[1].children[1], h = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(h.getIndex(c)).toBe(0), expect(h.getIndex(d)).toBe(1), expect(h.getIndex(f)).toBe(0), 
                expect(h.getIndex(g)).toBe(1);
            }), it("returns the correct index for non-innermost nodes", function() {
                var a = T, b = a.rows.root.children, c = b[0].children[0], d = b[0].children[1], f = b[1].children[0], g = b[1].children[1], h = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(h.getIndex(c)).toBe(0), expect(h.getIndex(d)).toBe(1), expect(h.getIndex(f)).toBe(0), 
                expect(h.getIndex(g)).toBe(1);
            });
        }), describe("isLeaf", function() {
            it("returns true for nodes in a one level deep placeholder hierarchy", function() {
                var a = F, b = a.rows.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLeaf(c)).toBeTruthy();
            }), it("returns true for nodes in a one level deep hierarchy", function() {
                var a = L, b = a.rows.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLeaf(c)).toBeTruthy();
            }), it("returns true for innermost nodes in a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children, c = b[1].children[2].children[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLeaf(c)).toBeTruthy();
            }), it("returns false for outermost nodes in a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLeaf(c)).toBeFalsy();
            }), it("returns false for non-innermost nodes in a three level deep hierarchy", function() {
                var a = _, b = a.columns.root.children, c = b[0].children[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLeaf(c)).toBeFalsy();
            });
        }), describe("isRowHierarchyLeaf", function() {}), describe("isColumnHierarchyLeaf", function() {}), 
        describe("isLastItem", function() {
            it("returns true if the last item is the only item in the collection", function() {
                var a = X, b = a.rows.root.children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLastItem(c, b)).toBeTruthy();
            }), it("returns true if the last item is the last item in its parents collection, but not on the level", function() {
                var a = J, b = a.rows.root.children[0].children, c = b[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLastItem(c, b)).toBeTruthy();
            }), it("returns false if the item is not the last item in its parents collection", function() {
                var a = J, b = a.rows.root.children[1].children[1].children, c = b[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.isLastItem(c, b)).toBeFalsy();
            });
        }), describe("getChildren", function() {
            it("returns undefined for leaf node", function() {
                var a = B, b = a.columns.root.children[0], c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getChildren(b)).toBeUndefined();
            }), it("returns the correct collection of children", function() {
                var a = J, b = a.rows.root.children[0], c = b.children, d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getChildren(b)).toBe(c);
            });
        }), describe("getCount", function() {
            it("returns zero if there are no children", function() {
                var a = Q, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getCount(b)).toBe(0);
            }), it("returns the length of the children array", function() {
                var a = J, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getCount(b)).toBe(3);
            });
        }), describe("getAt", function() {
            it("returns undefined if index is out of bounds", function() {
                var a = Q, b = a.columns.root.children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getAt(b, 0)).toBeUndefined();
            }), it("returns the right node from the hierarchy", function() {
                var a = T, b = a.rows.root.children, c = b[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getAt(b, 1)).toBe(c);
            }), it("returns the right node from the children collection", function() {
                var a = T, b = a.rows.root.children[0].children, c = b[1], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.getAt(b, 1)).toBe(c);
            });
        }), describe("getLevel", function() {
            it("returns undefined for root node", function() {
                var a = Y, b = a.columns.root, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLevel(b)).toBeUndefined();
            }), it("returns zero for outermost nodes", function() {
                var a = Y, b = a.rows.root.children[0], c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLevel(b)).toBe(0);
            }), it("returns one for nodes on the second level", function() {
                var a = _, b = a.rows.root.children[1].children, c = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(c.getLevel(b[0])).toBe(1), expect(c.getLevel(b[1])).toBe(1);
            });
        }), describe("getIntersection", function() {
            function a(a, b, c, d) {
                for (var e = [], f = 0, g = b.length; g > f; f++) {
                    e[f] = [];
                    for (var h = 0, i = c.length; i > h; h++) e[f][h] = a.getIntersection(b[f], c[h]).content;
                }
                expect(e).toEqual(d);
            }
            it("returns values in the intersection", function() {
                var b = J, c = b.rows.root.children, d = b.columns.root.children, f = [ c[0].children[0], c[0].children[1], c[1].children[0], c[1].children[1] ], g = [ f[0].children[0], f[0].children[1], f[1].children[0], f[1].children[1], f[2].children[0], f[2].children[1], f[3].children[0], f[3].children[1] ], h = [ d[0], d[1], d[2] ], i = [ [ "1,000.00", "1,001.00", "1,002.00" ], [ "1,010.00", "1,011.00", "1,012.00" ], [ "1,100.00", "1,101.00", "1,102.00" ], [ "1,110.00", "1,111.00", "1,112.00" ], [ "2,000.00", "2,001.00", "2,002.00" ], [ "2,010.00", "2,011.00", "2,012.00" ], [ "2,100.00", "2,101.00", "2,102.00" ], [ "2,110.00", "2,111.00", "2,112.00" ] ], j = powerbi.visuals.createMatrixHierarchyNavigator(b, e.formatRaw);
                a(j, g, h, i);
            }), it("returns empty string if there are no measures", function() {
                var b = Z, c = b.rows.root.children, d = c[0].children[0].children.concat(c[0].children[1].children), f = b.columns.root.children, g = f[0].children[0].children.concat(f[0].children[1]), h = [ [ "", "", "" ], [ "", "", "" ], [ "", "", "" ] ], i = powerbi.visuals.createMatrixHierarchyNavigator(b, e.formatRaw);
                a(i, d, g, h);
            });
        }), describe("getCorer", function() {
            it("returns empty value for the upper left cell of a 3x3 corner", function() {
                var a = Z, b = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(b.getCorner(0, 0).metadata).toBeNull(), expect(b.getCorner(0, 0).isColumnHeaderLeaf).toBeFalsy();
            }), it("returns row header for the lower left cell of a 3x3 corner", function() {
                var a = Z, b = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(b.getCorner(0, 2).metadata.displayName).toBe("RowGroup1"), expect(b.getCorner(0, 2).isColumnHeaderLeaf).toBeTruthy();
            }), it("returns column header for the upper right cell of a 3x3 corner", function() {
                var a = Z, b = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(b.getCorner(2, 0).metadata.displayName).toBe("ColGroup1"), expect(b.getCorner(2, 0).isColumnHeaderLeaf).toBeFalsy();
            }), it("returns row header for the lower right cell of a 3x3 corner", function() {
                var a = Z, b = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(b.getCorner(2, 2).metadata.displayName).toBe("RowGroup3"), expect(b.getCorner(2, 2).isColumnHeaderLeaf).toBeTruthy();
            });
        }), describe("headerItemEquals", function() {
            it("returns true if the two items are the same", function() {
                var a = O, b = a.rows.root.children[0], c = a.columns.root.children[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.headerItemEquals(b, b)).toBeTruthy(), expect(d.headerItemEquals(c, c)).toBeTruthy();
            }), it("returns false if the two items are not same even if they have the same content", function() {
                var a = O, b = a.rows.root.children[0], c = a.columns.root.children[0], d = powerbi.visuals.createMatrixHierarchyNavigator(a, e.formatRaw);
                expect(d.headerItemEquals(b, c)).toBeFalsy(), expect(d.headerItemEquals(c, b)).toBeFalsy();
            });
        });
    }), describe("Matrix logic", function() {
        var b;
        beforeEach(function() {
            b = powerbi.visuals.visualPluginFactory.create().getPlugin("matrix").create();
            var c = a.helpers.testDom("500", "500");
            c.visible = function() {
                return !0;
            }, b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: 500,
                    width: 500
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("loadMoreData calls control refresh", function() {
            var a = {
                updateRows: function() {}
            }, c = {
                refresh: function() {}
            }, d = spyOn(a, "updateRows"), e = spyOn(c, "refresh");
            b.hierarchyNavigator = a, b.tablixControl = c, b.onDataChanged({
                dataViews: [ A ],
                operationKind: 1
            }), expect(d).toHaveBeenCalled(), expect(e).toHaveBeenCalled();
        }), it("needsMoreData waitingForData", function() {
            var a = T;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, m ],
                        segment: {}
                    },
                    matrix: a
                } ]
            }), b.waitingForData = !0;
            var c = b, d = a.rows.root.children[1].children[1].children[1], e = c.needsMoreData(d);
            expect(e).toBe(!1);
        }), it("needsMoreData notLeaf", function() {
            var a = T;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, m ],
                        segment: {}
                    },
                    matrix: a
                } ]
            });
            var c = b, d = a.rows.root.children[1].children[1], e = c.needsMoreData(d);
            expect(e).toBe(!1);
        }), it("needsMoreData segmentComplete", function() {
            var a = T;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, m ]
                    },
                    matrix: a
                } ]
            });
            var c = b, d = a.rows.root.children[1].children[1].children[1], e = c.needsMoreData(d);
            expect(e).toBe(!1);
        }), it("needsMoreData belowThreshold", function() {
            var a = _;
            b.onDataChanged({
                dataViews: [ aa ]
            });
            var c = b, d = a.rows.root.children[0].children[0], e = c.needsMoreData(d);
            expect(e).toBe(!1);
        }), it("needsMoreData aboveThreshold", function() {
            b.onDataChanged({
                dataViews: [ K ]
            });
            var a = b, c = J.rows.root.children[1].children[1].children[1], d = a.needsMoreData(c);
            expect(d).toBe(!0);
        }), it("bindRowHeader callback", function() {
            var a = !1, b = {
                onBindRowHeader: function(b) {
                    a = !0;
                },
                layoutKind: 0
            }, c = new powerbi.visuals.MatrixBinder(null, b);
            c.bindRowHeader({
                displayName: null
            }, {
                type: null,
                item: null,
                colSpan: 0,
                rowSpan: 0,
                textAlign: "",
                extension: {
                    contentHost: {
                        textContent: null
                    },
                    setContainerStyle: function(a) {}
                }
            }), expect(a).toBe(!0);
        }), it("unbindColumnHeader multimeasure not sortable", function() {
            var a = {
                onBindRowHeader: function(a) {},
                onColumnHeaderClick: function() {},
                layoutKind: 0
            }, b = powerbi.visuals.createMatrixHierarchyNavigator(_, powerbi.visuals.valueFormatter.formatRaw), c = new powerbi.visuals.MatrixBinder(b, a), d = !1;
            c.unbindColumnHeader({
                displayName: null,
                isSubtotal: !0
            }, {
                type: null,
                item: null,
                colSpan: 0,
                rowSpan: 0,
                textAlign: "",
                extension: {
                    contentHost: {
                        textContent: null
                    },
                    setContainerStyle: function(a) {},
                    clearContainerStyle: function(a) {},
                    unregisterClickHandler: function() {
                        d = !0;
                    }
                }
            }), expect(d).toBe(!1);
        }), it("enumerateObjectInstances general both totals off", function() {
            var a = fa;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ],
                        objects: {
                            general: {
                                rowSubtotals: !1,
                                columnSubtotals: !1
                            }
                        }
                    },
                    matrix: a
                } ]
            });
            var c = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(c).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    rowSubtotals: !1,
                    columnSubtotals: !1
                }
            } ]);
        }), it("enumerateObjectInstances general both totals on", function() {
            var a = ga;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: a
                } ]
            });
            var c = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(c).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    rowSubtotals: !0,
                    columnSubtotals: !0
                }
            } ]);
        }), it("enumerateObjectInstances general no objects", function() {
            var a = fa;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ]
                    },
                    matrix: a
                } ]
            });
            var c = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(c).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    rowSubtotals: !0,
                    columnSubtotals: !0
                }
            } ]);
        }), it("enumerateObjectInstances general no properties", function() {
            var a = ga;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ],
                        objects: {
                            general: {}
                        }
                    },
                    matrix: a
                } ]
            });
            var c = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(c).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    rowSubtotals: !0,
                    columnSubtotals: !0
                }
            } ]), it("RefreshControl invisible parent", function() {
                var a = {
                    refresh: function() {}
                }, c = spyOn(a, "refresh");
                b.shouldAllowHeaderResize = function() {
                    return !0;
                }, b.hierarchyNavigator = {
                    update: function() {}
                }, b.tablixControl = a, b.element.visible = function() {
                    return !1;
                }, b.onResizing({
                    width: 100,
                    height: 100
                }, 0), expect(c).not.toHaveBeenCalled();
            }), it("RefreshControl invisible parent but dashboard layout", function() {
                var a = {
                    refresh: function() {}
                }, c = spyOn(a, "refresh");
                b.shouldAllowHeaderResize = function() {
                    return !0;
                }, b.hierarchyNavigator = {
                    update: function() {}
                }, b.tablixControl = a, b.element.visible = function() {
                    return !1;
                }, b.isInteractive = !1, b.onResizing({
                    width: 100,
                    height: 100
                }, 0), expect(c).toHaveBeenCalled();
            });
        });
    }), describe("Matrix DOM validation", function() {
        function b(b) {
            a.tablixHelper.validateMatrix(b, ".bi-tablix tr");
        }
        function c(b) {
            a.tablixHelper.validateClassNames(b, ".bi-tablix tr", p);
        }
        function g(a, b) {
            return e.formatRaw(a, e.getFormatString(b, d.formatStringProp));
        }
        var h, i, j = " ", p = "bi-tablix-cellNoMarginStyle", s = "bi-tablix-header", v = "bi-tablix-column-header-leaf", D = "bi-tablix-row-header-leaf", E = "bi-tablix-row-header-static-leaf", G = "bi-matrix-body-cell", I = "total", M = "TableTotalLabel";
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            i = a.helpers.testDom("1500", "1500"), i.visible = function() {
                return !0;
            }, h = powerbi.visuals.visualPluginFactory.create().getPlugin("matrix").create(), 
            h.init({
                element: i,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: i.height(),
                    width: i.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("1x2 matrix (value and static column header)", function(a) {
            var d = z;
            h.onDataChanged({
                dataViews: [ A ]
            }), setTimeout(function() {
                var e = g(d.rows.root.children[0].values[0].value, w), f = [ [ "", w.displayName, "" ], [ j, e ] ];
                b(f);
                var h = [ [ s, v, "" ], [ E, G ] ];
                c(h), a();
            }, f);
        }), it("1x2 matrix (value and column header value) update", function(a) {
            h.onDataChanged({
                dataViews: [ A ]
            });
            var d = B;
            h.onDataChanged({
                dataViews: [ C ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0].value, f = g(d.rows.root.children[0].values[0].value, w), h = [ [ "", e, "" ], [ j, f ] ];
                b(h);
                var i = [ [ s, v, "" ], [ E, G ] ];
                c(i), a();
            }, f);
        }), it("3x2 matrix (values and static column headers)", function(a) {
            var d = F;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ w, x, y ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = g(d.rows.root.children[0].values[0].value, w), f = g(d.rows.root.children[0].values[1].value, x), h = g(d.rows.root.children[0].values[2].value, y), i = [ [ "", w.displayName, x.displayName, y.displayName, "" ], [ j, e, f, h ] ];
                b(i);
                var k = [ [ s, v, v, v, "" ], [ E, G, G, G ] ];
                c(k), a();
            }, f);
        }), it("3x3 matrix (values, static and value column headers)", function(a) {
            var d = H;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ q, w, x, y ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0].value, f = g(d.rows.root.children[0].values[0].value, w), h = g(d.rows.root.children[0].values[1].value, x), i = g(d.rows.root.children[0].values[2].value, y), k = [ [ "", e, "" ], [ "", w.displayName, x.displayName, y.displayName ], [ j, f, h, i ] ];
                b(k);
                var l = [ [ s, s, "" ], [ s, v, v, v ], [ E, G, G, G ] ];
                c(l), a();
            }, f);
        }), it("6x9 matrix (values, static column headers and row value headers)", function(a) {
            h.onDataChanged({
                dataViews: [ K ]
            });
            var d = J;
            setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[0], h = f.children[0], i = f.children[1], j = e.children[1], n = j.children[0], o = j.children[1], p = d.rows.root.children[1], q = p.children[0], r = q.children[0], t = q.children[1], u = p.children[1], z = u.children[0], A = u.children[1], B = g(h.values[0].value, w), C = g(h.values[1].value, x), F = g(h.values[2].value, y), H = g(i.values[0].value, w), I = g(i.values[1].value, x), J = g(i.values[2].value, y), K = g(n.values[0].value, w), L = g(n.values[1].value, x), M = g(n.values[2].value, y), N = g(o.values[0].value, w), O = g(o.values[1].value, x), P = g(o.values[2].value, y), Q = g(r.values[0].value, w), R = g(r.values[1].value, x), S = g(r.values[2].value, y), T = g(t.values[0].value, w), U = g(t.values[1].value, x), V = g(t.values[2].value, y), W = g(z.values[0].value, w), X = g(z.values[1].value, x), Y = g(z.values[2].value, y), Z = g(A.values[0].value, w), $ = g(A.values[1].value, x), _ = g(A.values[2].value, y), aa = [ [ k.displayName, l.displayName, m.displayName, w.displayName, x.displayName, y.displayName, "" ], [ e.value, f.value, h.value, B, C, F ], [ i.value, H, I, J ], [ j.value, n.value, K, L, M ], [ o.value, N, O, P ], [ p.value, q.value, r.value, Q, R, S ], [ t.value, T, U, V ], [ u.value, z.value, W, X, Y ], [ A.value, Z, $, _ ] ];
                b(aa);
                var ba = [ [ v, v, v + " " + D, v, v, v, "" ], [ s, s, E, G, G, G ], [ E, G, G, G ], [ s, E, G, G, G ], [ E, G, G, G ], [ s, s, E, G, G, G ], [ E, G, G, G ], [ s, E, G, G, G ], [ E, G, G, G ] ];
                c(ba), a();
            }, f);
        }), it("2x2 matrix (value, static column header and row value header)", function(a) {
            var d = L;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, w ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = g(e.values[0].value, w), h = [ [ k.displayName, w.displayName, "" ], [ e.value, f ] ];
                b(h);
                var i = [ [ v + " " + D, v, "" ], [ E, G ] ];
                c(i), a();
            }, f);
        }), it("2x2 matrix (value, column value header and row value header, empty cell)", function(a) {
            var c = O;
            h.onDataChanged({
                dataViews: [ P ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = c.rows.root.children[0], f = [ [ k.displayName, d.value.toString(), "" ], [ e.value.toString(), "" ] ];
                b(f), a();
            }, f);
        }), it("3x2 matrix (static column headers and row value headers)", function(a) {
            var d = Q;
            h.onDataChanged({
                dataViews: [ R ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[0], g = f.children[0], h = [ [ k.displayName, l.displayName, m.displayName, "" ], [ e.value, f.value, g.value.toString() ] ];
                b(h);
                var i = [ [ v, v, v + " " + D, "" ], [ s, s, D ] ];
                c(i), a();
            }, f);
        }), it("2x6 matrix (static column headers and row value headers including empty ones)", function(a) {
            var d = S;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[1], g = d.rows.root.children[1], h = g.children[0], i = [ [ k.displayName, l.displayName, "" ], [ e.value, j ], [ f.value ], [ g.value, h.value ], [ j ], [ j, j ] ];
                b(i);
                var m = [ [ v, v + " " + D, "" ], [ s, E ], [ E ], [ s, E ], [ E ], [ s, E ] ];
                c(m), a();
            }, f);
        }), it("5x2 matrix (column value headers including empty ones)", function(a) {
            var d = W;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ q, r ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = e.children[1], g = d.columns.root.children[1], h = g.children[0], i = [ [ "", e.value, g.value, j, "" ], [ "", j, f.value, h.value, j, j ] ];
                b(i);
                var k = [ [ s, s, s, s, "" ], [ s, v, v, v, v, v ] ];
                c(k), a();
            }, f);
        }), it("3x9 matrix (static column headers and row value headers)", function(a) {
            var c = T;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, m ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.rows.root.children[0], e = d.children[0], f = e.children[0], g = e.children[1], h = d.children[1], i = h.children[0], j = h.children[1], n = c.rows.root.children[1], o = n.children[0], p = o.children[0], q = o.children[1], r = n.children[1], s = r.children[0], t = r.children[1], u = [ [ k.displayName, l.displayName, m.displayName, "" ], [ d.value, e.value, f.value.toString() ], [ g.value.toString() ], [ h.value, i.value.toString() ], [ j.value.toString() ], [ n.value, o.value, p.value.toString() ], [ q.value.toString() ], [ r.value, s.value.toString() ], [ t.value.toString() ] ];
                b(u), a();
            }, f);
        }), it("1x1 matrix loadMoreData", function() {
            var a = {
                rows: {
                    root: {
                        children: [ {
                            level: 0,
                            value: "1"
                        } ]
                    },
                    levels: [ {
                        sources: [ k ]
                    } ]
                },
                columns: {
                    root: {
                        children: []
                    },
                    levels: []
                },
                valueSources: []
            };
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k ]
                    },
                    matrix: a
                } ]
            });
            var c = {
                rows: {
                    root: {
                        children: [ {
                            level: 0,
                            value: "2"
                        } ]
                    },
                    levels: [ {
                        sources: [ k ]
                    } ]
                },
                columns: {
                    root: {
                        children: []
                    },
                    levels: []
                },
                valueSources: []
            };
            powerbi.data.segmentation.DataViewMerger.mergeTreeNodes(a.rows.root, c.rows.root, !1), 
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k ]
                    },
                    matrix: a
                } ],
                operationKind: 1
            });
            var d = a.rows.root.children[0], e = a.rows.root.children[1], f = [ [ k.displayName, "" ], [ d.value ], [ e.value ] ];
            b(f);
        }), it("8x3 matrix (column value headers)", function(a) {
            var c = U;
            h.onDataChanged({
                dataViews: [ V ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = d.children[0], f = e.children[0].value.toString(), g = e.children[1].value.toString(), h = d.children[1], i = h.children[0].value.toString(), j = h.children[1].value.toString(), k = c.columns.root.children[1], l = k.children[0], m = l.children[0].value.toString(), n = l.children[1].value.toString(), o = k.children[1], p = o.children[0].value.toString(), q = o.children[1].value.toString(), r = [ [ "", d.value, k.value, "" ], [ "", e.value, h.value, l.value, o.value ], [ "", f, g, i, j, m, n, p, q ] ];
                b(r), a();
            }, f);
        }), it("6x5 matrix (column value headers and row value headers, multiple group instances, empty cells)", function(a) {
            var c = Z;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, n, q, r, t ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.rows.root.children[0], e = d.children[0], f = g(e.children[0].value, n), h = g(e.children[1].value, n), i = d.children[1], j = g(i.children[0].value, n), o = c.columns.root.children[0], p = o.children[0], s = g(p.children[0].value, t), u = g(p.children[1].value, t), v = o.children[1], w = g(v.children[0].value, t), x = [ [ "", "", q.displayName, o.value, "" ], [ "", "", r.displayName, p.value, v.value ], [ k.displayName, l.displayName, m.displayName, s, u, w ], [ d.value, e.value, f, "", "", "" ], [ h, "", "", "" ], [ i.value, j, "", "", "" ] ];
                b(x), a();
            }, f);
        }), it("3x4 matrix (boolean and null group instances)", function(a) {
            var c = fa;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = c.columns.root.children[1], f = c.rows.root.children[0], h = c.rows.root.children[1], i = c.rows.root.children[2], k = [ [ o.displayName, d.value.toString(), e.value.toString(), "" ], [ f.value.toString(), g(f.values[0].value, w), g(f.values[1].value, w) ], [ h.value.toString(), g(h.values[0].value, w), g(h.values[1].value, w) ], [ j, g(i.values[0].value, w), g(i.values[1].value, w) ] ];
                b(k), a();
            }, f);
        }), it("Matrix with row and column subtotals", function(a) {
            var d = ga;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[1], h = d.rows.root.children[0], i = d.rows.root.children[1], k = d.rows.root.children[2], l = d.rows.root.children[3], m = [ [ o.displayName, e.value.toString(), f.value.toString(), M, "" ], [ h.value.toString(), g(h.values[0].value, w), g(h.values[1].value, w), g(h.values[2].value, w) ], [ i.value.toString(), g(i.values[0].value, w), g(i.values[1].value, w), g(i.values[2].value, w) ], [ j, g(k.values[0].value, w), g(k.values[1].value, w), g(k.values[2].value, w) ], [ M, g(l.values[0].value, w), g(l.values[1].value, w), g(l.values[2].value, w) ] ];
                b(m);
                var n = [ [ v + " " + D, v, v, v + " " + I, "" ], [ E, G, G, G + " " + I ], [ E, G, G, G + " " + I ], [ E, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(n), a();
            }, f);
        }), it("Matrix with multiple row and column group hierarchy levels, one measure with subtotals", function(a) {
            var d = ba;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, q, r, w ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[1], h = d.columns.root.children[0].children[0], i = d.columns.root.children[0].children[1], j = d.columns.root.children[1].children[0], m = d.columns.root.children[1].children[1], n = d.rows.root.children[0], o = d.rows.root.children[1], p = d.rows.root.children[2], r = d.rows.root.children[3], t = d.rows.root.children[4], u = d.rows.root.children[0].children[0], x = d.rows.root.children[0].children[1], y = d.rows.root.children[0].children[2], z = d.rows.root.children[1].children[0], A = d.rows.root.children[1].children[1], B = d.rows.root.children[1].children[2], C = d.rows.root.children[2].children[0], F = d.rows.root.children[2].children[1], H = d.rows.root.children[3].children[0], J = d.rows.root.children[3].children[1], K = [ [ "", q.displayName, e.value.toString(), f.value.toString(), M, "" ], [ k.displayName, l.displayName, h.value.toString(), i.value.toString(), M, j.value.toString(), m.value.toString(), M ], [ n.value.toString(), u.value.toString(), g(u.values[0].value, w), g(u.values[1].value, w), g(u.values[2].value, w), g(u.values[3].value, w), g(u.values[4].value, w), g(u.values[5].value, w), g(u.values[6].value, w) ], [ x.value.toString(), g(x.values[0].value, w), g(x.values[1].value, w), g(x.values[2].value, w), g(x.values[3].value, w), g(x.values[4].value, w), g(x.values[5].value, w), g(x.values[6].value, w) ], [ M, g(y.values[0].value, w), g(y.values[1].value, w), g(y.values[2].value, w), g(y.values[3].value, w), g(y.values[4].value, w), g(y.values[5].value, w), g(y.values[6].value, w) ], [ o.value.toString(), z.value.toString(), g(z.values[0].value, w), g(z.values[1].value, w), g(z.values[2].value, w), g(z.values[3].value, w), g(z.values[4].value, w), g(z.values[5].value, w), g(z.values[6].value, w) ], [ A.value.toString(), g(A.values[0].value, w), g(A.values[1].value, w), g(A.values[2].value, w), g(A.values[3].value, w), g(A.values[4].value, w), g(A.values[5].value, w), g(A.values[6].value, w) ], [ M, g(B.values[0].value, w), g(B.values[1].value, w), g(B.values[2].value, w), g(B.values[3].value, w), g(B.values[4].value, w), g(B.values[5].value, w), g(B.values[6].value, w) ], [ p.value.toString(), C.value.toString(), g(C.values[0].value, w), g(C.values[1].value, w), g(C.values[2].value, w), g(C.values[3].value, w), g(C.values[4].value, w), g(C.values[5].value, w), g(C.values[6].value, w) ], [ M, g(F.values[0].value, w), g(F.values[1].value, w), g(F.values[2].value, w), g(F.values[3].value, w), g(F.values[4].value, w), g(F.values[5].value, w), g(F.values[6].value, w) ], [ r.value.toString(), H.value.toString(), g(H.values[0].value, w), g(H.values[1].value, w), g(H.values[2].value, w), g(H.values[3].value, w), g(H.values[4].value, w), g(H.values[5].value, w), g(H.values[6].value, w) ], [ M, g(J.values[0].value, w), g(J.values[1].value, w), g(J.values[2].value, w), g(J.values[3].value, w), g(J.values[4].value, w), g(J.values[5].value, w), g(J.values[6].value, w) ], [ M, g(t.values[0].value, w), g(t.values[1].value, w), g(t.values[2].value, w), g(t.values[3].value, w), g(t.values[4].value, w), g(t.values[5].value, w), g(t.values[6].value, w) ] ], L = [ [ s, D, s, s, v + " " + I, "" ], [ v, v + " " + D, v, v, v + " " + I, v, v, v + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(L), b(K), a();
            }, f);
        }), it("Matrix with multiple row and column group hierarchy levels, two measures with subtotals", function(a) {
            var d = da;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, q, r, w, x ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[1], h = d.columns.root.children[0].children[0], i = d.columns.root.children[0].children[1], j = d.columns.root.children[1].children[0], m = d.columns.root.children[1].children[1], n = d.rows.root.children[0], o = d.rows.root.children[1], p = d.rows.root.children[2], t = d.rows.root.children[3], u = d.rows.root.children[4], y = d.rows.root.children[0].children[0], z = d.rows.root.children[0].children[1], A = d.rows.root.children[0].children[2], B = d.rows.root.children[1].children[0], C = d.rows.root.children[1].children[1], F = d.rows.root.children[1].children[2], H = d.rows.root.children[2].children[0], J = d.rows.root.children[2].children[1], K = d.rows.root.children[3].children[0], L = d.rows.root.children[3].children[1], N = [ [ "", q.displayName, e.value.toString(), f.value.toString(), M, "" ], [ "", r.displayName, h.value.toString(), i.value.toString(), M, j.value.toString(), m.value.toString(), M ], [ k.displayName, l.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName ], [ n.value.toString(), y.value.toString(), g(y.values[0].value, w), g(y.values[1].value, w), g(y.values[2].value, w), g(y.values[3].value, w), g(y.values[4].value, w), g(y.values[5].value, w), g(y.values[6].value, w), g(y.values[7].value, w), g(y.values[8].value, w), g(y.values[9].value, w), g(y.values[10].value, w), g(y.values[11].value, w), g(y.values[12].value, w), g(y.values[13].value, w) ], [ z.value.toString(), g(z.values[0].value, w), g(z.values[1].value, w), g(z.values[2].value, w), g(z.values[3].value, w), g(z.values[4].value, w), g(z.values[5].value, w), g(z.values[6].value, w), g(z.values[7].value, w), g(z.values[8].value, w), g(z.values[9].value, w), g(z.values[10].value, w), g(z.values[11].value, w), g(z.values[12].value, w), g(z.values[13].value, w) ], [ M, g(A.values[0].value, w), g(A.values[1].value, w), g(A.values[2].value, w), g(A.values[3].value, w), g(A.values[4].value, w), g(A.values[5].value, w), g(A.values[6].value, w), g(A.values[7].value, w), g(A.values[8].value, w), g(A.values[9].value, w), g(A.values[10].value, w), g(A.values[11].value, w), g(A.values[12].value, w), g(A.values[13].value, w) ], [ o.value.toString(), B.value.toString(), g(B.values[0].value, w), g(B.values[1].value, w), g(B.values[2].value, w), g(B.values[3].value, w), g(B.values[4].value, w), g(B.values[5].value, w), g(B.values[6].value, w), g(B.values[7].value, w), g(B.values[8].value, w), g(B.values[9].value, w), g(B.values[10].value, w), g(B.values[11].value, w), g(B.values[12].value, w), g(B.values[13].value, w) ], [ C.value.toString(), g(C.values[0].value, w), g(C.values[1].value, w), g(C.values[2].value, w), g(C.values[3].value, w), g(C.values[4].value, w), g(C.values[5].value, w), g(C.values[6].value, w), g(C.values[7].value, w), g(C.values[8].value, w), g(C.values[9].value, w), g(C.values[10].value, w), g(C.values[11].value, w), g(C.values[12].value, w), g(C.values[13].value, w) ], [ M, g(F.values[0].value, w), g(F.values[1].value, w), g(F.values[2].value, w), g(F.values[3].value, w), g(F.values[4].value, w), g(F.values[5].value, w), g(F.values[6].value, w), g(F.values[7].value, w), g(F.values[8].value, w), g(F.values[9].value, w), g(F.values[10].value, w), g(F.values[11].value, w), g(F.values[12].value, w), g(F.values[13].value, w) ], [ p.value.toString(), H.value.toString(), g(H.values[0].value, w), g(H.values[1].value, w), g(H.values[2].value, w), g(H.values[3].value, w), g(H.values[4].value, w), g(H.values[5].value, w), g(H.values[6].value, w), g(H.values[7].value, w), g(H.values[8].value, w), g(H.values[9].value, w), g(H.values[10].value, w), g(H.values[11].value, w), g(H.values[12].value, w), g(H.values[13].value, w) ], [ M, g(J.values[0].value, w), g(J.values[1].value, w), g(J.values[2].value, w), g(J.values[3].value, w), g(J.values[4].value, w), g(J.values[5].value, w), g(J.values[6].value, w), g(J.values[7].value, w), g(J.values[8].value, w), g(J.values[9].value, w), g(J.values[10].value, w), g(J.values[11].value, w), g(J.values[12].value, w), g(J.values[13].value, w) ], [ t.value.toString(), K.value.toString(), g(K.values[0].value, w), g(K.values[1].value, w), g(K.values[2].value, w), g(K.values[3].value, w), g(K.values[4].value, w), g(K.values[5].value, w), g(K.values[6].value, w), g(K.values[7].value, w), g(K.values[8].value, w), g(K.values[9].value, w), g(K.values[10].value, w), g(K.values[11].value, w), g(K.values[12].value, w), g(K.values[13].value, w) ], [ M, g(L.values[0].value, w), g(L.values[1].value, w), g(L.values[2].value, w), g(L.values[3].value, w), g(L.values[4].value, w), g(L.values[5].value, w), g(L.values[6].value, w), g(L.values[7].value, w), g(L.values[8].value, w), g(L.values[9].value, w), g(L.values[10].value, w), g(L.values[11].value, w), g(L.values[12].value, w), g(L.values[13].value, w) ], [ M, g(u.values[0].value, w), g(u.values[1].value, w), g(u.values[2].value, w), g(u.values[3].value, w), g(u.values[4].value, w), g(u.values[5].value, w), g(u.values[6].value, w), g(u.values[7].value, w), g(u.values[8].value, w), g(u.values[9].value, w), g(u.values[10].value, w), g(u.values[11].value, w), g(u.values[12].value, w), g(u.values[13].value, w) ] ];
                b(N);
                var O = [ [ s, D, s, s, s + " " + I, "" ], [ s, D, s, s, s + " " + I, s, s, s + " " + I ], [ v, v + " " + D, v, v, v, v, v + " " + I, v + " " + I, v, v, v, v, v + " " + I, v + " " + I, v + " " + I, v + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I, G, G, G, G, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(O), a();
            }, f);
        }), it("Verify Interactivity modes", function(b) {
            h.init({
                element: i,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: i.height(),
                    width: i.width()
                },
                interactivity: {
                    isInteractiveLegend: !1,
                    selection: !0
                }
            }), h.onDataChanged({
                dataViews: [ aa ]
            }), setTimeout(function() {
                var a = $(".bi-tablix .scroll-bar-div"), c = a.eq(0), d = a.eq(1);
                expect(c.css("width")).toBe("0px"), expect(d.css("height")).toBe("0px"), expect(c.width()).toBe(0), 
                expect(d.height()).toBe(0), b();
            }, f);
        });
    }), describe("Dashboard matrix DOM validation", function() {
        function b(b) {
            a.tablixHelper.validateMatrix(b, ".bi-dashboard-tablix tr");
        }
        function c(b) {
            a.tablixHelper.validateClassNames(b, ".bi-dashboard-tablix tr", p);
        }
        function g(a, b) {
            return e.formatRaw(a, e.getFormatString(b, d.formatStringProp));
        }
        var h, i, j = " ", p = "bi-tablix-cellNoMarginStyle", s = "bi-tablix-header", v = "bi-tablix-column-header-leaf", D = "bi-tablix-row-header-leaf", E = "bi-tablix-row-header-static-leaf", G = "bi-matrix-body-cell", I = "total", M = "TableTotalLabel";
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            i = a.helpers.testDom("700", "700"), i.visible = function() {
                return !0;
            }, h = powerbi.visuals.visualPluginFactory.create().getPlugin("matrix").create(), 
            h.init({
                element: i,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: i.height(),
                    width: i.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: null
                }
            });
        }), it("1x2 matrix (value and static column header)", function(a) {
            var d = z;
            h.onDataChanged({
                dataViews: [ A ]
            }), setTimeout(function() {
                var e = g(d.rows.root.children[0].values[0].value, w), f = [ [ "", w.displayName ], [ j, e ] ];
                b(f);
                var h = [ [ s, v ], [ E, G ] ];
                c(h), a();
            }, f);
        }), it("1x2 matrix (value and column header value)", function(a) {
            var d = B;
            h.onDataChanged({
                dataViews: [ C ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0].value, f = g(d.rows.root.children[0].values[0].value, w), h = [ [ "", e ], [ j, f ] ];
                b(h);
                var i = [ [ s, v ], [ E, G ] ];
                c(i), a();
            }, f);
        }), it("3x2 matrix (values and static column headers)", function(a) {
            var d = F;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ w, x, y ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = g(d.rows.root.children[0].values[0].value, w), f = g(d.rows.root.children[0].values[1].value, x), h = g(d.rows.root.children[0].values[2].value, y), i = [ [ "", w.displayName, x.displayName, y.displayName ], [ j, e, f, h ] ];
                b(i);
                var k = [ [ s, v, v, v ], [ E, G, G, G ] ];
                c(k), a();
            }, f);
        }), it("3x3 matrix (values, static and value column headers)", function(a) {
            var d = H;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ q, w, x, y ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0].value, f = g(d.rows.root.children[0].values[0].value, w), h = g(d.rows.root.children[0].values[1].value, x), i = g(d.rows.root.children[0].values[2].value, y), k = [ [ "", e ], [ "", w.displayName, x.displayName, y.displayName ], [ j, f, h, i ] ];
                b(k);
                var l = [ [ s, s ], [ s, v, v, v ], [ E, G, G, G ] ];
                c(l), a();
            }, f);
        }), it("6x9 matrix (values, static column headers and row value headers)", function(a) {
            h.onDataChanged({
                dataViews: [ K ]
            });
            var d = J;
            setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[0], h = f.children[0], i = f.children[1], j = e.children[1], n = j.children[0], o = j.children[1], p = d.rows.root.children[1], q = p.children[0], r = q.children[0], t = q.children[1], u = p.children[1], z = u.children[0], A = u.children[1], B = g(h.values[0].value, w), C = g(h.values[1].value, x), F = g(h.values[2].value, y), H = g(i.values[0].value, w), I = g(i.values[1].value, x), J = g(i.values[2].value, y), K = g(n.values[0].value, w), L = g(n.values[1].value, x), M = g(n.values[2].value, y), N = g(o.values[0].value, w), O = g(o.values[1].value, x), P = g(o.values[2].value, y), Q = g(r.values[0].value, w), R = g(r.values[1].value, x), S = g(r.values[2].value, y), T = g(t.values[0].value, w), U = g(t.values[1].value, x), V = g(t.values[2].value, y), W = g(z.values[0].value, w), X = g(z.values[1].value, x), Y = g(z.values[2].value, y), Z = g(A.values[0].value, w), $ = g(A.values[1].value, x), _ = g(A.values[2].value, y), aa = [ [ k.displayName, l.displayName, m.displayName, w.displayName, x.displayName, y.displayName ], [ e.value, f.value, h.value, B, C, F ], [ i.value, H, I, J ], [ j.value, n.value, K, L, M ], [ o.value, N, O, P ], [ p.value, q.value, r.value, Q, R, S ], [ t.value, T, U, V ], [ u.value, z.value, W, X, Y ], [ A.value, Z, $, _ ] ];
                b(aa);
                var ba = [ [ v, v, v + " " + D, v, v, v ], [ s, s, E, G, G, G ], [ E, G, G, G ], [ s, E, G, G, G ], [ E, G, G, G ], [ s, s, E, G, G, G ], [ E, G, G, G ], [ s, E, G, G, G ], [ E, G, G, G ] ];
                c(ba), a();
            }, f);
        }), it("2x2 matrix (value, static column header and row value header)", function(a) {
            var d = L;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, w ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = g(e.values[0].value, w), h = [ [ k.displayName, w.displayName ], [ e.value, f ] ];
                b(h);
                var i = [ [ v + " " + D, v ], [ E, G ] ];
                c(i), a();
            }, f);
        }), it("2x2 matrix (value, column value header and row value header, empty cell)", function(a) {
            var c = O;
            h.onDataChanged({
                dataViews: [ P ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = c.rows.root.children[0], f = [ [ k.displayName, d.value.toString() ], [ e.value.toString(), "" ] ];
                b(f), a();
            }, f);
        }), it("3x2 matrix (static column headers and row value headers)", function(a) {
            var d = Q;
            h.onDataChanged({
                dataViews: [ R ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[0], g = f.children[0], h = [ [ k.displayName, l.displayName, m.displayName ], [ e.value, f.value, g.value.toString() ] ];
                b(h);
                var i = [ [ v, v, v + " " + D ], [ s, s, D ] ];
                c(i), a();
            }, f);
        }), it("2x6 matrix (static column headers and row value headers including empty ones)", function(a) {
            var d = S;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.rows.root.children[0], f = e.children[1], g = d.rows.root.children[1], h = g.children[0], i = [ [ k.displayName, l.displayName ], [ e.value, j ], [ f.value ], [ g.value, h.value ], [ j ], [ j, j ] ];
                b(i);
                var m = [ [ v, v + " " + D ], [ s, E ], [ E ], [ s, E ], [ E ], [ s, E ] ];
                c(m), a();
            }, f);
        }), it("5x2 matrix (column value headers including empty ones)", function(a) {
            var d = W;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ q, r ]
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = e.children[1], g = d.columns.root.children[1], h = g.children[0], i = [ [ "", e.value, g.value, j ], [ "", j, f.value, h.value, j, j ] ];
                b(i);
                var k = [ [ s, s, s, s ], [ s, v, v, v, v, v ] ];
                c(k), a();
            }, f);
        }), it("3x9 matrix (static column headers and row value headers)", function(a) {
            var c = T;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, m ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.rows.root.children[0], e = d.children[0], f = e.children[0], g = e.children[1], h = d.children[1], i = h.children[0], j = h.children[1], n = c.rows.root.children[1], o = n.children[0], p = o.children[0], q = o.children[1], r = n.children[1], s = r.children[0], t = r.children[1], u = [ [ k.displayName, l.displayName, m.displayName ], [ d.value, e.value, f.value.toString() ], [ g.value.toString() ], [ h.value, i.value.toString() ], [ j.value.toString() ], [ n.value, o.value, p.value.toString() ], [ q.value.toString() ], [ r.value, s.value.toString() ], [ t.value.toString() ] ];
                b(u), a();
            }, f);
        }), it("8x3 matrix (column value headers)", function(a) {
            var c = U;
            h.onDataChanged({
                dataViews: [ V ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = d.children[0], f = e.children[0].value.toString(), g = e.children[1].value.toString(), h = d.children[1], i = h.children[0].value.toString(), j = h.children[1].value.toString(), k = c.columns.root.children[1], l = k.children[0], m = l.children[0].value.toString(), n = l.children[1].value.toString(), o = k.children[1], p = o.children[0].value.toString(), q = o.children[1].value.toString(), r = [ [ "", d.value, k.value ], [ "", e.value, h.value, l.value, o.value ], [ "", f, g, i, j, m, n, p, q ] ];
                b(r), a();
            }, f);
        }), it("6x5 matrix (column value headers and row value headers, multiple group instances, empty cells)", function(a) {
            var c = Z;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, n, q, r, t ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.rows.root.children[0], e = d.children[0], f = g(e.children[0].value, n), h = g(e.children[1].value, n), i = d.children[1], j = g(i.children[0].value, n), o = c.columns.root.children[0], p = o.children[0], s = g(p.children[0].value, t), u = g(p.children[1].value, t), v = o.children[1], w = g(v.children[0].value, t), x = [ [ "", "", q.displayName, o.value ], [ "", "", r.displayName, p.value, v.value ], [ k.displayName, l.displayName, m.displayName, s, u, w ], [ d.value, e.value, f, "", "", "" ], [ h, "", "", "" ], [ i.value, j, "", "", "" ] ];
                b(x), a();
            }, f);
        }), it("3x4 matrix (boolean and null group instances)", function(a) {
            var c = fa;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ]
                    },
                    matrix: c
                } ]
            }), setTimeout(function() {
                var d = c.columns.root.children[0], e = c.columns.root.children[1], f = c.rows.root.children[0], h = c.rows.root.children[1], i = c.rows.root.children[2], k = [ [ o.displayName, d.value.toString(), e.value.toString() ], [ f.value.toString(), g(f.values[0].value, w), g(f.values[1].value, w) ], [ h.value.toString(), g(h.values[0].value, w), g(h.values[1].value, w) ], [ j, g(i.values[0].value, w), g(i.values[1].value, w) ] ];
                b(k), a();
            }, f);
        }), it("Matrix with row and column subtotals", function(a) {
            var d = ga;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ o, u, w ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[1], h = d.rows.root.children[0], i = d.rows.root.children[1], k = d.rows.root.children[2], l = d.rows.root.children[3], m = [ [ o.displayName, e.value.toString(), f.value.toString(), M ], [ h.value.toString(), g(h.values[0].value, w), g(h.values[1].value, w), g(h.values[2].value, w) ], [ i.value.toString(), g(i.values[0].value, w), g(i.values[1].value, w), g(i.values[2].value, w) ], [ j, g(k.values[0].value, w), g(k.values[1].value, w), g(k.values[2].value, w) ], [ M, g(l.values[0].value, w), g(l.values[1].value, w), g(l.values[2].value, w) ] ];
                b(m);
                var n = [ [ v + " " + D, v, v, v + " " + I ], [ E, G, G, G + " " + I ], [ E, G, G, G + " " + I ], [ E, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(n), a();
            }, f);
        }), it("Matrix with multiple row and column group hierarchy levels, one measure with subtotals", function(a) {
            var d = ba;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, q, r, w ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[1], h = d.columns.root.children[0].children[0], i = d.columns.root.children[0].children[1], j = d.columns.root.children[1].children[0], m = d.columns.root.children[1].children[1], n = d.rows.root.children[0], o = d.rows.root.children[1], p = d.rows.root.children[2], r = d.rows.root.children[3], t = d.rows.root.children[4], u = d.rows.root.children[0].children[0], x = d.rows.root.children[0].children[1], y = d.rows.root.children[0].children[2], z = d.rows.root.children[1].children[0], A = d.rows.root.children[1].children[1], B = d.rows.root.children[1].children[2], C = d.rows.root.children[2].children[0], F = d.rows.root.children[2].children[1], H = d.rows.root.children[3].children[0], J = d.rows.root.children[3].children[1], K = [ [ "", q.displayName, e.value.toString(), f.value.toString() ], [ k.displayName, l.displayName, h.value.toString(), i.value.toString(), M, j.value.toString(), m.value.toString(), M ], [ n.value.toString(), u.value.toString(), g(u.values[0].value, w), g(u.values[1].value, w), g(u.values[2].value, w), g(u.values[3].value, w), g(u.values[4].value, w), g(u.values[5].value, w) ], [ x.value.toString(), g(x.values[0].value, w), g(x.values[1].value, w), g(x.values[2].value, w), g(x.values[3].value, w), g(x.values[4].value, w), g(x.values[5].value, w) ], [ M, g(y.values[0].value, w), g(y.values[1].value, w), g(y.values[2].value, w), g(y.values[3].value, w), g(y.values[4].value, w), g(y.values[5].value, w) ], [ o.value.toString(), z.value.toString(), g(z.values[0].value, w), g(z.values[1].value, w), g(z.values[2].value, w), g(z.values[3].value, w), g(z.values[4].value, w), g(z.values[5].value, w) ], [ A.value.toString(), g(A.values[0].value, w), g(A.values[1].value, w), g(A.values[2].value, w), g(A.values[3].value, w), g(A.values[4].value, w), g(A.values[5].value, w) ], [ M, g(B.values[0].value, w), g(B.values[1].value, w), g(B.values[2].value, w), g(B.values[3].value, w), g(B.values[4].value, w), g(B.values[5].value, w) ], [ p.value.toString(), C.value.toString(), g(C.values[0].value, w), g(C.values[1].value, w), g(C.values[2].value, w), g(C.values[3].value, w), g(C.values[4].value, w), g(C.values[5].value, w) ], [ M, g(F.values[0].value, w), g(F.values[1].value, w), g(F.values[2].value, w), g(F.values[3].value, w), g(F.values[4].value, w), g(F.values[5].value, w) ], [ r.value.toString(), H.value.toString(), g(H.values[0].value, w), g(H.values[1].value, w), g(H.values[2].value, w), g(H.values[3].value, w), g(H.values[4].value, w), g(H.values[5].value, w) ], [ M, g(J.values[0].value, w), g(J.values[1].value, w), g(J.values[2].value, w), g(J.values[3].value, w), g(J.values[4].value, w), g(J.values[5].value, w) ], [ M, g(t.values[0].value, w), g(t.values[1].value, w), g(t.values[2].value, w), g(t.values[3].value, w), g(t.values[4].value, w), g(t.values[5].value, w) ] ], L = [ [ s, D, s, s ], [ v, v + " " + D, v, v, v + " " + I, v, v, v + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I ], [ E, G, G, G + " " + I, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I ], [ E, G, G, G + " " + I, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G + " " + I, G, G, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(L), b(K), a();
            }, f);
        }), it("Matrix with multiple row and column group hierarchy levels, two measures with subtotals", function(a) {
            var d = da;
            h.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ k, l, q, r, w, x ],
                        objects: {
                            general: {
                                rowSubtotals: !0,
                                columnSubtotals: !0
                            }
                        }
                    },
                    matrix: d
                } ]
            }), setTimeout(function() {
                var e = d.columns.root.children[0], f = d.columns.root.children[0].children[0], h = d.columns.root.children[0].children[1], i = d.rows.root.children[0], j = d.rows.root.children[1], m = d.rows.root.children[2], n = d.rows.root.children[3], o = d.rows.root.children[4], p = d.rows.root.children[0].children[0], t = d.rows.root.children[0].children[1], u = d.rows.root.children[0].children[2], y = d.rows.root.children[1].children[0], z = d.rows.root.children[1].children[1], A = d.rows.root.children[1].children[2], B = d.rows.root.children[2].children[0], C = d.rows.root.children[2].children[1], F = d.rows.root.children[3].children[0], H = d.rows.root.children[3].children[1], J = [ [ "", q.displayName, e.value.toString() ], [ "", r.displayName, f.value.toString(), h.value.toString(), M ], [ k.displayName, l.displayName, w.displayName, x.displayName, w.displayName, x.displayName, w.displayName, x.displayName ], [ i.value.toString(), p.value.toString(), g(p.values[0].value, w), g(p.values[1].value, w), g(p.values[2].value, w), g(p.values[3].value, w), g(p.values[4].value, w), g(p.values[5].value, w) ], [ t.value.toString(), g(t.values[0].value, w), g(t.values[1].value, w), g(t.values[2].value, w), g(t.values[3].value, w), g(t.values[4].value, w), g(t.values[5].value, w) ], [ M, g(u.values[0].value, w), g(u.values[1].value, w), g(u.values[2].value, w), g(u.values[3].value, w), g(u.values[4].value, w), g(u.values[5].value, w) ], [ j.value.toString(), y.value.toString(), g(y.values[0].value, w), g(y.values[1].value, w), g(y.values[2].value, w), g(y.values[3].value, w), g(y.values[4].value, w), g(y.values[5].value, w) ], [ z.value.toString(), g(z.values[0].value, w), g(z.values[1].value, w), g(z.values[2].value, w), g(z.values[3].value, w), g(z.values[4].value, w), g(z.values[5].value, w) ], [ M, g(A.values[0].value, w), g(A.values[1].value, w), g(A.values[2].value, w), g(A.values[3].value, w), g(A.values[4].value, w), g(A.values[5].value, w) ], [ m.value.toString(), B.value.toString(), g(B.values[0].value, w), g(B.values[1].value, w), g(B.values[2].value, w), g(B.values[3].value, w), g(B.values[4].value, w), g(B.values[5].value, w) ], [ M, g(C.values[0].value, w), g(C.values[1].value, w), g(C.values[2].value, w), g(C.values[3].value, w), g(C.values[4].value, w), g(C.values[5].value, w) ], [ n.value.toString(), F.value.toString(), g(F.values[0].value, w), g(F.values[1].value, w), g(F.values[2].value, w), g(F.values[3].value, w), g(F.values[4].value, w), g(F.values[5].value, w) ], [ M, g(H.values[0].value, w), g(H.values[1].value, w), g(H.values[2].value, w), g(H.values[3].value, w), g(H.values[4].value, w), g(H.values[5].value, w) ], [ M, g(o.values[0].value, w), g(o.values[1].value, w), g(o.values[2].value, w), g(o.values[3].value, w), g(o.values[4].value, w), g(o.values[5].value, w) ] ];
                b(J);
                var K = [ [ s, D, s ], [ s, D, s, s, s + " " + I ], [ v, v + " " + D, v, v, v, v, v + " " + I, v + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I ], [ E, G, G, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I ], [ E, G, G, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ s, E, G, G, G, G, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ], [ E + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I, G + " " + I ] ];
                c(K), a();
            }, f);
        });
    }), describe("Matrix sort validation", function() {
        var b;
        beforeEach(function(c) {
            a.helpers.suppressDebugAssertFailure(), b = a.helpers.testDom("1800", "1800"), b.visible = function() {
                return !0;
            }, c();
        }), it("matrix with single measure", function(c) {
            var d = A, e = [ {
                row: 0,
                col: 1,
                expectedText: "Measure1"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 1
            } ], g = [];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with one measure and one column group", function(c) {
            var d = C, e = [ {
                row: 0,
                col: 1,
                expectedText: "Group A"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 1
            }, {
                row: 0,
                col: 1
            } ], g = [];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with three measures", function(c) {
            var d = G, e = [ {
                row: 0,
                col: 1,
                expectedText: "Measure1"
            }, {
                row: 0,
                col: 2,
                expectedText: "Measure2"
            }, {
                row: 0,
                col: 3,
                expectedText: "Measure3"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 3
            } ], g = [];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with three measures under one column group", function(c) {
            var d = I, e = [ {
                row: 0,
                col: 1,
                expectedText: "Group A"
            }, {
                row: 1,
                col: 1,
                expectedText: "Measure1"
            }, {
                row: 1,
                col: 2,
                expectedText: "Measure2"
            }, {
                row: 1,
                col: 3,
                expectedText: "Measure3"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 1
            }, {
                row: 1,
                col: 2
            }, {
                row: 1,
                col: 3
            } ], g = [];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with three measures and three row groups", function(c) {
            var d = K, e = [ {
                row: 0,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 0,
                col: 1,
                expectedText: "RowGroup2"
            }, {
                row: 0,
                col: 2,
                expectedText: "RowGroup3"
            }, {
                row: 0,
                col: 3,
                expectedText: "Measure1"
            }, {
                row: 0,
                col: 4,
                expectedText: "Measure2"
            }, {
                row: 0,
                col: 5,
                expectedText: "Measure3"
            } ], f = [ {
                row: 0,
                col: 0
            }, {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 3
            }, {
                row: 0,
                col: 4
            }, {
                row: 0,
                col: 5
            } ], g = [ [ {
                queryName: "RowGroup1"
            } ], [ {
                queryName: "RowGroup2"
            } ], [ {
                queryName: "RowGroup3"
            } ], [ {
                queryName: "Measure1"
            } ], [ {
                queryName: "Measure2"
            } ], [ {
                queryName: "Measure3"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with one row group and one column group", function(c) {
            var d = P, e = [ {
                row: 0,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 0,
                col: 1,
                expectedText: "10"
            } ], f = [ {
                row: 0,
                col: 0
            }, {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 0
            } ], g = [ [ {
                queryName: "RowGroup1"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with one row group and one column group", function(c) {
            var d = R, e = [ {
                row: 0,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 0,
                col: 1,
                expectedText: "RowGroup2"
            }, {
                row: 0,
                col: 2,
                expectedText: "RowGroup3"
            } ], f = [ {
                row: 0,
                col: 0
            }, {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            } ], g = [ [ {
                queryName: "RowGroup1"
            } ], [ {
                queryName: "RowGroup2"
            } ], [ {
                queryName: "RowGroup3"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with three column groups", function(c) {
            var d = V, e = [ {
                row: 0,
                col: 1,
                expectedText: "Africa"
            }, {
                row: 0,
                col: 2,
                expectedText: "Asia"
            }, {
                row: 1,
                col: 1,
                expectedText: "Algeria"
            }, {
                row: 1,
                col: 2,
                expectedText: "Angola"
            }, {
                row: 1,
                col: 3,
                expectedText: "China"
            }, {
                row: 1,
                col: 4,
                expectedText: "India"
            }, {
                row: 2,
                col: 1,
                expectedText: "2008"
            }, {
                row: 2,
                col: 2,
                expectedText: "2012"
            }, {
                row: 2,
                col: 3,
                expectedText: "2008"
            }, {
                row: 2,
                col: 4,
                expectedText: "2012"
            }, {
                row: 2,
                col: 5,
                expectedText: "2008"
            }, {
                row: 2,
                col: 6,
                expectedText: "2012"
            }, {
                row: 2,
                col: 7,
                expectedText: "2008"
            }, {
                row: 2,
                col: 8,
                expectedText: "2012"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 1,
                col: 1
            }, {
                row: 1,
                col: 2
            }, {
                row: 1,
                col: 3
            }, {
                row: 1,
                col: 4
            }, {
                row: 2,
                col: 1
            }, {
                row: 2,
                col: 2
            }, {
                row: 2,
                col: 3
            }, {
                row: 2,
                col: 4
            }, {
                row: 2,
                col: 5
            }, {
                row: 2,
                col: 6
            }, {
                row: 2,
                col: 7
            }, {
                row: 2,
                col: 8
            } ], g = [];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with two row groups, two column groups and two measures", function(c) {
            var d = aa, e = [ {
                row: 0,
                col: 1,
                expectedText: "ColGroup1"
            }, {
                row: 0,
                col: 2,
                expectedText: "1992"
            }, {
                row: 0,
                col: 3,
                expectedText: "1996"
            }, {
                row: 1,
                col: 1,
                expectedText: "ColGroup2"
            }, {
                row: 1,
                col: 2,
                expectedText: "Bronze"
            }, {
                row: 1,
                col: 3,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 4,
                expectedText: "Silver"
            }, {
                row: 1,
                col: 5,
                expectedText: "Bronze"
            }, {
                row: 1,
                col: 6,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 7,
                expectedText: "Silver"
            }, {
                row: 2,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 2,
                col: 1,
                expectedText: "RowGroup2"
            }, {
                row: 2,
                col: 2,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 3,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 4,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 5,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 6,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 7,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 8,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 9,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 10,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 11,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 12,
                expectedText: "Measure1"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 3
            }, {
                row: 1,
                col: 1
            }, {
                row: 1,
                col: 2
            }, {
                row: 1,
                col: 3
            }, {
                row: 1,
                col: 4
            }, {
                row: 1,
                col: 5
            }, {
                row: 1,
                col: 6
            }, {
                row: 1,
                col: 7
            }, {
                row: 2,
                col: 0
            }, {
                row: 2,
                col: 1
            }, {
                row: 2,
                col: 2
            }, {
                row: 2,
                col: 3
            }, {
                row: 2,
                col: 4
            }, {
                row: 2,
                col: 5
            }, {
                row: 2,
                col: 6
            }, {
                row: 2,
                col: 7
            }, {
                row: 2,
                col: 8
            }, {
                row: 2,
                col: 9
            }, {
                row: 2,
                col: 10
            }, {
                row: 2,
                col: 11
            }, {
                row: 2,
                col: 12
            } ], g = [ [ {
                queryName: "RowGroup1"
            } ], [ {
                queryName: "RowGroup2"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", d, e, f, g);
        }), it("matrix with two row groups, two column groups and one measure with totals", function(c) {
            var e = ca, f = [ {
                row: 0,
                col: 1,
                expectedText: "ColGroup1"
            }, {
                row: 0,
                col: 2,
                expectedText: "1992"
            }, {
                row: 0,
                col: 3,
                expectedText: "1996"
            }, {
                row: 0,
                col: 4,
                expectedText: d.TotalLabel
            }, {
                row: 1,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 1,
                col: 1,
                expectedText: "RowGroup2"
            }, {
                row: 1,
                col: 2,
                expectedText: "Silver"
            }, {
                row: 1,
                col: 3,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 4,
                expectedText: d.TotalLabel
            }, {
                row: 1,
                col: 5,
                expectedText: "Silver"
            }, {
                row: 1,
                col: 6,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 7,
                expectedText: d.TotalLabel
            } ], g = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 3
            }, {
                row: 0,
                col: 4
            }, {
                row: 1,
                col: 0
            }, {
                row: 1,
                col: 1
            }, {
                row: 1,
                col: 2
            }, {
                row: 1,
                col: 3
            }, {
                row: 1,
                col: 4
            }, {
                row: 1,
                col: 5
            }, {
                row: 1,
                col: 6
            }, {
                row: 1,
                col: 7
            } ], h = [ [ {
                queryName: "Measure1"
            } ], [ {
                queryName: "RowGroup1"
            } ], [ {
                queryName: "RowGroup2"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", e, f, g, h);
        }), it("matrix with two row groups, two column groups and two measures with totals", function(c) {
            var e = ea, f = [ {
                row: 0,
                col: 1,
                expectedText: "ColGroup1"
            }, {
                row: 0,
                col: 2,
                expectedText: "1992"
            }, {
                row: 0,
                col: 3,
                expectedText: "1996"
            }, {
                row: 0,
                col: 4,
                expectedText: d.TotalLabel
            }, {
                row: 1,
                col: 1,
                expectedText: "ColGroup2"
            }, {
                row: 1,
                col: 2,
                expectedText: "Silver"
            }, {
                row: 1,
                col: 3,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 4,
                expectedText: d.TotalLabel
            }, {
                row: 1,
                col: 5,
                expectedText: "Silver"
            }, {
                row: 1,
                col: 6,
                expectedText: "Gold"
            }, {
                row: 1,
                col: 7,
                expectedText: d.TotalLabel
            }, {
                row: 2,
                col: 0,
                expectedText: "RowGroup1"
            }, {
                row: 2,
                col: 1,
                expectedText: "RowGroup2"
            }, {
                row: 2,
                col: 2,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 3,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 4,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 5,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 6,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 7,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 8,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 9,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 10,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 11,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 12,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 13,
                expectedText: "Measure2"
            }, {
                row: 2,
                col: 14,
                expectedText: "Measure1"
            }, {
                row: 2,
                col: 15,
                expectedText: "Measure2"
            } ], g = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 3
            }, {
                row: 0,
                col: 4
            }, {
                row: 1,
                col: 1
            }, {
                row: 1,
                col: 2
            }, {
                row: 1,
                col: 3
            }, {
                row: 1,
                col: 4
            }, {
                row: 1,
                col: 5
            }, {
                row: 1,
                col: 6
            }, {
                row: 1,
                col: 7
            }, {
                row: 2,
                col: 0
            }, {
                row: 2,
                col: 1
            }, {
                row: 2,
                col: 2
            }, {
                row: 2,
                col: 3
            }, {
                row: 2,
                col: 4
            }, {
                row: 2,
                col: 5
            }, {
                row: 2,
                col: 6
            }, {
                row: 2,
                col: 7
            }, {
                row: 2,
                col: 8
            }, {
                row: 2,
                col: 9
            }, {
                row: 2,
                col: 10
            }, {
                row: 2,
                col: 11
            }, {
                row: 2,
                col: 12
            }, {
                row: 2,
                col: 13
            }, {
                row: 2,
                col: 14
            }, {
                row: 2,
                col: 15
            } ], h = [ [ {
                queryName: "RowGroup1"
            } ], [ {
                queryName: "RowGroup2"
            } ], [ {
                queryName: "Measure1"
            } ], [ {
                queryName: "Measure2"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "matrix", e, f, g, h);
        }), it("matrix with columnGroup url", function(c) {
            var d = E, e = a.tablixHelper.renderNewTablix(b, {
                visualType: "matrix",
                data: d
            });
            e.then(function() {
                var b = $(".tablixContainer > div.bi-tablix > div:nth-child(1) > table.unselectable > tbody");
                expect(b).toBeInDOM();
                var d = a.tablixHelper.getTableCell(b, {
                    row: 0,
                    col: 1
                }), e = $("> div > a", d.clickTarget);
                expect(e.length).toBe(1), expect(e.text()).toBe("http://www.validurl.com"), expect(e.attr("href")).toBe("http://www.validurl.com"), 
                expect(e.attr("title")).toBe("http://www.validurl.com"), c();
            });
        }), it("matrix with rowGroup url", function(c) {
            var d = N, e = a.tablixHelper.renderNewTablix(b, {
                visualType: "matrix",
                data: d
            });
            e.then(function() {
                var b = $(".tablixContainer > div.bi-tablix > div:nth-child(1) > table.unselectable > tbody");
                expect(b).toBeInDOM();
                var d = a.tablixHelper.getTableCell(b, {
                    row: 1,
                    col: 0
                }), e = $("> div > a", d.clickTarget);
                expect(e.length).toBe(1), expect(e.text()).toBe("http://www.validurl.com"), expect(e.attr("href")).toBe("http://www.validurl.com"), 
                expect(e.attr("title")).toBe("http://www.validurl.com"), c();
            });
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.MultiRowCard, c = powerbi.ValueType;
    describe("MultiRowCard", function() {
        it("MultiRowCard_registered_capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("multiRowCard").capabilities).toBe(b.capabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(b.capabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(b.capabilities.dataRoles).toBeDefined();
        }), it("Capabilities should suppressDefaultTitle", function() {
            expect(b.capabilities.suppressDefaultTitle).toBe(!0);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(b.capabilities.objects)).toEqual(b.formatStringProp);
        });
    }), describe("MultiRowCard DOM tests", function() {
        function d() {
            f = a.helpers.testDom("200", "300"), e = powerbi.visuals.visualPluginFactory.create().getPlugin("multiRowCard").create();
            var b;
            e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                settings: b
            });
        }
        var e, f, g = 30, h = a.mocks.createVisualHostServices(), i = {
            columns: [ {
                displayName: "value",
                type: c.fromDescriptor({
                    numeric: !0
                })
            }, {
                displayName: "date",
                type: c.fromDescriptor({
                    dateTime: !0
                })
            }, {
                displayName: "category",
                type: c.fromDescriptor({
                    text: !0
                })
            } ]
        }, j = {
            metadata: i,
            table: {
                rows: [ [ 123456.789, new Date(1999, 7, 31, 6, 15), "category1" ], [ 12345, new Date(2014, 7, 1), "category2" ] ],
                columns: i.columns
            }
        }, k = {
            columns: [ {
                displayName: "value",
                type: c.fromDescriptor({
                    numeric: !0
                }),
                isMeasure: !0
            }, {
                displayName: "genre",
                type: c.fromDescriptor({
                    text: !0
                })
            } ]
        }, l = {
            metadata: k,
            table: {
                rows: [ [ 123456.789, "Action" ], [ 12345, "Adventure" ] ],
                columns: k.columns
            }
        }, m = {
            metadata: k,
            table: {
                rows: [ [ null, "Action" ], [ null, "Adventure" ] ],
                columns: k.columns
            }
        };
        beforeEach(function() {
            d();
        }), it("Validate multiRowCard DOM without Title", function(a) {
            e.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .title")).not.toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect($(".card .cardItemContainer .caption")).toBeInDOM(), expect($(".card .cardItemContainer .details")).toBeInDOM(), 
                expect($(".card").length).toBe(2), expect($(".card")[0].childElementCount).toBe(3), 
                expect($(".cardItemContainer")[0].childElementCount).toBe(2), expect($(".caption").last().text()).toBe("category2"), 
                expect($(".details").last().text()).toBe("category"), a();
            }, g);
        }), it("Validate multiRowCard DOM with Title", function(a) {
            e.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect($(".card .cardItemContainer .caption")).toBeInDOM(), expect($(".card .cardItemContainer .details")).toBeInDOM(), 
                expect($(".card .title")).toBeInDOM(), expect($(".card").length).toBe(2), expect($(".card")[0].childElementCount).toBe(2), 
                expect($(".cardItemContainer")[0].childElementCount).toBe(2), expect($(".title").last().text()).toBe("Adventure"), 
                expect($(".caption").last().text()).toBe("12,345.00"), expect($(".details").last().text()).toBe("value"), 
                a();
            }, g);
        }), it("Validate that multiRowCard item long caption should be truncated", function(a) {
            var b = {
                columns: [ {
                    displayName: "Label",
                    type: c.fromDescriptor({
                        text: !0
                    })
                }, {
                    displayName: "Category",
                    type: c.fromDescriptor({
                        text: !0
                    })
                } ]
            }, d = {
                metadata: b,
                table: {
                    rows: [ [ "this is the label that never ends, it just goes on and on my friends.Some axis started rendering it not knowing what it was, and now it keeps on rendering forever just because this the label that never ends...", "Category1" ] ],
                    columns: b.columns
                }
            };
            e.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                var b = $(".caption").first().text();
                expect(b.substr(b.length - 3)).toBe("..."), a();
            }, g);
        }), it("Validate multiRowCard converter without Title", function(a) {
            setTimeout(function() {
                var c = b.converter(j, j.metadata.columns.length, j.table.rows.length);
                expect(c.length).toBe(2), expect(c).toEqual([ {
                    title: void 0,
                    cardItemsData: [ {
                        caption: "123,456.79",
                        details: "value"
                    }, {
                        caption: "8/31/1999",
                        details: "date"
                    }, {
                        caption: "category1",
                        details: "category"
                    } ]
                }, {
                    title: void 0,
                    cardItemsData: [ {
                        caption: "12,345.00",
                        details: "value"
                    }, {
                        caption: "8/1/2014",
                        details: "date"
                    }, {
                        caption: "category2",
                        details: "category"
                    } ]
                } ]), a();
            }, g);
        }), it("Validate multiRowCard converter With Title", function(a) {
            setTimeout(function() {
                var c = b.converter(l, l.metadata.columns.length, l.table.rows.length);
                expect(c.length).toBe(2), expect(c).toEqual([ {
                    title: "Action",
                    cardItemsData: [ {
                        caption: "123,456.79",
                        details: "value"
                    } ]
                }, {
                    title: "Adventure",
                    cardItemsData: [ {
                        caption: "12,345.00",
                        details: "value"
                    } ]
                } ]), a();
            }, g);
        }), it("Validate multiRowCard converter null value", function(a) {
            setTimeout(function() {
                var c = b.converter(m, m.metadata.columns.length, m.table.rows.length);
                expect(c.length).toBe(2), expect(c).toEqual([ {
                    title: "Action",
                    cardItemsData: [ {
                        caption: "(Blank)",
                        details: "value"
                    } ]
                }, {
                    title: "Adventure",
                    cardItemsData: [ {
                        caption: "(Blank)",
                        details: "value"
                    } ]
                } ]), a();
            }, g);
        }), it("Validate multiRowCard last card styling on dashboard", function(b) {
            f = a.helpers.testDom("400", "400"), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    overflow: "hidden"
                }
            }), e.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = parseInt(f.find(".card").last().css("border-bottom-width"), 10), c = parseInt(f.find(".card").last().css("padding-bottom"), 10), d = parseInt(f.find(".card").last().css("padding-top"), 10);
                expect(a).toEqual(0), expect(c).toEqual(0), expect(d).toEqual(5), b();
            }, g);
        }), it("Validate multiRowCard first card styling on canvas", function(b) {
            f = a.helpers.testDom("100", "100"), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                }
            });
            var d = {
                columns: [ {
                    displayName: "value",
                    type: c.fromDescriptor({
                        numeric: !0
                    })
                } ]
            }, i = {
                metadata: d,
                table: {
                    rows: [ [ 123456.789 ] ],
                    columns: d.columns
                }
            };
            e.onDataChanged({
                dataViews: [ i ]
            }), setTimeout(function() {
                var a = parseInt(f.find(".card").last().css("margin-bottom"), 10);
                expect(a).toEqual(0), e.onDataChanged({
                    dataViews: [ l ]
                }), a = parseInt(f.find(".card").last().css("margin-bottom"), 10), expect(a).toEqual(20), 
                e.onDataChanged({
                    dataViews: [ j ]
                }), a = parseInt(f.find(".card").last().css("margin-bottom"), 10), expect(a).toEqual(20), 
                b();
            }, g);
        }), it("Validate multiRowCard card styling on dashboard", function(b) {
            f = a.helpers.testDom("400", "400"), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    overflow: "hidden"
                }
            }), e.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = parseInt(f.find(".card").first().css("border-bottom-width"), 10), c = parseInt(f.find(".card").first().css("padding-bottom"), 10), d = parseInt(f.find(".card").first().css("padding-top"), 10);
                expect($(".card .title")).not.toBeInDOM(), expect(a).toEqual(1), expect(c).toEqual(5), 
                expect(d).toEqual(5), b();
            }, g);
        }), it("Validate multiRowCard card styling", function(b) {
            f = a.helpers.testDom("400", "400"), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                }
            }), e.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = parseInt(f.find(".card").first().css("border-bottom-width"), 10), c = parseInt(f.find(".card").first().css("padding-bottom"), 10), d = parseInt(f.find(".card").first().css("padding-top"), 10);
                expect(a).toEqual(0), expect(c).toEqual(0), expect(d).toEqual(0), b();
            }, g);
        }), it("Validate multiRowCard styling when there is a single card item", function(a) {
            var b = {
                columns: [ {
                    displayName: "value",
                    type: c.fromDescriptor({
                        numeric: !0
                    })
                } ]
            }, d = {
                metadata: b,
                table: {
                    rows: [ [ 123456.789 ] ],
                    columns: b.columns
                }
            };
            e.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                var b = parseInt(f.find(".cardItemContainer").first().css("margin-right"), 10);
                expect(b).toEqual(0), a();
            }, g);
        }), it("Verify number of cards and card items in smallTile ", function(b) {
            f = a.helpers.testDom("150", "230");
            var c = a.tableDataViewHelper.getDataWithColumns(10, 10);
            e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    overflow: "hidden"
                }
            }), e.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect($(".card").length).toBe(1), expect($(".card")[0].childElementCount).toBe(4), 
                b();
            }, g);
        }), it("Verify number of cards and card items in MediumTile ", function(b) {
            f = a.helpers.testDom("300", "470");
            var c = a.tableDataViewHelper.getDataWithColumns(10, 10);
            e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    overflow: "hidden"
                }
            }), e.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect($(".card").length).toBe(3), expect($(".card")[0].childElementCount).toBe(6), 
                b();
            }, g);
        }), it("Verify number of cards and card items in LargeTile ", function(b) {
            f = a.helpers.testDom("450", "750");
            var c = a.tableDataViewHelper.getDataWithColumns(10, 10);
            e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                },
                interactivity: {
                    overflow: "hidden"
                }
            }), e.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect($(".card").length).toBe(9), expect($(".card")[0].childElementCount).toBe(6), 
                b();
            }, g);
        }), it("Validate multiRowCard cardrow column width for default width", function(b) {
            f = a.helpers.testDom("100", "760");
            var c = a.tableDataViewHelper.getDataWithColumns(15, 15);
            e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                }
            }), e.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                expect($(".card")).toBeInDOM(), expect($(".card .cardItemContainer")).toBeInDOM(), 
                expect(f.find(".cardItemContainer").last().innerWidth()).toEqual(86), b();
            }, g);
        }), it("Validate multiRowCard card height", function(b) {
            f = a.helpers.testDom("400", "400"), e.init({
                element: f,
                host: h,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: f.height(),
                    width: f.width()
                }
            }), e.onDataChanged({
                dataViews: [ j ]
            }), setTimeout(function() {
                var a = f.find(".cardItemContainer").height(), c = parseInt(f.find(".card").css("padding-bottom"), 10), d = parseInt(f.find(".card").css("padding-bottom"), 10);
                expect(f.find(".card").first().innerHeight()).toEqual(a + c + d), b();
            }, g);
        }), it("Card should be cleared when there is a empty dataview ", function(a) {
            var b = {
                columns: [ {
                    displayName: "value",
                    type: c.fromDescriptor({
                        numeric: !0
                    })
                } ]
            }, d = {
                metadata: b,
                table: {
                    rows: [ [ 123456.789 ] ],
                    columns: b.columns
                }
            };
            e.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                expect($(".card").length).toBe(1), b = {
                    columns: []
                }, d = {
                    metadata: b,
                    table: {
                        rows: [],
                        columns: b.columns
                    }
                }, e.onDataChanged({
                    dataViews: [ d ]
                }), expect($(".card").length).toBe(0), a();
            }, g);
        }), it("Card should format values", function(a) {
            var b = {
                columns: [ {
                    displayName: "value",
                    type: c.fromDescriptor({
                        numeric: !0
                    }),
                    objects: {
                        general: {
                            formatString: "0%"
                        }
                    }
                } ]
            }, d = {
                metadata: b,
                table: {
                    rows: [ [ .22 ] ],
                    columns: b.columns
                }
            };
            e.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                expect($(".card").length).toBe(1), expect($(".card .caption").last().text()).toBe("22%"), 
                a();
            }, g);
        }), it("Card should not call loadMoreData ", function() {
            var a = {
                metadata: {
                    columns: []
                },
                table: {
                    rows: [ [ 1 ] ],
                    columns: []
                }
            };
            e.onDataChanged({
                dataViews: [ a ]
            });
            var b = e.listView.options, c = spyOn(h, "loadMoreData");
            b.loadMoreData(), expect(c).not.toHaveBeenCalled();
        }), it("Card should call loadMoreData ", function() {
            var a = {
                metadata: {
                    columns: [],
                    segment: {}
                },
                table: {
                    rows: [ [ 1 ] ],
                    columns: []
                }
            };
            e.onDataChanged({
                dataViews: [ a ]
            });
            var b = e.listView.options, c = spyOn(h, "loadMoreData");
            b.loadMoreData(), expect(c).toHaveBeenCalled();
        }), it("Card already called loadMoreData", function() {
            var a = {
                metadata: {
                    columns: [],
                    segment: {}
                },
                table: {
                    rows: [ [ 1 ] ],
                    columns: []
                }
            };
            e.onDataChanged({
                dataViews: [ a ]
            });
            var b = e.listView.options, c = spyOn(h, "loadMoreData");
            b.loadMoreData(), b.loadMoreData(), expect(c.calls.all().length).toBe(1);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.RichTextbox;
    describe("Rich Textbox", function() {
        function c(a) {
            return a.get(0).tagName.toLowerCase();
        }
        function d(a) {
            return "b" === c(a) || "bold" === a.css("font-weight");
        }
        function e(a) {
            return "i" === c(a) || "italic" === a.css("font-style");
        }
        function f(a) {
            return "u" === c(a) || "underline" === a.css("text-decoration");
        }
        function g(a) {
            var b = "a" === c(a) ? a : a.find("a");
            return b.attr("href");
        }
        function h(a) {
            return a.css("font-family");
        }
        function i(a) {
            return a.css("font-size");
        }
        function j(a) {
            return a.css("text-align");
        }
        function k(a) {
            return [ {
                metadata: {
                    columns: [],
                    objects: {
                        general: {
                            paragraphs: a
                        }
                    }
                }
            } ];
        }
        function l(a) {
            return a.children("div");
        }
        function m(a) {
            var b = a.find(".ql-editor");
            return expect(b.length).toBe(1), b.children("div");
        }
        var n = {
            height: 500,
            width: 500
        }, o = powerbi.visuals.visualStyles.create();
        describe("capabilities", function() {
            it("should suppress title", function() {
                expect(b.capabilities.suppressDefaultTitle).toBeTruthy();
            }), it("should register capabilities", function() {
                var a = powerbi.visuals.visualPluginFactory.create(), c = a.getPlugin("textbox");
                expect(c).toBeDefined(), expect(c.capabilities).toBe(b.capabilities);
            });
        }), powerbi.visuals.RichText.QuillWrapper.loadQuillResources = !1;
        var p = [ {
            textRuns: [ {
                value: "foo"
            }, {
                value: "bar"
            } ]
        }, {
            textRuns: [ {
                value: "baz"
            } ]
        } ], q = [ {
            textRuns: [ {
                value: "foo",
                textStyle: {
                    fontWeight: "bold"
                }
            }, {
                value: "bar",
                textStyle: {
                    fontStyle: "italic"
                }
            }, {
                value: "baz",
                textStyle: {
                    textDecoration: "underline"
                }
            } ]
        }, {
            textRuns: [ {
                value: "http://www.powerbi.com",
                url: "http://www.powerbi.com"
            } ],
            horizontalTextAlignment: "center"
        } ], r = [ {
            textRuns: [ {
                value: "http://www.powerbi.com"
            } ]
        } ];
        describe("", function() {
            function c(a) {
                y.and.returnValue(a), x.onViewModeChanged(a);
            }
            function s(a, b) {
                if (expect(a).toHaveClass("richtextbox"), b) {
                    var c = a.children("div").eq(0);
                    expect(c).toBeDefined(), expect(z).toHaveBeenCalled(), expect(v).toBeDefined(), 
                    expect(v.hasClass("ql-toolbar")).toBeTruthy();
                    var d = c.find(".ql-container");
                    expect(d.length).toBe(1);
                    var e = d.find(".ql-editor");
                    expect(e.length).toBe(1);
                } else expect(a.find(".ql-editor").length).toBe(0);
            }
            var t, u, v, w, x, y, z;
            beforeEach(function() {
                t = a.mocks.createVisualHostServices(), u = a.helpers.testDom("500", "500"), w = {
                    element: u,
                    host: t,
                    viewport: n,
                    style: o
                }, y = spyOn(t, "getViewMode"), z = spyOn(t, "setToolbar"), z.and.callFake(function(a) {
                    return v = a;
                });
            }), describe("init in view mode", function() {
                beforeEach(function() {
                    y.and.returnValue(0), x = new b(), x.init(w);
                }), it("should not show editor", function() {
                    s(u, !1);
                }), it("change to edit-mode should show editor", function() {
                    c(1), s(u, !0);
                }), describe("on data changed", function() {
                    it("with non-empty dataview should set content", function() {
                        x.onDataChanged({
                            dataViews: k(p)
                        });
                        var a = l(u);
                        expect(a.length).toBe(2);
                        var b = a.eq(0);
                        expect(b.text()).toEqual("foobar");
                        var c = a.eq(1);
                        expect(c.text()).toEqual("baz");
                    }), it("with empty dataview should clear content", function() {
                        x.onDataChanged({
                            dataViews: k(p)
                        }), x.onDataChanged({
                            dataViews: []
                        });
                        var a = l(u);
                        expect(a.text()).toEqual("");
                    }), it("with formatted text should render correctly", function() {
                        x.onDataChanged({
                            dataViews: k(q)
                        });
                        var a = l(u);
                        expect(a.length).toBe(2);
                        var b = a.eq(0), c = b.children();
                        expect(c.length).toBe(3);
                        var h = c.eq(0);
                        expect(d(h)).toBeTruthy();
                        var i = c.eq(1);
                        expect(e(i)).toBeTruthy();
                        var j = c.eq(2);
                        expect(f(j)).toBeTruthy();
                        var m = a.eq(1), n = m.children();
                        expect(n.length).toBe(1);
                        var o = n.eq(0);
                        expect(g(o)).toEqual("http://www.powerbi.com");
                    }), describe("theme font", function() {
                        it('"Heading" should render correctly', function() {
                            var a = [ {
                                textRuns: [ {
                                    value: "Some text",
                                    textStyle: {
                                        fontFamily: "Heading"
                                    }
                                } ]
                            } ];
                            x.onDataChanged({
                                dataViews: k(a)
                            });
                            var b = l(u), c = b.children("span").eq(0);
                            expect(h(c)).toEqual("wf_segoe-ui_light");
                        }), it('"Body" should render correctly', function() {
                            var a = [ {
                                textRuns: [ {
                                    value: "Some text",
                                    textStyle: {
                                        fontFamily: "Body"
                                    }
                                } ]
                            } ];
                            x.onDataChanged({
                                dataViews: k(a)
                            });
                            var b = l(u), c = b.children("span").eq(0);
                            expect(h(c)).toEqual("wf_segoe-ui_normal");
                        });
                    });
                });
            }), describe("init in edit mode", function() {
                beforeEach(function() {
                    y.and.returnValue(1), x = new b(), x.init(w);
                }), it("should show editor", function() {
                    s(u, !0);
                }), it("change to view-mode should not show editor", function() {
                    c(0), s(u, !1);
                }), it("change to view-mode should format any urls", function() {
                    x.onDataChanged({
                        dataViews: k(r)
                    }), c(0);
                    var a = l(u), b = a.children("span").eq(0);
                    expect(g(b)).toEqual("http://www.powerbi.com");
                }), it("change to view-mode should save content", function() {
                    var a = [];
                    spyOn(t, "persistProperties").and.callFake(function(b) {
                        return a = b;
                    }), x.onDataChanged({
                        dataViews: k(q)
                    }), c(0), expect(a).toHaveLength(1);
                    var b = a[0];
                    expect(b.objectName).toEqual("general");
                    var d = b.properties.paragraphs;
                    expect(d.length).toBe(2), expect(d[0].horizontalTextAlignment).toBeFalsy(), expect(d[0].textRuns.length).toBe(3), 
                    expect(d[0].textRuns[0].value).toBe("foo"), expect(d[0].textRuns[0].textStyle).toEqual({
                        fontWeight: "bold"
                    }), expect(d[0].textRuns[0].url).toBeFalsy(), expect(d[0].textRuns[1].value).toBe("bar"), 
                    expect(d[0].textRuns[1].textStyle).toEqual({
                        fontStyle: "italic"
                    }), expect(d[0].textRuns[1].url).toBeFalsy(), expect(d[0].textRuns[2].value).toBe("baz"), 
                    expect(d[0].textRuns[2].textStyle).toEqual({
                        textDecoration: "underline"
                    }), expect(d[0].textRuns[2].url).toBeFalsy(), expect(d[1].horizontalTextAlignment).toEqual("center"), 
                    expect(d[1].textRuns[0].value).toBe("http://www.powerbi.com"), expect(d[1].textRuns[0].textStyle).toEqual({}), 
                    expect(d[1].textRuns[0].url).toEqual("http://www.powerbi.com");
                }), it("change to view-mode should preserve empty lines", function() {
                    var a = [ {
                        textRuns: [ {
                            value: "line 1"
                        } ]
                    }, {
                        textRuns: [ {
                            value: ""
                        } ]
                    }, {
                        textRuns: [ {
                            value: "line 2"
                        } ]
                    } ];
                    x.onDataChanged({
                        dataViews: k(a)
                    }), c(0);
                    var b = l(u);
                    expect(b.length).toBe(3), expect(b.eq(0).text()).toEqual("line 1"), expect(b.eq(1).text()).toEqual(""), 
                    expect(b.eq(2).text()).toEqual("line 2");
                }), describe("on data changed", function() {
                    it("with non-empty dataview should set content", function() {
                        x.onDataChanged({
                            dataViews: k(p)
                        });
                        var a = m(u), b = a.eq(0);
                        expect(b.text()).toEqual("foobar");
                        var c = a.eq(1);
                        expect(c.text()).toBe("baz");
                    }), it("with empty dataview should clear content", function() {
                        x.onDataChanged({
                            dataViews: k(p)
                        }), x.onDataChanged({
                            dataViews: []
                        });
                        var a = m(u);
                        expect(a.text()).toEqual("");
                    }), it("with formatted text should render correctly", function() {
                        x.onDataChanged({
                            dataViews: k(q)
                        });
                        var a = m(u);
                        expect(a.length).toBe(2);
                        var b = a.eq(0), c = b.children();
                        expect(c.length).toBe(3);
                        var h = c.eq(0);
                        expect(d(h)).toBeTruthy();
                        var i = c.eq(1);
                        expect(e(i)).toBeTruthy();
                        var j = c.eq(2);
                        expect(f(j)).toBeTruthy();
                        var l = a.eq(1), n = l;
                        expect(g(n)).toEqual("http://www.powerbi.com");
                    });
                });
            }), describe("", function() {
                function a() {
                    return v;
                }
                function g(a) {
                    return a.find(".ql-bold");
                }
                function n(a) {
                    return a.find(".ql-italic");
                }
                function o(a) {
                    return a.find(".ql-underline");
                }
                function q(a) {
                    return a.find(".ql-font");
                }
                function r(a) {
                    return a.find(".ql-size");
                }
                function s(a) {
                    return a.find(".ql-align");
                }
                function t(a, b) {
                    a.val(b);
                    var c = document.createEvent("UIEvent");
                    c.initUIEvent("change", !1, !1, null, 0), a.get(0).dispatchEvent(c);
                }
                function z(a) {
                    return a.children("option:selected").text();
                }
                beforeEach(function() {
                    y.and.returnValue(1), x = new b(), x.init(w);
                }), it("toolbar should exist with formatting options", function() {
                    var b = a();
                    expect(b).toBeDefined(), expect(g(b)).toBeDefined(), expect(n(b)).toBeDefined(), 
                    expect(o(b)).toBeDefined(), expect(q(b)).toBeDefined(), expect(r(b)).toBeDefined(), 
                    expect(s(b)).toBeDefined();
                }), describe("with selected text", function() {
                    beforeEach(function() {
                        x.onDataChanged({
                            dataViews: k(p)
                        }), x.setSelection(0, 5);
                    }), describe("clicking bold", function() {
                        beforeEach(function() {
                            g(a()).click();
                        }), it("should bold selection in editor", function() {
                            var a = m(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var c = b.children();
                            expect(c.length).toBeGreaterThan(0), expect(c.eq(0).text()).toEqual("fooba"), expect(d(c.eq(0))).toBeTruthy();
                        }), it("should bold text in view-mode", function() {
                            c(0);
                            var a = l(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var e = b.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(d(e.eq(0))).toBeTruthy();
                        });
                    }), describe("clicking italic", function() {
                        beforeEach(function() {
                            n(a()).click();
                        }), it("should italicize selection in editor", function() {
                            var a = m(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var c = b.children();
                            expect(c.length).toBeGreaterThan(0), expect(c.eq(0).text()).toEqual("fooba"), expect(e(c.eq(0))).toBeTruthy();
                        }), it("should italicize text in view-mode", function() {
                            c(0);
                            var a = l(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var d = b.children();
                            expect(d.length).toBeGreaterThan(0), expect(d.eq(0).text()).toEqual("fooba"), expect(e(d.eq(0))).toBeTruthy();
                        });
                    }), describe("clicking underline", function() {
                        beforeEach(function() {
                            o(a()).click();
                        }), it("should underline selection in editor", function() {
                            var a = m(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var c = b.children();
                            expect(c.length).toBeGreaterThan(0), expect(c.eq(0).text()).toEqual("fooba"), expect(f(c.eq(0))).toBeTruthy();
                        }), it("should underline text in view-mode", function() {
                            c(0);
                            var a = l(u), b = a.eq(0);
                            expect(b.text()).toBe("foobar");
                            var d = b.children();
                            expect(d.length).toBeGreaterThan(0), expect(d.eq(0).text()).toEqual("fooba"), expect(f(d.eq(0))).toBeTruthy();
                        });
                    }), describe("changing font", function() {
                        var b = "Symbol";
                        beforeEach(function() {
                            t(q(a()), b);
                        }), it("should change font in editor", function() {
                            var c = m(u), d = c.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(h(e.eq(0))).toEqual(b), 
                            expect(z(q(a()))).toEqual(b);
                        }), it("should change font in view-mode", function() {
                            c(0);
                            var a = l(u), d = a.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(h(e.eq(0))).toEqual(b);
                        });
                    }), describe("changing font (embedded)", function() {
                        var b = "wf_segoe-ui_normal";
                        beforeEach(function() {
                            t(q(a()), b);
                        }), it("should change font in editor", function() {
                            var c = m(u), d = c.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(h(e.eq(0))).toEqual(b), 
                            expect(z(q(a()))).toEqual("Segoe UI");
                        }), it("should change font in view-mode", function() {
                            c(0);
                            var a = l(u), d = a.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(h(e.eq(0))).toEqual(b);
                        });
                    }), describe("changing font size", function() {
                        var b = "24px";
                        beforeEach(function() {
                            t(r(a()), b);
                        }), it("should change font size in editor", function() {
                            var c = m(u), d = c.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(i(e.eq(0))).toEqual(b), 
                            expect(z(r(a()))).toEqual("24");
                        }), it("should change font size in view-mode", function() {
                            c(0);
                            var a = l(u), d = a.eq(0);
                            expect(d.text()).toBe("foobar");
                            var e = d.children();
                            expect(e.length).toBeGreaterThan(0), expect(e.eq(0).text()).toEqual("fooba"), expect(i(e.eq(0))).toEqual(b);
                        });
                    }), describe("changing text alignment", function() {
                        var b = "center";
                        beforeEach(function() {
                            t(s(a()), b);
                        }), it("should change text alignment in editor", function() {
                            var c = m(u), d = c.eq(0);
                            expect(d.text()).toEqual("foobar"), expect(j(d)).toEqual(b), expect(z(s(a()))).toEqual("Center");
                        }), it("should change text alignment in view-mode", function() {
                            c(0);
                            var a = l(u), d = a.eq(0);
                            expect(d.text()).toEqual("foobar"), expect(j(d)).toEqual(b);
                        });
                    });
                });
            });
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b) {
        function c(a) {
            var b = {
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: l.columns[1],
                            values: a,
                            subtotal: 2465e3
                        } ])
                    }
                } ]
            };
            return b;
        }
        var d, e, f, g = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Category: !0
                },
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                roles: {
                    X: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                roles: {
                    Y: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                roles: {
                    Size: !0
                },
                type: h.describeDataType(1)
            } ]
        }, l = {
            columns: [ {
                displayName: "col1",
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: h.describeDataType(k.Integer)
            } ]
        };
        beforeEach(function() {
            b && a.helpers.suppressDebugAssertFailure(), a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            f = a.mocks.createVisualHostServices(), e = a.helpers.testDom("500", "500"), d = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            d.init({
                element: e,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: b
                }
            });
        }), it("NaN in values shows a warning", function(a) {
            var b = jasmine.createSpy("warning");
            f.setWarnings = b;
            var e = c([ 5e5, 495e3, 49e4, NaN, 5e5 ]);
            d.onDataChanged(e), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                a();
            }, n);
        }), it("Negative Infinity in values shows a warning", function(a) {
            var b = jasmine.createSpy("warning");
            f.setWarnings = b;
            var e = c([ 5e5, 495e3, 49e4, Number.NEGATIVE_INFINITY, 5e5 ]);
            d.onDataChanged(e), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, n);
        }), it("Positive Infinity in values shows a warning", function(a) {
            var b = jasmine.createSpy("warning");
            f.setWarnings = b;
            var e = c([ 5e5, 495e3, 49e4, Number.POSITIVE_INFINITY, 5e5 ]);
            d.onDataChanged(e), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, n);
        }), it("Out of range value in values shows a warning", function(a) {
            var b = jasmine.createSpy("warning");
            f.setWarnings = b;
            var e = c([ 5e5, 495e3, 49e4, 1e301, 5e5 ]);
            d.onDataChanged(e), setTimeout(function() {
                expect(b).toHaveBeenCalled(), expect(b.calls.count()).toBe(1), expect(b.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                a();
            }, n);
        }), it("All okay in values shows a warning", function(a) {
            var b = jasmine.createSpy("warning");
            f.setWarnings = b;
            var e = c([ 5e5, 495e3, 49e4, 48e4, 5e5 ]);
            d.onDataChanged(e), setTimeout(function() {
                expect(b).not.toHaveBeenCalled(), a();
            }, n);
        }), it("scatter chart single measure dom validation", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: l.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 2465e3
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").first().text()).toBe("480K"), 
                a();
            }, n);
        }), it("scatter chart two measure dom validation", function(b) {
            var c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    objects: {
                        general: {
                            formatString: "0%"
                        }
                    }
                } ]
            }, e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: c,
                    categorical: {
                        categories: [ {
                            source: c.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: c.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        }, {
                            source: c.columns[2],
                            values: [ .21, .22, .23, .24, .25 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").first().text()).toBe("110"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("21%"), 
                expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(5), expect($(".scatterChart .mainGraphicsContext .dot")[0].style.fillOpacity).toBe("0"), 
                expect($(".scatterChart .mainGraphicsContext .dot")[0].style.strokeOpacity).toBe("0.85"), 
                expect($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r")).toBe("6"), 
                b();
            }, n);
        }), it("scatter chart series dom validation", function(c) {
            var e = {
                columns: [ {
                    displayName: "col1",
                    roles: {
                        Series: !0
                    }
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    objects: {
                        general: {
                            formatString: "0%"
                        }
                    }
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            };
            d.onDataChanged({
                dataViews: [ i.apply({
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 110, 120 ]
                        }, {
                            source: e.columns[2],
                            values: [ 210, 220 ]
                        }, {
                            source: e.columns[3],
                            values: [ 310, 320 ]
                        } ])
                    }
                }) ]
            });
            var f = b ? ".interactive-legend" : ".legend", g = b ? 3 : 2;
            setTimeout(function() {
                expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(2);
                var a = $(f + (b ? " .item" : "Text")).length;
                expect($(f).length).toBe(1), expect(a).toBe(g), b || expect($(".legendTitle").text()).toBe("col1"), 
                c();
            }, n);
        }), it("scatter chart measure and size dom validation", function(c) {
            var e = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, f = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: f
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        }, {
                            source: e.columns[2],
                            values: [ 210, 220, 230, 240, 250 ]
                        }, {
                            source: e.columns[3],
                            values: [ 310, 320, 330, 340, 350 ]
                        } ])
                    }
                } ]
            });
            var g = b ? 45 : 51.5;
            setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").first().text()).toBe("110"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("210"), 
                expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(5);
                var a = parseFloat($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r"));
                expect(a).toBeCloseTo(g, -.31), c();
            }, n);
        }), it("scatter chart gridline dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: c
                        } ],
                        values: j.createValueColumns([ {
                            source: l.columns[1],
                            values: [ 5e4, 49500, 49e3, 48e3, 5e4 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .x.axis.showLinesOnAxis").length).toBe(1), 
                expect($(".scatterChart .axisGraphicsContext .y.axis.showLinesOnAxis").length).toBe(2), 
                b();
            }, n);
        }), it("scatter chart single category value dom validation", function(c) {
            var e = {
                columns: [ {
                    displayName: "col1",
                    type: h.describeDataType(2048)
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ]
            };
            d.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a") ]
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 110 ]
                        }, {
                            source: e.columns[2],
                            values: [ 210 ]
                        }, {
                            source: e.columns[3],
                            values: [ 310 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBe(4), expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").first().text()).toBe("80"), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("140"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBe(3), expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("200"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("400"), 
                expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(1);
                var a = (b ? 45 : 51.5).toString();
                expect($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r")).toBe(a), 
                expect($(".legendItem").length).toBe(0), c();
            }, n);
        }), it("scatter chart no category dom validation", function(a) {
            var c = {
                columns: [ {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ]
            };
            d.onDataChanged({
                dataViews: [ {
                    metadata: c,
                    categorical: {
                        categories: null,
                        values: j.createValueColumns([ {
                            source: c.columns[0],
                            values: [ 110 ]
                        }, {
                            source: c.columns[1],
                            values: [ 210 ]
                        }, {
                            source: c.columns[2],
                            values: [ 310 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBe(4), expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBe(3), 
                expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(1);
                var c = (b ? 45 : 51.5).toString();
                expect($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r")).toBe(c), 
                expect($(".scatterChart .mainGraphicsContext .dot").find("title").first().text()).toBe(""), 
                expect($(".legendItem").length).toBe(0), a();
            }, n);
        }), it("empty scatter chart dom validation", function(a) {
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: []
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: []
                        }, {
                            source: g.columns[2],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                a();
            }, n);
        }), it("ensure scatter chart is cleared when an empty dataview is applied", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: l,
                    categorical: {
                        categories: [ {
                            source: l.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: c
                        } ],
                        values: j.createValueColumns([ {
                            source: l.columns[1],
                            values: [ 5e4, 49500, 49e3, 48e3, 5e4 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = $(".scatterChart").find(".dot").length;
                expect(a).toBe(5), d.onDataChanged({
                    dataViews: [ {
                        metadata: l,
                        categorical: {
                            categories: [ {
                                source: l.columns[0],
                                values: []
                            } ],
                            values: j.createValueColumns([ {
                                source: l.columns[1],
                                values: [],
                                subtotal: 0
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    var a = $(".scatterChart").find(".dot").length;
                    expect(a).toBe(0), b();
                }, n);
            }, n);
        }), it("scatter chart with small interval dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: c
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        }, {
                            source: g.columns[2],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        }, {
                            source: g.columns[3],
                            values: [ 1.2, 2.3, 1.8, 3.7, 2.6 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("3"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("3"), 
                b();
            }, n);
        }), it("scatter chart nested svg dom validation", function() {
            var b = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: b
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5, 20, 15, 10, 25 ]
                        }, {
                            source: g.columns[2],
                            values: [ .5, 2, 1.5, 1, 2.5 ]
                        }, {
                            source: g.columns[3],
                            values: [ 1.2, 2.3, 1.8, 3.7, 2.6 ]
                        } ])
                    }
                } ]
            }), expect($(".scatterChart .mainGraphicsContext .dot").length).toBe(5), expect($(".scatterChart .mainGraphicsContext").find("svg")).toBeDefined();
        }), it("scatter chart does not show less ticks dom validation", function(b) {
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b" ],
                            identity: c
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 32, 45 ]
                        }, {
                            source: g.columns[2],
                            values: [ 26.125, 26.125 ]
                        }, {
                            source: g.columns[3],
                            values: [ 3, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(1), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("30"), 
                b();
            }, n);
        }), it("scatter chart axis labels dom validation", function(b) {
            var c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "X-Axis",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "Size",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "Y-Axis",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ]
            }, e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: c,
                    categorical: {
                        categories: [ {
                            source: c.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: c.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        }, {
                            source: c.columns[2],
                            values: [ 210, 220, 230, 240, 250 ]
                        }, {
                            source: c.columns[3],
                            values: [ 310, 320, 330, 340, 350 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").text()).toBe("X-Axis"), 
                expect($(".scatterChart .axisGraphicsContext .yAxisLabel").text()).toBe("Y-Axis"), 
                b();
            }, n);
        }), it("scatter chart on small tile shows at least two tick lines dom validation", function(b) {
            d.onResizing({
                height: 101,
                width: 226
            }, 0);
            var c = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: c
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[2],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[3],
                            values: [ 3, 5, 7 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").length).toBeGreaterThan(1), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").first().text()).toBe("0.15"), 
                expect($(".scatterChart .axisGraphicsContext .y.axis .tick").find("text").last().text()).toBe("0.16"), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").length).toBeGreaterThan(1), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").first().text()).toBe("0.15"), 
                expect($(".scatterChart .axisGraphicsContext .x.axis .tick").find("text").last().text()).toBe("0.16"), 
                b();
            }, n);
        }), it("scatter chart onResize big tile radius dom validation", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[2],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[3],
                            values: [ 3, 15, 27 ],
                            min: 0,
                            max: 30
                        } ])
                    }
                } ]
            }), d.onResizing({
                height: 500,
                width: 500
            }, 0);
            var f, h, i;
            b ? (f = 42.5, h = 32.5, i = 18) : (f = 49, h = 37.5, i = 20.5), setTimeout(function() {
                var a = parseFloat($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r"));
                expect(a).toBeCloseTo(f, -.31);
                var b = parseFloat($(".scatterChart .mainGraphicsContext .dot")[1].getAttribute("r"));
                expect(b).toBeCloseTo(h, -.31);
                var d = parseFloat($(".scatterChart .mainGraphicsContext .dot")[2].getAttribute("r"));
                expect(d).toBeCloseTo(i, -.31), c();
            }, n);
        }), it("scatter chart onResize medium tile radius dom validation", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[2],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[3],
                            values: [ 3, 15, 27 ],
                            min: 0,
                            max: 30
                        } ])
                    }
                } ]
            }), d.onResizing({
                height: 300,
                width: 300
            }, 0);
            var f, h, i;
            b ? (f = 23, h = 17.5, i = 9.5) : (f = 29.5, h = 22.5, i = 12.5), setTimeout(function() {
                var a = parseFloat($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r"));
                expect(a).toBeCloseTo(f, -.31);
                var b = parseFloat($(".scatterChart .mainGraphicsContext .dot")[1].getAttribute("r"));
                expect(b).toBeCloseTo(h, -.31);
                var d = parseFloat($(".scatterChart .mainGraphicsContext .dot")[2].getAttribute("r"));
                expect(d).toBeCloseTo(i, -.31), c();
            }, n);
        }), it("scatter chart onResize small tile radius dom validation", function(c) {
            var e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            d.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[2],
                            values: [ .1495, .15, .1633 ]
                        }, {
                            source: g.columns[3],
                            values: [ 3, 15, 27 ],
                            min: 0,
                            max: 30
                        } ])
                    }
                } ]
            }), d.onResizing({
                height: 100,
                width: 200
            }, 0);
            var f, h, i;
            b ? (f = 3.5, h = 2.5, i = 1.5) : (f = 10, h = 7.5, i = 4), setTimeout(function() {
                var a = parseFloat($(".scatterChart .mainGraphicsContext .dot")[0].getAttribute("r"));
                expect(a).toBeCloseTo(f, -.31);
                var b = parseFloat($(".scatterChart .mainGraphicsContext .dot")[1].getAttribute("r"));
                expect(b).toBeCloseTo(h, -.31);
                var d = parseFloat($(".scatterChart .mainGraphicsContext .dot")[2].getAttribute("r"));
                expect(d).toBeCloseTo(i, -.31), c();
            }, n);
        });
    }
    function c(b) {
        var c, d, e = {
            columns: [ {
                displayName: "col1",
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                type: h.describeDataType(1),
                format: "0.000"
            }, {
                displayName: "col3",
                isMeasure: !1,
                type: h.describeDataType(4),
                format: "d"
            } ]
        }, f = a.mocks.createVisualHostServices(), g = powerbi.Prototype.inherit(e);
        g.objects = {
            categoryLabels: {
                show: !0
            },
            labels: {
                show: !0,
                labelPrecision: 0
            }
        };
        var i = powerbi.Prototype.inherit(e);
        i.objects = {
            categoryLabels: {
                show: !1
            }
        }, beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), d = a.helpers.testDom("500", "500"), 
            c = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            c.init({
                element: d,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: b
                }
            });
        }), it("scatter chart show labels validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBeGreaterThan(0), 
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().text()).toBe("a"), 
                a();
            }, n);
        }), it("scatter chart labels style validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: g.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".scatterChart .axisGraphicsContext .mainGraphicsContext .dot").first().css("fill"), c = $(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().css("fill");
                expect(l.convertFromRGBorHexToHex(c).toUpperCase()).toBe(l.convertFromRGBorHexToHex(b).toUpperCase()), 
                a();
            }, n);
        }), it("scatter chart labels custom style validation", function(a) {
            var b = {
                solid: {
                    color: "rgb(255, 0, 0)"
                }
            }, d = powerbi.Prototype.inherit(e);
            d.objects = {
                categoryLabels: {
                    show: !0,
                    color: b
                },
                labels: {
                    show: !0,
                    labelPrecision: 0
                }
            }, c.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: d.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = $(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().css("fill");
                expect(l.convertFromRGBorHexToHex(b).toUpperCase()).toBe("#FF0000"), a();
            }, n);
        }), it("scatter chart hide labels validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: i,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: i.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ],
                            subtotal: 246500
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(0), 
                a();
            }, n);
        }), it("scatter chart data labels multi-series", function(b) {
            var d = {
                columns: [ {
                    displayName: "series",
                    isMeasure: !1,
                    queryName: "series",
                    roles: {
                        Category: !0,
                        Series: !0
                    },
                    type: h.describeDataType(2048)
                }, {
                    displayName: "value1",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ],
                objects: {
                    categoryLabels: {
                        show: !0
                    },
                    valueAxis: {
                        start: 0,
                        end: 100
                    },
                    categoryAxis: {
                        start: -100,
                        end: 300
                    }
                }
            }, e = [ "a", "b", "c" ], f = e.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), g = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "series"
            }), i = j.createValueColumns([ {
                source: d.columns[1],
                values: [ 0, null, null ],
                identity: f[0]
            }, {
                source: d.columns[2],
                values: [ 1, null, null ],
                identity: f[0]
            }, {
                source: d.columns[3],
                values: [ 10, null, null ],
                identity: f[0]
            }, {
                source: d.columns[4],
                values: [ null, 100, null ],
                identity: f[1]
            }, {
                source: d.columns[5],
                values: [ null, 2, null ],
                identity: f[1]
            }, {
                source: d.columns[6],
                values: [ null, 20, null ],
                identity: f[1]
            }, {
                source: d.columns[7],
                values: [ null, null, 200 ],
                identity: f[2]
            }, {
                source: d.columns[8],
                values: [ null, null, 3 ],
                identity: f[2]
            }, {
                source: d.columns[9],
                values: [ null, null, 30 ],
                identity: f[2]
            } ], [ g ]);
            i.source = d.columns[0], c.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: e,
                            identity: f,
                            identityFields: [ g ]
                        } ],
                        values: i
                    }
                } ]
            }), setTimeout(function() {
                var a = $(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels"), c = $(".scatterChart .axisGraphicsContext .mainGraphicsContext .dot");
                expect(c.length).toBe(a.length);
                for (var d = 0; d < c.length; d++) {
                    var e = c.eq(d).css("fill"), f = a.eq(d).css("fill");
                    expect(l.convertFromRGBorHexToHex(e)).toBe(l.convertFromRGBorHexToHex(f));
                }
                b();
            }, n);
        }), it("scatter chart with nulls dom validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ null, 10, null, 15, null ],
                            subtotal: 20
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(2), 
                a();
            }, n);
        }), it("change scatter chart dom data label validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: g.columns[1],
                            values: [ 5e5, 495e3, 49e4, 48e4, 5e5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(4), 
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().text()).toBe("a"), 
                c.onDataChanged({
                    dataViews: [ {
                        metadata: g,
                        categorical: {
                            categories: [ {
                                source: e.columns[0],
                                values: [ "q", "w", "r", "t" ]
                            } ],
                            values: j.createValueColumns([ {
                                source: g.columns[1],
                                values: [ 400, 500, 300, 200 ]
                            } ])
                        }
                    } ]
                }), setTimeout(function() {
                    expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(4), 
                    expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").first().text()).toBe("q"), 
                    a();
                }, n);
            }, n);
        }), it("empty scatter chart dom data labels validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: []
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: []
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").length).toBe(0), 
                a();
            }, n);
        }), it("scatter chart with single point dom data label validation", function(a) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: g,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 4 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .mainGraphicsContext .data-labels").text()).toBe("a"), 
                a();
            }, n);
        });
    }
    function d(a, b, c) {
        expect(c.interactivityService.behavior.crosshair.select(".horizontal").attr("y1")).toBe(b.toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".horizontal").attr("y2")).toBe(b.toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".vertical").attr("x1")).toBe(a.toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".vertical").attr("x2")).toBe(a.toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".horizontal").attr("x1")).toBe("0"), 
        expect(c.interactivityService.behavior.crosshair.select(".horizontal").attr("x2")).toBe(c.mainGraphicsContext.attr("width").toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".vertical").attr("y1")).toBe(c.mainGraphicsContext.attr("height").toString()), 
        expect(c.interactivityService.behavior.crosshair.select(".vertical").attr("y2")).toBe("0"), 
        expect(c.mainGraphicsContext.selectAll("circle.dot").filter(function(a, b) {
            return 140 !== a.x && 240 !== a.y;
        }).attr("class")).toBe("dot notSelected"), expect(c.mainGraphicsContext.selectAll("circle.dot").filter(function(a, b) {
            return 140 === a.x && 240 === a.y;
        }).attr("class")).toBe("dot selected"), expect($(".interactive-legend").find(".title").text().trim()).toMatch("d"), 
        expect($(".interactive-legend").find(".item").find(".itemName")[0].innerText.trim()).toBe("col2"), 
        expect($(".interactive-legend").find(".item").find(".itemName")[1].innerText.trim()).toBe("col4"), 
        expect($(".interactive-legend").find(".item").find(".itemName")[2].innerText.trim()).toBe("col3"), 
        expect($(".interactive-legend").find(".item").find(".itemMeasure")[0].innerText.trim()).toBe("140"), 
        expect($(".interactive-legend").find(".item").find(".itemMeasure")[1].innerText.trim()).toBe("340"), 
        expect($(".interactive-legend").find(".item").find(".itemMeasure")[2].innerText.trim()).toBe("240");
    }
    function e(b, c, d, e) {
        var f, g = a.helpers.testDom(b, c);
        f = e ? powerbi.visuals.visualPluginFactory.createMobile().getPlugin("scatterChart").create() : powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
        f.init({
            element: g,
            host: a.mocks.createVisualHostServices(),
            style: powerbi.visuals.visualStyles.create(),
            viewport: {
                height: g.height(),
                width: g.width()
            },
            animation: {
                transitionImmediate: !0
            },
            interactivity: {
                isInteractiveLegend: d
            }
        });
        var i = {
            columns: [ {
                displayName: "series",
                isMeasure: !1,
                queryName: "series",
                roles: {
                    Category: !0,
                    Series: !0
                },
                type: h.describeDataType(2048)
            }, {
                displayName: "value1",
                groupName: "a",
                isMeasure: !0,
                queryName: "x",
                roles: {
                    X: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value2",
                groupName: "a",
                isMeasure: !0,
                queryName: "size",
                roles: {
                    Size: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value3",
                groupName: "a",
                isMeasure: !0,
                queryName: "y",
                roles: {
                    Y: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value1",
                groupName: "b",
                isMeasure: !0,
                queryName: "x",
                roles: {
                    X: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value2",
                groupName: "b",
                isMeasure: !0,
                queryName: "size",
                roles: {
                    Size: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value3",
                groupName: "b",
                isMeasure: !0,
                queryName: "y",
                roles: {
                    Y: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value1",
                groupName: "c",
                isMeasure: !0,
                queryName: "x",
                roles: {
                    X: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value2",
                groupName: "c",
                isMeasure: !0,
                queryName: "size",
                roles: {
                    Size: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "value3",
                groupName: "c",
                isMeasure: !0,
                queryName: "y",
                roles: {
                    Y: !0
                },
                type: h.describeDataType(1)
            } ],
            objects: {
                categoryLabels: {
                    show: !0
                }
            }
        }, k = [ "a", "b", "c" ], l = k.map(function(b) {
            return a.mocks.dataViewScopeIdentity(b);
        }), m = powerbi.data.SQExprBuilder.fieldDef({
            schema: "s",
            entity: "e",
            column: "series"
        }), n = j.createValueColumns([ {
            source: i.columns[1],
            values: [ 0, null, null ],
            identity: l[0]
        }, {
            source: i.columns[2],
            values: [ 1, null, null ],
            identity: l[0]
        }, {
            source: i.columns[3],
            values: [ 10, null, null ],
            identity: l[0]
        }, {
            source: i.columns[4],
            values: [ null, 100, null ],
            identity: l[1]
        }, {
            source: i.columns[5],
            values: [ null, 2, null ],
            identity: l[1]
        }, {
            source: i.columns[6],
            values: [ null, 20, null ],
            identity: l[1]
        }, {
            source: i.columns[7],
            values: [ null, null, 200 ],
            identity: l[2]
        }, {
            source: i.columns[8],
            values: [ null, null, 3 ],
            identity: l[2]
        }, {
            source: i.columns[9],
            values: [ null, null, 30 ],
            identity: l[2]
        } ], [ m ]);
        n.source = i.columns[0], f.onDataChanged({
            dataViews: [ {
                metadata: i,
                categorical: {
                    categories: [ {
                        source: i.columns[0],
                        values: k,
                        identity: l,
                        identityFields: [ m ]
                    } ],
                    values: n
                }
            } ]
        });
    }
    var f = powerbi.visuals.ScatterChart, g = jsCommon.ArrayExtensions, h = powerbi.data.dsr.DataShapeUtility, i = powerbi.data.DataViewPivotCategorical, j = powerbi.data.DataViewTransform, k = powerbi.data.SemanticType, l = a.utils.ColorUtility, m = powerbi.axisType, n = 10, o = powerbi.visuals.visualPluginFactory.MobileVisualPluginService.MinHeightAxesVisible, p = o + 1, q = o - 1, r = p.toString(), s = q.toString(), t = powerbi.visuals.visualPluginFactory.MobileVisualPluginService.MinHeightLegendVisible, u = t + 1, v = t - 1, w = u.toString(), x = v.toString();
    describe("ScatterChart", function() {
        var a = {
            displayName: "year",
            type: h.describeDataType(2048)
        }, b = {
            displayName: "sales",
            isMeasure: !0,
            type: h.describeDataType(k.Integer)
        };
        it("ScatterChart registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").capabilities).toBe(powerbi.visuals.scatterChartCapabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.scatterChartCapabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.scatterChartCapabilities.dataRoles).toBeDefined();
        }), it("Capabilities should not suppressDefaultTitle", function() {
            expect(powerbi.visuals.scatterChartCapabilities.suppressDefaultTitle).toBeUndefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.scatterChartCapabilities.objects)).toEqual(powerbi.visuals.scatterChartProps.general.formatString);
        }), it("preferred capability does not support zero rows", function() {
            var c = {
                columns: [ {
                    displayName: "Year"
                }, {
                    displayName: "Value",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: a,
                        values: []
                    } ],
                    values: j.createValueColumns([ {
                        source: b,
                        values: []
                    } ])
                }
            };
            expect(powerbi.DataViewAnalysis.supports(d, powerbi.visuals.scatterChartCapabilities.dataViewMappings[0], !0)).toBe(!1);
        }), it("preferred capability does not support one row", function() {
            var c = {
                columns: [ {
                    displayName: "Year"
                }, {
                    displayName: "Value",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: a,
                        values: [ 2012, 2013 ]
                    } ],
                    values: j.createValueColumns([ {
                        source: b,
                        values: [ 200 ]
                    } ])
                }
            };
            expect(powerbi.DataViewAnalysis.supports(d, powerbi.visuals.scatterChartCapabilities.dataViewMappings[0], !0)).toBe(!1);
        });
    }), describe("scatterChart DOM validation", function() {
        return b(!1);
    }), describe("interactive scatterChart DOM validation", function() {
        return b(!0);
    }), describe("scatterChart Data Labels validation", function() {
        return c(!1);
    }), describe("interactive scatterChart Data Labels validation", function() {
        return c(!0);
    }), describe("scatterChart bubble radius validation", function() {
        it("scatter chart getBubblePixelAreaSizeRange validation", function() {
            var a = {
                height: 500,
                width: 500
            }, b = f.getBubblePixelAreaSizeRange(a, 100, 200);
            expect(b.minRange).toBe(278), expect(b.maxRange).toBe(556), expect(b.delta).toBe(278);
        }), it("scatter chart projectSizeToPixel validation", function() {
            var b = a.helpers.testDom("500", "500"), c = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create();
            c.init({
                element: b,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: b.height(),
                    width: b.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
            var d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: e
                        } ],
                        values: j.createValueColumns([ {
                            source: d.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        }, {
                            source: d.columns[2],
                            values: [ 210, 220, 230, 240, 250 ]
                        }, {
                            source: d.columns[3],
                            values: [ 310, 320, 330, 340, 350 ]
                        } ])
                    }
                } ]
            });
            var g = {
                minRange: 310,
                maxRange: 350,
                delta: 40
            }, h = {
                minRange: 278,
                maxRange: 556,
                delta: 278
            }, i = f.projectSizeToPixels(310, g, h);
            expect(i).toBe(19), i = f.projectSizeToPixels(320, g, h), expect(i).toBe(21), i = f.projectSizeToPixels(330, g, h), 
            expect(i).toBe(23);
        });
    }), describe("scatterChart converter validation", function() {
        it("scatter chart dataView with role validation", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "series",
                    isMeasure: !1,
                    queryName: "series",
                    roles: {
                        Category: !0,
                        Series: !0
                    },
                    type: h.describeDataType(2048)
                }, {
                    displayName: "value1",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ],
                objects: {
                    categoryLabels: {
                        show: !0
                    }
                }
            }, d = [ "a", "b", "c" ], e = d.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), i = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "series"
            }), k = j.createValueColumns([ {
                source: c.columns[1],
                values: [ 0, null, null ],
                identity: e[0]
            }, {
                source: c.columns[2],
                values: [ 1, null, null ],
                identity: e[0]
            }, {
                source: c.columns[3],
                values: [ 10, null, null ],
                identity: e[0]
            }, {
                source: c.columns[4],
                values: [ null, 100, null ],
                identity: e[1]
            }, {
                source: c.columns[5],
                values: [ null, 2, null ],
                identity: e[1]
            }, {
                source: c.columns[6],
                values: [ null, 20, null ],
                identity: e[1]
            }, {
                source: c.columns[7],
                values: [ null, null, 200 ],
                identity: e[2]
            }, {
                source: c.columns[8],
                values: [ null, null, 3 ],
                identity: e[2]
            }, {
                source: c.columns[9],
                values: [ null, null, 30 ],
                identity: e[2]
            } ], [ i ]);
            k.source = c.columns[0];
            var l = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: d,
                        identity: e
                    } ],
                    values: k
                }
            }, m = powerbi.visuals.visualStyles.create().colorPalette.dataColors, n = f.converter(l, b, m), o = n.dataPoints;
            expect(o[0].category).toBe("a"), expect(o[0].x).toBe(0), expect(o[0].y).toBe(10), 
            expect(o[0].fill).toBeDefined(), expect(o[0].fill).not.toBe(o[1].fill), expect(n.xCol).toBe(c.columns[1]), 
            expect(n.size).toBe(c.columns[2]), expect(n.yCol).toBe(c.columns[3]), expect(n.legendData.dataPoints.map(function(a) {
                return a.label;
            })).toEqual([ "a", "b", "c" ]);
            var p = n.legendData.dataPoints.map(function(a) {
                return a.color;
            });
            expect(p).toEqual(g.distinct(p)), expect(n.legendData.title).toBe("series"), expect(o[0].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "a"
            }, {
                displayName: "value1",
                value: "0"
            }, {
                displayName: "value3",
                value: "10"
            }, {
                displayName: "value2",
                value: "1"
            } ]), expect(o[1].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "b"
            }, {
                displayName: "value1",
                value: "100"
            }, {
                displayName: "value3",
                value: "20"
            }, {
                displayName: "value2",
                value: "2"
            } ]), expect(o[2].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "c"
            }, {
                displayName: "value1",
                value: "200"
            }, {
                displayName: "value3",
                value: "30"
            }, {
                displayName: "value2",
                value: "3"
            } ]);
        }), it("scatter chart null legend", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "series",
                    isMeasure: !1,
                    queryName: "series",
                    roles: {
                        Category: !0,
                        Series: !0
                    },
                    type: h.describeDataType(2048)
                }, {
                    displayName: "value1",
                    groupName: null,
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: null,
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: null,
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "x",
                    roles: {
                        X: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "size",
                    roles: {
                        Size: !0
                    },
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "y",
                    roles: {
                        Y: !0
                    },
                    type: h.describeDataType(1)
                } ],
                objects: {
                    categoryLabels: {
                        show: !0
                    }
                }
            }, d = [ null, "b", "c" ], e = d.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), i = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "series"
            }), k = j.createValueColumns([ {
                source: c.columns[1],
                values: [ 0, null, null ],
                identity: e[0]
            }, {
                source: c.columns[2],
                values: [ 1, null, null ],
                identity: e[0]
            }, {
                source: c.columns[3],
                values: [ 10, null, null ],
                identity: e[0]
            }, {
                source: c.columns[4],
                values: [ null, 100, null ],
                identity: e[1]
            }, {
                source: c.columns[5],
                values: [ null, 2, null ],
                identity: e[1]
            }, {
                source: c.columns[6],
                values: [ null, 20, null ],
                identity: e[1]
            }, {
                source: c.columns[7],
                values: [ null, null, 200 ],
                identity: e[2]
            }, {
                source: c.columns[8],
                values: [ null, null, 3 ],
                identity: e[2]
            }, {
                source: c.columns[9],
                values: [ null, null, 30 ],
                identity: e[2]
            } ], [ i ]);
            k.source = c.columns[0];
            var l = k.grouped();
            l[0].objects = {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#41BEE1"
                        }
                    }
                }
            }, k.grouped = function() {
                return l;
            };
            var m = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: d,
                        identity: e
                    } ],
                    values: k
                }
            }, n = powerbi.visuals.visualStyles.create().colorPalette.dataColors, o = f.converter(m, b, n), p = o.legendData.dataPoints;
            expect(p[0].label).toBe(powerbi.visuals.valueFormatter.format(null)), expect(p[0].color).toBe("#41BEE1");
            var q = p.map(function(a) {
                return a.color;
            });
            expect(q).toEqual(g.distinct(q));
            var r = o.dataPoints;
            expect(r[0].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "(Blank)"
            }, {
                displayName: "value1",
                value: "0"
            }, {
                displayName: "value3",
                value: "10"
            }, {
                displayName: "value2",
                value: "1"
            } ]), expect(r[1].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "b"
            }, {
                displayName: "value1",
                value: "100"
            }, {
                displayName: "value3",
                value: "20"
            }, {
                displayName: "value2",
                value: "2"
            } ]), expect(r[2].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "c"
            }, {
                displayName: "value1",
                value: "200"
            }, {
                displayName: "value3",
                value: "30"
            }, {
                displayName: "value2",
                value: "3"
            } ]);
        }), it("scatter chart dataView without role validation", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "series",
                    isMeasure: !1,
                    queryName: "series",
                    type: h.describeDataType(2048)
                }, {
                    displayName: "value1",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "x",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "y",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "a",
                    isMeasure: !0,
                    queryName: "size",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "x",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "y",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "b",
                    isMeasure: !0,
                    queryName: "size",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value1",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "x",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value2",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "y",
                    type: h.describeDataType(1)
                }, {
                    displayName: "value3",
                    groupName: "c",
                    isMeasure: !0,
                    queryName: "size",
                    type: h.describeDataType(1)
                } ],
                objects: {
                    categoryLabels: {
                        show: !0
                    }
                }
            }, d = [ "a", "b", "c" ], e = d.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), i = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "series"
            }), k = j.createValueColumns([ {
                source: c.columns[1],
                values: [ 0, null, null ],
                identity: e[0]
            }, {
                source: c.columns[2],
                values: [ 10, null, null ],
                identity: e[0]
            }, {
                source: c.columns[3],
                values: [ 1, null, null ],
                identity: e[0]
            }, {
                source: c.columns[4],
                values: [ null, 100, null ],
                identity: e[1]
            }, {
                source: c.columns[5],
                values: [ null, 20, null ],
                identity: e[1]
            }, {
                source: c.columns[6],
                values: [ null, 2, null ],
                identity: e[1]
            }, {
                source: c.columns[7],
                values: [ null, null, 200 ],
                identity: e[2]
            }, {
                source: c.columns[8],
                values: [ null, null, 30 ],
                identity: e[2]
            }, {
                source: c.columns[9],
                values: [ null, null, 3 ],
                identity: e[2]
            } ], [ i ]);
            k.source = c.columns[0];
            var l = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: d,
                        identity: e
                    } ],
                    values: k
                }
            }, m = powerbi.visuals.visualStyles.create().colorPalette.dataColors, n = f.converter(l, b, m), o = n.dataPoints;
            expect(o[0].category).toBe("a"), expect(o[0].x).toBe(0), expect(o[0].y).toBe(10), 
            expect(o[0].fill).toBeDefined(), expect(o[0].fill).not.toBe(o[1].fill);
            var p = n.legendData.dataPoints;
            expect(p.map(function(a) {
                return a.label;
            })).toEqual([ "a", "b", "c" ]);
            var q = p.map(function(a) {
                return a.color;
            });
            expect(q).toEqual(g.distinct(q)), expect(o[0].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "a"
            }, {
                displayName: "value1",
                value: "0"
            }, {
                displayName: "value2",
                value: "10"
            }, {
                displayName: "value3",
                value: "1"
            } ]), expect(o[1].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "b"
            }, {
                displayName: "value1",
                value: "100"
            }, {
                displayName: "value2",
                value: "20"
            }, {
                displayName: "value3",
                value: "2"
            } ]), expect(o[2].tooltipInfo).toEqual([ {
                displayName: "series",
                value: "c"
            }, {
                displayName: "value1",
                value: "200"
            }, {
                displayName: "value2",
                value: "30"
            }, {
                displayName: "value3",
                value: "3"
            } ]);
        }), it("scatter chart dataView with min/max", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 310, 320, 330, 340, 350 ],
                        min: 310,
                        max: 350
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i[0].category).toBe("a"), expect(i[0].x).toBe(110), expect(i[0].y).toBe(210), 
            expect(f.getBubbleRadius(i[0].radius, h.sizeRange, b)).toBe(48.5);
        }), it("scatter chart dataView with minLocal/maxLocal", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 310, 320, 330, 340, 350 ],
                        minLocal: 310,
                        maxLocal: 350
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i[0].category).toBe("a"), expect(i[0].x).toBe(110), expect(i[0].y).toBe(210), 
            expect(f.getBubbleRadius(i[0].radius, h.sizeRange, b)).toBe(48.5), expect(i[0].fill).toBeDefined();
        }), it("scatter chart dataView without min/minLocal/max/maxLocal", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 310, 320, 330, 340, 350 ]
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i[0].category).toBe("a"), expect(i[0].x).toBe(110), expect(i[0].y).toBe(210), 
            expect(f.getBubbleRadius(i[0].radius, h.sizeRange, b)).toBe(48.5), expect(i[0].fill).toBeDefined();
        }), it("scatterChart multi-series", function() {
            var a = {
                height: 500,
                width: 500
            }, b = (powerbi.data.SelectKind, {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }), c = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: c,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, b, "s").dataView, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, a, g).dataPoints;
            expect(h[0].category).toBe("2012"), expect(h[0].x).toBe(150), expect(h[0].y).toBe(30), 
            expect(h[0].fill).toBeDefined(), expect(h[0].fill).not.toBe(h[3].fill), expect(h[0].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2012"
            }, {
                displayName: "",
                value: "Canada"
            }, {
                displayName: "",
                value: "150.00"
            }, {
                displayName: "",
                value: "30"
            } ]), expect(h[1].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2012"
            }, {
                displayName: "",
                value: "United States"
            }, {
                displayName: "",
                value: "100.00"
            }, {
                displayName: "",
                value: "300"
            } ]), expect(h[2].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2011"
            }, {
                displayName: "",
                value: "Canada"
            }, {
                displayName: "",
                value: "177.00"
            }, {
                displayName: "",
                value: "25"
            } ]), expect(h[3].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2011"
            }, {
                displayName: "",
                value: "United States"
            }, {
                displayName: "",
                value: "149.00"
            }, {
                displayName: "",
                value: "250"
            } ]), expect(h[4].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2010"
            }, {
                displayName: "",
                value: "Canada"
            }, {
                displayName: "",
                value: "157.00"
            }, {
                displayName: "",
                value: "28"
            } ]), expect(h[5].tooltipInfo).toEqual([ {
                displayName: "",
                value: "2010"
            }, {
                displayName: "",
                value: "United States"
            }, {
                displayName: "",
                value: "144.00"
            }, {
                displayName: "",
                value: "280"
            } ]);
        }), it("scatterChart multi-series with default color", function() {
            var a = {
                height: 500,
                width: 500
            }, b = (powerbi.data.SelectKind, {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }), c = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: c,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, b, "s").dataView, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = "#FF0000";
            e.metadata = {
                columns: null,
                objects: {
                    dataPoint: {
                        defaultColor: {
                            solid: {
                                color: h
                            }
                        }
                    }
                }
            };
            var i = f.converter(e, a, g, null).dataPoints;
            expect(i[0].category).toBe("2012"), expect(i[0].x).toBe(150), expect(i[0].y).toBe(30), 
            expect(i[0].fill).toBe(h), expect(i[0].fill).toBe(i[2].fill), expect(i[0].fill).toBe(i[3].fill);
        }), it("scatterChart multi-series with explicit colors", function() {
            var a = {
                height: 500,
                width: 500
            }, b = (powerbi.data.SelectKind, {
                DataShapes: [ {
                    Id: "DS0",
                    SecondaryHierarchy: [ {
                        Id: "DM1",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'Canada'"
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G1",
                                Value: "'United States'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "DM0",
                        Instances: [ {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2012L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "150D"
                                }, {
                                    Id: "M1",
                                    Value: "30L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "100D"
                                }, {
                                    Id: "M1",
                                    Value: "300L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2011L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "177D"
                                }, {
                                    Id: "M1",
                                    Value: "25L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "149D"
                                }, {
                                    Id: "M1",
                                    Value: "250L"
                                } ]
                            } ]
                        }, {
                            Calculations: [ {
                                Id: "G0",
                                Value: "2010L"
                            } ],
                            Intersections: [ {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "157D"
                                }, {
                                    Id: "M1",
                                    Value: "28L"
                                } ]
                            }, {
                                Id: "I0",
                                Calculations: [ {
                                    Id: "M0",
                                    Value: "144D"
                                }, {
                                    Id: "M1",
                                    Value: "280L"
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }), c = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "G0",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "M0",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "M1",
                    Format: "#,0"
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "G1"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: c,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 3
                            } ]
                        } ]
                    }
                }
            }, b, "s").dataView, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = e.categorical.values.grouped();
            h[0].objects = {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "red"
                        }
                    }
                }
            }, h[1].objects = {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "green"
                        }
                    }
                }
            }, e.categorical.values.grouped = function() {
                return h;
            };
            var i = f.converter(e, a, g, null).dataPoints;
            expect(i[0].fill).toBe("red"), expect(i[1].fill).toBe("green");
        }), it("scatterChart categorical with explicit colors", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0
                }, {
                    displayName: "col4",
                    isMeasure: !0
                } ]
            }, d = [ "a", "b", "c", "d", "e" ], e = d.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), g = powerbi.data.SQExprBuilder.fieldDef({
                schema: "s",
                entity: "e",
                column: "category"
            }), h = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: d,
                        identity: e,
                        identityFields: [ g ],
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE0"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE1"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE2"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE3"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE4"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 310, 320, 330, 340, 350 ]
                    } ])
                }
            }, i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, k = f.converter(h, b, i, null).dataPoints;
            expect(k[0].fill).toBe("#41BEE0"), expect(k[1].fill).toBe("#41BEE1"), expect(k[2].fill).toBe("#41BEE2"), 
            expect(k[3].fill).toBe("#41BEE3"), expect(k[4].fill).toBe("#41BEE4");
        }), it("scatterChart multi-series with min/max", function() {
            var a = {
                height: 500,
                width: 500
            }, b = (powerbi.data.SelectKind, {
                DataShapes: [ {
                    Id: "Chart2",
                    Calculations: [ {
                        Id: "MinSize",
                        Value: "1L"
                    }, {
                        Id: "MaxSize",
                        Value: "404L"
                    } ],
                    SecondaryHierarchy: [ {
                        Id: "SeriesMember",
                        Instances: [ {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Equipment Failure'",
                                        Key: "2Equipment Failure"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label2",
                                Value: "'Equipment Failure'"
                            } ]
                        }, {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Scheduled Outage'",
                                        Key: "2Scheduled Outage"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label2",
                                Value: "'Scheduled Outage'"
                            } ]
                        }, {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Trees/Vegetation'",
                                        Key: "2Trees/Vegetation"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label2",
                                Value: "'Trees/Vegetation'"
                            } ]
                        }, {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Under Investigation'",
                                        Key: "2Under Investigation"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label2",
                                Value: "'Under Investigation'"
                            } ]
                        } ]
                    } ],
                    PrimaryHierarchy: [ {
                        Id: "CategoryMember",
                        Instances: [ {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Bellevue, WA'",
                                        Key: "2Bellevue, WA"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label",
                                Value: "'Bellevue, WA'"
                            } ],
                            Intersections: [ {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: null
                                }, {
                                    Id: "Y",
                                    Value: null
                                }, {
                                    Id: "Size",
                                    Value: null
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: null
                                }, {
                                    Id: "Y",
                                    Value: null
                                }, {
                                    Id: "Size",
                                    Value: null
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: "126439L"
                                }, {
                                    Id: "Y",
                                    Value: "4244.0000000037253D"
                                }, {
                                    Id: "Size",
                                    Value: "1L"
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: "126439L"
                                }, {
                                    Id: "Y",
                                    Value: "239.99999999650754D"
                                }, {
                                    Id: "Size",
                                    Value: "1L"
                                } ]
                            } ]
                        }, {
                            Group: {
                                ScopeId: {
                                    ScopeValues: [ {
                                        Value: "'Deming, WA'",
                                        Key: "2Deming, WA"
                                    } ]
                                }
                            },
                            Calculations: [ {
                                Id: "Label",
                                Value: "'Deming, WA'"
                            } ],
                            Intersections: [ {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: null
                                }, {
                                    Id: "Y",
                                    Value: null
                                }, {
                                    Id: "Size",
                                    Value: null
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: "353L"
                                }, {
                                    Id: "Y",
                                    Value: "8078.00000000163D"
                                }, {
                                    Id: "Size",
                                    Value: "4L"
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: null
                                }, {
                                    Id: "Y",
                                    Value: null
                                }, {
                                    Id: "Size",
                                    Value: null
                                } ]
                            }, {
                                Id: "Cell",
                                Calculations: [ {
                                    Id: "X",
                                    Value: null
                                }, {
                                    Id: "Y",
                                    Value: null
                                }, {
                                    Id: "Size",
                                    Value: null
                                } ]
                            } ]
                        } ]
                    } ],
                    IsComplete: !0
                } ]
            }), c = {
                Entity: "t",
                Property: "p1"
            }, d = {
                Entity: "t",
                Property: "p2"
            }, e = powerbi.data.dsr.readDsr({
                Select: [ {
                    Kind: 1,
                    Depth: 0,
                    Value: "Label",
                    Format: "0"
                }, {
                    Kind: 2,
                    Value: "X",
                    Format: "#,0.00"
                }, {
                    Kind: 2,
                    Value: "Y",
                    Format: "#,0"
                }, {
                    Kind: 2,
                    Value: "Size",
                    Format: "#,0",
                    Min: [ "MinSize" ],
                    Max: [ "MaxSize" ]
                }, {
                    Kind: 1,
                    SecondaryDepth: 0,
                    Value: "Label2"
                } ],
                Expressions: {
                    Primary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: c,
                                Select: 0
                            } ]
                        } ]
                    },
                    Secondary: {
                        Groupings: [ {
                            Keys: [ {
                                Source: d,
                                Select: 4
                            } ]
                        } ]
                    },
                    Aggregates: {
                        Select: 3,
                        Kind: 3
                    }
                }
            }, b, "s").dataView, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, a, g).dataPoints;
            expect(h[0].category).toBe("Bellevue, WA"), expect(h[0].x).toBe(126439), expect(h[0].y).toBe(4244.000000003725), 
            expect(h[0].fill).toBeDefined(), expect(h[0].fill).not.toBe(h[2].fill);
        }), it("scatter chart dataView that should pivot categories", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "",
                    queryName: "$s1",
                    index: 0
                }, {
                    displayName: "",
                    queryName: "$s2",
                    isMeasure: !0,
                    index: 1
                }, {
                    displayName: "",
                    queryName: "$s3",
                    isMeasure: !0,
                    index: 2
                }, {
                    displayName: "",
                    queryName: "$s4",
                    isMeasure: !0,
                    index: 3
                } ]
            }, d = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ]
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220 ]
                    }, {
                        source: c.columns[3],
                        values: [ 310, 320 ]
                    } ])
                }
            }, e = j.apply({
                prototype: d,
                objectDescriptors: powerbi.visuals.plugins.scatterChart.capabilities.objects,
                dataViewMappings: powerbi.visuals.plugins.scatterChart.capabilities.dataViewMappings,
                transforms: {
                    selects: [ {
                        displayName: "col1",
                        queryName: "$s1",
                        roles: {
                            Series: !0
                        }
                    }, {
                        displayName: "col2",
                        queryName: "$s2",
                        roles: {
                            Y: !0
                        }
                    }, {
                        displayName: "col3",
                        queryName: "$s3",
                        roles: {
                            Size: !0
                        }
                    }, {
                        displayName: "col4",
                        queryName: "$s4",
                        roles: {
                            X: !0
                        }
                    } ]
                },
                colorAllocatorFactory: powerbi.visuals.createColorAllocatorFactory()
            })[0];
            expect(e).not.toBe(d);
            var g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g).dataPoints;
            expect(h[0].category).toBe(null), expect(h[0].fill).not.toBe(h[1].fill), expect(h[0].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "a"
            }, {
                displayName: "col4",
                value: "310"
            }, {
                displayName: "col2",
                value: "110"
            }, {
                displayName: "col3",
                value: "210"
            } ]), expect(h[1].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "b"
            }, {
                displayName: "col4",
                value: "320"
            }, {
                displayName: "col2",
                value: "120"
            }, {
                displayName: "col3",
                value: "220"
            } ]);
        }), it("scatter chart bubble color category no size", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i[0].fill).toBe(i[1].fill), expect(i[0].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "a"
            }, {
                displayName: "col3",
                value: "210"
            }, {
                displayName: "col2",
                value: "110"
            } ]), expect(i[1].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "b"
            }, {
                displayName: "col3",
                value: "220"
            }, {
                displayName: "col2",
                value: "120"
            } ]), expect(i[2].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "c"
            }, {
                displayName: "col3",
                value: "230"
            }, {
                displayName: "col2",
                value: "130"
            } ]), expect(i[3].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "d"
            }, {
                displayName: "col3",
                value: "240"
            }, {
                displayName: "col2",
                value: "140"
            } ]), expect(i[4].tooltipInfo).toEqual([ {
                displayName: "col1",
                value: "e"
            }, {
                displayName: "col3",
                value: "250"
            }, {
                displayName: "col2",
                value: "150"
            } ]);
        }), it("scatter chart bubble color category no size default color", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = "#FF0000";
            c.objects = {
                dataPoint: {
                    defaultColor: {
                        solid: {
                            color: d
                        }
                    }
                }
            };
            var e = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], g = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: e
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    } ])
                }
            }, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = f.converter(g, b, h, null), k = i.dataPoints;
            expect(k[0].fill).toBe(d);
        }), it("scatter chart null X axes values", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d,
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE0"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE1"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE2"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE3"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE4"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ null, null, null, null, null ]
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i.length).toBe(0);
        }), it("scatter chart null Y axes values", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ null, null, null, null, null ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 110, 120, 130, 140, 150 ]
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i.length).toBe(0);
        }), it("scatter chart null X measure", function() {
            var a = {
                height: 500,
                width: 500
            }, b = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                } ]
            }, c = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "a", "b", "c", "d", "e" ]
                    } ],
                    values: j.createValueColumns([ {
                        source: b.columns[1],
                        values: null
                    }, {
                        source: b.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    } ])
                }
            }, d = powerbi.visuals.visualStyles.create().colorPalette.dataColors, e = f.converter(c, a, d), g = e.dataPoints;
            expect(g.length).toBe(0);
        }), it("scatter chart null Y measure", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d,
                        objects: [ {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE0"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE1"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE2"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE3"
                                    }
                                }
                            }
                        }, {
                            dataPoint: {
                                fill: {
                                    solid: {
                                        color: "#41BEE4"
                                    }
                                }
                            }
                        } ]
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 210, 220, 230, 240, 250 ]
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i[0].category).toBe("a"), expect(i[1].fill).toBe("#41BEE1"), expect(i[0].x).toBe(210), 
            expect(i[0].y).toBe(0);
        }), it("scatter chart null X and Y measure", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: null
                    } ])
                }
            }, g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, h = f.converter(e, b, g), i = h.dataPoints;
            expect(i.length).toBe(0);
        }), it("scatter chart converter data labels default values", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a") ], e = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a" ],
                        identity: d
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210 ]
                    } ])
                }
            }, g = powerbi.visuals.dataLabelUtils.getDefaultPointLabelSettings(), h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = f.converter(e, b, h);
            expect(i.dataLabelsSettings).toEqual(g);
        }), it("scatter chart bubble gradient color", function() {
            var b = {
                height: 500,
                width: 500
            }, c = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0,
                    roles: {
                        Y: !0
                    }
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        X: !0
                    }
                }, {
                    displayName: "col4",
                    isMeasure: !0,
                    roles: {
                        Size: !0
                    }
                }, {
                    displayName: "col5",
                    isMeasure: !0,
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = [ {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#d9f2fb"
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#b1eab7"
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#cceab7"
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#b100b7"
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: "#cceab7"
                        }
                    }
                }
            } ], g = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: c.columns[0],
                        values: [ "a", "b", "c", "d", "e" ],
                        identity: d,
                        objects: e
                    } ],
                    values: j.createValueColumns([ {
                        source: c.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: c.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    }, {
                        source: c.columns[3],
                        values: [ 10, 20, 15, 10, 100 ]
                    }, {
                        source: c.columns[4],
                        values: [ 13, 33, 55, 11, 55 ]
                    } ])
                }
            }, h = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = f.converter(g, b, h), k = i.dataPoints;
            expect(k[0].fill).toBe("#d9f2fb"), expect(k[1].fill).toBe("#b1eab7"), expect(k[2].fill).toBe("#cceab7"), 
            expect(k[3].fill).toBe("#b100b7"), expect(k[4].fill).toBe("#cceab7");
        });
    }), describe("scatterChart interactivity", function() {
        var b, c, d, e = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Category: !0
                },
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                roles: {
                    X: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "col3",
                isMeasure: !0,
                roles: {
                    Y: !0
                },
                type: h.describeDataType(1)
            }, {
                displayName: "col4",
                isMeasure: !0,
                roles: {
                    Size: !0
                },
                type: h.describeDataType(1)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), d = a.mocks.createVisualHostServices(), b = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            b.init({
                element: c,
                host: d,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("scatter chart single select", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = c.find(".dot"), e = a.helpers.getClickTriggerFunctionForD3(b[1]), f = {
                    abc: "def",
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), e(f), expect(b.length).toBe(5), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), g();
            }, n);
        }), it("scatter chart repeated single select", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = c.find(".dot"), e = a.helpers.getClickTriggerFunctionForD3(b[1]), f = a.helpers.getClickTriggerFunctionForD3(b[3]), j = {
                    abc: "def",
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), e(j), expect(b.length).toBe(5), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), f(j), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(h), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(h), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[1] ]
                    } ]
                }), f(j), expect(b[0].style.fillOpacity).toBe(i), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(i), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(i), expect(d.onSelect).toHaveBeenCalledWith({
                    data: []
                }), g();
            }, n);
        }), it("scatter chart multi select", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = c.find(".dot"), e = a.helpers.getClickTriggerFunctionForD3(b[1]), f = a.helpers.getClickTriggerFunctionForD3(b[3]), j = a.helpers.getClickTriggerFunctionForD3(b[4]), l = {
                    abc: "def",
                    ctrlKey: !0,
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), e(l), expect(b.length).toBe(5), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), f(l), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(h), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    }, {
                        data: [ k[1] ]
                    } ]
                }), j(l), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(i), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    }, {
                        data: [ k[1] ]
                    }, {
                        data: [ k[0] ]
                    } ]
                }), e(l), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(h), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(i), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[1] ]
                    }, {
                        data: [ k[0] ]
                    } ]
                }), f(l), j(l), expect(b[0].style.fillOpacity).toBe(i), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(i), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(i), expect(d.onSelect).toHaveBeenCalledWith({
                    data: []
                }), g();
            }, n);
        }), it("scatter chart single and multi select", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = c.find(".dot"), e = a.helpers.getClickTriggerFunctionForD3(b[1]), f = a.helpers.getClickTriggerFunctionForD3(b[3]), j = a.helpers.getClickTriggerFunctionForD3(b[4]), l = {
                    abc: "def",
                    stopPropagation: function() {}
                }, m = {
                    abc: "def",
                    ctrlKey: !0,
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), e(l), expect(b.length).toBe(5), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), f(m), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(h), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    }, {
                        data: [ k[1] ]
                    } ]
                }), e(l), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(i), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(h), 
                expect(b[4].style.fillOpacity).toBe(h), j(m), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(i), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    }, {
                        data: [ k[0] ]
                    } ]
                }), f(l), expect(b[0].style.fillOpacity).toBe(h), expect(b[1].style.fillOpacity).toBe(h), 
                expect(b[2].style.fillOpacity).toBe(h), expect(b[3].style.fillOpacity).toBe(i), 
                expect(b[4].style.fillOpacity).toBe(h), expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[1] ]
                    } ]
                }), g();
            }, n);
        }), it("scatter chart external clear", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var e = c.find(".dot"), f = a.helpers.getClickTriggerFunctionForD3(e[1]), j = {
                    abc: "def",
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), f(j), expect(e.length).toBe(5), expect(e[0].style.fillOpacity).toBe(h), 
                expect(e[1].style.fillOpacity).toBe(i), expect(e[2].style.fillOpacity).toBe(h), 
                expect(e[3].style.fillOpacity).toBe(h), expect(e[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), b.onClearSelection(), expect(e[0].style.fillOpacity).toBe(i), expect(e[1].style.fillOpacity).toBe(i), 
                expect(e[2].style.fillOpacity).toBe(i), expect(e[3].style.fillOpacity).toBe(i), 
                expect(e[4].style.fillOpacity).toBe(i), g();
            }, n);
        }), it("scatter chart clear on clearCatcher click", function(g) {
            var h = f.DimmedBubbleOpacity.toString(), i = f.DefaultBubbleOpacity.toString(), k = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: k
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: e.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: e.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var b = c.find(".dot"), e = a.helpers.getClickTriggerFunctionForD3(b[1]), f = {
                    abc: "def",
                    stopPropagation: function() {}
                };
                spyOn(d, "onSelect").and.callThrough(), e(f), expect(b.length).toBe(5), expect(b[0].style.fillOpacity).toBe(h), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(h), 
                expect(b[3].style.fillOpacity).toBe(h), expect(b[4].style.fillOpacity).toBe(h), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ k[3] ]
                    } ]
                }), $(".clearCatcher").last().d3Click(0, 0), expect(b[0].style.fillOpacity).toBe(i), 
                expect(b[1].style.fillOpacity).toBe(i), expect(b[2].style.fillOpacity).toBe(i), 
                expect(b[3].style.fillOpacity).toBe(i), expect(b[4].style.fillOpacity).toBe(i), 
                expect(d.onSelect).toHaveBeenCalledWith({
                    data: []
                }), g();
            }, n);
        });
    }), describe("interactive legend scatterChart validation", function() {
        var b, c, e = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Category: !0
                },
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                roles: {
                    X: !0
                },
                type: h.describeDataType(k.Integer)
            }, {
                displayName: "col3",
                isMeasure: !0,
                roles: {
                    Y: !0
                },
                type: h.describeDataType(k.Integer)
            }, {
                displayName: "col4",
                isMeasure: !0,
                roles: {
                    Size: !0
                },
                type: h.describeDataType(k.Integer)
            } ]
        }, f = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ];
        beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    isInteractiveLegend: !0
                }
            }), b.onDataChanged({
                dataViews: [ {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ "a", "b", "c", "d", "e" ],
                            identity: f
                        } ],
                        values: j.createValueColumns([ {
                            source: e.columns[1],
                            values: [ 110, 120, 130, 140, 150 ]
                        }, {
                            source: e.columns[2],
                            values: [ 210, 220, 230, 240, 250 ]
                        }, {
                            source: e.columns[3],
                            values: [ 310, 320, 330, 340, 350 ]
                        } ])
                    }
                } ]
            });
        }), it("Interaction scatter chart click validation", function(a) {
            var c = b.layers[0], e = c.mainGraphicsContext.selectAll("circle.dot").filter(function(a, b) {
                return "d" === a.category;
            }), f = e.attr("cx"), g = e.attr("cy"), h = {
                x: f + 3,
                y: g + 2
            };
            spyOn(c.interactivityService.behavior, "getMouseCoordinates").and.returnValue(h), 
            c.interactivityService.behavior.onClick(), setTimeout(function() {
                d(f, g, c), a();
            }, n);
        }), it("Scatter chart drag interaction validation", function(a) {
            var c = b.layers[0], e = c.mainGraphicsContext.selectAll("circle.dot").filter(function(a, b) {
                return "d" === a.category;
            }), f = e.attr("cx"), g = e.attr("cy"), h = {
                x: f,
                y: g
            };
            spyOn(c.interactivityService.behavior, "getMouseCoordinates").and.returnValue(h), 
            c.interactivityService.behavior.onDrag(), setTimeout(function() {
                d(f, g, c), a();
            }, n);
        }), it("Interaction scatter chart dotClick validation", function(a) {
            var c = b.layers[0], e = c.mainGraphicsContext.selectAll("circle.dot").filter(function(a, b) {
                return "d" === a.category;
            }), f = e.attr("cx"), g = e.attr("cy"), h = c.interactivityService.behavior.findClosestDotIndex(f, g);
            c.interactivityService.behavior.selectDotByIndex(h), setTimeout(function() {
                d(f, g, c), a();
            }, n);
        });
    }), describe("scatterChart axis label existence validation", function() {
        it("scatter chart axis labels existence dom validation with viewport height greater than axisLabelVisibleMinHeight non-interactive", function(a) {
            e(r, r, !1, !1), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height greater than axisLabelVisibleMinHeight interactive", function(a) {
            e(r, r, !0, !1), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height smaller than axisLabelVisibleMinHeight non-interactive", function(a) {
            e(s, s, !1, !1), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height smaller than axisLabelVisibleMinHeight interactive", function(a) {
            e(s, s, !0, !1), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height smaller than axisLabelVisibleMinHeight non-interactive mobile", function(a) {
            e(s, s, !1, !0), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(0), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(0), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height greater than axisLabelVisibleMinHeight non-interactive mobile", function(a) {
            e(r, r, !1, !0), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height smaller than axisLabelVisibleMinHeight interactive mobile", function(a) {
            e(s, s, !0, !0), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        }), it("scatter chart axis labels existence dom validation with viewport height greater than axisLabelVisibleMinHeight interactive mobile", function(a) {
            e(r, r, !0, !0), setTimeout(function() {
                expect($(".scatterChart .axisGraphicsContext .xAxisLabel").length).toBe(1), expect($(".scatterChart .axisGraphicsContext .yAxisLabel").length).toBe(1), 
                a();
            }, n);
        });
    }), describe("scatterChart legends existence validation", function() {
        it("scatter chart legends existence dom validation with viewport height greater than legendVisibleMinHeight non-interactive", function(a) {
            e(w, "500", !1, !1), setTimeout(function() {
                expect($(".legendText").length).toBe(3), expect($(".legendItem").length).toBe(3), 
                a();
            }, n);
        }), it("scatter chart legends existence dom validation with viewport height smaller than legendVisibleMinHeight non-interactive", function(a) {
            e(x, "500", !1, !1), setTimeout(function() {
                expect($(".legendText").length).toBe(3), expect($(".legendItem").length).toBe(3), 
                a();
            }, n);
        }), it("scatter chart legends existence dom validation with viewport height smaller than legendVisibleMinHeight non-interactive mobile", function(a) {
            e(x, x, !1, !0), setTimeout(function() {
                expect($(".legend .label").length).toBe(0), expect($(".legend .item").length).toBe(0), 
                a();
            }, n);
        }), it("scatter chart legends existence dom validation with viewport height greater than legendVisibleMinHeight non-interactive mobile", function(a) {
            e(w, "500", !1, !0), setTimeout(function() {
                expect($(".legendText").length).toBe(3), expect($(".legendItem").length).toBe(3), 
                a();
            }, n);
        });
    }), describe("Enumerate Objects", function() {
        var b, c, d = {
            columns: [ {
                displayName: "col1",
                roles: {
                    Category: !0
                },
                type: h.describeDataType(2048)
            }, {
                displayName: "col2",
                isMeasure: !0,
                roles: {
                    X: !0
                },
                type: h.describeDataType(k.Integer)
            }, {
                displayName: "col3",
                isMeasure: !0,
                roles: {
                    Y: !0
                },
                type: h.describeDataType(k.Integer)
            }, {
                displayName: "col4",
                isMeasure: !0,
                roles: {
                    Size: !0
                },
                type: h.describeDataType(k.Integer)
            } ]
        };
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("scatterChart").create(), 
            b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check basic enumeration", function(c) {
            var e = [ "a", "b", "c", "d", "e" ], f = e.map(function(b) {
                return a.mocks.dataViewScopeIdentity(b);
            }), g = {
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: e,
                            identity: f
                        } ],
                        values: j.createValueColumns([ {
                            source: d.columns[1],
                            values: [ 100, 200, 300, 400, 500 ]
                        }, {
                            source: d.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: d.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            };
            b.onDataChanged(g), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(5);
                for (var d = 0; d < a.length; d++) expect(_.contains(e, a[d].displayName)).toBeTruthy(), 
                expect(a[d].properties.fill).toBeDefined();
                c();
            }, n);
        }), it("enumerateObjectInstances: Verify x-axis property card for scatter chart", function() {
            var a = {
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ "a", "b", "c", "d", "e" ]
                        } ],
                        values: j.createValueColumns([ {
                            source: d.columns[1],
                            values: [ 1, 2, 3, 4, 5 ]
                        }, {
                            source: d.columns[2],
                            values: [ 200, 400, 600, 800, 1e3 ]
                        }, {
                            source: d.columns[3],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ])
                    }
                } ]
            };
            b.onDataChanged(a);
            var c = b.enumerateObjectInstances({
                objectName: "categoryAxis"
            });
            expect("start" in c[0].properties).toBeTruthy(), expect("end" in c[0].properties).toBeTruthy(), 
            expect("axisType" in c[0].properties).toBeFalsy(), expect("show" in c[0].properties).toBeTruthy(), 
            expect("showAxisTitle" in c[0].properties).toBeTruthy(), expect("axisStyle" in c[1].properties).toBeTruthy();
        }), it("X-axis customization: Test forced domain (start and end)", function() {
            d.objects = {
                categoryAxis: {
                    show: !0,
                    start: 0,
                    end: 25,
                    axisType: m.scalar,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            };
            var a = {
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ]
                    }
                } ]
            };
            b.onDataChanged(a);
            var c = $(".x.axis").children(".tick");
            expect(c[0].textContent).toBe("0"), expect(c[c.length - 1].textContent).toBe("25");
        }), it("Y-axis customization: Test forced domain (start and end)", function() {
            d.objects = {
                valueAxis: {
                    show: !0,
                    position: "Right",
                    start: 0,
                    end: 500,
                    showAxisTitle: !0,
                    axisStyle: !0
                }
            };
            var a = {
                dataViews: [ {
                    metadata: d,
                    categorical: {
                        categories: [ {
                            source: d.columns[0],
                            values: [ 1, 2, 3, 4, 5 ]
                        } ]
                    }
                } ]
            };
            b.onDataChanged(a);
            var c = $(".y.axis").children(".tick");
            expect(c[0].textContent).toBe("0"), expect(c[c.length - 1].textContent).toBe("500");
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals;
    describe("ColorAllocatorFactory", function() {
        it("LinearGradient2: min value", function() {
            var a = b.createColorAllocatorFactory().linearGradient2({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(100)).toBe("#ff0000");
        }), it("LinearGradient2: max value", function() {
            var a = b.createColorAllocatorFactory().linearGradient2({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(200)).toBe("#0000ff");
        }), it("LinearGradient2: mid value", function() {
            var a = b.createColorAllocatorFactory().linearGradient2({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(150)).toBe("#800080");
        }), it("LinearGradient2: intermediate value", function() {
            var a = b.createColorAllocatorFactory().linearGradient2({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(120)).toBe("#cc0033");
        }), it("LinearGradient3: min value", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 150,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(100)).toBe("#ff0000");
        }), it("LinearGradient3: max value", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 150,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(200)).toBe("#0000ff");
        }), it("LinearGradient3: mid value", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 170,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(170)).toBe("#ffffff");
        }), it("LinearGradient3: intermediate value", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 176,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(178)).toBe("#eaeaff");
        }), it("LinearGradient3: between min & mid", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 176,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#0000ff"
                }
            });
            expect(a.color(170)).toBe("#ffebeb");
        }), it("LinearGradient2 clamping - test values outside the range", function() {
            var a = b.createColorAllocatorFactory().linearGradient2({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                max: {
                    value: 200,
                    color: "#008000"
                }
            });
            expect(a.color(90)).toBe("#ff0000"), expect(a.color(220)).toBe("#008000");
        }), it("LinearGradient3 clamping - test values outside the range", function() {
            var a = b.createColorAllocatorFactory().linearGradient3({
                min: {
                    value: 100,
                    color: "#ff0000"
                },
                mid: {
                    value: 150,
                    color: "#ffffff"
                },
                max: {
                    value: 200,
                    color: "#008000"
                }
            });
            expect(a.color(0)).toBe("#ff0000"), expect(a.color(300)).toBe("#008000");
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.BI.Services.GeocodingManager.GeocodeQuery;
    describe("General GeocodeCache Tests", function() {
        var a, c = powerbi.visuals.BI.Services.createGeocodingCache, d = 3e3, e = 100;
        beforeEach(function() {
            a = c(d, e), localStorage.clear();
        }), it("Cache Hit", function() {
            var c = new b("Washington", "State"), d = {
                latitude: 10,
                longitude: 10
            }, e = new b("Utah", "State"), f = {
                latitude: 15,
                longitude: 15
            };
            a.registerCoordinates(c, d), a.registerCoordinates(e, f), expect(a.getCoordinates(c)).toEqual(d), 
            expect(a.getCoordinates(e)).toEqual(f);
        }), it("Cache Miss", function() {
            var c = new b("Washington", "State"), d = {
                latitude: 10,
                longitude: 10
            }, e = new b("Utah", "State"), f = {
                latitude: 15,
                longitude: 15
            }, g = new b("New York", "State");
            a.registerCoordinates(c, d), a.registerCoordinates(e, f), expect(a.getCoordinates(g)).toBeFalsy();
        }), it("Local storage hit", function() {
            var f = new b("Washington", "State"), g = {
                latitude: 10,
                longitude: 10
            };
            a.registerCoordinates(f, g);
            var h = c(d, e);
            expect(h.getCoordinates(f)).toEqual(g);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.SelectionId;
    describe("Web interactivity service", function() {
        var c, d = a.mocks.dataViewScopeIdentity("A"), e = a.mocks.dataViewScopeIdentity("B");
        describe("", function() {
            beforeEach(function() {
                var b = a.mocks.createVisualHostServices();
                c = new powerbi.visuals.WebInteractivityService(b);
            }), it("selecting a single data point should set selected state", function() {
                var a = [ {
                    selected: !1,
                    identity: b.createWithId(d, !1)
                }, {
                    selected: !0,
                    identity: b.createWithId(e, !1)
                } ];
                c.selectableDataPoints = a, c.select(a[0], !1), expect(a[0].selected).toBeTruthy(), 
                expect(a[1].selected).toBeFalsy();
            }), it("selecting a highlighted data point should select non-highlight data point with the same id", function() {
                var a = [ {
                    selected: !1,
                    identity: b.createWithId(d, !0)
                }, {
                    selected: !1,
                    identity: b.createWithId(d, !1)
                } ];
                c.selectableDataPoints = a, c.select(a[0], !1), expect(a[0].selected).toBeFalsy(), 
                expect(a[1].selected).toBeTruthy();
            }), it("createPropertiesToHost: selecting a dataPoint should result in a VisualObjectInstance", function() {
                var a = [ {
                    selected: !1,
                    identity: b.createWithId(d, !1)
                } ];
                c.selectableDataPoints = a, c.select(a[0], !0);
                var e = {
                    objectName: "general",
                    propertyName: "property"
                }, f = c.createPropertiesToHost(e);
                expect(f.length).toBe(1);
                var g = f[0];
                expect(g.objectName).toBe("general"), expect(g.properties.property).toBeDefined();
            }), it("createPropertiesToHost: no selection should result in empty VisualObjectInstance", function() {
                var a = {
                    objectName: "general",
                    propertyName: "property"
                }, b = c.createPropertiesToHost(a);
                expect(b.length).toBe(1);
                var d = b[0];
                expect(d.objectName).toBe("general"), expect(d.properties.property).toBeUndefined();
            });
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.Slicer, c = powerbi.data.DataViewTransform, d = (a.helpers.ClickEventType, 
    powerbi.ValueType), e = powerbi.visuals.SelectionId, f = 100;
    describe("Slicer", function() {
        it("Slicer_registered_capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("slicer").capabilities).toBe(powerbi.visuals.slicerCapabilities);
        }), it("Capabilities should include dataViewMapping", function() {
            expect(powerbi.visuals.slicerCapabilities.dataViewMappings).toBeDefined(), expect(powerbi.visuals.slicerCapabilities.dataViewMappings.length).toBe(1);
        }), it("Capabilities should have condition", function() {
            expect(powerbi.visuals.slicerCapabilities.dataViewMappings[0].conditions.length).toBe(1), 
            expect(powerbi.visuals.slicerCapabilities.dataViewMappings[0].conditions[0][powerbi.visuals.slicerCapabilities.dataRoles[0].name].max).toBe(1);
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.slicerCapabilities.dataRoles).toBeDefined(), expect(powerbi.visuals.slicerCapabilities.dataRoles.length).toBe(1);
        }), it("Capabilities should suppressDefaultTitle", function() {
            expect(powerbi.visuals.slicerCapabilities.suppressDefaultTitle).toBe(!0);
        }), it("Filter property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFilterOutput(powerbi.visuals.slicerCapabilities.objects)).toEqual(powerbi.visuals.slicerProps.filterPropertyIdentifier);
        });
    }), describe("Slicer DOM tests", function() {
        function g() {
            i = a.helpers.testDom("200", "300"), h = powerbi.visuals.visualPluginFactory.create().getPlugin("slicer").create();
            var b;
            h.init({
                element: i,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: i.height(),
                    width: i.width()
                },
                settings: b
            });
        }
        var h, i, j = {
            columns: [ {
                displayName: "Fruit",
                properties: {
                    Category: !0
                },
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "Price",
                isMeasure: !0
            } ]
        }, k = {
            categories: [ {
                source: j.columns[0],
                values: [ "Apple", "Orange", "Kiwi", "Grapes", "Banana" ],
                identity: [ a.mocks.dataViewScopeIdentity("Apple"), a.mocks.dataViewScopeIdentity("Orange"), a.mocks.dataViewScopeIdentity("Kiwi"), a.mocks.dataViewScopeIdentity("Grapes"), a.mocks.dataViewScopeIdentity("Banana") ]
            } ],
            values: c.createValueColumns([ {
                source: j.columns[1],
                values: [ 20, 10, 30, 15, 12 ]
            } ])
        }, l = {
            metadata: j,
            categorical: k
        };
        beforeEach(function() {
            g();
        }), it("Slicer DOM Validation", function(b) {
            spyOn(powerbi.visuals.valueFormatter, "format").and.callThrough(), h.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                expect($(".slicerContainer")).toBeInDOM(), expect($(".slicerContainer .headerText")).toBeInDOM(), 
                expect($(".slicerContainer .slicerHeader .clear")).toBeInDOM(), expect($(".slicerContainer .slicerBody")).toBeInDOM(), 
                expect($(".slicerContainer .slicerBody .row .slicerText")).toBeInDOM(), expect($(".slicerText").length).toBe(5), 
                expect($(".slicerText").first().text()).toBe("Apple"), expect($(".slicerText").last().text()).toBe("Banana"), 
                expect(powerbi.visuals.valueFormatter.format).toHaveBeenCalledWith("Apple", void 0), 
                expect(powerbi.visuals.valueFormatter.format).toHaveBeenCalledWith("Orange", void 0), 
                expect(powerbi.visuals.valueFormatter.format).toHaveBeenCalledWith("Kiwi", void 0), 
                expect(powerbi.visuals.valueFormatter.format).toHaveBeenCalledWith("Grapes", void 0), 
                expect(powerbi.visuals.valueFormatter.format).toHaveBeenCalledWith("Banana", void 0);
                var d = {
                    metadata: j,
                    categorical: {
                        categories: [ {
                            source: j.columns[0],
                            values: [ "Strawberry", "Blueberry", "Blackberry" ],
                            identity: [ a.mocks.dataViewScopeIdentity("Strawberry"), a.mocks.dataViewScopeIdentity("Blueberry"), a.mocks.dataViewScopeIdentity("Blackberry") ]
                        } ],
                        values: c.createValueColumns([ {
                            source: j.columns[1],
                            values: [ 40, 25, 22 ]
                        } ])
                    }
                };
                h.onDataChanged({
                    dataViews: [ d ]
                }), setTimeout(function() {
                    expect($(".slicerContainer")).toBeInDOM(), expect($(".slicerContainer .headerText")).toBeInDOM(), 
                    expect($(".slicerContainer .slicerHeader .clear")).toBeInDOM(), expect($(".slicerContainer .slicerBody")).toBeInDOM(), 
                    expect($(".slicerContainer .slicerBody .row .slicerText")).toBeInDOM(), expect($(".slicerText").length).toBe(3), 
                    expect($(".slicerText").first().text()).toBe("Strawberry"), expect($(".slicerText").last().text()).toBe("Blackberry"), 
                    b();
                }, f);
            }, f);
        }), it("Validate converter", function(a) {
            h.onDataChanged({
                dataViews: [ l ]
            }), setTimeout(function() {
                var c = b.converter(l);
                expect(c.slicerDataPoints.length).toBe(5);
                var d = l.categorical.categories[0].identity, f = [ e.createWithId(d[0]), e.createWithId(d[1]), e.createWithId(d[2]), e.createWithId(d[3]), e.createWithId(d[4]) ], g = [ {
                    value: "Apple",
                    mouseOver: !1,
                    mouseOut: !0,
                    identity: f[0],
                    selected: !1
                }, {
                    value: "Orange",
                    mouseOver: !1,
                    mouseOut: !0,
                    identity: f[1],
                    selected: !1
                }, {
                    value: "Kiwi",
                    mouseOver: !1,
                    mouseOut: !0,
                    identity: f[2],
                    selected: !1
                }, {
                    value: "Grapes",
                    mouseOver: !1,
                    mouseOut: !0,
                    identity: f[3],
                    selected: !1
                }, {
                    value: "Banana",
                    mouseOver: !1,
                    mouseOut: !0,
                    identity: f[4],
                    selected: !1
                } ];
                expect(c).toEqual({
                    categorySourceName: "Fruit",
                    formatString: void 0,
                    slicerDataPoints: g
                }), a();
            }, f);
        }), it("Null dataView test", function(a) {
            h.onDataChanged({
                dataViews: []
            }), setTimeout(function() {
                expect($(".slicerText").length).toBe(0), a();
            }, f);
        }), it("Slicer resize", function(a) {
            var b = {
                height: 200,
                width: 300
            };
            h.onResizing(b, 100), setTimeout(function() {
                expect($(".slicerContainer .slicerBody").first().css("height")).toBe("160px"), expect($(".slicerContainer .slicerBody").first().css("width")).toBe("300px"), 
                expect($(".slicerContainer .headerText").first().css("width")).toBe("271px");
                var b = {
                    height: 150,
                    width: 150
                };
                h.onResizing(b, 100), setTimeout(function() {
                    expect($(".slicerContainer .slicerBody").first().css("height")).toBe("110px"), expect($(".slicerContainer .slicerBody").first().css("width")).toBe("150px"), 
                    expect($(".slicerContainer .headerText").first().css("width")).toBe("121px"), a();
                }, f);
            }, f);
        });
    }), describe("Slicer Interactivity", function() {
        var b, e, g, h, i, j = {
            columns: [ {
                displayName: "Fruit",
                properties: {
                    Category: !0
                },
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "Price",
                isMeasure: !0
            } ]
        }, k = {
            categories: [ {
                source: j.columns[0],
                values: [ "Apple", "Orange", "Kiwi", "Grapes", "Banana" ],
                identity: [ a.mocks.dataViewScopeIdentity("Apple"), a.mocks.dataViewScopeIdentity("Orange"), a.mocks.dataViewScopeIdentity("Kiwi"), a.mocks.dataViewScopeIdentity("Grapes"), a.mocks.dataViewScopeIdentity("Banana") ]
            } ],
            values: c.createValueColumns([ {
                source: j.columns[1],
                values: [ 20, 10, 30, 15, 12 ]
            } ])
        }, l = {
            dataViews: [ {
                metadata: j,
                categorical: k
            } ]
        };
        beforeEach(function() {
            e = a.helpers.testDom("200", "300"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("slicer").create(), 
            i = a.mocks.createVisualHostServices();
            var c;
            b.init({
                element: e,
                host: i,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                },
                settings: c,
                interactivity: {
                    selection: !0
                }
            }), b.onDataChanged(l), g = $(".slicerText"), h = $("label.slicerCheckbox").find("input"), 
            spyOn(i, "onSelect").and.callThrough();
        }), it("slicer item select", function(a) {
            setTimeout(function() {
                g.first().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), expect(d3.select(h[0]).property("checked")).toBe(!0), 
                expect(g[1].style.color).toBe("rgb(102, 102, 102)"), expect(d3.select(h[1]).property("checked")).toBe(!1), 
                expect(i.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ l.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                }), a();
            }, f);
        }), it("slicer item multi-select checkboxes", function(a) {
            setTimeout(function() {
                g.first().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), expect(g[1].style.color).toBe("rgb(102, 102, 102)"), 
                expect(d3.select(h[0]).property("checked")).toBe(!0), expect(i.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ l.dataViews[0].categorical.categories[0].identity[0] ]
                    } ]
                }), g.last().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), expect(g[4].style.color).toBe("rgb(33, 33, 33)"), 
                expect(g[1].style.color).toBe("rgb(102, 102, 102)"), expect(d3.select(h[0]).property("checked")).toBe(!0), 
                expect(d3.select(h[1]).property("checked")).toBe(!1), expect(d3.select(h[4]).property("checked")).toBe(!0), 
                expect(i.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ l.dataViews[0].categorical.categories[0].identity[0] ]
                    }, {
                        data: [ l.dataViews[0].categorical.categories[0].identity[4] ]
                    } ]
                }), a();
            }, f);
        }), it("slicer item multi-select with control key", function(a) {
            setTimeout(function() {
                g.first().d3Click(0, 0), g.last().d3Click(0, 0, 1), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), 
                expect(g[4].style.color).toBe("rgb(33, 33, 33)"), expect(g[1].style.color).toBe("rgb(102, 102, 102)"), 
                expect(d3.select(h[0]).property("checked")).toBe(!0), expect(d3.select(h[1]).property("checked")).toBe(!1), 
                expect(d3.select(h[4]).property("checked")).toBe(!0), expect(i.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ l.dataViews[0].categorical.categories[0].identity[0] ]
                    }, {
                        data: [ l.dataViews[0].categorical.categories[0].identity[4] ]
                    } ]
                }), a();
            }, f);
        }), it("slicer item repeated selection", function(a) {
            setTimeout(function() {
                g.first().d3Click(0, 0), g.last().d3Click(0, 0), g.last().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), 
                expect(g[4].style.color).toBe("rgb(102, 102, 102)"), expect(d3.select(h[0]).property("checked")).toBe(!0), 
                expect(d3.select(h[4]).property("checked")).toBe(!1), a();
            }, f);
        }), it("slicer clear", function(a) {
            setTimeout(function() {
                var b = $(".clear");
                g.first().d3Click(0, 0), g.last().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), 
                expect(g[4].style.color).toBe("rgb(33, 33, 33)"), expect(g[1].style.color).toBe("rgb(102, 102, 102)"), 
                b.first().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(102, 102, 102)"), expect(g[1].style.color).toBe("rgb(102, 102, 102)"), 
                expect(g[2].style.color).toBe("rgb(102, 102, 102)"), expect(g[3].style.color).toBe("rgb(102, 102, 102)"), 
                expect(g[4].style.color).toBe("rgb(102, 102, 102)"), expect(i.onSelect).toHaveBeenCalledWith({
                    data: []
                }), a();
            }, f);
        }), it("slicer mouseover", function(a) {
            setTimeout(function() {
                var b = $(".slicerText"), c = document.createEvent("Event");
                c.initEvent("mouseover", !0, !0), b[0].dispatchEvent(c), expect(b[0].style.color).toBe("rgb(33, 33, 33)"), 
                expect(b[1].style.color).toBe("rgb(102, 102, 102)"), expect(d3.select(h[0]).property("checked")).toBe(!1), 
                a();
            }, f);
        }), it("slicer mouseout", function(a) {
            setTimeout(function() {
                var b = document.createEvent("Event");
                b.initEvent("mouseover", !0, !0), g[0].dispatchEvent(b), expect(g[0].style.color).toBe("rgb(33, 33, 33)");
                var c = document.createEvent("Event");
                c.initEvent("mouseout", !0, !0), g[0].dispatchEvent(c), expect(g[0].style.color).toBe("rgb(102, 102, 102)"), 
                g.first().d3Click(0, 0), expect(g[0].style.color).toBe("rgb(33, 33, 33)");
                var d = document.createEvent("Event");
                d.initEvent("mouseover", !0, !0), g[0].dispatchEvent(d), expect(g[0].style.color).toBe("rgb(33, 33, 33)");
                var e = document.createEvent("Event");
                e.initEvent("mouseout", !0, !0), g[0].dispatchEvent(e), expect(g[0].style.color).toBe("rgb(33, 33, 33)"), 
                a();
            }, f);
        }), it("slicer loadMoreData noSegment", function() {
            var a = b.listView.options, c = spyOn(i, "loadMoreData");
            a.loadMoreData(), expect(c).not.toHaveBeenCalled();
        }), it("slicer loadMoreData", function() {
            var a = {
                columns: [ {
                    displayName: "Fruit",
                    properties: {
                        Category: !0
                    },
                    type: d.fromDescriptor({
                        text: !0
                    })
                }, {
                    displayName: "Price",
                    isMeasure: !0
                } ],
                segment: {}
            }, c = {
                dataViews: [ {
                    metadata: a,
                    categorical: k
                } ]
            };
            b.onDataChanged(c);
            var e = b.listView.options, f = spyOn(i, "loadMoreData");
            e.loadMoreData(), expect(f).toHaveBeenCalled();
        }), it("slicer loadMoreData already called", function() {
            var a = {
                columns: [ {
                    displayName: "Fruit",
                    properties: {
                        Category: !0
                    },
                    type: d.fromDescriptor({
                        text: !0
                    })
                }, {
                    displayName: "Price",
                    isMeasure: !0
                } ],
                segment: {}
            }, c = {
                dataViews: [ {
                    metadata: a,
                    categorical: k
                } ]
            };
            b.onDataChanged(c);
            var e = b.listView.options, f = spyOn(i, "loadMoreData");
            e.loadMoreData(), e.loadMoreData(), expect(f.calls.all().length).toBe(1);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = (powerbi.data.CompiledSubtotalType, powerbi.data.dsr.DataShapeUtility), c = (powerbi.data.SemanticType, 
    powerbi.visuals.Table), d = powerbi.visuals.TableHierarchyNavigator, e = powerbi.visuals.valueFormatter, f = 500, g = b.describeDataType(1), h = b.describeDataType(2048), i = b.describeDataType(2048, "WebUrl"), j = {
        displayName: "group1",
        type: h,
        index: 0
    }, k = {
        displayName: "group2",
        type: h,
        index: 1
    }, l = {
        displayName: "group3",
        type: h,
        index: 2
    }, m = {
        displayName: "groupWebUrl",
        type: i,
        index: 0
    }, n = {
        displayName: "measure1",
        type: g,
        isMeasure: !0,
        index: 3,
        objects: {
            general: {
                formatString: "#.0"
            }
        }
    }, o = {
        displayName: "measure2",
        type: g,
        isMeasure: !0,
        index: 4,
        objects: {
            general: {
                formatString: "#.00"
            }
        }
    }, p = {
        displayName: "measure3",
        type: g,
        isMeasure: !0,
        index: 5,
        objects: {
            general: {
                formatString: "#"
            }
        }
    }, q = new powerbi.visuals.visualPluginFactory.MinervaVisualPluginService({
        heatMap: !1
    }), r = {
        general: {
            totals: !0
        }
    }, s = {
        general: {
            totals: !1
        }
    }, t = {
        metadata: {
            columns: [ n ]
        },
        table: {
            columns: [ n ],
            rows: [ [ 100 ] ]
        }
    }, u = {
        columns: [ j ],
        rows: [ [ "A" ], [ "B" ], [ "C" ] ]
    }, v = {
        metadata: {
            columns: [ j ]
        },
        table: u
    }, w = {
        metadata: {
            columns: [ j ]
        },
        table: {
            columns: [ j ],
            rows: [ [ "" ], [ null ] ]
        }
    }, x = {
        columns: [ j, k ],
        rows: [ [ "A", "a1" ], [ "A", "a2" ], [ "A", "a3" ], [ "B", "a1" ], [ "B", "a2" ], [ "C", "c1" ], [ "C", "c2" ] ]
    }, y = {
        metadata: {
            columns: [ j, k ]
        },
        table: x
    }, z = {
        metadata: {
            columns: [ j, k, n, o, p ],
            objects: r
        },
        table: {
            columns: [ j, k, n, o, p ],
            rows: [ [ "A", "a1", 100, 101, 102 ], [ "A", "a2", 103, 104, 105 ], [ "A", "a3", 106, 107, 108 ], [ "B", "a1", 109, 110, 111 ], [ "B", "a2", 112, 113, 114 ], [ "C", "c1", 115, 116, 117 ], [ "C", "c2", 118, 119, 120 ] ],
            totals: [ null, null, 763, 770, 777 ]
        }
    }, A = {
        metadata: {
            columns: [ j, k, n ]
        },
        table: {
            columns: [ j, k, n ],
            rows: [ [ "A", "a1", 100 ], [ "", null, 103 ], [ "", "a3", 106 ], [ "B", "", 112 ], [ null, "", null ] ]
        }
    }, B = {
        metadata: {
            columns: [ j, n, k, o, l, p ]
        },
        table: {
            columns: [ j, n, k, o, l, p ],
            rows: [ [ "A", 100, "aa", 101, "aa1", 102 ], [ "A", 103, "aa", 104, "aa2", 105 ], [ "A", 106, "ab", 107, "ab1", 108 ], [ "B", 109, "ba", 110, "ba1", 111 ], [ "B", 112, "bb", 113, "bb1", 114 ], [ "B", 115, "bb", 116, "bb2", 117 ], [ "C", 118, "cc", 119, "cc1", 120 ] ]
        }
    }, C = {
        metadata: {
            columns: [ n, j ],
            objects: r
        },
        table: {
            columns: [ n, j ],
            rows: [ [ 1, "A" ], [ 2, "B" ], [ 3, "C" ] ],
            totals: [ 6, null ]
        }
    }, D = {
        metadata: {
            columns: [ n, j ],
            objects: s
        },
        table: {
            columns: [ n, j ],
            rows: [ [ 1, "A" ], [ 2, "B" ], [ 3, "C" ] ]
        }
    }, E = {
        metadata: {
            columns: [ m ],
            objects: s
        },
        table: {
            columns: [ m ],
            rows: [ [ "http://www.microsoft.com" ], [ "data:url" ], [ "https://www.microsoft.com/2" ] ]
        }
    };
    describe("Table", function() {
        function a(a) {
            return {
                metadata: {
                    objects: a
                },
                table: {
                    rows: {
                        "for": {
                            "in": {
                                role: "Values",
                                items: []
                            }
                        }
                    }
                }
            };
        }
        it("Table registered capabilities", function() {
            expect(q.getPlugin("table").capabilities).toEqual(c.capabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(c.capabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(c.capabilities.dataRoles).toBeDefined();
        }), it("Capabilities should suppressDefaultTitle", function() {
            expect(c.capabilities.suppressDefaultTitle).toBe(!0);
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(c.capabilities.objects)).toEqual(c.formatStringProp);
        }), it("CustomizeQuery picks up enabled total", function() {
            var b = {
                general: {
                    totals: !0
                }
            }, d = a(b);
            c.customizeQuery({
                dataViewMappings: [ d ]
            });
            var e = d.table.rows;
            expect(e["for"]["in"].subtotalType).toEqual(1);
        }), it("CustomizeQuery picks up disabled total", function() {
            var b = {
                general: {
                    totals: !1
                }
            }, c = a(b);
            powerbi.visuals.Table.customizeQuery({
                dataViewMappings: [ c ]
            });
            var d = c.table.rows;
            expect(d["for"]["in"].subtotalType).toEqual(0);
        }), it("CustomizeQuery handles missing settings", function() {
            var b = a();
            c.customizeQuery({
                dataViewMappings: [ b ]
            });
            var d = b.table.rows;
            expect(d["for"]["in"].subtotalType).toEqual(1);
        }), it("CustomizeQuery handles missing subtotal settings", function() {
            var b = {
                general: {
                    totals: void 0
                }
            }, d = a(b);
            c.customizeQuery({
                dataViewMappings: [ d ]
            });
            var e = d.table.rows;
            expect(e["for"]["in"].subtotalType).toEqual(1);
        });
    }), describe("Table hierarchy navigator tests", function() {
        function a(a) {
            return new d(a.table, e.formatRaw);
        }
        describe("getDepth", function() {
            var b = z, c = a(b);
            it("returns 1 for row dimension", function() {
                expect(c.getDepth(b.table.rows)).toBe(1);
            }), it("returns 1 for column dimension", function() {
                expect(c.getDepth(b.table.columns)).toBe(1);
            }), it("always returns 1", function() {
                expect(c.getDepth(null)).toBe(1);
            });
        }), describe("getLeafCount", function() {
            var b = B, c = a(b);
            it("returns the row count for row dimension", function() {
                expect(c.getLeafCount(b.table.rows)).toBe(7);
            }), it("returns the column count for column dimension", function() {
                expect(c.getLeafCount(b.table.columns)).toBe(6);
            });
        }), describe("getLeafAt", function() {
            it("returns the correct leaf from the row dimension", function() {
                var b = z, c = a(b), d = b.table.rows;
                expect(c.getLeafAt(d, 0)).toBe(d[0]), expect(c.getLeafAt(d, 1)).toBe(d[1]), expect(c.getLeafAt(d, 6)).toBe(d[6]);
            }), it("returns the correct leaf from the column dimension", function() {
                var b = B, c = a(b), d = b.table.columns;
                expect(c.getLeafAt(d, 0)).toBe(d[0]), expect(c.getLeafAt(d, 1)).toBe(d[1]), expect(c.getLeafAt(d, 5)).toBe(d[5]);
            }), it("returns undefined if index is out of bounds in the row dimension", function() {
                var b = t, c = a(b), d = b.table.rows;
                expect(c.getLeafAt(d, 1)).not.toBeDefined();
            }), it("returns undefined if index is out of bounds in the column dimension", function() {
                var b = t, c = a(b), d = b.table.columns;
                expect(c.getLeafAt(d, 1)).not.toBeDefined();
            });
        }), describe("getParent", function() {
            var b = z, c = a(b);
            it("returns null for column header", function() {
                var a = b.table.columns;
                expect(c.getParent(a[0])).toBeNull();
            }), it("returns null for row", function() {
                var a = b.table.rows;
                expect(c.getParent(a[0])).toBeNull();
            }), it("returns null in any other cases", function() {
                expect(c.getParent(null)).toBeNull();
            });
        }), describe("getIndex", function() {
            it("returns the correct index for columns", function() {
                var b = B, c = a(b), d = b.table.columns, e = d[0], f = d[1], g = d[2], h = d[3], i = d[4], j = d[5];
                expect(c.getIndex(e)).toBe(0), expect(c.getIndex(f)).toBe(1), expect(c.getIndex(g)).toBe(2), 
                expect(c.getIndex(h)).toBe(3), expect(c.getIndex(i)).toBe(4), expect(c.getIndex(j)).toBe(5);
            }), it("returns the correct index for rows", function() {
                var b = z, c = a(b), d = b.table.rows, e = {
                    index: 0,
                    values: d[0]
                }, f = {
                    index: 1,
                    values: d[1]
                };
                expect(c.getIndex(e)).toBe(0), expect(c.getIndex(f)).toBe(1);
            }), it("returns -1 if cannot find column in the collection", function() {
                var b = y, c = a(b), d = B.table.columns[4];
                expect(c.getIndex(d)).toBe(-1);
            });
        }), describe("isLeaf", function() {
            it("returns true for columns", function() {
                var b = B, c = a(b), d = b.table.columns, e = d[0], f = d[1], g = d[2], h = d[3], i = d[4], j = d[5];
                expect(c.isLeaf(e)).toBeTruthy(), expect(c.isLeaf(f)).toBeTruthy(), expect(c.isLeaf(g)).toBeTruthy(), 
                expect(c.isLeaf(h)).toBeTruthy(), expect(c.isLeaf(i)).toBeTruthy(), expect(c.isLeaf(j)).toBeTruthy();
            }), it("returns true for rows", function() {
                var b = z, c = a(b), d = b.table.rows, e = d[0], f = d[1], g = d[2], h = d[3], i = d[4], j = d[5], k = d[6];
                expect(c.isLeaf(e)).toBeTruthy(), expect(c.isLeaf(f)).toBeTruthy(), expect(c.isLeaf(g)).toBeTruthy(), 
                expect(c.isLeaf(h)).toBeTruthy(), expect(c.isLeaf(i)).toBeTruthy(), expect(c.isLeaf(j)).toBeTruthy(), 
                expect(c.isLeaf(k)).toBeTruthy();
            });
        }), describe("getChildren", function() {
            it("returns null for column", function() {
                var b = z, c = a(b), d = b.table.columns[3];
                expect(c.getChildren(d)).toBeNull();
            }), it("returns null for row", function() {
                var b = B, c = a(b), d = b.table.rows[4];
                expect(c.getChildren(d)).toBeNull();
            });
        }), describe("getCount", function() {
            var b = B, c = a(b);
            it("returns the number of the columns for column dimension", function() {
                expect(c.getCount(b.table.columns)).toBe(b.table.columns.length);
            }), it("returns the number of the rows for row dimension", function() {
                expect(c.getCount(b.table.rows)).toBe(b.table.rows.length);
            });
        }), describe("getAt", function() {
            it("returns the correct item from the row dimension", function() {
                var b = z, c = a(b), d = b.table.rows;
                expect(c.getAt(d, 0)).toBe(d[0]), expect(c.getAt(d, 1)).toBe(d[1]), expect(c.getAt(d, 6)).toBe(d[6]);
            }), it("returns the correct item from the column dimension", function() {
                var b = B, c = a(b), d = b.table.columns;
                expect(c.getAt(d, 0)).toBe(d[0]), expect(c.getAt(d, 1)).toBe(d[1]), expect(c.getAt(d, 5)).toBe(d[5]);
            }), it("returns undefined if index is out of bounds in the row dimension", function() {
                var b = t, c = a(b), d = b.table.rows;
                expect(c.getAt(d, 1)).not.toBeDefined();
            }), it("returns undefined if index is out of bounds in the column dimension", function() {
                var b = t, c = a(b), d = b.table.columns;
                expect(c.getAt(d, 1)).not.toBeDefined();
            });
        }), describe("getLevel", function() {
            var b = B, c = a(b);
            it("returns 0 for column", function() {
                var a = b.table.columns;
                expect(c.getLevel(a[1])).toBe(0);
            }), it("returns 0 for row", function() {
                var a = b.table.rows;
                expect(c.getLevel(a[5])).toBe(0);
            });
        }), describe("getIntersection", function() {
            function a(a, b, c, d) {
                for (var e = [], f = 0, g = b.length; g > f; f++) {
                    e[f] = [];
                    for (var h = 0, i = c.length; i > h; h++) e[f][h] = a.getIntersection(b[f], c[h]).value;
                }
                expect(e).toEqual(d);
            }
            it("returns values in the intersection", function() {
                var b = B, c = powerbi.visuals.Table.converter(b.table), f = c.visualRows, g = b.table.columns, h = [ [ "A", "100.0", "aa", "101.00", "aa1", "102" ], [ "A", "103.0", "aa", "104.00", "aa2", "105" ], [ "A", "106.0", "ab", "107.00", "ab1", "108" ], [ "B", "109.0", "ba", "110.00", "ba1", "111" ], [ "B", "112.0", "bb", "113.00", "bb1", "114" ], [ "B", "115.0", "bb", "116.00", "bb2", "117" ], [ "C", "118.0", "cc", "119.00", "cc1", "120" ] ], i = new d(c, e.formatRaw);
                a(i, f, g, h);
            }), it("returns weburl values", function() {
                for (var a = E, b = powerbi.visuals.Table.converter(a.table), c = b.visualRows, f = a.table.columns, g = new d(b, e.formatRaw), h = [], i = 0, j = c.length; j > i; i++) {
                    h[i] = [];
                    for (var k = 0, l = f.length; l > k; k++) h[i][k] = g.getIntersection(c[i], f[k]).showUrl;
                }
                var m = [ [ !0 ], [ !1 ], [ !0 ] ];
                expect(h).toEqual(m);
            });
        }), describe("getCorner", function() {
            it("always returns null", function() {
                var b = B, c = a(b);
                expect(c.getCorner(0, 0)).toBeNull(), expect(c.getCorner(10, 0)).toBeNull(), expect(c.getCorner(0, 10)).toBeNull(), 
                expect(c.getCorner(10, 10)).toBeNull();
            });
        }), describe("headerItemEquals", function() {
            it("returns true if the two items are the same", function() {
                var b = B, c = b.table.rows[0], d = b.table.columns[0], e = a(b);
                expect(e.headerItemEquals(c, c)).toBeTruthy(), expect(e.headerItemEquals(d, d)).toBeTruthy();
            }), it("returns false if the two items are not same", function() {
                var b = B, c = b.table.rows[0], d = b.table.columns[0], e = a(b);
                expect(e.headerItemEquals(c, d)).toBeFalsy(), expect(e.headerItemEquals(d, c)).toBeFalsy();
            });
        }), describe("bodyCellItemEquals", function() {
            it("returns true if the two items are the same", function() {
                var b = B, c = b.table.rows[0][3], d = a(b);
                expect(d.bodyCellItemEquals(c, c)).toBeTruthy();
            }), it("returns false if the two items are not same", function() {
                var b = B, c = b.table.rows[1][3], d = b.table.rows[2][3], e = a(b);
                expect(e.bodyCellItemEquals(c, d)).toBeFalsy();
            });
        });
    }), describe("Table logic", function() {
        var b, c;
        beforeEach(function() {
            c = a.helpers.testDom("500", "500"), c.visible = function() {
                return !0;
            }, b = q.getPlugin("table").create(), b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("loadMoreData calls control refresh", function() {
            var a = {
                update: function() {}
            }, c = {
                refresh: function() {},
                rowDimension: {},
                updateModels: function(a, b, c) {}
            }, d = spyOn(a, "update"), e = spyOn(c, "refresh");
            b.hierarchyNavigator = a, b.tablixControl = c, b.onDataChanged({
                dataViews: [ v ],
                operationKind: 1
            }), expect(d).toHaveBeenCalled(), expect(e).toHaveBeenCalled();
        }), it("needsMoreData waitingForData", function() {
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ j ],
                        segment: {}
                    },
                    table: u
                } ]
            }), b.waitingForData = !0;
            var a = b, c = u.rows[2], d = a.needsMoreData(c);
            expect(d).toBe(!1);
        }), it("needsMoreData segmentComplete", function() {
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ j ]
                    },
                    table: u
                } ]
            });
            var a = b, c = u.rows[2], d = a.needsMoreData(c);
            expect(d).toBe(!1);
        }), it("needsMoreData belowThreshold", function() {
            var a = x;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ j, k ],
                        segment: {}
                    },
                    table: a
                } ]
            });
            var c = b, d = a.rows[3], e = c.needsMoreData(d);
            expect(e).toBe(!1);
        }), it("needsMoreData aboveThreshold", function() {
            var a = x;
            b.onDataChanged({
                dataViews: [ {
                    metadata: {
                        columns: [ j, k ],
                        segment: {}
                    },
                    table: a
                } ]
            });
            var c = b, d = {
                index: 6,
                values: a.rows[6]
            }, e = c.needsMoreData(d);
            expect(e).toBe(!0);
        }), it("bindRowHeader callback", function() {
            var a = !1, b = {
                onBindRowHeader: function(b) {
                    a = !0;
                },
                layoutKind: 0
            }, c = new powerbi.visuals.TableBinder(b);
            c.bindRowHeader({
                name: null
            }, {
                type: null,
                item: null,
                colSpan: 0,
                rowSpan: 0,
                textAlign: "",
                extension: {
                    setContainerStyle: function() {}
                }
            }), expect(a).toBe(!0);
        }), it("enumerateObjectInstances empty data view", function() {
            b.onDataChanged({
                dataViews: []
            });
            var a = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(a).toEqual([]);
        }), it("enumerateObjectInstances general totals on", function() {
            b.onDataChanged({
                dataViews: [ C ]
            });
            var a = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(a).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    totals: !0
                }
            } ]);
        }), it("enumerateObjectInstances general totals off", function() {
            b.onDataChanged({
                dataViews: [ D ]
            });
            var a = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(a).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    totals: !1
                }
            } ]);
        }), it("enumerateObjectInstances general no objects", function() {
            var a = {
                metadata: {
                    columns: [ n, j ]
                },
                table: {
                    columns: [ n, j ],
                    rows: [ [ 1, "A" ], [ 2, "B" ], [ 3, "C" ] ],
                    totals: [ 6, null ]
                }
            };
            b.onDataChanged({
                dataViews: [ a ]
            });
            var c = b.enumerateObjectInstances({
                objectName: "general"
            });
            expect(c).toEqual([ {
                selector: null,
                objectName: "general",
                properties: {
                    totals: !0
                }
            } ]);
        }), it("enumerateObjectInstances some other object", function() {
            b.onDataChanged({
                dataViews: [ D ]
            });
            var a = b.enumerateObjectInstances({
                objectName: "some other object"
            });
            expect(a).toEqual([]);
        }), it("RefreshControl invisible parent", function() {
            var a = {
                refresh: function() {}
            }, c = spyOn(a, "refresh");
            b.shouldAllowHeaderResize = function() {
                return !0;
            }, b.hierarchyNavigator = {
                update: function() {}
            }, b.tablixControl = a, b.element.visible = function() {
                return !1;
            }, b.onResizing({
                width: 100,
                height: 100
            }, 0), expect(c).not.toHaveBeenCalled();
        }), it("RefreshControl invisible parent but dashboard layout", function() {
            var a = {
                refresh: function() {}
            }, c = spyOn(a, "refresh");
            b.shouldAllowHeaderResize = function() {
                return !0;
            }, b.hierarchyNavigator = {
                update: function() {}
            }, b.tablixControl = a, b.element.visible = function() {
                return !1;
            }, b.isInteractive = !1, b.onResizing({
                width: 100,
                height: 100
            }, 0), expect(c).toHaveBeenCalled();
        });
    }), describe("Table DOM validation", function() {
        function b(b) {
            a.tablixHelper.validateTable(b, ".bi-tablix tr");
        }
        function d(a) {
            for (var b = $(".bi-tablix tr"), c = [], d = 0, e = b.length; e > d; d++) {
                c[d] = [];
                for (var f = b.eq(d).find("td"), g = 0, h = f.length; h > g; g++) {
                    var i = a[d][g];
                    if (i) {
                        var j = f.eq(g).find(i);
                        j.length > 0 ? c[d][g] = i : c[d][g] = void 0;
                    } else c[d][g] = void 0;
                }
            }
            expect(c).toEqual(a);
        }
        function g(b) {
            a.tablixHelper.validateClassNames(b, ".bi-tablix tr", u);
        }
        function h(a) {
            var b = {
                selects: [ {
                    displayName: j.displayName,
                    type: powerbi.ValueType.fromDescriptor({
                        text: !0
                    })
                }, {
                    displayName: k.displayName,
                    type: powerbi.ValueType.fromDescriptor({
                        text: !0
                    })
                } ],
                projectionOrdering: {
                    Values: [ 1, 0 ]
                }
            }, c = powerbi.data.DataViewTransform.apply({
                prototype: a,
                objectDescriptors: null,
                transforms: b,
                dataViewMappings: powerbi.visuals.Table.capabilities.dataViewMappings,
                colorAllocatorFactory: powerbi.visuals.createColorAllocatorFactory()
            })[0];
            return c;
        }
        function i(a, b) {
            return e.formatRaw(a, e.getFormatString(b, c.formatStringProp, !1));
        }
        var r, s, u = "bi-tablix-cellNoMarginStyle", x = "bi-table-column-header", B = "bi-table-row", F = "bi-table-last-row", G = "bi-table-footer", H = " bi-table-cell-numeric", I = " ";
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), j.index = 0, k.index = 1, 
            l.index = 2, n.index = 3, o.index = 4, p.index = 5;
        }), beforeEach(function() {
            s = a.helpers.testDom("500", "500"), s.visible = function() {
                return !0;
            }, r = q.getPlugin("table").create(), r.init({
                element: s,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: s.height(),
                    width: s.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("1x2 table (one measure)", function(a) {
            var c = t;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], n), e = [ [ "", n.displayName, "" ], [ "", d ] ];
                b(e);
                var f = [ [ "", x, "" ], [ "", F + H ] ];
                g(f), a();
            }, f);
        }), it("1x2 table (one group null)", function(a) {
            var c = w;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var c = [ [ "", j.displayName, "" ], [ I, "" ], [ I, "" ] ];
                b(c), a();
            }, f);
        }), it("3x5 table (2 groups 1 measure nulls)", function(a) {
            var c = A;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var c = [ [ "", j.displayName, k.displayName, n.displayName, "" ], [ "", "A", "a1", "100.0" ], [ "", "", "", "103.0" ], [ "", "", "a3", "106.0" ], [ "", "B", "", "112.0" ], [ I, "", "", "" ] ];
                b(c), a();
            }, f);
        }), it("1x3 table (group instances)", function(a) {
            var c = v;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], j), e = i(c.table.rows[1][0], j), f = i(c.table.rows[2][0], j), h = [ [ "", j.displayName, "" ], [ "", d ], [ "", e ], [ "", f ] ];
                b(h);
                var k = [ [ "", x, "" ], [ "", B ], [ "", B ], [ "", F ] ];
                g(k), a();
            }, f);
        }), it("2x8 table (group instances)", function(a) {
            var c = y;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], j), e = i(c.table.rows[1][0], j), f = i(c.table.rows[2][0], j), g = i(c.table.rows[3][0], j), h = i(c.table.rows[4][0], j), l = i(c.table.rows[5][0], j), m = i(c.table.rows[6][0], j), n = i(c.table.rows[0][1], k), o = i(c.table.rows[1][1], k), p = i(c.table.rows[2][1], k), q = i(c.table.rows[3][1], k), r = i(c.table.rows[4][1], k), s = i(c.table.rows[5][1], k), t = i(c.table.rows[6][1], k), u = [ [ "", j.displayName, k.displayName, "" ], [ "", d, n ], [ "", e, o ], [ "", f, p ], [ "", g, q ], [ "", h, r ], [ "", l, s ], [ "", m, t ] ];
                b(u), a();
            }, f);
        }), it("5x9 table (group instances and measure values) with totals", function(a) {
            var c = z;
            n.index = 2, o.index = 3, p.index = 4, r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][2], n), e = i(c.table.rows[1][2], n), f = i(c.table.rows[2][2], n), h = i(c.table.rows[3][2], n), l = i(c.table.rows[4][2], n), m = i(c.table.rows[5][2], n), q = i(c.table.rows[6][2], n), r = i(c.table.rows[0][3], o), s = i(c.table.rows[1][3], o), t = i(c.table.rows[2][3], o), u = i(c.table.rows[3][3], o), v = i(c.table.rows[4][3], o), w = i(c.table.rows[5][3], o), y = i(c.table.rows[6][3], o), z = i(c.table.rows[0][4], p), A = i(c.table.rows[1][4], p), C = i(c.table.rows[2][4], p), D = i(c.table.rows[3][4], p), E = i(c.table.rows[4][4], p), I = i(c.table.rows[5][4], p), J = i(c.table.rows[6][4], p), K = i(c.table.totals[2], n), L = i(c.table.totals[3], o), M = i(c.table.totals[4], p), N = [ [ "", j.displayName, k.displayName, n.displayName, o.displayName, p.displayName, "" ], [ "", c.table.rows[0][0], c.table.rows[0][1], d, r, z ], [ "", c.table.rows[1][0], c.table.rows[1][1], e, s, A ], [ "", c.table.rows[2][0], c.table.rows[2][1], f, t, C ], [ "", c.table.rows[3][0], c.table.rows[3][1], h, u, D ], [ "", c.table.rows[4][0], c.table.rows[4][1], l, v, E ], [ "", c.table.rows[5][0], c.table.rows[5][1], m, w, I ], [ "", c.table.rows[6][0], c.table.rows[6][1], q, y, J ], [ "", "TableTotalLabel", "", K, L, M, "" ] ];
                b(N);
                var O = [ [ "", x, x, x, x, x, "" ], [ "", B, B, B + H, B + H, B + H ], [ "", B, B, B + H, B + H, B + H ], [ "", B, B, B + H, B + H, B + H ], [ "", B, B, B + H, B + H, B + H ], [ "", B, B, B + H, B + H, B + H ], [ "", B, B, B + H, B + H, B + H ], [ "", F, F, F + H, F + H, F + H ], [ "", G, G, G + H, G + H, G + H, "" ] ];
                g(O), a();
            }, f);
        }), it("2x5 table (group instances and measure values) with totals, total value comes first", function(a) {
            var c = C;
            n.index = 0, j.index = 1, r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], n), e = i(c.table.rows[1][0], n), f = i(c.table.rows[2][0], n), h = i(c.table.totals[0], n), k = [ [ "", n.displayName, j.displayName, "" ], [ "", d, c.table.rows[0][1] ], [ "", e, c.table.rows[1][1] ], [ "", f, c.table.rows[2][1] ], [ "", h, "", "" ] ];
                b(k);
                var l = [ [ "", x, x, "" ], [ "", B + H, B ], [ "", B + H, B ], [ "", F + H, F ], [ "", G + H, G, "" ] ];
                g(l), a();
            }, f);
        }), it("2x5 table (group instances and measure values) totals on then off", function(a) {
            var c = C;
            n.index = 0, j.index = 1, r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], n), e = i(c.table.rows[1][0], n), g = i(c.table.rows[2][0], n), h = i(c.table.totals[0], n), k = [ [ "", n.displayName, j.displayName, "" ], [ "", d, c.table.rows[0][1] ], [ "", e, c.table.rows[1][1] ], [ "", g, c.table.rows[2][1] ], [ "", h, "", "" ] ];
                b(k);
                var l = D;
                r.onDataChanged({
                    dataViews: [ l ]
                }), setTimeout(function() {
                    var c = [ [ "", n.displayName, j.displayName, "" ], [ "", d, l.table.rows[0][1] ], [ "", e, l.table.rows[1][1] ], [ "", g, l.table.rows[2][1] ] ];
                    b(c), a();
                }, f);
            }, f);
        }), it("1x3 table (group instances with WebUrl)", function(a) {
            var c = E;
            r.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var e = i(c.table.rows[0][0], m), f = i(c.table.rows[1][0], m), h = i(c.table.rows[2][0], m), j = [ [ "", m.displayName, "" ], [ "", e ], [ "", f ], [ "", h ] ];
                b(j);
                var k = [ [ "", x, "" ], [ "", B ], [ "", B ], [ "", F ] ];
                g(k);
                var l = [ [ , , ,  ], [ , "A" ], [ , ,  ], [ , "A" ] ];
                d(l), a();
            }, f);
        }), it("1x1 table loadMoreData", function(a) {
            var c = {
                metadata: {
                    columns: [ j ],
                    segment: {}
                },
                table: {
                    columns: [ j ],
                    rows: [ [ "A" ], [ "B" ], [ "C" ] ]
                }
            };
            r.onDataChanged({
                dataViews: [ c ]
            });
            var d = {
                metadata: {
                    columns: [ j ]
                },
                table: {
                    columns: [ j ],
                    rows: [ [ "D" ], [ "E" ] ]
                }
            };
            powerbi.data.segmentation.DataViewMerger.mergeTables(c.table, d.table), r.onDataChanged({
                dataViews: [ c ],
                operationKind: 1
            }), setTimeout(function() {
                var d = i(c.table.rows[0][0], j), e = i(c.table.rows[1][0], j), f = i(c.table.rows[2][0], j), g = i(c.table.rows[3][0], j), h = i(c.table.rows[4][0], j), k = [ [ "", j.displayName, "" ], [ "", d ], [ "", e ], [ "", f ], [ "", g ], [ "", h ] ];
                b(k), a();
            }, f);
        }), it("2x5 table reorder loadMoreData", function(a) {
            var c = {
                metadata: {
                    columns: [ j, k ],
                    segment: {}
                },
                table: {
                    columns: [ j, k ],
                    rows: [ [ "A", "1" ], [ "B", "2" ], [ "C", "3" ] ]
                }
            };
            r.onDataChanged({
                dataViews: [ c ]
            });
            var d = h(c);
            r.onDataChanged({
                dataViews: [ d ]
            });
            var e = {
                metadata: {
                    columns: [ j ]
                },
                table: {
                    columns: [ j ],
                    rows: [ [ "D", "4" ], [ "E", "5" ] ]
                }
            };
            powerbi.data.segmentation.DataViewMerger.mergeTables(c.table, e.table);
            var d = h(c);
            r.onDataChanged({
                dataViews: [ d ],
                operationKind: 1
            }), setTimeout(function() {
                var c = [ [ "", k.displayName, j.displayName, "" ], [ "", "1", "A" ], [ "", "2", "B" ], [ "", "3", "C" ], [ "", "4", "D" ], [ "", "5", "E" ] ];
                b(c), a();
            }, f);
        });
    }), describe("Dashboard table DOM validation", function() {
        function b(b) {
            a.tablixHelper.validateTable(b, ".bi-dashboard-tablix tr");
        }
        function d(a) {
            for (var b = $(".bi-dashboard-tablix tr"), c = [], d = 0, e = b.length; e > d; d++) {
                c[d] = [];
                for (var f = b.eq(d).find("td"), g = 0, h = f.length; h > g; g++) {
                    var i = a[d][g];
                    if (i) {
                        var j = f.eq(g).find(i);
                        j.length > 0 ? c[d][g] = i : c[d][g] = void 0;
                    } else c[d][g] = void 0;
                }
            }
            expect(c).toEqual(a);
        }
        function g(b) {
            a.tablixHelper.validateClassNames(b, ".bi-dashboard-tablix tr", s);
        }
        function h(a, b) {
            return e.formatRaw(a, e.getFormatString(b, c.formatStringProp, !1));
        }
        var i, r, s = "bi-tablix-cellNoMarginStyle", u = "bi-table-column-header", x = "bi-table-row", B = "bi-table-last-row", F = "bi-table-footer", G = " bi-table-cell-numeric", H = " ";
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService()), j.index = 0, k.index = 1, 
            l.index = 2, n.index = 3, o.index = 4, p.index = 5;
        }), beforeEach(function() {
            r = a.helpers.testDom("500", "500"), r.visible = function() {
                return !1;
            }, i = q.getPlugin("table").create(), i.init({
                element: r,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: r.height(),
                    width: r.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: null
                }
            });
        }), it("1x2 table (one measure)", function(a) {
            var c = t;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][0], n), e = [ [ "", n.displayName ], [ "", d ] ];
                b(e);
                var f = [ [ "", u ], [ "", B + G ] ];
                g(f), a();
            }, f);
        }), it("1x2 table (one group null)", function(a) {
            var c = w;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var c = [ [ "", j.displayName ], [ H, "" ], [ H, "" ] ];
                b(c), a();
            }, f);
        }), it("3x5 table (2 groups 1 measure nulls)", function(a) {
            var c = A;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var c = [ [ "", j.displayName, k.displayName, n.displayName ], [ "", "A", "a1", "100.0" ], [ "", "", "", "103.0" ], [ "", "", "a3", "106.0" ], [ "", "B", "", "112.0" ], [ H, "", "", "" ] ];
                b(c), a();
            }, f);
        }), it("1x3 table (group instances)", function(a) {
            var c = v;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][0], j), e = h(c.table.rows[1][0], j), f = h(c.table.rows[2][0], j), i = [ [ "", j.displayName ], [ "", d ], [ "", e ], [ "", f ] ];
                b(i);
                var k = [ [ "", u ], [ "", x ], [ "", x ], [ "", B ] ];
                g(k), a();
            }, f);
        }), it("2x8 table (group instances)", function(a) {
            var c = y;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][0], j), e = h(c.table.rows[1][0], j), f = h(c.table.rows[2][0], j), g = h(c.table.rows[3][0], j), i = h(c.table.rows[4][0], j), l = h(c.table.rows[5][0], j), m = h(c.table.rows[6][0], j), n = h(c.table.rows[0][1], k), o = h(c.table.rows[1][1], k), p = h(c.table.rows[2][1], k), q = h(c.table.rows[3][1], k), r = h(c.table.rows[4][1], k), s = h(c.table.rows[5][1], k), t = h(c.table.rows[6][1], k), u = [ [ "", j.displayName, k.displayName ], [ "", d, n ], [ "", e, o ], [ "", f, p ], [ "", g, q ], [ "", i, r ], [ "", l, s ], [ "", m, t ] ];
                b(u), a();
            }, f);
        }), it("5x9 table (group instances and measure values) with totals", function(a) {
            var c = z;
            n.index = 2, o.index = 3, p.index = 4, i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][2], n), e = h(c.table.rows[1][2], n), f = h(c.table.rows[2][2], n), i = h(c.table.rows[3][2], n), l = h(c.table.rows[4][2], n), m = h(c.table.rows[5][2], n), p = h(c.table.rows[6][2], n), q = h(c.table.rows[0][3], o), r = h(c.table.rows[1][3], o), s = h(c.table.rows[2][3], o), t = h(c.table.rows[3][3], o), v = h(c.table.rows[4][3], o), w = h(c.table.rows[5][3], o), y = h(c.table.rows[6][3], o), z = h(c.table.totals[2], n), A = h(c.table.totals[3], o), C = [ [ "", j.displayName, k.displayName, n.displayName, o.displayName ], [ "", c.table.rows[0][0], c.table.rows[0][1], d, q ], [ "", c.table.rows[1][0], c.table.rows[1][1], e, r ], [ "", c.table.rows[2][0], c.table.rows[2][1], f, s ], [ "", c.table.rows[3][0], c.table.rows[3][1], i, t ], [ "", c.table.rows[4][0], c.table.rows[4][1], l, v ], [ "", c.table.rows[5][0], c.table.rows[5][1], m, w ], [ "", c.table.rows[6][0], c.table.rows[6][1], p, y ], [ "", "TableTotalLabel", "", z, A ] ];
                b(C);
                var D = [ [ "", u, u, u, u ], [ "", x, x, x + G, x + G ], [ "", x, x, x + G, x + G ], [ "", x, x, x + G, x + G ], [ "", x, x, x + G, x + G ], [ "", x, x, x + G, x + G ], [ "", x, x, x + G, x + G ], [ "", B, B, B + G, B + G ], [ "", F, F, F + G, F + G ] ];
                g(D), a();
            }, f);
        }), it("2x5 table (group instances and measure values) with totals, total value comes first", function(a) {
            var c = C;
            n.index = 0, j.index = 1, i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][0], n), e = h(c.table.rows[1][0], n), f = h(c.table.rows[2][0], n), i = h(c.table.totals[0], n), k = [ [ "", n.displayName, j.displayName ], [ "", d, c.table.rows[0][1] ], [ "", e, c.table.rows[1][1] ], [ "", f, c.table.rows[2][1] ], [ "", i, "" ] ];
                b(k);
                var l = [ [ "", u, u ], [ "", x + G, x ], [ "", x + G, x ], [ "", B + G, B ], [ "", F + G, F ] ];
                g(l), a();
            }, f);
        }), it("2x5 table (group instances and measure values) totals on then off", function(a) {
            var c = C;
            n.index = 0, j.index = 1, i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var d = h(c.table.rows[0][0], n), e = h(c.table.rows[1][0], n), g = h(c.table.rows[2][0], n), k = h(c.table.totals[0], n), l = [ [ "", n.displayName, j.displayName ], [ "", d, c.table.rows[0][1] ], [ "", e, c.table.rows[1][1] ], [ "", g, c.table.rows[2][1] ], [ "", k, "" ] ];
                b(l);
                var m = D;
                i.onDataChanged({
                    dataViews: [ m ]
                }), setTimeout(function() {
                    var c = [ [ "", n.displayName, j.displayName ], [ "", d, m.table.rows[0][1] ], [ "", e, m.table.rows[1][1] ], [ "", g, m.table.rows[2][1] ] ];
                    b(c), a();
                }, f);
            }, f);
        }), it("1x3 table (group instances with WebUrl)", function(a) {
            var c = E;
            i.onDataChanged({
                dataViews: [ c ]
            }), setTimeout(function() {
                var e = h(c.table.rows[0][0], m), f = h(c.table.rows[1][0], m), i = h(c.table.rows[2][0], m), j = [ [ "", m.displayName ], [ "", e ], [ "", f ], [ "", i ] ];
                b(j);
                var k = [ [ "", u ], [ "", x ], [ "", x ], [ "", B ] ];
                g(k);
                var l = [ [ , ,  ], [ , "A" ], [ , ,  ], [ , "A" ] ];
                d(l), a();
            }, f);
        });
    }), describe("Table sort validation", function() {
        var b;
        beforeEach(function(c) {
            a.helpers.suppressDebugAssertFailure(), b = a.helpers.testDom("800", "800"), b.visible = function() {
                return !0;
            }, c();
        }), it("table with single measure", function(c) {
            var d = t, e = [ {
                row: 0,
                col: 1,
                expectedText: "measure1"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 1
            } ], g = [ [ {
                queryName: "measure1"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "table", d, e, f, g);
        }), it("table with single group", function(c) {
            var d = v, e = [ {
                row: 0,
                col: 1,
                expectedText: "group1"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 1,
                col: 1
            }, {
                row: 2,
                col: 1
            }, {
                row: 0,
                col: 1
            } ], g = [ [ {
                queryName: "group1"
            } ], [ {
                queryName: "group1"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "table", d, e, f, g);
        }), it("table with two groups", function(c) {
            var d = y, e = [ {
                row: 0,
                col: 1,
                expectedText: "group1"
            }, {
                row: 0,
                col: 2,
                expectedText: "group2"
            } ], f = [ {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 2
            } ], g = [ [ {
                queryName: "group1"
            } ], [ {
                queryName: "group2"
            } ], [ {
                queryName: "group1"
            } ], [ {
                queryName: "group2"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "table", d, e, f, g);
        }), it("table with two groups and three measures", function(c) {
            var d = z, e = [ {
                row: 0,
                col: 1,
                expectedText: "group1"
            }, {
                row: 0,
                col: 2,
                expectedText: "group2"
            }, {
                row: 0,
                col: 3,
                expectedText: "measure1"
            }, {
                row: 0,
                col: 4,
                expectedText: "measure2"
            }, {
                row: 0,
                col: 5,
                expectedText: "measure3"
            } ], f = [ {
                row: 0,
                col: 5
            }, {
                row: 0,
                col: 2
            }, {
                row: 0,
                col: 4
            }, {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 3
            }, {
                row: 0,
                col: 1
            }, {
                row: 0,
                col: 5
            } ], g = [ [ {
                queryName: "measure3"
            } ], [ {
                queryName: "group2"
            } ], [ {
                queryName: "measure2"
            } ], [ {
                queryName: "group1"
            } ], [ {
                queryName: "measure1"
            } ], [ {
                queryName: "group1"
            } ], [ {
                queryName: "measure3"
            } ] ];
            a.tablixHelper.runTablixSortTest(b, c, "table", d, e, f, g);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.Textbox;
    describe("Textbox", function() {
        function c(a) {
            return {
                metadata: {
                    columns: [],
                    objects: {
                        general: a
                    }
                }
            };
        }
        it("Textbox no visual configuration", function() {
            var c = a.helpers.testDom("200", "300"), d = {
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                }
            }, e = new b();
            e.init(d), expect(c.children().length).toBe(0);
        }), it("Textbox basic text", function() {
            var d = {
                paragraphs: [ {
                    textRuns: [ {
                        value: "Text"
                    } ]
                } ]
            }, e = a.helpers.testDom("200", "300"), f = {
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                }
            }, g = new b();
            g.init(f), g.onDataChanged({
                dataViews: [ c(d) ]
            }), expect($(".textbox span").length).toBe(1), expect($(".textbox span")[0].innerText).toBe("Text");
        }), it("Textbox all styles", function() {
            var d = {
                paragraphs: [ {
                    horizontalTextAlignment: "center",
                    textRuns: [ {
                        value: "Text",
                        textStyle: {
                            fontFamily: "Heading",
                            fontSize: "12px",
                            textDecoration: "underline",
                            fontWeight: "300",
                            fontStyle: "italic"
                        }
                    } ]
                } ]
            }, e = a.helpers.testDom("200", "300"), f = {
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                }
            }, g = new b();
            g.init(f), g.onDataChanged({
                dataViews: [ c(d) ]
            }), expect($(".textbox div").length).toBe(1), expect($(".textbox div")[0].style.textAlign).toBe("center");
            var h = $(".textbox span");
            expect(h.length).toBe(1);
            var i = h[0];
            expect(i.innerText).toBe("Text");
            var j = i.style;
            expect(j.fontFamily).toBe("'Segoe UI Light'"), expect(j.fontSize).toBe("12px"), 
            expect(j.fontStyle).toBe("italic"), expect(j.fontWeight).toBe("300"), expect(j.textDecoration).toBe("underline");
        }), it("Textbox all styles", function() {
            var d = {
                paragraphs: [ {
                    textRuns: [ {
                        value: "Text",
                        textStyle: {
                            fontFamily: "Arial"
                        }
                    } ]
                } ]
            }, e = a.helpers.testDom("200", "300"), f = {
                element: e,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: e.height(),
                    width: e.width()
                }
            }, g = new b();
            g.init(f), g.onDataChanged({
                dataViews: [ c(d) ]
            }), expect($(".textbox span")[0].style.fontFamily).toBe("Arial");
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    var b = powerbi.visuals.TooltipBuilder, c = powerbi.visuals.TooltipManager, d = powerbi.ValueType, e = powerbi.visuals.SVGUtil;
    describe("Tooltip", function() {
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("Tooltip instance created", function() {
            expect(c.ToolTipInstance).toBeDefined();
        }), it("Tooltip has localization options defined", function() {
            expect(powerbi.visuals.ToolTipComponent.localizationOptions).toBeDefined();
        });
    }), describe("Tooltip DOM tests", function() {
        function b() {
            return {
                data: null,
                index: 0,
                coordinates: [ 10, 10 ],
                elementCoordinates: [ 2, 2 ],
                context: this,
                isTouchEvent: !1
            };
        }
        function d(a) {
            return [ {
                displayName: "test 1",
                value: "111"
            }, {
                displayName: "test 2",
                value: "222"
            } ];
        }
        function f() {
            var a = document.createEvent("MouseEvents");
            a.initMouseEvent("mouseover", !0, !0, window, 1, 2, 2, 2, 2, !1, !1, !1, !1, 0, null), 
            k.node().dispatchEvent(a);
        }
        function g() {
            var a = $(".tooltip-container");
            return a.length > 0 ? a.css("visibility") : "hidden";
        }
        function h() {
            c.ToolTipInstance.hide(), e.flushAllD3Transitions();
        }
        function i() {
            j && j.remove(), j = a.helpers.testDom("500", "500"), k = d3.select("#" + j.attr("id")), 
            l = [ {
                displayName: "test 1",
                value: "111"
            }, {
                displayName: "test 2",
                value: "222"
            } ], c.addTooltip(k, d);
        }
        var j, k, l;
        beforeEach(function() {
            var b = powerbi.common.createLocalizationService();
            powerbi.common.localize = b, a.mocks.setLocale(b), i();
        }), afterEach(function() {}), it("DOM container exists", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-container");
            expect(b.length).toBe(1);
        }), it("Has single instance of DOM container", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a), h(), c.ToolTipInstance.show(l, a), h(), c.ToolTipInstance.show(l, a), 
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-container");
            expect(b.length).toBe(1);
        }), it("DOM two rows exist", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-row");
            expect(b.length).toBe(2);
        }), it("DOM two title cells exist", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-title-cell");
            expect(b.length).toBe(2);
        }), it("DOM two value cells exist", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-value-cell");
            expect(b.length).toBe(2);
        }), it("DOM content container exists", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-content-container");
            expect(b.length).toBe(1);
        }), it("DOM container visible", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-container");
            expect(b).toBeVisible();
        }), it("DOM container is visible - Show ToolTip", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-container");
            expect(b).toBeVisible();
        }), it("DOM container style Opacity is 1 - Show ToolTip", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a), powerbi.visuals.SVGUtil.flushAllD3Transitions();
            var b = $(".tooltip-container").css("opacity");
            expect(b).toBeCloseTo(1, 2);
        }), it("DOM container hiden - Hide ToolTip", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a), h();
            var b = $(".tooltip-container"), d = b.css("visibility");
            expect("hidden").toBe(d);
        }), it("DOM container style Opacity is 1 - Hide ToolTip", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a), h();
            var b = $(".tooltip-container").css("opacity");
            expect(b).toBe("0");
        }), it("DOM arrow exists", function() {
            var a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0);
            c.ToolTipInstance.show(l, a);
            var b = $(".tooltip-container"), d = b.find(".arrow");
            expect(d.length).toBe(1);
        }), it("DOM arrow position test", function() {
            var a;
            c.ToolTipInstance.setTestScreenSize(1e3, 700), a = new powerbi.visuals.controls.TouchUtils.Rectangle(200, 200, 0, 0), 
            c.ToolTipInstance.show(l, a);
            var b, d = $(".tooltip-container"), e = d.find(".arrow");
            b = e.attr("class"), expect(b).toBe("arrow top left"), h(), a = new powerbi.visuals.controls.TouchUtils.Rectangle(600, 100, 0, 0), 
            c.ToolTipInstance.show(l, a), b = e.attr("class"), expect(b).toBe("arrow top right"), 
            h(), a = new powerbi.visuals.controls.TouchUtils.Rectangle(300, 500, 0, 0), c.ToolTipInstance.show(l, a), 
            b = e.attr("class"), expect(b).toBe("arrow bottom left"), h(), a = new powerbi.visuals.controls.TouchUtils.Rectangle(700, 800, 0, 0), 
            c.ToolTipInstance.show(l, a), b = e.attr("class"), expect(b).toBe("arrow bottom right"), 
            h(), c.ToolTipInstance.setTestScreenSize(null, null);
        }), it("Should invoke mouseover event.", function() {
            var a = spyOnEvent("#item", "mouseover");
            h(), f(), expect("mouseover").toHaveBeenTriggeredOn("#item"), expect(a).toHaveBeenTriggered();
        }), it("tooltip is visible after 200ms", function(a) {
            h();
            var e = b();
            c.showDelayedTooltip(e, d, 500), setTimeout(function() {
                var b = g();
                expect(b).toEqual("hidden"), a();
            }, 200);
        }), it("tooltip is visible after 500ms", function(a) {
            h();
            var e = b();
            c.showDelayedTooltip(e, d, 500), setTimeout(function() {
                var b = g();
                expect(b).toEqual("visible"), a();
            }, 513);
        });
    }), describe("Tooltip Builder tests", function() {
        it("createTooltipInfo: category & measure", function() {
            var c = [ {
                displayName: "cat",
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "val",
                isMeasure: !0,
                type: d.fromDescriptor({
                    numeric: !0
                })
            } ], e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def"), a.mocks.dataViewScopeIdentity("ghi") ], f = {
                metadata: {
                    columns: c
                },
                categorical: {
                    categories: [ {
                        source: c[0],
                        values: [ "abc", "def", "ghi" ],
                        identity: e,
                        identityFields: []
                    } ],
                    values: powerbi.data.DataViewTransform.createValueColumns([ {
                        source: c[1],
                        values: [ 123.321, 234.789, 456.001 ]
                    } ])
                }
            }, g = b.createTooltipInfo(null, f.categorical.categories, "abc", f.categorical.values, 123.321, [ {
                value: 123.321,
                metadata: f.categorical.values[0]
            } ], 0);
            expect(g).toEqual([ {
                displayName: "cat",
                value: "abc"
            }, {
                displayName: "val",
                value: "123.321"
            } ]);
        }), it("createTooltipInfo: category, series & measure", function() {
            var c = [ {
                displayName: "cat",
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "ser",
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "val",
                isMeasure: !0,
                type: d.fromDescriptor({
                    numeric: !0
                }),
                groupName: "ser1"
            } ], e = {
                metadata: {
                    columns: c
                },
                categorical: {
                    categories: [ {
                        source: c[0],
                        values: [ "abc", "def" ],
                        identity: [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def") ]
                    } ],
                    values: powerbi.data.DataViewTransform.createValueColumns([ {
                        source: c[2],
                        values: [ 123, 234 ],
                        identity: a.mocks.dataViewScopeIdentity("ABC")
                    }, {
                        source: c[2],
                        values: [ 345, 456 ],
                        identity: a.mocks.dataViewScopeIdentity("DEF")
                    } ])
                }
            };
            e.categorical.values.source = c[1];
            var f = b.createTooltipInfo(null, e.categorical.categories, "abc", e.categorical.values, 123.321, [ {
                value: 123.321,
                metadata: e.categorical.values[0]
            } ], 0);
            expect(f).toEqual([ {
                displayName: "cat",
                value: "abc"
            }, {
                displayName: "ser",
                value: "ser1"
            }, {
                displayName: "val",
                value: "123.321"
            } ]);
        }), it("createTooltipInfo: self cross-joined category & measure", function() {
            var c = [ {
                displayName: "cat",
                type: d.fromDescriptor({
                    text: !0
                })
            }, {
                displayName: "val",
                isMeasure: !0,
                type: d.fromDescriptor({
                    numeric: !0
                })
            } ], e = [ a.mocks.dataViewScopeIdentity("abc"), a.mocks.dataViewScopeIdentity("def"), a.mocks.dataViewScopeIdentity("ghi") ], f = powerbi.data.DataViewSelfCrossJoin.apply({
                metadata: {
                    columns: c
                },
                categorical: {
                    categories: [ {
                        source: c[0],
                        values: [ "abc", "def", "ghi" ],
                        identity: e,
                        identityFields: []
                    } ],
                    values: powerbi.data.DataViewTransform.createValueColumns([ {
                        source: c[1],
                        values: [ 123.321, 234.789, 456.001 ]
                    } ])
                }
            }), g = b.createTooltipInfo(null, f.categorical.categories, "abc", f.categorical.values, 123.321);
            expect(g).toEqual([ {
                displayName: "cat",
                value: "abc"
            }, {
                displayName: "val",
                value: "123.321"
            } ]);
        });
    });
}(powerbitests || (powerbitests = {}));

var powerbitests;

!function(a) {
    function b(b) {
        var c, d;
        b ? n.objects = {
            legend: {
                show: !0
            }
        } : n.objects = void 0, beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            d = a.helpers.testDom("500", "500"), c = powerbi.visuals.visualPluginFactory.create().getPlugin("treemap").create(), 
            c.init({
                element: d,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("treemap categories and series dom validation", function(b) {
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(d);
            var f = n.objects && n.objects.legend;
            setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(6), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Skylarks"), expect($(".treemap .labels .minorLabel").length).toBe(6), 
                expect($(".treemap .labels .minorLabel").last().text()).toBe("201503"), f && (expect($(".legend .item").length).toBe(2), 
                expect($(".legend .item").first().text()).toBe("The Nuthatches"), expect($(".legend .title").text()).toBe("Squad")), 
                b();
            }, m);
        }), it("treemap categories and series onDataChanged dom validation", function(b) {
            var d = [ {
                metadata: n,
                categorical: {
                    categories: [ {
                        source: n.columns[0],
                        values: [ "The Nuthatches", "Skylarks" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: n.columns[2],
                        values: [ 110, 120 ],
                        identity: a.mocks.dataViewScopeIdentity("201501")
                    }, {
                        source: n.columns[3],
                        values: [ 210, 220 ],
                        identity: a.mocks.dataViewScopeIdentity("201502")
                    }, {
                        source: n.columns[4],
                        values: [ 310, 320 ],
                        identity: a.mocks.dataViewScopeIdentity("201503")
                    } ])
                }
            } ];
            d[0].categorical.values.source = n.columns[1];
            var e = {
                columns: [ {
                    displayName: "Squad",
                    properties: {
                        Category: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "Period",
                    properties: {
                        Series: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "201503",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "201504",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, g = [ {
                metadata: e,
                categorical: {
                    categories: [ {
                        source: e.columns[0],
                        values: [ "The Nuthatches", "OddOneOut" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: e.columns[2],
                        values: [ 210, 220 ],
                        identity: a.mocks.dataViewScopeIdentity("201503")
                    }, {
                        source: e.columns[3],
                        values: [ 310, 320 ],
                        identity: a.mocks.dataViewScopeIdentity("201504")
                    } ])
                }
            } ];
            g[0].categorical.values.source = n.columns[1], c.onDataChanged({
                dataViews: d
            });
            var i = n.objects && n.objects.legend;
            setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(6), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Skylarks"), expect($(".treemap .labels .minorLabel").length).toBe(6), 
                expect($(".treemap .labels .minorLabel").last().text()).toBe("201503"), i && (expect($(".legend .item").length).toBe(2), 
                expect($(".legend .item").first().text()).toBe("The Nuthatches"), expect($(".legend .item").last().text()).toBe("Skylarks"), 
                expect($(".legend .title").text()).toBe("Squad")), c.onDataChanged({
                    dataViews: g
                }), setTimeout(function() {
                    expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                    expect($(".treemap .shapes .nodeGroup").length).toBe(4), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                    expect($(".treemap .labels .majorLabel").last().text()).toBe("OddOneOut"), expect($(".treemap .labels .minorLabel").length).toBe(4), 
                    expect($(".treemap .labels .minorLabel").last().text()).toBe("201504"), i && (expect($(".legend .item").first().text()).toBe("The Nuthatches"), 
                    expect($(".legend .item").last().text()).toBe("OddOneOut"), expect($(".legend .title").text()).toBe("Squad")), 
                    b();
                }, m);
            }, m);
        }), it("treemap categories and series onResize from small to medium tile dom validation", function(b) {
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: a.mocks.dataViewScopeIdentity("201501")
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: a.mocks.dataViewScopeIdentity("201502")
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: a.mocks.dataViewScopeIdentity("201503")
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(d), c.onResizing({
                height: 100,
                width: 200
            }, 0), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(6), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                expect($(".treemap .labels .minorLabel").length).toBe(4), c.onResizing({
                    height: 300,
                    width: 300
                }, 0), setTimeout(function() {
                    expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                    expect($(".treemap .shapes .nodeGroup").length).toBe(6), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                    expect($(".treemap .labels .minorLabel").length).toBe(6), b();
                }, m);
            }, m);
        }), it("treemap categories and measure dom validation", function(b) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: q,
                    categorical: {
                        categories: [ {
                            source: q.columns[0],
                            values: [ "Drama", "Comedy", "Documentary" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: q.columns[1],
                            values: [ 110, 120, 130 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(3), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Documentary"), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                b();
            }, m);
        }), it("treemap categories and measure with highlights dom validation", function(b) {
            var d = [ a.mocks.dataViewScopeIdentity("Drama"), a.mocks.dataViewScopeIdentity("Comedy"), a.mocks.dataViewScopeIdentity("Documentary") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: q,
                    categorical: {
                        categories: [ {
                            source: q.columns[0],
                            values: [ "Drama", "Comedy", "Documentary" ],
                            identity: d,
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: q.columns[1],
                            values: [ 110, 120, 130 ],
                            highlights: [ 60, 80, 20 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(6), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .shapes .parentGroup.treemapNodeHighlight").length).toBe(3), 
                expect($(".treemap .shapes .nodeGroup.treemapNodeHighlight").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Documentary"), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                b();
            }, m);
        }), it("treemap categories and measure with overflowing highlights dom validation", function(b) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: q,
                    categorical: {
                        categories: [ {
                            source: q.columns[0],
                            values: [ "Drama", "Comedy", "Documentary" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: q.columns[1],
                            values: [ 110, 120, 130 ],
                            highlights: [ 140, 160, 135 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(3), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .shapes .parentGroup.treemapNodeHighlight").length).toBe(0), 
                expect($(".treemap .shapes .nodeGroup.treemapNodeHighlight").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Documentary"), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                b();
            }, m);
        }), it("treemap categories and measures with highlights dom validation", function(b) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: s,
                    categorical: {
                        categories: [ {
                            source: s.columns[0],
                            values: [ "Front end", "Back end" ],
                            identity: [ a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("b") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: s.columns[1],
                            values: [ 110, 120 ],
                            highlights: [ 60, 60 ]
                        }, {
                            source: s.columns[2],
                            values: [ 210, 220 ],
                            highlights: [ 140, 200 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(8), expect($(".treemap .shapes .parentGroup.treemapNodeHighlight").length).toBe(0), 
                expect($(".treemap .shapes .nodeGroup.treemapNodeHighlight").length).toBe(4), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                expect($(".treemap .labels .majorLabel").last().text()).toBe("Back end"), expect($(".treemap .labels .minorLabel").length).toBe(4), 
                b();
            }, m);
        }), it("treemap categories and measure onDataChanged dom validation", function(b) {
            var d = [ {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "Drama", "Comedy", "Documentary" ],
                        identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 110, 120, 130 ]
                    } ])
                }
            } ], e = [ {
                metadata: q,
                categorical: {
                    categories: [ {
                        source: q.columns[0],
                        values: [ "Comedy", "Documentary" ],
                        identity: [ a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: q.columns[1],
                        values: [ 120, 130 ]
                    } ])
                }
            } ];
            c.onDataChanged({
                dataViews: d
            }), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(3), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                expect($(".treemap .labels .majorLabel").first().text()).toBe("Drama"), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                c.onDataChanged({
                    dataViews: e
                }), setTimeout(function() {
                    expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(2), 
                    expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(2), 
                    expect($(".treemap .labels .majorLabel").first().text()).toBe("Comedy"), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                    b();
                }, m);
            }, m);
        }), it("treemap categories and measure onResize from small to medium tile dom validation", function(b) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: q,
                    categorical: {
                        categories: [ {
                            source: q.columns[0],
                            values: [ "Drama", "Comedy", "Documentary" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: q.columns[1],
                            values: [ 110, 120, 130 ]
                        } ])
                    }
                } ]
            }), c.onResizing({
                height: 100,
                width: 200
            }, 0), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(3), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                expect($(".treemap .labels .minorLabel").length).toBe(0), c.onResizing({
                    height: 300,
                    width: 300
                }, 0), setTimeout(function() {
                    expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(3), 
                    expect($(".treemap .shapes .nodeGroup").length).toBe(0), expect($(".treemap .labels .majorLabel").length).toBe(3), 
                    expect($(".treemap .labels .minorLabel").length).toBe(0), b();
                }, m);
            }, m);
        }), it("treemap category and measure labeling validation", function(b) {
            c.onDataChanged({
                dataViews: [ {
                    metadata: r,
                    categorical: {
                        categories: [ {
                            source: r.columns[0],
                            values: [ "Very very long value" ],
                            identity: [ a.mocks.dataViewScopeIdentity("a") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: r.columns[1],
                            values: [ 100 ]
                        }, {
                            source: r.columns[2],
                            values: [ 100 ]
                        } ])
                    }
                } ]
            }), c.onResizing({
                height: 12,
                width: 100
            }, 0), setTimeout(function() {
                expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(1), 
                expect($(".treemap .shapes .nodeGroup").length).toBe(2), expect($(".treemap .labels .majorLabel").length).toBe(0), 
                expect($(".treemap .labels .minorLabel").length).toBe(0), c.onResizing({
                    height: 24,
                    width: 100
                }, 0), setTimeout(function() {
                    expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(1), 
                    expect($(".treemap .shapes .nodeGroup").length).toBe(2), expect($(".treemap .labels .majorLabel").length).toBe(1), 
                    expect($(".treemap .labels .minorLabel").length).toBe(0), expect($(".treemap .labels .majorLabel").first().text().length).toBeGreaterThan(0), 
                    c.onResizing({
                        height: 32,
                        width: 200
                    }, 0), setTimeout(function() {
                        expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(1), 
                        expect($(".treemap .shapes .nodeGroup").length).toBe(2), expect($(".treemap .labels .majorLabel").length).toBe(1), 
                        expect($(".treemap .labels .minorLabel").length).toBe(0), expect($(".treemap .labels .majorLabel").first().text().length).toBeGreaterThan(0), 
                        c.onResizing({
                            height: 64,
                            width: 200
                        }, 0), setTimeout(function() {
                            expect($(".treemap .shapes .rootNode").length).toBe(1), expect($(".treemap .shapes .parentGroup").length).toBe(1), 
                            expect($(".treemap .shapes .nodeGroup").length).toBe(2), expect($(".treemap .labels .majorLabel").length).toBe(1), 
                            expect($(".treemap .labels .majorLabel").first().text().length).toBeGreaterThan(0), 
                            expect($(".treemap .labels .minorLabel").length).toBe(2), expect($(".treemap .labels .minorLabel").first().text().length).toBeGreaterThan(0), 
                            expect($(".treemap .labels .minorLabel").last().text().length).toBeGreaterThan(0), 
                            b();
                        }, m);
                    }, m);
                }, m);
            }, m);
        }), b && it("legend formatting", function(b) {
            var d = {
                metadata: n,
                categorical: {
                    categories: [ {
                        source: n.columns[0],
                        values: [ "The Nuthatches", "Skylarks" ],
                        identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: n.columns[2],
                        values: [ 110, 120 ],
                        identity: e.createDataViewScopeIdentity(j.text("201501"))
                    }, {
                        source: n.columns[3],
                        values: [ 210, 220 ],
                        identity: e.createDataViewScopeIdentity(j.text("201502"))
                    }, {
                        source: n.columns[4],
                        values: [ 310, 320 ],
                        identity: e.createDataViewScopeIdentity(j.text("201503"))
                    } ])
                }
            };
            d.categorical.values.source = n.columns[1], d.metadata.objects = {
                legend: {}
            }, c.onDataChanged({
                dataViews: [ d ]
            }), setTimeout(function() {
                expect($(".legendItem")).toBeInDOM(), d.metadata.objects = {
                    legend: {
                        show: !0
                    }
                }, c.onDataChanged({
                    dataViews: [ d ]
                }), setTimeout(function() {
                    expect($(".legendItem")).toBeInDOM(), d.metadata.objects = {
                        legend: {
                            show: !0,
                            position: "Right"
                        }
                    }, c.onDataChanged({
                        dataViews: [ d ]
                    }), setTimeout(function() {
                        expect($(".legendItem")).toBeInDOM();
                        var a = "Test Title";
                        d.metadata.objects = {
                            legend: {
                                show: !0,
                                position: "Right",
                                showTitle: !0,
                                titleText: a
                            }
                        }, c.onDataChanged({
                            dataViews: [ d ]
                        }), setTimeout(function() {
                            expect($(".legendItem")).toBeInDOM(), expect($(".legendTitle").text()).toBe(a), 
                            d.metadata.objects = {
                                legend: {
                                    show: !1,
                                    position: "Right"
                                }
                            }, c.onDataChanged({
                                dataViews: [ d ]
                            }), setTimeout(function() {
                                expect($(".legendItem")).not.toBeInDOM(), b();
                            }, m);
                        }, m);
                    }, m);
                }, m);
            }, m);
        });
    }
    var c = jsCommon.ArrayExtensions, d = jsCommon.CssConstants, e = powerbi.data, f = powerbi.data.dsr.DataShapeUtility, g = powerbi.DataViewAnalysis, h = powerbi.data.DataViewTransform, i = powerbi.data.SemanticType, j = powerbi.data.SQExprBuilder, k = powerbi.visuals.Treemap, l = powerbi.visuals.SelectionId, m = 500, n = {
        columns: [ {
            displayName: "Squad",
            queryName: "select0",
            properties: {
                Category: !0
            },
            type: f.describeDataType(2048)
        }, {
            displayName: "Period",
            queryName: "select1",
            properties: {
                Series: !0
            },
            type: f.describeDataType(1)
        }, {
            displayName: null,
            queryName: "select2",
            groupName: "201501",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        }, {
            displayName: null,
            queryName: "select2",
            groupName: "201502",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        }, {
            displayName: null,
            queryName: "select2",
            groupName: "201503",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        } ]
    }, o = powerbi.data.SQExprBuilder.fieldDef({
        schema: "s",
        entity: "e",
        column: "Squad"
    }), p = powerbi.data.SQExprBuilder.fieldDef({
        schema: "s",
        entity: "e",
        column: "Period"
    }), q = {
        columns: [ {
            displayName: "Genre",
            queryName: "select0",
            properties: {
                Category: !0
            },
            type: f.describeDataType(2048)
        }, {
            displayName: "TotalSales",
            queryName: "select1",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        } ]
    }, r = {
        columns: [ {
            displayName: "Category group",
            queryName: "select0",
            properties: {
                Category: !0
            },
            type: f.describeDataType(2048)
        }, {
            displayName: "Measure with long name",
            queryName: "select1",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        }, {
            displayName: "Measure",
            queryName: "select2",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        } ]
    }, s = {
        columns: [ {
            displayName: "Area",
            queryName: "select0",
            properties: {
                Category: !0
            },
            type: f.describeDataType(2048)
        }, {
            displayName: "BugsFiled",
            queryName: "select1",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        }, {
            displayName: "BugsFixed",
            queryName: "select2",
            isMeasure: !0,
            properties: {
                Values: !0
            },
            type: f.describeDataType(1)
        } ]
    };
    describe("Treemap", function() {
        var a = {
            displayName: "year",
            queryName: "select0",
            type: f.describeDataType(2048)
        }, b = {
            displayName: "sales",
            queryName: "select1",
            isMeasure: !0,
            type: f.describeDataType(i.Integer)
        };
        it("Treemap registered capabilities", function() {
            expect(powerbi.visuals.visualPluginFactory.create().getPlugin("treemap").capabilities).toBe(powerbi.visuals.treemapCapabilities);
        }), it("Capabilities should include dataViewMappings", function() {
            expect(powerbi.visuals.treemapCapabilities.dataViewMappings).toBeDefined();
        }), it("Capabilities should include dataRoles", function() {
            expect(powerbi.visuals.treemapCapabilities.dataRoles).toBeDefined();
        }), it("Capabilities should include objects", function() {
            expect(powerbi.visuals.treemapCapabilities.objects).toBeDefined();
        }), it("Capabilities should include implicitSort", function() {
            expect(powerbi.visuals.treemapCapabilities.sorting.implicit).toBeDefined();
        }), it("FormatString property should match calculated", function() {
            expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.treemapCapabilities.objects)).toEqual(powerbi.visuals.treemapProps.general.formatString);
        }), it("preferred capability does not support zero rows", function() {
            var c = {
                columns: [ {
                    displayName: "Year"
                }, {
                    displayName: "Value",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: a,
                        values: []
                    } ],
                    values: h.createValueColumns([ {
                        source: b,
                        values: []
                    } ])
                }
            };
            expect(g.supports(d, powerbi.visuals.treemapCapabilities.dataViewMappings[0], !0)).toBe(!1);
        }), it("preferred capability does not support one row", function() {
            var c = {
                columns: [ {
                    displayName: "Year"
                }, {
                    displayName: "Value",
                    isMeasure: !0
                } ]
            }, d = {
                metadata: c,
                categorical: {
                    categories: [ {
                        source: a,
                        values: [ 2012, 2013 ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b,
                        values: [ 200 ]
                    } ])
                }
            };
            expect(g.supports(d, powerbi.visuals.treemapCapabilities.dataViewMappings[0], !0)).toBe(!1);
        }), it("Capabilities should only allow one measure if there are group and detail", function() {
            var a = {
                Group: [ {
                    queryRef: "0"
                } ],
                Details: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                } ]
            }, b = {
                Group: [ {
                    queryRef: "0"
                } ],
                Details: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                } ]
            }, c = {
                Group: [ {
                    queryRef: "0"
                } ],
                Details: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "3"
                }, {
                    queryRef: "4"
                } ]
            }, d = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, d)).toEqual(d), expect(g.chooseDataViewMappings(b, d)).toBe(null), 
            expect(g.chooseDataViewMappings(c, d)).toBe(null);
        }), it("Capabilities should only allow one measure if is a detail group", function() {
            var a = {
                Details: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "0"
                } ]
            }, b = {
                Details: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "0"
                } ]
            }, c = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, c)).toEqual(c), expect(g.chooseDataViewMappings(b, c)).toBe(null);
        }), it("Capabilities should allow multiple measures if there is no detail group", function() {
            var a = {
                Group: [ {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "1"
                }, {
                    queryRef: "0"
                } ]
            }, b = {
                Group: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                }, {
                    queryRef: "0"
                }, {
                    queryRef: "3"
                } ]
            }, c = {
                Group: [ {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "0"
                } ]
            }, d = {
                Values: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, e = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, e)).toEqual(e), expect(g.chooseDataViewMappings(b, e)).toEqual(e), 
            expect(g.chooseDataViewMappings(c, e)).toEqual(e), expect(g.chooseDataViewMappings(d, e)).toEqual(e);
        }), it("Capabilities should not allow multiple category groups", function() {
            var a = {
                Group: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, b = {
                Group: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                } ]
            }, c = {
                Group: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ],
                Details: [ {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "3"
                } ]
            }, d = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, d)).toBe(null), expect(g.chooseDataViewMappings(b, d)).toBe(null), 
            expect(g.chooseDataViewMappings(c, d)).toBe(null);
        }), it("Capabilities should not allow multiple detail groups", function() {
            var a = {
                Details: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ]
            }, b = {
                Details: [ {
                    queryRef: "0"
                }, {
                    queryRef: "1"
                } ],
                Values: [ {
                    queryRef: "2"
                } ]
            }, c = {
                Group: [ {
                    queryRef: "0"
                } ],
                Details: [ {
                    queryRef: "1"
                }, {
                    queryRef: "2"
                } ],
                Values: [ {
                    queryRef: "3"
                } ]
            }, d = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, d)).toBe(null), expect(g.chooseDataViewMappings(b, d)).toBe(null), 
            expect(g.chooseDataViewMappings(c, d)).toBe(null);
        }), it("Capabilities should allow one category and/or one detail groups", function() {
            var a = {
                Group: [ {
                    queryRef: "0"
                } ]
            }, b = {
                Detail: [ {
                    queryRef: "0"
                } ]
            }, c = {
                Group: [ {
                    queryRef: "0"
                } ],
                Detail: [ {
                    queryRef: "1"
                } ]
            }, d = {
                Values: [ {
                    queryRef: "0"
                } ]
            }, e = powerbi.visuals.treemapCapabilities.dataViewMappings;
            expect(g.chooseDataViewMappings(a, e)).toEqual(e), expect(g.chooseDataViewMappings(b, e)).toEqual(e), 
            expect(g.chooseDataViewMappings(c, e)).toEqual(e), expect(g.chooseDataViewMappings(d, e)).toEqual(e);
        });
    }), describe("treemap data labels validation", function() {
        function b(b) {
            var c = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: b,
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        } ], [ p ])
                    }
                } ]
            };
            return c.dataViews[0].categorical.values.source = n.columns[1], c;
        }
        var c, d, f;
        beforeEach(function() {
            f = a.mocks.createVisualHostServices(), a.mocks.setLocale(powerbi.common.createLocalizationService()), 
            d = a.helpers.testDom("500", "500"), c = powerbi.visuals.visualPluginFactory.create().getPlugin("treemap").create(), 
            c.init({
                element: d,
                host: f,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: d.height(),
                    width: d.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("NaN in values shows a warning", function(a) {
            var d = jasmine.createSpy("warning");
            f.setWarnings = d;
            var e = b([ NaN, 120 ]);
            c.onDataChanged(e), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported"), 
                a();
            }, m);
        }), it("Negative Infinity in values shows a warning", function(a) {
            var d = jasmine.createSpy("warning");
            f.setWarnings = d;
            var e = b([ Number.NEGATIVE_INFINITY, 120 ]);
            c.onDataChanged(e), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, m);
        }), it("Positive Infinity in values shows a warning", function(a) {
            var d = jasmine.createSpy("warning");
            f.setWarnings = d;
            var e = b([ Number.POSITIVE_INFINITY, 120 ]);
            c.onDataChanged(e), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported"), 
                a();
            }, m);
        }), it("Out of range value in values shows a warning", function(a) {
            var d = jasmine.createSpy("warning");
            f.setWarnings = d;
            var e = b([ 1e301, 120 ]);
            c.onDataChanged(e), setTimeout(function() {
                expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange"), 
                a();
            }, m);
        }), it("All okay in values shows a warning", function(a) {
            var d = jasmine.createSpy("warning");
            f.setWarnings = d;
            var e = b([ 300, 120 ]);
            c.onDataChanged(e), setTimeout(function() {
                expect(d).not.toHaveBeenCalled(), a();
            }, m);
        }), it("labels should be visible by default", function(b) {
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ], [ p ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(d), setTimeout(function() {
                expect($(".treemap .labels .minorLabel").css("opacity")).toBe("1"), expect($(".treemap .labels .majorLabel").css("opacity")).toBe("1"), 
                b();
            }, m);
        }), it("labels should be visible", function(b) {
            n.objects = {
                labels: {
                    show: !0
                }
            };
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(d), setTimeout(function() {
                expect($(".treemap .labels .minorLabel").css("opacity")).toBe("1"), expect($(".treemap .labels .majorLabel").css("opacity")).toBe("1"), 
                b();
            }, m);
        }), it("labels should be hidden", function(b) {
            n.objects = {
                labels: {
                    show: !1
                }
            };
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(d), setTimeout(function() {
                expect($(".treemap .labels .minorLabel").length).toEqual(0), expect($(".treemap .labels .majorLabel").length).toEqual(0), 
                b();
            }, m);
        }), it("hidden labels with highlights dom validation", function(b) {
            n.objects = {
                labels: {
                    show: !1
                }
            };
            var d = [ a.mocks.dataViewScopeIdentity("Drama"), a.mocks.dataViewScopeIdentity("Comedy"), a.mocks.dataViewScopeIdentity("Documentary") ];
            c.onDataChanged({
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "Drama", "Comedy", "Documentary" ],
                            identity: d,
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[1],
                            values: [ 110, 120, 130 ],
                            highlights: [ 60, 80, 20 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                expect($(".treemap .labels .majorLabel").length).toBe(0), expect($(".treemap .labels .minorLabel").length).toBe(0), 
                b();
            }, m);
        }), it("labels color should changed from settings", function(b) {
            var d = "rgb(120,110,100)";
            n.objects = {
                labels: {
                    color: {
                        solid: {
                            color: d
                        }
                    },
                    show: !0
                }
            };
            var f = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            f.dataViews[0].categorical.values.source = n.columns[1], c.onDataChanged(f), setTimeout(function() {
                var a = $(".treemap .labels .minorLabel").css("fill").replace(/\ /g, ""), c = $(".treemap .labels .majorLabel").css("fill").replace(/\ /g, "");
                a = "#" === a[0] ? jsCommon.color.rgbString(jsCommon.color.parseRgb(a)) : a, c = "#" === c[0] ? jsCommon.color.rgbString(jsCommon.color.parseRgb(c)) : c, 
                expect(a).toBe(d), expect(c).toBe(d), b();
            }, m);
        });
    }), describe("Enumerate Objects", function() {
        var b, c;
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.create().getPlugin("treemap").create(), 
            b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("Check basic enumeration", function(c) {
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1], b.onDataChanged(d), setTimeout(function() {
                var a = b.enumerateObjectInstances({
                    objectName: "dataPoint"
                });
                expect(a.length).toBe(2), expect(a[0].displayName).toEqual("The Nuthatches"), expect(a[0].properties.fill).toBeDefined(), 
                expect(a[1].displayName).toEqual("Skylarks"), expect(a[1].properties.fill).toBeDefined(), 
                c();
            }, m);
        });
    }), describe("Treemap DOM validation", function() {
        return b(!1);
    }), describe("Treemap DOM validation - with legend", function() {
        return b(!0);
    }), describe("treemap web animation", function() {
        var b, c;
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), b = powerbi.visuals.visualPluginFactory.createMinerva({
                heatMap: !1
            }).getPlugin("treemap").create(), b.init({
                element: c,
                host: a.mocks.createVisualHostServices(),
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                }
            });
        }), it("treemap highlight animation", function(c) {
            var d = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            d.dataViews[0].categorical.values.source = n.columns[1];
            var f = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            highlights: [ 60, 70 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            highlights: [ 160, 170 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            highlights: [ 260, 270 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            f.dataViews[0].categorical.values.source = n.columns[1];
            var g = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "The Nuthatches", "Skylarks" ],
                            identity: [ a.mocks.dataViewScopeIdentity("The Nuthatches"), a.mocks.dataViewScopeIdentity("Skylarks") ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            highlights: [ 20, 10 ],
                            identity: e.createDataViewScopeIdentity(j.text("201501"))
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            highlights: [ 120, 110 ],
                            identity: e.createDataViewScopeIdentity(j.text("201502"))
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            highlights: [ 220, 210 ],
                            identity: e.createDataViewScopeIdentity(j.text("201503"))
                        } ])
                    }
                } ]
            };
            g.dataViews[0].categorical.values.source = n.columns[1], b.onDataChanged(d), setTimeout(function() {
                var a = $(".treemap"), e = a.attr("height"), h = a.attr("width"), i = b.animator;
                spyOn(i, "animate").and.callThrough(), b.onDataChanged(f), b.onDataChanged(g), b.onDataChanged(d), 
                expect(i).toBeTruthy(), expect(i.animate).toHaveBeenCalled(), setTimeout(function() {
                    var a = $(".treemap");
                    expect(a).toBeInDOM(), expect(a.attr("height")).toBe(e), expect(a.attr("width")).toBe(h), 
                    c();
                }, m);
            }, m);
        });
    }), describe("treemap interactivity", function() {
        var b, c, e, f = "", g = k.DimmedShapeOpacity.toString();
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), beforeEach(function() {
            c = a.helpers.testDom("500", "500"), e = a.mocks.createVisualHostServices(), b = powerbi.visuals.visualPluginFactory.create().getPlugin("treemap").create(), 
            b.init({
                element: c,
                host: e,
                style: powerbi.visuals.visualStyles.create(),
                viewport: {
                    height: c.height(),
                    width: c.width()
                },
                animation: {
                    transitionImmediate: !0
                },
                interactivity: {
                    selection: !0
                }
            });
        }), it("treemap categories and series - single select", function(c) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], i = [ a.mocks.dataViewScopeIdentity("201501"), a.mocks.dataViewScopeIdentity("201502"), a.mocks.dataViewScopeIdentity("201503") ], j = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "A", "B" ],
                            identity: d,
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: i[0]
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: i[1]
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: i[2]
                        } ])
                    }
                } ]
            };
            j.dataViews[0].categorical.values.source = n.columns[1], b.onDataChanged(j), setTimeout(function() {
                var a = $(".treemap .shapes .rootNode"), b = $(".treemap .shapes .parentGroup"), h = $(".treemap .shapes .nodeGroup");
                spyOn(e, "onSelect").and.callThrough(), $(".majorLabel").first().d3Click(0, 0), 
                expect(a[0].style.fillOpacity).toBe(f), expect(b[0].style.fillOpacity).toBe(f), 
                expect(b[1].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(f), 
                expect(h[1].style.fillOpacity).toBe(f), expect(h[2].style.fillOpacity).toBe(f), 
                expect(h[3].style.fillOpacity).toBe(g), expect(h[4].style.fillOpacity).toBe(g), 
                expect(h[5].style.fillOpacity).toBe(g), expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ d[0] ]
                    } ]
                }), $(".majorLabel").first().d3Click(0, 0), $(".nodeGroup").first().d3Click(0, 0), 
                expect(a[0].style.fillOpacity).toBe(f), expect(b[0].style.fillOpacity).toBe(f), 
                expect(b[1].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(f), 
                expect(h[1].style.fillOpacity).toBe(g), expect(h[2].style.fillOpacity).toBe(g), 
                expect(h[3].style.fillOpacity).toBe(g), expect(h[4].style.fillOpacity).toBe(g), 
                expect(h[5].style.fillOpacity).toBe(g), expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ d[0], i[0] ]
                    } ]
                }), $(".minorLabel").last().d3Click(0, 0), expect(a[0].style.fillOpacity).toBe(f), 
                expect(b[0].style.fillOpacity).toBe(f), expect(b[1].style.fillOpacity).toBe(f), 
                expect(h[0].style.fillOpacity).toBe(g), expect(h[1].style.fillOpacity).toBe(g), 
                expect(h[2].style.fillOpacity).toBe(g), expect(h[3].style.fillOpacity).toBe(g), 
                expect(h[4].style.fillOpacity).toBe(g), expect(h[5].style.fillOpacity).toBe(f), 
                expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ d[1], i[2] ]
                    } ]
                }), $(".minorLabel").last().d3Click(0, 0), expect(a[0].style.fillOpacity).toBe(f), 
                expect(b[0].style.fillOpacity).toBe(f), expect(b[1].style.fillOpacity).toBe(f), 
                expect(h[0].style.fillOpacity).toBe(f), expect(h[1].style.fillOpacity).toBe(f), 
                expect(h[2].style.fillOpacity).toBe(f), expect(h[3].style.fillOpacity).toBe(f), 
                expect(h[4].style.fillOpacity).toBe(f), expect(h[5].style.fillOpacity).toBe(f), 
                expect(e.onSelect).toHaveBeenCalledWith({
                    data: []
                }), c();
            }, m);
        }), it("treemap categories and measures - single click on category node (parent shape must be selectable)", function(c) {
            var i = [ a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("b") ];
            b.onDataChanged({
                dataViews: [ {
                    metadata: s,
                    categorical: {
                        categories: [ {
                            source: s.columns[0],
                            values: [ "Front end", "Back end" ],
                            identity: i,
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: s.columns[1],
                            values: [ 110, 120 ]
                        }, {
                            source: s.columns[2],
                            values: [ 210, 220 ]
                        } ])
                    }
                } ]
            }), setTimeout(function() {
                var a = $(".treemap .shapes .rootNode"), b = $(".treemap .shapes .parentGroup"), h = $(".treemap .shapes .nodeGroup");
                expect(b[0].style.fill).toBe(d.noneValue), expect(b[1].style.fill).toBe(d.noneValue), 
                expect(h[0].style.fill).not.toBe(d.noneValue), expect(h[1].style.fill).not.toBe(d.noneValue), 
                expect(h[2].style.fill).not.toBe(d.noneValue), expect(h[3].style.fill).not.toBe(d.noneValue), 
                spyOn(e, "onSelect").and.callThrough(), $(".parentGroup").last().d3Click(0, 0), 
                expect(a[0].style.fillOpacity).toBe(f), expect(b[0].style.fillOpacity).toBe(f), 
                expect(b[1].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(g), 
                expect(h[1].style.fillOpacity).toBe(g), expect(h[2].style.fillOpacity).toBe(f), 
                expect(h[3].style.fillOpacity).toBe(f), expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ i[1] ]
                    } ]
                }), c();
            }, m);
        }), it("treemap categories and series - selection across resize", function(c) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], i = [ a.mocks.dataViewScopeIdentity("201501"), a.mocks.dataViewScopeIdentity("201502"), a.mocks.dataViewScopeIdentity("201503") ], j = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "A", "B" ],
                            identity: d,
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: i[0]
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: i[1]
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: i[2]
                        } ])
                    }
                } ]
            };
            j.dataViews[0].categorical.values.source = n.columns[1], b.onDataChanged(j), setTimeout(function() {
                var a = $(".treemap .shapes .rootNode"), h = $(".treemap .shapes .parentGroup"), i = $(".treemap .shapes .nodeGroup");
                spyOn(e, "onSelect").and.callThrough(), $(".majorLabel").first().d3Click(0, 0), 
                expect(a[0].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(f), 
                expect(h[1].style.fillOpacity).toBe(f), expect(i[0].style.fillOpacity).toBe(f), 
                expect(i[1].style.fillOpacity).toBe(f), expect(i[2].style.fillOpacity).toBe(f), 
                expect(i[3].style.fillOpacity).toBe(g), expect(i[4].style.fillOpacity).toBe(g), 
                expect(i[5].style.fillOpacity).toBe(g), expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ d[0] ]
                    } ]
                }), b.onResizing({
                    width: 300,
                    height: 300
                }, 0), setTimeout(function() {
                    expect(a[0].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(f), 
                    expect(h[1].style.fillOpacity).toBe(f), expect(i[0].style.fillOpacity).toBe(f), 
                    expect(i[1].style.fillOpacity).toBe(f), expect(i[2].style.fillOpacity).toBe(f), 
                    expect(i[3].style.fillOpacity).toBe(g), expect(i[4].style.fillOpacity).toBe(g), 
                    expect(i[5].style.fillOpacity).toBe(g), c();
                }, m);
            }, m);
        }), it("treemap external clear selection ", function(c) {
            var d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b") ], i = [ a.mocks.dataViewScopeIdentity("201501"), a.mocks.dataViewScopeIdentity("201502"), a.mocks.dataViewScopeIdentity("201503") ], j = {
                dataViews: [ {
                    metadata: n,
                    categorical: {
                        categories: [ {
                            source: n.columns[0],
                            values: [ "A", "B" ],
                            identity: [ d[0], d[1] ],
                            identityFields: [ o ]
                        } ],
                        values: h.createValueColumns([ {
                            source: n.columns[2],
                            values: [ 110, 120 ],
                            identity: i[0]
                        }, {
                            source: n.columns[3],
                            values: [ 210, 220 ],
                            identity: i[1]
                        }, {
                            source: n.columns[4],
                            values: [ 310, 320 ],
                            identity: i[2]
                        } ])
                    }
                } ]
            };
            j.dataViews[0].categorical.values.source = n.columns[1], b.onDataChanged(j), setTimeout(function() {
                var a = $(".treemap .shapes .rootNode"), h = $(".treemap .shapes .parentGroup"), j = $(".treemap .shapes .nodeGroup");
                spyOn(e, "onSelect").and.callThrough(), $(".nodeGroup").first().d3Click(0, 0), expect(a[0].style.fillOpacity).toBe(f), 
                expect(h[0].style.fillOpacity).toBe(f), expect(h[1].style.fillOpacity).toBe(f), 
                expect(j[0].style.fillOpacity).toBe(f), expect(j[1].style.fillOpacity).toBe(g), 
                expect(j[2].style.fillOpacity).toBe(g), expect(j[3].style.fillOpacity).toBe(g), 
                expect(j[4].style.fillOpacity).toBe(g), expect(j[5].style.fillOpacity).toBe(g), 
                expect(e.onSelect).toHaveBeenCalledWith({
                    data: [ {
                        data: [ d[0], i[0] ]
                    } ]
                }), b.onClearSelection(), expect(a[0].style.fillOpacity).toBe(f), expect(h[0].style.fillOpacity).toBe(f), 
                expect(h[1].style.fillOpacity).toBe(f), expect(j[0].style.fillOpacity).toBe(f), 
                expect(j[1].style.fillOpacity).toBe(f), expect(j[2].style.fillOpacity).toBe(f), 
                expect(j[3].style.fillOpacity).toBe(f), expect(j[4].style.fillOpacity).toBe(f), 
                expect(j[5].style.fillOpacity).toBe(f), c();
            }, m);
        });
    }), describe("treemap converter validation", function() {
        beforeEach(function() {
            a.mocks.setLocale(powerbi.common.createLocalizationService());
        }), it("treemap dataView multi measure", function() {
            var a = {
                columns: [ {
                    displayName: "EventCount",
                    queryName: "EventCount",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1),
                    objects: {
                        dataPoint: {
                            fill: {
                                solid: {
                                    color: "red"
                                }
                            }
                        }
                    }
                }, {
                    displayName: "MedalCount",
                    queryName: "MedalCount",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: h.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 110 ]
                    }, {
                        source: a.columns[1],
                        values: [ 210 ]
                    } ])
                }
            }, d = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), e = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = k.converter(b, e, d, null), i = g.root, j = [ l.createWithMeasure("EventCount"), l.createWithMeasure("MedalCount") ], m = i.children;
            expect(m.length).toBe(2), expect(m[0].name).toBe("EventCount"), expect(m[0].size).toBe(110), 
            expect(m[0].children).not.toBeDefined(), expect(m[0].key).toBe(j[0].getKey()), expect(m[1].name).toBe("MedalCount"), 
            expect(m[1].size).toBe(210), expect(m[1].children).not.toBeDefined(), expect(m[1].key).toBe(j[1].getKey());
            var n = m.map(function(a) {
                return a.color;
            });
            expect(n).toEqual(c.distinct(n)), expect(n[0]).toEqual("red"), expect(g.legendData.title).toBe(""), 
            expect(g.legendData.dataPoints[0].label).toBe("EventCount");
        }), it("treemap dataView multi measure with null values", function() {
            var a = {
                columns: [ {
                    displayName: "EventCount",
                    queryName: "EventCount",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: "MedalCount",
                    queryName: "MedalCount",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: h.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 110 ]
                    }, {
                        source: a.columns[1],
                        values: [ null ]
                    } ])
                }
            }, c = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), d = powerbi.visuals.visualStyles.create().colorPalette.dataColors, e = k.converter(b, d, c, null), g = e.root, i = [ l.createWithMeasure("EventCount"), l.createWithMeasure("MedalCount") ], j = g.children;
            expect(j.length).toBe(1), expect(j[0].name).toBe("EventCount"), expect(j[0].size).toBe(110), 
            expect(j[0].children).not.toBeDefined(), expect(j[0].key).toBe(i[0].getKey()), expect(e.legendData.title).toBe(""), 
            expect(e.legendData.dataPoints[0].label).toBe("EventCount");
        }), it("treemap dataView multi category multi measure", function() {
            var b = {
                columns: [ {
                    displayName: "Continent",
                    queryName: "select0",
                    properties: {
                        Category: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "EventCount",
                    queryName: "select1",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: "MedalCount",
                    queryName: "select2",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "Africa", "Asia", "Australia", "Europe", "North America" ],
                        identity: d,
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b.columns[1],
                        values: [ 110, 120, 130, 140, 150 ]
                    }, {
                        source: b.columns[2],
                        values: [ 210, 220, 230, 240, 250 ]
                    } ])
                }
            }, g = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = k.converter(e, i, g, null), m = j.root, n = d.map(function(a) {
                return l.createWithId(a);
            }), p = m.children;
            expect(p.length).toBe(5);
            var q = p[0];
            expect(q.name).toBe("Africa"), expect(q.size).toBe(320), expect(q.children).toBeDefined(), 
            expect(q.children.length).toBe(2), expect(q.key).toBe(n[0].getKey()), q = p[1], 
            expect(q.name).toBe("Asia"), expect(q.size).toBe(340), expect(q.children).toBeDefined(), 
            expect(q.children.length).toBe(2), expect(q.key).toBe(n[1].getKey()), q = p[2], 
            expect(q.name).toBe("Australia"), expect(q.size).toBe(360), expect(q.children).toBeDefined(), 
            expect(q.children.length).toBe(2), expect(q.key).toBe(n[2].getKey()), q = p[3], 
            expect(q.name).toBe("Europe"), expect(q.size).toBe(380), expect(q.children).toBeDefined(), 
            expect(q.children.length).toBe(2), expect(q.key).toBe(n[3].getKey()), q = p[4], 
            expect(q.name).toBe("North America"), expect(q.size).toBe(400), expect(q.children).toBeDefined(), 
            expect(q.children.length).toBe(2), expect(q.key).toBe(n[4].getKey());
            var r = [ l.createWithIdAndMeasure(d[4], "select1"), l.createWithIdAndMeasure(d[4], "select2") ], s = q.children[0];
            expect(s.name).toBe("EventCount"), expect(s.size).toBe(150), expect(s.children).not.toBeDefined(), 
            expect(s.key).toBe(r[0].getKey()), expect(s.color).toBe(q.color), s = q.children[1], 
            expect(s.name).toBe("MedalCount"), expect(s.size).toBe(250), expect(s.children).not.toBeDefined(), 
            expect(s.key).toBe(r[1].getKey()), expect(s.color).toBe(q.color);
            var t = p.map(function(a) {
                return a.color;
            });
            expect(t).toEqual(c.distinct(t)), expect(j.legendData.title).toBe("Continent"), 
            expect(j.legendData.dataPoints[0].label).toBe("Africa");
        }), it("treemap dataView multi series one measure", function() {
            var b = {
                columns: [ {
                    displayName: "Year",
                    properties: {
                        Series: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "MedalCount",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c") ], e = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "2004", "2008", "2012" ],
                        identity: d,
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b.columns[1],
                        values: [ 110, 120, 130 ]
                    } ])
                }
            }, g = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = k.converter(e, i, g, null), m = j.root, n = [ l.createWithId(d[0]), l.createWithId(d[2]) ], p = m.children;
            expect(p.length).toBe(3), expect(p[0].name).toBe("2004"), expect(p[0].size).toBe(110), 
            expect(p[0].children).not.toBeDefined(), expect(p[0].key).toBe(n[0].getKey()), expect(p[2].name).toBe("2012"), 
            expect(p[2].size).toBe(130), expect(p[2].children).not.toBeDefined(), expect(p[2].key).toBe(n[1].getKey());
            var q = p.map(function(a) {
                return a.color;
            });
            expect(q).toEqual(c.distinct(q)), expect(j.legendData.title).toBe("Year"), expect(j.legendData.dataPoints[0].label).toBe("2004");
        }), it("treemap dataView multi category/series", function() {
            var b = {
                columns: [ {
                    displayName: "Continent",
                    properties: {
                        Category: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "Year",
                    properties: {
                        Series: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2004",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2008",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2012",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity("a"), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = [ a.mocks.dataViewScopeIdentity(2004), a.mocks.dataViewScopeIdentity(2008), a.mocks.dataViewScopeIdentity(2012) ], g = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ "Africa", "Asia", "Australia", "Europe", "North America" ],
                        identity: d,
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b.columns[2],
                        values: [ 110, 120, 130, 140, 150 ],
                        identity: e[0]
                    }, {
                        source: b.columns[3],
                        values: [ 210, 220, 230, 240, 250 ],
                        identity: e[1]
                    }, {
                        source: b.columns[4],
                        values: [ 310, 320, 330, 340, 350 ],
                        identity: e[2]
                    } ])
                }
            };
            g.categorical.values.source = b.columns[1];
            var i = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), j = powerbi.visuals.visualStyles.create().colorPalette.dataColors, m = k.converter(g, j, i, null), n = m.root, p = [ l.createWithId(d[0]), l.createWithId(d[4]), l.createWithIds(d[4], e[2]) ], q = n.children;
            expect(q.length).toBe(5), expect(q[0].name).toBe("Africa"), expect(q[0].size).toBe(630), 
            expect(q[0].children).toBeDefined(), expect(q[0].children.length).toBe(3), expect(q[0].key).toBe(p[0].getKey());
            var r = q[4];
            expect(r.name).toBe("North America"), expect(r.size).toBe(750), expect(r.children).toBeDefined(), 
            expect(r.children.length).toBe(3), expect(r.key).toBe(p[1].getKey());
            var s = r.children;
            expect(s[2].name).toBe("2012"), expect(s[2].size).toBe(350), expect(s[2].children).not.toBeDefined(), 
            expect(s[2].key).toBe(p[2].getKey()), s.forEach(function(a) {
                return expect(a.color).toBe(r.color);
            });
            var t = q.map(function(a) {
                return a.color;
            });
            expect(t).toEqual(c.distinct(t)), expect(m.legendData.title).toBe("Continent"), 
            expect(m.legendData.dataPoints[0].label).toBe("Africa");
        }), it("treemap dataView multi category/series with null values", function() {
            var b = {
                columns: [ {
                    displayName: "Continent",
                    properties: {
                        Category: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "Year",
                    properties: {
                        Series: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2004",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2008",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2012",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, d = [ a.mocks.dataViewScopeIdentity(null), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], e = [ a.mocks.dataViewScopeIdentity(2004), a.mocks.dataViewScopeIdentity(2008), a.mocks.dataViewScopeIdentity(2012) ], g = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ null, "Asia", "Australia", "Europe", "North America" ],
                        identity: d,
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b.columns[2],
                        values: [ null, 120, 130, 140, null ],
                        identity: e[0]
                    }, {
                        source: b.columns[3],
                        values: [ 210, 220, null, 240, null ],
                        identity: e[1]
                    }, {
                        source: b.columns[4],
                        values: [ null, 320, 330, 340, null ],
                        identity: e[2]
                    } ])
                }
            }, i = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), j = powerbi.visuals.visualStyles.create().colorPalette.dataColors, m = k.converter(g, j, i, null), n = m.root, p = n.children;
            expect(p.length).toBe(4), expect(p[0].name).toBe("(Blank)"), expect(p[0].size).toBe(210), 
            expect(p[0].children).toBeDefined(), expect(p[0].children.length).toBe(1), expect(p[0].key).toBe(l.createWithId(d[0]).getKey());
            var q = p.map(function(a) {
                return a.color;
            });
            expect(q).toEqual(c.distinct(q)), expect(m.legendData.title).toBe("Continent"), 
            expect(m.legendData.dataPoints[0].label).toBe("(Blank)"), expect(m.legendData.dataPoints[1].label).toBe("Asia");
        }), it("treemap dataView multi category/series with null values tooltip data test", function() {
            var b = {
                columns: [ {
                    displayName: "Continent",
                    properties: {
                        Category: !0
                    },
                    type: f.describeDataType(2048)
                }, {
                    displayName: "Year",
                    properties: {
                        Series: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2004",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2008",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: null,
                    groupName: "2012",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, c = [ a.mocks.dataViewScopeIdentity(null), a.mocks.dataViewScopeIdentity("b"), a.mocks.dataViewScopeIdentity("c"), a.mocks.dataViewScopeIdentity("d"), a.mocks.dataViewScopeIdentity("e") ], d = [ a.mocks.dataViewScopeIdentity(2004), a.mocks.dataViewScopeIdentity(2008), a.mocks.dataViewScopeIdentity(2012) ], e = {
                metadata: b,
                categorical: {
                    categories: [ {
                        source: b.columns[0],
                        values: [ null, "Asia", "Australia", "Europe", "North America" ],
                        identity: c,
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: b.columns[2],
                        values: [ null, 120, 130, 140, null ],
                        identity: d[0]
                    }, {
                        source: b.columns[3],
                        values: [ 210, 220, null, 240, null ],
                        identity: d[1]
                    }, {
                        source: b.columns[4],
                        values: [ null, 320, 330, 340, null ],
                        identity: d[2]
                    } ])
                }
            }, g = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), i = powerbi.visuals.visualStyles.create().colorPalette.dataColors, j = k.converter(e, i, g, null).root, l = j.children[0], m = j.children[0].children[0], n = j.children[1], p = j.children[2], q = j.children[3];
            expect(l.tooltipInfo).toEqual([ {
                displayName: "Continent",
                value: "(Blank)"
            } ]), expect(m.tooltipInfo).toEqual([ {
                displayName: "Continent",
                value: "(Blank)"
            }, {
                displayName: null,
                value: "210"
            } ]), expect(n.tooltipInfo).toEqual([ {
                displayName: "Continent",
                value: "Asia"
            }, {
                displayName: null,
                value: "120"
            } ]), expect(p.tooltipInfo).toEqual([ {
                displayName: "Continent",
                value: "Australia"
            }, {
                displayName: null,
                value: "130"
            } ]), expect(q.tooltipInfo).toEqual([ {
                displayName: "Continent",
                value: "Europe"
            }, {
                displayName: null,
                value: "140"
            } ]);
        }), it("treemap non-categorical multi-measure tooltip values test", function() {
            var a = {
                columns: [ {
                    displayName: "a",
                    isMeasure: !0
                }, {
                    displayName: "b",
                    isMeasure: !0
                }, {
                    displayName: "c",
                    isMeasure: !0
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: h.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 1 ]
                    }, {
                        source: a.columns[1],
                        values: [ 2 ]
                    }, {
                        source: a.columns[2],
                        values: [ 3 ]
                    } ])
                }
            }, c = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), d = powerbi.visuals.visualStyles.create().colorPalette.dataColors, e = k.converter(b, d, c, null).root, f = e.children[0], g = e.children[1], i = e.children[2];
            expect(f.tooltipInfo).toEqual([ {
                displayName: "a",
                value: "1"
            } ]), expect(g.tooltipInfo).toEqual([ {
                displayName: "b",
                value: "2"
            } ]), expect(i.tooltipInfo).toEqual([ {
                displayName: "c",
                value: "3"
            } ]);
        }), it("treemap dataView multi measure", function() {
            var a = {
                columns: [ {
                    displayName: "EventCount",
                    queryName: "select1",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                }, {
                    displayName: "MedalCount",
                    queryName: "select2",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: h.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 110 ]
                    }, {
                        source: a.columns[1],
                        values: [ 210 ]
                    } ])
                }
            }, d = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), e = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = k.converter(b, e, d, null), i = g.root, j = a.columns.map(function(a) {
                return l.createWithMeasure(a.queryName);
            }), m = i.children;
            expect(m.length).toBe(2);
            var n = m[0];
            expect(n.name).toBe("EventCount"), expect(n.size).toBe(110), expect(n.children).not.toBeDefined(), 
            expect(n.key).toBe(j[0].getKey()), n = m[1], expect(n.name).toBe("MedalCount"), 
            expect(n.size).toBe(210), expect(n.children).not.toBeDefined(), expect(n.key).toBe(j[1].getKey());
            var o = m.map(function(a) {
                return a.color;
            });
            expect(o).toEqual(c.distinct(o)), expect(g.legendData.title).toBe(""), expect(g.legendData.dataPoints[0].label).toBe("EventCount"), 
            expect(g.legendData.dataPoints[1].label).toBe("MedalCount");
        }), it("treemap dataView single measure", function() {
            var a = {
                columns: [ {
                    displayName: "EventCount",
                    queryName: "select1",
                    isMeasure: !0,
                    properties: {
                        Y: !0
                    },
                    type: f.describeDataType(1)
                } ]
            }, b = {
                metadata: a,
                categorical: {
                    values: h.createValueColumns([ {
                        source: a.columns[0],
                        values: [ 110 ]
                    } ])
                }
            }, d = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), e = powerbi.visuals.visualStyles.create().colorPalette.dataColors, g = k.converter(b, e, d, null), i = g.root, j = a.columns.map(function(a) {
                return l.createWithMeasure(a.queryName);
            }), m = i.children;
            expect(m.length).toBe(1);
            var n = m[0];
            expect(n.name).toBe("EventCount"), expect(n.size).toBe(110), expect(n.children).not.toBeDefined(), 
            expect(n.key).toBe(j[0].getKey());
            var o = m.map(function(a) {
                return a.color;
            });
            expect(o).toEqual(c.distinct(o)), expect(g.legendData.title).toBe(""), expect(g.legendData.dataPoints[0].label).toBe("EventCount");
        }), it("treemap categories and measures with highlights tooltip data test", function() {
            var b = {
                metadata: s,
                categorical: {
                    categories: [ {
                        source: s.columns[0],
                        values: [ "Front end", "Back end" ],
                        identity: [ a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("b") ],
                        identityFields: [ o ]
                    } ],
                    values: h.createValueColumns([ {
                        source: s.columns[1],
                        values: [ 110, 120 ],
                        highlights: [ 60, 60 ]
                    }, {
                        source: s.columns[2],
                        values: [ 210, 220 ],
                        highlights: [ 140, 200 ]
                    } ])
                }
            }, c = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), d = powerbi.visuals.visualStyles.create().colorPalette.dataColors, e = k.converter(b, d, c, null).root, f = e.children[0].children[0], g = e.children[0].children[1], i = e.children[1].children[0], j = e.children[1].children[1];
            expect(f.tooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Front end"
            }, {
                displayName: "BugsFiled",
                value: "110"
            } ]), expect(f.highlightedTooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Front end"
            }, {
                displayName: "BugsFiled",
                value: "110"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "60"
            } ]), expect(g.tooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Front end"
            }, {
                displayName: "BugsFixed",
                value: "210"
            } ]), expect(g.highlightedTooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Front end"
            }, {
                displayName: "BugsFixed",
                value: "210"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "140"
            } ]), expect(i.tooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Back end"
            }, {
                displayName: "BugsFiled",
                value: "120"
            } ]), expect(i.highlightedTooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Back end"
            }, {
                displayName: "BugsFiled",
                value: "120"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "60"
            } ]), expect(j.tooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Back end"
            }, {
                displayName: "BugsFixed",
                value: "220"
            } ]), expect(j.highlightedTooltipInfo).toEqual([ {
                displayName: "Area",
                value: "Back end"
            }, {
                displayName: "BugsFixed",
                value: "220"
            }, {
                displayName: powerbi.visuals.ToolTipComponent.localizationOptions.highlightedValueDisplayName,
                value: "200"
            } ]);
        }), it("treemap gradient color test", function() {
            var b = [ "#d9f2fb", "#ff557f", "#b1eab7" ], c = [ {
                dataPoint: {
                    fill: {
                        solid: {
                            color: b[0]
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: b[1]
                        }
                    }
                }
            }, {
                dataPoint: {
                    fill: {
                        solid: {
                            color: b[2]
                        }
                    }
                }
            } ], d = {
                columns: [ {
                    displayName: "col1"
                }, {
                    displayName: "col2",
                    isMeasure: !0
                }, {
                    displayName: "col3",
                    isMeasure: !0,
                    roles: {
                        Gradient: !0
                    }
                } ]
            }, e = {
                metadata: d,
                categorical: {
                    categories: [ {
                        source: d.columns[0],
                        values: [ "Front end", "Back end" ],
                        objects: c,
                        identity: [ a.mocks.dataViewScopeIdentity("f"), a.mocks.dataViewScopeIdentity("b") ]
                    } ],
                    values: h.createValueColumns([ {
                        source: d.columns[1],
                        values: [ 110, 120 ],
                        highlights: [ 60, 60 ]
                    }, {
                        source: d.columns[2],
                        values: [ 210, 220 ],
                        highlights: [ 140, 200 ]
                    } ])
                }
            }, f = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), g = powerbi.visuals.visualStyles.create().colorPalette.dataColors, i = k.converter(e, g, f, null, null).root, j = i.children[0], l = i.children[1];
            expect(j.color).toEqual(b[0]), expect(l.color).toEqual(b[1]);
        });
    });
}(powerbitests || (powerbitests = {})), describe("VisualFactory", function() {
    var a, b = "mock";
    beforeEach(function() {
        a = function() {
            return {};
        };
        var c = {
            name: b,
            capabilities: {},
            create: a
        };
        powerbi.visuals.plugins[b] = c;
    }), afterEach(function() {
        delete powerbi.visuals.plugins[b];
    }), it("getPlugin finds mock", function() {
        var a = powerbi.visuals.visualPluginFactory.create().getPlugin(b);
        expect(a).toBe(powerbi.visuals.plugins[b]);
    }), it("getRegisteredVisuals includes test", function() {
        var a = powerbi.visuals.visualPluginFactory.create().getVisuals().filter(function(a) {
            return a.name === b;
        });
        expect(a).toEqual([ powerbi.visuals.plugins[b] ]);
    });
});

var powerbitests;

!function(a) {
    function b(a, b) {}
    var c = powerbi.visuals.WaterfallChart, d = powerbi.data.dsr.DataShapeUtility, e = powerbi.data.SemanticType, f = powerbi.data.DataViewTransform, g = powerbi.visuals.SVGUtil, h = 10;
    describe("WaterfallChart", function() {
        var i = powerbi.common.createLocalizationService();
        powerbi.common.localize = i, a.mocks.setLocale(i);
        var j = {
            height: 500,
            width: 500
        }, k = {
            updateLegend: function(a) {
                return b(a, j);
            }
        }, l = d3.select($("<svg/>").get(0)), m = powerbi.visuals.visualStyles.create(), n = {
            element: a.helpers.testDom("500", "500"),
            host: a.mocks.createVisualHostServices(),
            style: m,
            viewport: j,
            svg: l,
            cartesianHost: k
        }, o = {
            displayName: "year",
            type: d.describeDataType(2048)
        }, p = {
            displayName: "sales",
            isMeasure: !0,
            type: d.describeDataType(e.Integer),
            objects: {
                general: {
                    formatString: "$0"
                }
            }
        }, q = m.colorPalette.dataColors;
        describe("axes", function() {
            function b(b) {
                var c = [ a.mocks.dataViewScopeIdentity("John Domo") ], e = {
                    columns: [ {
                        displayName: "AxesTitleTest",
                        type: d.describeDataType(1)
                    } ],
                    objects: {
                        categoryAxis: {
                            showAxisTitle: !0
                        },
                        valueAxis: {
                            showAxisTitle: !0
                        }
                    }
                }, g = {
                    metadata: e,
                    categorical: {
                        categories: [ {
                            source: e.columns[0],
                            values: [ 500, 2e3, 5e3, 1e4 ],
                            identity: c
                        } ],
                        values: f.createValueColumns([ {
                            source: e.columns[0],
                            values: b,
                            subtotal: 1020
                        } ])
                    }
                };
                return g;
            }
            var c, e;
            beforeEach(function() {
                var b = a.helpers.testDom("500", "500");
                c = a.mocks.createVisualHostServices(), e = powerbi.visuals.visualPluginFactory.create().getPlugin("waterfallChart").create(), 
                e.init({
                    element: b,
                    host: c,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: b.height(),
                        width: b.width()
                    },
                    interactivity: {
                        isInteractiveLegend: !1
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("NaN in values shows a warning", function() {
                var a = b([ 200, NaN ]), d = jasmine.createSpy("warning");
                c.setWarnings = d, e.onDataChanged({
                    dataViews: [ a ]
                }), expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("NaNNotSupported");
            }), it("Negative Infinity in values shows a warning", function() {
                var a = b([ 200, Number.NEGATIVE_INFINITY ]), d = jasmine.createSpy("warning");
                c.setWarnings = d, e.onDataChanged({
                    dataViews: [ a ]
                }), expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported");
            }), it("Postive Infinity in values shows a warning", function() {
                var a = b([ 200, Number.POSITIVE_INFINITY ]), d = jasmine.createSpy("warning");
                c.setWarnings = d, e.onDataChanged({
                    dataViews: [ a ]
                }), expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("InfinityValuesNotSupported");
            }), it("Value out of range in values shows a warning", function() {
                var a = b([ 200, -1e301 ]), d = jasmine.createSpy("warning");
                c.setWarnings = d, e.onDataChanged({
                    dataViews: [ a ]
                }), expect(d).toHaveBeenCalled(), expect(d.calls.count()).toBe(1), expect(d.calls.argsFor(0)[0][0].code).toBe("ValuesOutOfRange");
            }), it("All okay in values shows a warning", function() {
                var a = b([ 200, 300 ]), d = jasmine.createSpy("warning");
                c.setWarnings = d, e.onDataChanged({
                    dataViews: [ a ]
                }), expect(d).not.toHaveBeenCalled();
            }), it("Waterfall Chart X and Y-axis show/hide Title ", function() {
                var b = a.helpers.testDom("500", "500"), c = a.mocks.createVisualHostServices(), e = [ a.mocks.dataViewScopeIdentity("John Domo") ], g = powerbi.visuals.visualPluginFactory.create().getPlugin("waterfallChart").create();
                g.init({
                    element: b,
                    host: c,
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: b.height(),
                        width: b.width()
                    },
                    interactivity: {
                        isInteractiveLegend: !1
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
                var h = {
                    columns: [ {
                        displayName: "AxesTitleTest",
                        type: d.describeDataType(1)
                    } ],
                    objects: {
                        categoryAxis: {
                            showAxisTitle: !0
                        },
                        valueAxis: {
                            showAxisTitle: !0
                        }
                    }
                };
                g.onDataChanged({
                    dataViews: [ {
                        metadata: h,
                        categorical: {
                            categories: [ {
                                source: h.columns[0],
                                values: [ 500, 2e3, 5e3, 1e4 ],
                                identity: e
                            } ],
                            values: f.createValueColumns([ {
                                source: h.columns[0],
                                values: [ 20, 1e3 ],
                                subtotal: 1020
                            } ])
                        }
                    } ]
                }), expect($(".xAxisLabel").first().text()).toBe("AxesTitleTest"), expect($(".yAxisLabel").first().text()).toBe("AxesTitleTest"), 
                h.objects = {
                    categoryAxis: {
                        showAxisTitle: !1
                    },
                    valueAxis: {
                        showAxisTitle: !1
                    }
                }, g.onDataChanged({
                    dataViews: [ {
                        metadata: h
                    } ]
                }), expect($(".xAxisLabel").length).toBe(0), expect($(".yAxisLabel").length).toBe(0);
            });
        }), describe("capabilities", function() {
            it("should include dataViewMappings", function() {
                expect(powerbi.visuals.waterfallChartCapabilities.dataViewMappings).toBeDefined();
            }), it("should include dataRoles", function() {
                expect(powerbi.visuals.waterfallChartCapabilities.dataRoles).toBeDefined();
            }), it("should not support highlight", function() {
                expect(powerbi.visuals.waterfallChartCapabilities.supportsHighlight).toBeUndefined();
            }), it("FormatString property should match calculated", function() {
                expect(powerbi.data.DataViewObjectDescriptors.findFormatString(powerbi.visuals.waterfallChartCapabilities.objects)).toEqual(c.formatStringProp);
            }), it("should register capabilities", function() {
                var a = powerbi.visuals.visualPluginFactory.create(), b = a.getPlugin("waterfallChart");
                expect(b).toBeDefined(), expect(b.capabilities).toBe(powerbi.visuals.waterfallChartCapabilities);
            });
        }), describe("data converter", function() {
            var a = m.colorPalette.dataColors, b = [ 100, -200, 250 ], d = [ 0, 100, -100, 0 ], e = [ 2010, 2011, 2012 ], g = 150, h = -100, i = 150, j = {
                categories: [ {
                    source: o,
                    values: e
                } ],
                values: f.createValueColumns([ {
                    source: p,
                    values: b
                } ])
            }, k = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), l = {
                increaseFill: {
                    solid: {
                        color: "#FF0000"
                    }
                },
                decreaseFill: {
                    solid: {
                        color: "#00FF00"
                    }
                },
                totalFill: {
                    solid: {
                        color: "#0000FF"
                    }
                }
            }, q = c.converter(j, a, n.host, k, l, null, null), r = q.series[0].data;
            it("legend should have 3 items", function() {
                expect(q.legend.dataPoints.length).toBe(3);
            }), it("has correct positions", function() {
                expect(r.map(function(a) {
                    return a.position;
                })).toEqual(d), expect(q.positionMin).toBe(h), expect(q.positionMax).toBe(g);
            }), it("has correct values", function() {
                expect(r.map(function(a) {
                    return a.value;
                })).toEqual(b.concat(i)), expect(q.positionMin).toBe(h), expect(q.positionMax).toBe(g);
            }), it("gain/loss colors match legend", function() {
                var a = q.legend.dataPoints[0], b = q.legend.dataPoints[1];
                expect(r[0].color).toBe(a.color), expect(r[1].color).toBe(b.color);
            }), it("should have no highlights", function() {
                expect(r.some(function(a) {
                    return a.highlight;
                })).toBe(!1), expect(q.hasHighlights).toBe(!1);
            }), it("should have no selected data points", function() {
                expect(r.some(function(a) {
                    return a.selected;
                })).toBe(!1);
            }), it("tooltip data", function() {
                expect(r[0].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "2010"
                }, {
                    displayName: "sales",
                    value: "$100"
                } ]), expect(r[1].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "2011"
                }, {
                    displayName: "sales",
                    value: "-$200"
                } ]), expect(r[2].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "2012"
                }, {
                    displayName: "sales",
                    value: "$250"
                } ]), expect(r[3].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "Waterfall_TotalLabel"
                }, {
                    displayName: "sales",
                    value: "$150"
                } ]);
            });
        }), describe("setData", function() {
            var a, b = [ 100, -200, 250 ], d = [ 2010, 2011, 2012 ], e = {
                categories: [ {
                    source: o,
                    values: d
                } ],
                values: f.createValueColumns([ {
                    source: p,
                    values: b
                } ])
            }, g = q.getSentimentColors(), h = g[2].value, i = g[0].value, j = {
                columns: [ o, p ]
            }, k = {
                categorical: e,
                metadata: j
            };
            beforeEach(function() {
                a = new c({
                    isScrollable: !1
                }), a.init(n);
            }), it("sentiment colors should be set from data object", function() {
                k.metadata.objects = {
                    sentimentColors: {
                        increseFill: {
                            solid: {
                                color: h
                            }
                        },
                        decreaseFill: {
                            solid: {
                                color: i
                            }
                        }
                    }
                }, a.setData([ k ]);
                var b = a.calculateLegend();
                expect(b.dataPoints[0].color).toBe(h), expect(b.dataPoints[1].color).toBe(i);
            }), it("should clear data if passed empty array", function() {
                a.setData([ k ]), expect(a.calculateLegend().dataPoints.length).not.toBe(0), a.setData([]), 
                expect(a.calculateLegend().dataPoints.length).toBe(0);
            });
        }), describe("Scrollbar", function() {
            var b, d, e = [ 5e5, 495e3, 49e4, 48e4, 5e5, 5e5, 5e5, 5e5, 5e5 ], i = [ "a", "b", "c", "d", "e", "f", "g", "h", "i" ], j = {
                categories: [ {
                    source: o,
                    values: i
                } ],
                values: f.createValueColumns([ {
                    source: p,
                    values: e
                } ])
            }, m = {
                columns: [ o, p ]
            }, r = {
                categorical: j,
                metadata: m
            };
            beforeEach(function() {
                d = a.helpers.testDom("150", "50"), b = powerbi.visuals.visualPluginFactory.createMinerva({
                    heatMap: !1,
                    scrollableVisuals: !0
                }).getPlugin("waterfallChart").create(), b.init({
                    element: d,
                    host: a.mocks.createVisualHostServices(),
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: d.height(),
                        width: d.width()
                    },
                    svg: l,
                    cartesianHost: k
                }), b.onDataChanged({
                    dataViews: [ r ]
                });
            }), it("DOM Validation", function(a) {
                setTimeout(function() {
                    expect($(".waterfallChart")).toBeInDOM(), expect($("rect.extent").length).toBe(1);
                    var b = $(".waterfallChart .axisGraphicsContext .x.axis .tick").last().attr("transform"), c = g.parseTranslateTransform(b).x, e = g.parseTranslateTransform($(".brush").first().attr("transform"));
                    expect(c).toBeLessThan(d.width()), expect(e.x).toBe("19"), expect(e.y).toBe("116"), 
                    expect(parseInt($(".brush .extent")[0].attributes.getNamedItem("width").value, 0)).toBeGreaterThan(1), 
                    expect($(".brush .extent")[0].attributes.getNamedItem("x").value).toBe("0"), a();
                }, h);
            }), it("Tooltip Data Validation", function() {
                var a = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings(), b = "#FF0000", d = "#00FF00", e = "#0000FF", f = {
                    increaseFill: {
                        solid: {
                            color: b
                        }
                    },
                    decreaseFill: {
                        solid: {
                            color: d
                        }
                    },
                    totalFill: {
                        solid: {
                            color: e
                        }
                    }
                }, g = c.converter(j, q, n.host, a, f, null, null), h = g.series[0].data;
                expect(h[0].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "a"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[1].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "b"
                }, {
                    displayName: "sales",
                    value: "$495000"
                } ]), expect(h[2].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "c"
                }, {
                    displayName: "sales",
                    value: "$490000"
                } ]), expect(h[3].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "d"
                }, {
                    displayName: "sales",
                    value: "$480000"
                } ]), expect(h[4].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "e"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[5].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "f"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[6].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "g"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[7].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "h"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[8].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "i"
                }, {
                    displayName: "sales",
                    value: "$500000"
                } ]), expect(h[9].tooltipInfo).toEqual([ {
                    displayName: "year",
                    value: "Waterfall_TotalLabel"
                }, {
                    displayName: "sales",
                    value: "$4465000"
                } ]);
            });
        }), describe("data labels validation", function() {
            var b, c, d = [ 100, -200, 250 ], e = [ 2010, 2011, 2012 ], g = [ a.mocks.dataViewScopeIdentity("2010"), a.mocks.dataViewScopeIdentity("2011"), a.mocks.dataViewScopeIdentity("2012") ], i = {
                categories: [ {
                    source: o,
                    values: e,
                    identity: g
                } ],
                values: f.createValueColumns([ {
                    source: p,
                    values: d
                } ])
            }, j = {
                columns: [ o, p ]
            }, k = {
                categorical: i,
                metadata: j
            };
            beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService()), c = a.helpers.testDom("500", "500"), 
                b = powerbi.visuals.visualPluginFactory.create().getPlugin("waterfallChart").create(), 
                b.init({
                    element: c,
                    host: a.mocks.createVisualHostServices(),
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: c.height(),
                        width: c.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("verify labels in DOM", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !0,
                        labelPrecision: 0
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    expect($(".dataLabelsSVG text")).toBeInDOM(), expect($(".dataLabelsSVG text").first().text()).toBe(d[0].toString()), 
                    expect($(".dataLabelsSVG text").last().text()).toBe(d[1].toString()), a();
                }, h);
            }), it("labels should be visible", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !0
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    expect($(".dataLabelsSVG text").length).toBe(2), a();
                }, h);
            }), it("labels should be hidden", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !1
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    expect($(".dataLabelsSVG text").length).toBe(0), a();
                }, h);
            }), it("labels should support display units with no precision", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !0,
                        labelDisplayUnits: 1e3,
                        labelPrecision: 0
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    expect($(".dataLabelsSVG text").first().text()).toBe("0K"), a();
                }, h);
            }), it("labels should support display units with precision", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !0,
                        labelDisplayUnits: 1e3,
                        labelPrecision: 1
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    expect($(".dataLabelsSVG text").first().text()).toBe("0.1K"), a();
                }, h);
            }), it("label color should be overriden", function(a) {
                var c = "rgb(80,90,100)";
                k.metadata.objects = {
                    labels: {
                        show: !0,
                        color: {
                            solid: {
                                color: c
                            }
                        }
                    }
                };
                var d = {
                    dataViews: [ k ]
                };
                b.onDataChanged(d), setTimeout(function() {
                    var b = $(".dataLabelsSVG text").css("fill").replace(/\ /g, "");
                    b = "#" === b[0] ? jsCommon.color.rgbString(jsCommon.color.parseRgb(b)) : b, expect(b).toBe(c), 
                    a();
                }, h);
            }), it("label color should be same as rect color", function(a) {
                k.metadata.objects = {
                    labels: {
                        show: !0
                    }
                };
                var c = {
                    dataViews: [ k ]
                };
                b.onDataChanged(c), setTimeout(function() {
                    for (var b = $("rect.column"), c = $(".mainGraphicsContext text"), d = 0, e = c.length; e > d; d++) {
                        var f = $(b[d]).css("fill").replace(/\ /g, ""), g = $(c[d]).css("fill").replace(/\ /g, "");
                        expect(f).toBe(g);
                    }
                    a();
                }, h);
            }), it("labels color should be same as sentiments color", function(a) {
                var c = "rgb(1,2,3)", d = "rgb(4,5,6)", e = "rgb(7,8,9)";
                k.metadata.objects = {
                    labels: {
                        show: !0
                    },
                    sentimentColors: {
                        totalFill: {
                            solid: {
                                color: c
                            }
                        },
                        increaseFill: {
                            solid: {
                                color: d
                            }
                        },
                        decreaseFill: {
                            solid: {
                                color: e
                            }
                        }
                    }
                };
                var f = {
                    dataViews: [ k ]
                };
                b.onDataChanged(f), setTimeout(function() {
                    var b = $(".dataLabelsSVG text"), c = b.first().css("fill").replace(/\ /g, ""), f = $(b[1]).css("fill").replace(/\ /g, ""), g = "#" === c[0] ? jsCommon.color.rgbString(jsCommon.color.parseRgb(c)) : c, h = "#" === f[0] ? jsCommon.color.rgbString(jsCommon.color.parseRgb(f)) : f;
                    expect(g).toBe(d), expect(h).toBe(e), a();
                }, h);
            });
        }), describe("Enumerate Objects", function() {
            function b() {
                var a = d.enumerateObjectInstances({
                    objectName: "sentimentColors"
                });
                expect(a.length).toBe(1), expect(a[0].properties.increaseFill).toBeDefined(), expect(a[0].properties.decreaseFill).toBeDefined(), 
                expect(a[0].properties.totalFill).toBeDefined();
            }
            function c() {
                var a = d.enumerateObjectInstances({
                    objectName: "labels"
                }), b = powerbi.visuals.dataLabelUtils.getDefaultLabelSettings();
                expect(a.length).toBe(1), expect(a[0].properties).toBeDefined();
                var c = a[0].properties;
                expect(c.color).toBe(b.labelColor), expect(c.show).toBe(!1), expect(c.labelPrecision).toBe(b.precision), 
                expect(c.labelDisplayUnits).toBe(b.displayUnits);
            }
            var d, e, g = [ 100, -200, 250 ], h = [ 2010, 2011, 2012 ], i = {
                categories: [ {
                    source: o,
                    values: h
                } ],
                values: f.createValueColumns([ {
                    source: p,
                    values: g
                } ])
            }, j = {
                columns: [ o, p ]
            }, k = {
                categorical: i,
                metadata: j
            };
            beforeEach(function() {
                a.mocks.setLocale(powerbi.common.createLocalizationService()), e = a.helpers.testDom("500", "500"), 
                d = powerbi.visuals.visualPluginFactory.create().getPlugin("waterfallChart").create(), 
                d.init({
                    element: e,
                    host: a.mocks.createVisualHostServices(),
                    style: powerbi.visuals.visualStyles.create(),
                    viewport: {
                        height: e.height(),
                        width: e.width()
                    },
                    animation: {
                        transitionImmediate: !0
                    }
                });
            }), it("enumerateObjectInstances should include labels with empty data", function() {
                d.onDataChanged({
                    dataViews: []
                }), c();
            }), it("enumerateObjectInstances should include labels", function() {
                var a = {
                    dataViews: [ k ]
                };
                d.onDataChanged(a), c();
            }), it("enumerateObjectInstances should include sentiment colors with empty data", function() {
                d.onDataChanged({
                    dataViews: []
                }), b();
            }), it("enumerateObjectInstances should include sentiment colors", function() {
                var a = {
                    dataViews: [ k ]
                };
                d.onDataChanged(a), b();
            });
        });
    });
}(powerbitests || (powerbitests = {}));
//# sourceMappingURL=PowerBIVisualsTests.min.js.map